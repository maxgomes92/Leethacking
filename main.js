!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=798)}([,function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.__esModule=!0;e.VERSION="4.8.9",e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(t,e,n){"use strict";e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.TextureMatrix=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var r=n(2);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var i=n(9);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var o=n(18);Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return z(o).default}});var s=n(163);Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return z(s).default}});var a=n(399);Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return z(a).default}});var u=n(81);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return z(u).default}});var l=n(400);Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return z(l).default}});var c=n(401);Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return z(c).default}});var h=n(164);Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return z(h).default}});var f=n(168);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return z(f).default}});var p=n(641);Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return z(p).default}});var d=n(110);Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return z(d).default}});var y=n(643);Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return z(y).default}});var _=n(645);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return z(_).default}});var v=n(412);Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return z(v).default}});var m=n(411);Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return z(m).default}});var g=n(613);Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return z(g).default}});var b=n(402);Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return z(b).default}});var x=n(616);Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return z(x).default}});var w=n(614);Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return z(w).default}});var T=n(646);Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return z(T).default}});var S=n(39);Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return z(S).default}});var E=n(414);Object.defineProperty(e,"TextureMatrix",{enumerable:!0,get:function(){return z(E).default}});var O=n(58);Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return z(O).default}});var A=n(169);Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return z(A).default}});var M=n(413);Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return z(M).default}});var P=n(416);Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return z(P).default}});var C=n(415);Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return z(C).default}});var k=n(406);Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return z(k).default}});var R=n(80);Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return z(R).default}});var I=n(83);Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return z(I).default}});var D=n(108);Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return z(D).default}});var L=n(109);Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return z(L).default}});var F=n(410);Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return z(F).default}});var N=n(409);Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return z(N).default}});var j=n(408);Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return z(j).default}});var B=n(397);Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return z(B).default}});var U=n(398);Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return U.autoDetectRenderer}});var q=W(n(4)),V=W(n(170)),G=z(n(8)),X=z(n(82)),H=z(n(107));function W(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function z(t){return t&&t.__esModule?t:{default:t}}e.settings=G.default,e.utils=q,e.ticker=V,e.CanvasRenderer=X.default,e.WebGLRenderer=H.default},function(t,e,n){"use strict";e.__esModule=!0,e.premultiplyBlendMode=e.BaseTextureCache=e.TextureCache=e.earcut=e.mixins=e.pluginTarget=e.EventEmitter=e.removeItems=e.isMobile=void 0,e.uid=function(){return++d},e.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},e.hex2string=function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},e.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},e.getResolutionOfUrl=function(t,e){var n=i.default.RETINA_PREFIX.exec(t);if(n)return parseFloat(n[1]);return void 0!==e?e:1},e.decomposeDataUri=function(t){var e=r.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]};return},e.getUrlFileExtension=function(t){var e=r.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase();return},e.getSvgSize=function(t){var e=r.SVG_SIZE.exec(t),n={};e&&(n[e[1]]=Math.round(parseFloat(e[3])),n[e[5]]=Math.round(parseFloat(e[7])));return n},e.skipHello=function(){y=!0},e.sayHello=function(t){if(y)return;if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+r.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+r.VERSION+" - "+t+" - http://www.pixijs.com/");y=!0},e.isWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!n||!n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,r}catch(t){return!1}},e.sign=function(t){return 0===t?0:t<0?-1:1},e.destroyTextureCache=function(){var t=void 0;for(t in _)_[t].destroy();for(t in v)v[t].destroy()},e.clearTextureCache=function(){var t=void 0;for(t in _)delete _[t];for(t in v)delete v[t]},e.correctBlendMode=function(t,e){return m[e?1:0][t]},e.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,r=t>>8&255,i=255&t;return(255*e<<24)+((n=n*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(i=i*e+.5|0)},e.premultiplyRgba=function(t,e,n,r){n=n||new Float32Array(4),r||void 0===r?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]);return n[3]=e,n},e.premultiplyTintToRgba=function(t,e,n,r){(n=n||new Float32Array(4))[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,(r||void 0===r)&&(n[0]*=e,n[1]*=e,n[2]*=e);return n[3]=e,n};var r=n(2),i=p(n(8)),o=p(n(48)),s=p(n(653)),a=f(n(652)),u=f(n(159)),l=p(n(706)),c=p(n(650)),h=p(n(147));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}var d=0,y=!1;e.isMobile=u,e.removeItems=l.default,e.EventEmitter=o.default,e.pluginTarget=s.default,e.mixins=a,e.earcut=h.default;var _=e.TextureCache=Object.create(null),v=e.BaseTextureCache=Object.create(null);var m=e.premultiplyBlendMode=(0,c.default)()},,function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},,function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(651)),i=o(n(649));function o(t){return t&&t.__esModule?t:{default:t}}e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,r.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,i.default)(),MESH_CANVAS_PADDING:0}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(166);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return f(r).default}});var i=n(404);Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return f(i).default}});var o=n(165);Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return f(o).default}});var s=n(403);Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return f(s).default}});var a=n(623);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return f(a).default}});var u=n(624);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return f(u).default}});var l=n(625);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return f(l).default}});var c=n(167);Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return f(c).default}});var h=n(626);function f(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return f(h).default}})},,function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},,function(t,e,n){var r=n(61)("wks"),i=n(43),o=n(11).Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},function(t,e,n){"use strict";e.a=function t(e,n,o,s){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}a.floor=function(t){return e(t=new Date(+t)),t};a.ceil=function(t){return e(t=new Date(t-1)),n(t,1),e(t),t};a.round=function(t){var e=a(t),n=a.ceil(t);return t-e<n-t?e:n};a.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t};a.range=function(t,r,i){var o,s=[];if(t=a.ceil(t),i=null==i?1:Math.floor(i),!(t<r&&i>0))return s;do{s.push(o=new Date(+t)),n(t,i),e(t)}while(o<t&&t<r);return s};a.filter=function(r){return t(function(t){if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},function(t,e){if(t>=t)if(e<0)for(;++e<=0;)for(;n(t,-1),!r(t););else for(;--e>=0;)for(;n(t,1),!r(t););})};o&&(a.count=function(t,n){return r.setTime(+t),i.setTime(+n),e(r),e(i),Math.floor(o(r,i))},a.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?a.filter(s?function(e){return s(e)%t==0}:function(e){return a.count(0,e)%t==0}):a:null});return a};var r=new Date,i=new Date},function(t,e,n){t.exports=!n(25)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){(function(t){var r,i=n(156),o=n(77),s=n(119),a=n(118),u=n(186);t&&t.ArrayBuffer&&(r=n(126));var l="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),c="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),h=l||c;e.protocol=3;var f=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=i(f),d={type:"error",data:"parser error"},y=n(128);function _(t,e,n){for(var r=new Array(t.length),i=a(t.length,n),o=function(t,n,i){e(n,function(e,n){r[t]=n,i(e,r)})},s=0;s<t.length;s++)o(s,t[s],i)}e.encodePacket=function(n,r,i,o){"function"==typeof r&&(o=r,r=!1),"function"==typeof i&&(o=i,i=null);var s=void 0===n.data?void 0:n.data.buffer||n.data;if(t.ArrayBuffer&&s instanceof ArrayBuffer)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var i=t.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=f[t.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return r(s.buffer)}(n,r,o);if(y&&s instanceof t.Blob)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(h)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var i=new FileReader;return i.onload=function(){t.data=i.result,e.encodePacket(t,n,!0,r)},i.readAsArrayBuffer(t.data)}(t,n,r);var i=new Uint8Array(1);i[0]=f[t.type];var o=new y([i.buffer,t.data]);return r(o)}(n,r,o);if(s&&s.base64)return function(t,n){var r="b"+e.packets[t.type]+t.data.data;return n(r)}(n,o);var a=f[n.type];return void 0!==n.data&&(a+=i?u.encode(String(n.data)):String(n.data)),o(""+a)},e.encodeBase64Packet=function(n,r){var i,o="b"+e.packets[n.type];if(y&&n.data instanceof t.Blob){var s=new FileReader;return s.onload=function(){var t=s.result.split(",")[1];r(o+t)},s.readAsDataURL(n.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(t){for(var a=new Uint8Array(n.data),u=new Array(a.length),l=0;l<a.length;l++)u[l]=a[l];i=String.fromCharCode.apply(null,u)}return o+=t.btoa(i),r(o)},e.decodePacket=function(t,n,r){if(void 0===t)return d;if("string"==typeof t){if("b"==t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r&&!1===(t=function(t){try{t=u.decode(t)}catch(t){return!1}return t}(t)))return d;var i=t.charAt(0);return Number(i)==i&&p[i]?t.length>1?{type:p[i],data:t.substring(1)}:{type:p[i]}:d}i=new Uint8Array(t)[0];var o=s(t,1);return y&&"blob"===n&&(o=new y([o])),{type:p[i],data:o}},e.decodeBase64Packet=function(t,e){var n=p[t.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:t.substr(1)}};var i=r.decode(t.substr(1));return"blob"===e&&y&&(i=new y([i])),{type:n,data:i}},e.encodePayload=function(t,n,r){"function"==typeof n&&(r=n,n=null);var i=o(t);if(n&&i)return y&&!h?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r);if(!t.length)return r("0:");_(t,function(t,r){e.encodePacket(t,!!i&&n,!0,function(t){r(null,function(t){return t.length+":"+t}(t))})},function(t,e){return r(e.join(""))})},e.decodePayload=function(t,n,r){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,r);var i;if("function"==typeof n&&(r=n,n=null),""==t)return r(d,0,1);for(var o,s,a="",u=0,l=t.length;u<l;u++){var c=t.charAt(u);if(":"!=c)a+=c;else{if(""==a||a!=(o=Number(a)))return r(d,0,1);if(a!=(s=t.substr(u+1,o)).length)return r(d,0,1);if(s.length){if(i=e.decodePacket(s,n,!0),d.type==i.type&&d.data==i.data)return r(d,0,1);if(!1===r(i,u+o,l))return}u+=o,a=""}}return""!=a?r(d,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){if(!t.length)return n(new ArrayBuffer(0));_(t,function(t,n){e.encodePacket(t,!0,!0,function(t){return n(null,t)})},function(t,e){var r=e.reduce(function(t,e){var n;return t+(n="string"==typeof e?e.length:e.byteLength).toString().length+n+2},0),i=new Uint8Array(r),o=0;return e.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);n=r.buffer}i[o++]=e?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(r=new Uint8Array(n),s=0;s<r.length;s++)i[o++]=r[s]}),n(i.buffer)})},e.encodePayloadAsBlob=function(t,n){_(t,function(t,n){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);t=r.buffer,e[0]=0}var o=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(o.length+1);for(i=0;i<o.length;i++)s[i]=parseInt(o[i]);if(s[o.length]=255,y){var a=new y([e.buffer,s.buffer,t]);n(null,a)}})},function(t,e){return n(new y(e))})},e.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var i=t,o=[],a=!1;i.byteLength>0;){for(var u=new Uint8Array(i),l=0===u[0],c="",h=1;255!=u[h];h++){if(c.length>310){a=!0;break}c+=u[h]}if(a)return r(d,0,1);i=s(i,2+c.length),c=parseInt(c);var f=s(i,0,c);if(l)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(t){var p=new Uint8Array(f);f="";for(h=0;h<p.length;h++)f+=String.fromCharCode(p[h])}o.push(f),i=s(i,c)}var y=o.length;o.forEach(function(t,i){r(e.decodePacket(t,n,!0),i,y)})}}).call(e,n(1))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r={createContext:n(609),setVertexAttribArrays:n(388),GLBuffer:n(605),GLFramebuffer:n(606),GLShader:n(607),GLTexture:n(387),VertexArrayObject:n(608),shader:n(610)};void 0!==t&&t.exports&&(t.exports=r),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=r)},function(t,e,n){var r=n(11),i=n(6),o=n(59),s=n(26),a=n(20),u=function(t,e,n){var l,c,h,f=t&u.F,p=t&u.G,d=t&u.S,y=t&u.P,_=t&u.B,v=t&u.W,m=p?i:i[e]||(i[e]={}),g=m.prototype,b=p?r:d?r[e]:(r[e]||{}).prototype;for(l in p&&(n=e),n)(c=!f&&b&&void 0!==b[l])&&a(m,l)||(h=c?b[l]:n[l],m[l]=p&&"function"!=typeof b[l]?n[l]:_&&c?o(h,r):v&&b[l]==h?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):y&&"function"==typeof h?o(Function.call,h):h,y&&((m.virtual||(m.virtual={}))[l]=h,t&u.R&&g&&!g[l]&&s(g,l,h)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},,function(t,e,n){var r=n(17);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(22),i=n(97),o=n(70),s=Object.defineProperty;e.f=n(15)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";(function(t){e.__esModule=!0,e.loader=e.prepare=e.particles=e.mesh=e.loaders=e.interaction=e.filters=e.extras=e.extract=e.accessibility=void 0;var r=n(690);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var i=n(3);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var o=function(t){return t&&t.__esModule?t:{default:t}}(n(655)),s=y(n(612)),a=y(n(657)),u=y(n(418)),l=y(n(671)),c=y(n(674)),h=y(n(675)),f=y(n(680)),p=y(n(683)),d=y(n(693));function y(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}i.utils.mixins.performMixins();var _=h.shared||null;e.accessibility=s,e.extract=a,e.extras=u,e.filters=l,e.interaction=c,e.loaders=h,e.mesh=f,e.particles=p,e.prepare=d,e.loader=_,"function"==typeof o.default&&(0,o.default)(e),t.PIXI=e}).call(e,n(1))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(23),i=n(53);t.exports=n(15)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,i="/"===s.charAt(0))}return e=n(r(e.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var o=e.isAbsolute(t),s="/"===i(t,-1);return(t=n(r(t.split("/"),function(t){return!!t}),!o).join("/"))||o||(t="."),t&&s&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}var l=[];for(u=a;u<i.length;u++)l.push("..");return(l=l.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,s=t.length-1;s>=0;--s){var a=t.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=s+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var i="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(e,n(28))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var t=a(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,function(t,e,n){var r=n(94),i=n(52);t.exports=function(t){return r(i(t))}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";var r=n(225);n.d(e,"c",function(){return r.a});var i=n(56);n.d(e,"g",function(){return i.a});var o=n(226);n.d(e,"e",function(){return o.a});n(518),n(519),n(227),n(228),n(520),n(530),n(531),n(232),n(522),n(523),n(524),n(525),n(229),n(230),n(526);var s=n(136);n.d(e,"f",function(){return s.a});var a=n(231);n.d(e,"h",function(){return a.a});n(527),n(528),n(529);var u=n(233);n.d(e,"a",function(){return u.a}),n.d(e,"b",function(){return u.b}),n.d(e,"d",function(){return u.c});n(234),n(235),n(532)},function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"d",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"a",function(){return a});var r=1e3,i=6e4,o=36e5,s=864e5,a=6048e5},function(t,e,n){(function(r){function i(){try{return e.storage.debug}catch(t){}if(void 0!==r&&"env"in r)return r.env.DEBUG}(e=t.exports=n(154)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var r="color: "+this.color,i=0,o=0;return(t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1)))[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++i)}),t.splice(o,0,r),t},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=i,e.useColors=function(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(i())}).call(e,n(28))},function(t,e,n){(function(r){function i(){try{return e.storage.debug}catch(t){}if(void 0!==r&&"env"in r)return r.env.DEBUG}(e=t.exports=n(177)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var r="color: "+this.color,i=0,o=0;return(t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1)))[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++i)}),t.splice(o,0,r),t},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=i,e.useColors=function(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(i())}).call(e,n(28))},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(138);n.d(e,"f",function(){return r.h}),n.d(e,"e",function(){return r.g}),n.d(e,"d",function(){return r.f});var i=n(540);n.d(e,"c",function(){return i.b}),n.d(e,"b",function(){return i.a});var o=n(539);n.d(e,"a",function(){return o.a})},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=h(n(58)),o=h(n(416)),s=h(n(415)),a=h(n(48)),u=n(9),l=n(4),c=h(n(8));function h(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(n,r,i,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));if(l.noFrame=!1,r||(l.noFrame=!0,r=new u.Rectangle(0,0,1,1)),n instanceof e&&(n=n.baseTexture),l.baseTexture=n,l._frame=r,l.trim=o,l.valid=!1,l.requiresUpdate=!1,l._uvs=null,l.orig=i||r,l._rotate=Number(s||0),!0===s)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return n.hasLoaded?(l.noFrame&&(r=new u.Rectangle(0,0,n.width,n.height),n.on("update",l.onBaseTextureUpdated,l)),l.frame=r):n.once("loaded",l.onBaseTextureLoaded,l),l.defaultAnchor=a?new u.Point(a.x,a.y):new u.Point(0,0),l._updateID=0,l.transform=null,l.textureCacheIds=[],l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new u.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(l.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new s.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,n,r,o){var s=l.TextureCache[t];return s||(s=new e(i.default.fromImage(t,n,r,o)),e.addToCache(s,t)),s},e.fromFrame=function(t){var e=l.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(i.default.fromCanvas(t,n,r))},e.fromVideo=function(t,n,r,i){return"string"==typeof t?e.fromVideoUrl(t,n,r,i):new e(o.default.fromVideo(t,n,i))},e.fromVideoUrl=function(t,n,r,i){return new e(o.default.fromUrl(t,n,r,i))},e.from=function(t){if("string"==typeof t){var n=l.TextureCache[t];return n||(null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t))}return t instanceof HTMLImageElement?new e(i.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,c.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof i.default?new e(t):t},e.fromLoader=function(t,n,r){var o=new i.default(t,void 0,(0,l.getResolutionOfUrl)(n)),s=new e(o);return o.imageUrl=n,r||(r=n),i.default.addToCache(s.baseTexture,r),e.addToCache(s,r),r!==n&&(i.default.addToCache(s.baseTexture,n),e.addToCache(s,n)),s},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),l.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),l.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=l.TextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete l.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)l.TextureCache[t.textureCacheIds[r]]===t&&delete l.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},r(e,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,r=t.width,i=t.height,o=e+r>this.baseTexture.width,s=n+i>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",u="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,l="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+a+" "+l)}this.valid=r&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(a.default);function p(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}e.default=f,f.EMPTY=new f(new i.default),p(f.EMPTY),p(f.EMPTY.baseTexture),f.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new f(new i.default(t))}(),p(f.WHITE),p(f.WHITE.baseTexture)},function(t,e,n){var r=n(100),i=n(60);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(52);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=!0},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=Array.prototype,i=r.map,o=r.slice},function(t,e,n){var r=n(16),i=n(47);function o(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=o,i(o.prototype),o.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(t){var e=r.decodePacket(t,this.socket.binaryType);this.onPacket(e)},o.prototype.onPacket=function(t){this.emit("packet",t)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,n){(function(e){var r=n(158);t.exports=function(t){var n=t.xdomain,i=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||r))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!i&&o)return new XDomainRequest}catch(t){}if(!n)try{return new(e[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(e,n(1))},function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t,e){var n=i?i+t:t,r=this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,a=new Array(s);o<s;o++)a[o]=r[o].fn;return a},a.prototype.emit=function(t,e,n,r,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var u,l,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,o),!0;case 6:return c.fn.call(c.context,e,n,r,o,s),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},a.prototype.on=function(t,e,n){var r=new s(e,n||this),o=i?i+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},a.prototype.once=function(t,e,n){var r=new s(e,n||this,!0),o=i?i+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},a.prototype.removeListener=function(t,e,n,r){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return 0==--this._eventsCount?this._events=new o:delete this._events[s],this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||(0==--this._eventsCount?this._events=new o:delete this._events[s]);else{for(var u=0,l=[],c=a.length;u<c;u++)(a[u].fn!==e||r&&!a[u].once||n&&a[u].context!==n)&&l.push(a[u]);l.length?this._events[s]=1===l.length?l[0]:l:0==--this._eventsCount?this._events=new o:delete this._events[s]}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new o:delete this._events[e])):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=i,a.EventEmitter=a,t.exports=a},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},function(t,e,n){var r=n(180)("socket.io-parser"),i=n(160),o=n(129),s=n(179),a=n(90);function u(){}function l(t){var n="",o=!1;return n+=t.type,e.BINARY_EVENT!=t.type&&e.BINARY_ACK!=t.type||(n+=t.attachments,n+="-"),t.nsp&&"/"!=t.nsp&&(o=!0,n+=t.nsp),null!=t.id&&(o&&(n+=",",o=!1),n+=t.id),null!=t.data&&(o&&(n+=","),n+=i.stringify(t.data)),r("encoded %j as %s",t,n),n}function c(){this.reconstructor=null}function h(t){this.reconPack=t,this.buffers=[]}function f(t){return{type:e.ERROR,data:"parser error"}}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=u,e.Decoder=c,u.prototype.encode=function(t,n){(r("encoding packet %j",t),e.BINARY_EVENT==t.type||e.BINARY_ACK==t.type)?function(t,e){s.removeBlobs(t,function(t){var n=s.deconstructPacket(t),r=l(n.packet),i=n.buffers;i.unshift(r),e(i)})}(t,n):n([l(t)])},o(c.prototype),c.prototype.add=function(t){var n;if("string"==typeof t)n=function(t){var n={},o=0;if(n.type=Number(t.charAt(0)),null==e.types[n.type])return f();if(e.BINARY_EVENT==n.type||e.BINARY_ACK==n.type){for(var s="";"-"!=t.charAt(++o)&&(s+=t.charAt(o),o!=t.length););if(s!=Number(s)||"-"!=t.charAt(o))throw new Error("Illegal attachments");n.attachments=Number(s)}if("/"==t.charAt(o+1))for(n.nsp="";++o;){var a=t.charAt(o);if(","==a)break;if(n.nsp+=a,o==t.length)break}else n.nsp="/";var u=t.charAt(o+1);if(""!==u&&Number(u)==u){for(n.id="";++o;){var a=t.charAt(o);if(null==a||Number(a)!=a){--o;break}if(n.id+=t.charAt(o),o==t.length)break}n.id=Number(n.id)}t.charAt(++o)&&(n=function(t,e){try{t.data=i.parse(e)}catch(t){return f()}return t}(n,t.substr(o)));return r("decoded %s as %j",t,n),n}(t),e.BINARY_EVENT==n.type||e.BINARY_ACK==n.type?(this.reconstructor=new h(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!a(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},c.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=s.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(61)("keys"),i=n(43);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){"use strict";e.a=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},function(t,e,n){"use strict";e.b=function(t,e){var o=e-t;return o?i(t,o>180||o<-180?o-360*Math.round(o/360):o):n.i(r.a)(isNaN(t)?e:t)},e.c=function(t){return 1==(t=+t)?o:function(e,i){return i-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,i,t):n.i(r.a)(isNaN(e)?i:e)}},e.a=o;var r=n(243);function i(t,e){return function(n){return t+n*e}}function o(t,e){var o=e-t;return o?i(t,o):n.i(r.a)(isNaN(t)?e:t)}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4),i=u(n(8)),o=u(n(48)),s=u(n(417)),a=u(n(127));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(n,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return a.uid=(0,r.uid)(),a.touched=0,a.resolution=s||i.default.RESOLUTION,a.width=100,a.height=100,a.realWidth=100,a.realHeight=100,a.scaleMode=void 0!==o?o:i.default.SCALE_MODE,a.hasLoaded=!1,a.isLoading=!1,a.source=null,a.origSource=null,a.imageType=null,a.sourceScale=1,a.premultipliedAlpha=!0,a.imageUrl=null,a.isPowerOfTwo=!1,a.mipmap=i.default.MIPMAP_TEXTURES,a.wrapMode=i.default.WRAP_MODE,a._glTextures={},a._enabled=0,a._virtalBoundId=-1,a._destroyed=!1,a.textureCacheIds=[],n&&a.loadSource(n),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=a.default.isPow2(this.realWidth)&&a.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var n=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),n&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var r=this;if(t.onload=function(){r._updateImageType(),t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),"svg"!==r.imageType?r.emit("loaded",r):r._loadSvgSource())},t.onerror=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,r.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var n=t.subType.split("+")[0];if(!(e=(0,r.getUrlFileExtension)("."+n)))throw new Error("Invalid image type in data URI.")}else(e=(0,r.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,r.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var n=(0,r.getSvgSize)(t),i=n.width,o=n.height;if(!i||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(i*this.sourceScale),this.realHeight=Math.round(o*this.sourceScale),this._updateDimensions();var s=document.createElement("canvas");s.width=this.realWidth,s.height=this.realHeight,s._pixiId="canvas_"+(0,r.uid)(),s.getContext("2d").drawImage(this.source,0,0,i,o,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=s,e.addToCache(this,s._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete r.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,n,i,o){var a=r.BaseTextureCache[t];if(!a){var u=new Image;void 0===n&&0!==t.indexOf("data:")?u.crossOrigin=(0,s.default)(t):n&&(u.crossOrigin="string"==typeof n?n:"anonymous"),(a=new e(u,i)).imageUrl=t,o&&(a.sourceScale=o),a.resolution=(0,r.getResolutionOfUrl)(t),u.src=t,e.addToCache(a,t)}return a},e.fromCanvas=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=i+"_"+(0,r.uid)());var o=r.BaseTextureCache[t._pixiId];return o||(o=new e(t,n),e.addToCache(o,t._pixiId)),o},e.from=function(t,n,i){if("string"==typeof t)return e.fromImage(t,void 0,n,i);if(t instanceof HTMLImageElement){var o=t.src,s=r.BaseTextureCache[o];return s||((s=new e(t,n)).imageUrl=o,i&&(s.sourceScale=i),s.resolution=(0,r.getResolutionOfUrl)(o),e.addToCache(s,o)),s}return t instanceof HTMLCanvasElement?e.fromCanvas(t,n):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),r.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),r.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=r.BaseTextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete r.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete r.BaseTextureCache[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},e}(o.default);e.default=l},function(t,e,n){var r=n(93);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(6),i=n(11),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(42)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.startPrint=function(){var t=n(459);if(i[0])return;i[0]=window.setInterval(function(){r.play(t)},50)},e.stopPrint=function(){window.clearInterval(i[0]),i[0]=null},e.playLogBleep=function(){r.play(n(453))},e.playCoinBleep=function(){r.play(n(448))},e.playButtonBleep=function(){r.play(n(447))},e.playFailBleep=function(){r.play(n(451))},e.playConnectedBleep=function(){r.play(n(449))},e.playScanBleep=function(){r.play(n(454))},e.playSweepIn=function(){r.play(n(457))},e.playSweepOut=function(){r.play(n(458))},e.playTrash=function(){r.play(n(460))},e.playHelpDing=function(){r.play(n(452))},e.playDoorSound=function(){r.play(n(450))},e.playSocketConnectionSound=function(t){t?r.play(n(456)):r.play(n(455))},e.toggleMute=u;var r=n(715),i=new Array(8);var o="sfx.isMuted",s=document.querySelector("#volume-checkbox"),a="true"===window.localStorage.getItem(o);function u(t){s?(a="boolean"==typeof t?t:!s.checked,r.setVolume(a?0:1),window.localStorage.setItem(o,a.toString())):r.setVolume(0)}s&&(s.checked=!a,s.addEventListener("change",function(){return u()},!1)),u(a)},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n(92));var i={fontFamily:"Courier",fontSize:"18px",fill:"white"},o=new(n(24).Text)("O",i);e.style=i,e.linkStyle=(0,r.default)({},i,{fill:"#77FF77"}),e.linkHoverStyle=(0,r.default)({},i,{fill:"#000000"}),e.statusBarStyle=(0,r.default)({},i,{fill:"#000000"}),e.linkRectColor=[16729167,.95],e.getCharacterWidth=function(){return.98*o.width},e.getCharacterHeight=function(){return o.height}},function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},function(t,e,n){var r=n(17),i=n(11).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(23).f,i=n(20),o=n(13)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(17);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";e.a=function(t){return null===t?NaN:+t}},function(t,e,n){"use strict";var r=n(143);n.d(e,"b",function(){return r.a});n(241),n(141),n(242),n(244),n(552),n(555);var i=n(104);n.d(e,"a",function(){return i.a});n(142),n(245);var o=n(559);n.d(e,"c",function(){return o.a});n(247),n(561),n(563),n(246),n(554),n(556),n(553);var s=n(551);n.d(e,"d",function(){return s.a});n(557),n(558)},function(t,e,n){"use strict";e.a=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}},function(t,e,n){"use strict";e.b=a,e.a=function t(){var e=n.i(o.a)(o.b,i.a);e.copy=function(){return n.i(o.c)(e,t())};return a(e)};var r=n(33),i=n(72),o=n(105),s=n(579);function a(t){var e=t.domain;return t.ticks=function(t){var i=e();return n.i(r.a)(i[0],i[i.length-1],null==t?10:t)},t.tickFormat=function(t,r){return n.i(s.a)(e(),t,r)},t.nice=function(i){null==i&&(i=10);var o,s=e(),a=0,u=s.length-1,l=s[a],c=s[u];return c<l&&(o=l,l=c,c=o,o=a,a=u,u=o),(o=n.i(r.b)(l,c,i))>0?(l=Math.floor(l/o)*o,c=Math.ceil(c/o)*o,o=n.i(r.b)(l,c,i)):o<0&&(l=Math.ceil(l*o)/o,c=Math.floor(c*o)/o,o=n.i(r.b)(l,c,i)),o>0?(s[a]=Math.floor(l/o)*o,s[u]=Math.ceil(c/o)*o,e(s)):o<0&&(s[a]=Math.ceil(l*o)/o,s[u]=Math.floor(c*o)/o,e(s)),t},t}},function(t,e,n){(function(t){var r=n(46),i=n(152),o=n(151),s=n(153);e.polling=function(e){var n=!1,s=!1,a=!1!==e.jsonp;if(t.location){var u="https:"===location.protocol,l=location.port;l||(l=u?443:80),n=e.hostname!==location.hostname||l!==e.port,s=e.secure!==u}if(e.xdomain=n,e.xscheme=s,"open"in new r(e)&&!e.forceJSONP)return new i(e);if(!a)throw new Error("JSONP disabled");return new o(e)},e.websocket=s}).call(e,n(1))},function(t,e,n){var r=n(45),i=n(49),o=n(16),s=n(32),a=n(91),u=n(35)("engine.io-client:polling");t.exports=c;var l=null!=new(n(46))({xdomain:!1}).responseType;function c(t){var e=t&&t.forceBase64;l&&!e||(this.supportsBinary=!1),r.call(this,t)}s(c,r),c.prototype.name="polling",c.prototype.doOpen=function(){this.poll()},c.prototype.pause=function(t){var e=this;function n(){u("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(u("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){u("pre-pause polling complete"),--r||n()})),this.writable||(u("we are currently writing - waiting to pause"),r++,this.once("drain",function(){u("pre-pause writing complete"),--r||n()}))}else n()},c.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},c.prototype.onData=function(t){var e=this;u("polling got data %s",t);o.decodePayload(t,this.socket.binaryType,function(t,n,r){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},c.prototype.doClose=function(){var t=this;function e(){u("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},c.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};o.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},c.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=a()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},function(t,e,n){(function(e){var r=n(157);t.exports=function(t){return function t(n){if(!n)return!1;if(e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(n)||e.ArrayBuffer&&n instanceof ArrayBuffer||e.Blob&&n instanceof Blob||e.File&&n instanceof File)return!0;if(r(n)){for(var i=0;i<n.length;i++)if(t(n[i]))return!0}else if(n&&"object"==typeof n)for(var o in n.toJSON&&"function"==typeof n.toJSON&&(n=n.toJSON()),n)if(Object.prototype.hasOwnProperty.call(n,o)&&t(n[o]))return!0;return!1}(t)}}).call(e,n(1))},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,i=t.indexOf("["),o=t.indexOf("]");-1!=i&&-1!=o&&(t=t.substring(0,i)+t.substring(i,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=n.exec(t||""),a={},u=14;u--;)a[r[u]]=s[u]||"";return-1!=i&&-1!=o&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(18),i=function(t){return t&&t.__esModule?t:{default:t}}(n(8));function o(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var n=t.slice(0);return n.unshift("precision "+e+" float;"),n}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}var s=function(t){function e(n,r,s,a,u){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o(r,u||i.default.PRECISION_VERTEX),o(s,u||i.default.PRECISION_FRAGMENT),void 0,a))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.GLShader);e.default=s},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(4);var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n.children=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var n=0;n<e;n++)this.addChild(arguments[n]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);(0,i.removeItems)(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var n=0;n<e;n++)this.removeChild(arguments[n]);else{var r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,(0,i.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,i.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],n=t,r="number"==typeof e?e:this.children.length,i=r-n,o=void 0;if(i>0&&i<=r){o=this.children.splice(n,i);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}n&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var i=0,o=this.children.length;i<o;i++)this.children[i].renderWebGL(t);t.flush(),n&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var n="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(e)},r(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(n(399)).default);e.default=o,o.prototype.containerUpdateTransform=o.prototype.updateTransform},function(t,e,n){"use strict";e.__esModule=!0;var r=c(n(405)),i=c(n(627)),o=c(n(406)),s=c(n(628)),a=n(4),u=n(2),l=c(n(8));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"Canvas",n,r,o));return a.type=u.RENDERER_TYPE.CANVAS,a.rootContext=a.view.getContext("2d",{alpha:a.transparent}),a.context=a.rootContext,a.refresh=!0,a.maskManager=new i.default(a),a.smoothProperty="imageSmoothingEnabled",a.rootContext.imageSmoothingEnabled||(a.rootContext.webkitImageSmoothingEnabled?a.smoothProperty="webkitImageSmoothingEnabled":a.rootContext.mozImageSmoothingEnabled?a.smoothProperty="mozImageSmoothingEnabled":a.rootContext.oImageSmoothingEnabled?a.smoothProperty="oImageSmoothingEnabled":a.rootContext.msImageSmoothingEnabled&&(a.smoothProperty="msImageSmoothingEnabled")),a.initPlugins(),a.blendModes=(0,s.default)(),a._activeBlendMode=null,a.renderingToScreen=!1,a.resize(a.options.width,a.options.height),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(t,e,n,r,i){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var s=this.resolution;e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new o.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(e||(this._lastObjectRendered=t),!i){var l=t.parent,c=this._tempDisplayObjectParent.transform.worldTransform;r?(r.copy(c),this._tempDisplayObjectParent.transform._worldID=-1):c.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=l}a.save(),a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,this._activeBlendMode=u.BLEND_MODES.NORMAL,a.globalCompositeOperation=this.blendModes[u.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==n?n:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var h=this.context;this.context=a,t.renderCanvas(this),this.context=h,a.restore(),this.resolution=s,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.smoothProperty&&(this.rootContext[this.smoothProperty]=l.default.SCALE_MODE===u.SCALE_MODES.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e}(r.default);e.default=h,a.pluginTarget.mixin(h)},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),o=function(t){return t&&t.__esModule?t:{default:t}}(n(39));var s=new i.Point,a=new i.Polygon,u=function(t){function e(n,r,s,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return l._texture=n||o.default.EMPTY,l.uvs=s||new Float32Array([0,0,1,0,1,1,0,1]),l.vertices=r||new Float32Array([0,0,100,0,100,100,0,100]),l.indices=a||new Uint16Array([0,1,3,2]),l.dirty=0,l.indexDirty=0,l.vertexDirty=0,l.autoUpdate=!0,l.blendMode=i.BLEND_MODES.NORMAL,l.canvasPadding=i.settings.MESH_CANVAS_PADDING,l.drawMode=u||e.DRAW_MODES.TRIANGLE_MESH,l.shader=null,l.tintRgb=new Float32Array([1,1,1]),l._glDatas={},l._uvTransform=new i.TextureMatrix(l._texture),l.uploadUvTransform=!1,l.pluginName="mesh",l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,s);for(var n=this.vertices,r=a.points,i=this.indices,o=this.indices.length,u=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,l=0;l+2<o;l+=u){var c=2*i[l],h=2*i[l+1],f=2*i[l+2];if(r[0]=n[c],r[1]=n[c+1],r[2]=n[h],r[3]=n[h+1],r[4]=n[f],r[5]=n[f+1],a.contains(s.x,s.y))return!0}return!1},e.prototype.destroy=function(e){for(var n in this._glDatas){var r=this._glDatas[n];r.destroy?r.destroy():(r.vertexBuffer&&(r.vertexBuffer.destroy(),r.vertexBuffer=null),r.indexBuffer&&(r.indexBuffer.destroy(),r.indexBuffer=null),r.uvBuffer&&(r.uvBuffer.destroy(),r.uvBuffer=null),r.vao&&(r.vao.destroy(),r.vao=null))}this._glDatas=null,t.prototype.destroy.call(this,e)},r(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return i.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=i.utils.hex2rgb(t,this.tintRgb)}}]),e}(i.Container);e.default=u,u.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(t,e,n){"use strict";var r=n(707).Loader,i=n(175).Resource,o=n(433),s=n(434);r.Resource=i,r.async=o,r.encodeBinary=s,r.base64=s,t.exports=r,t.exports.Loader=r,t.exports.default=r},function(t,e,n){var r=n(148),i=n(88),o=n(89),s=n(50),a=n(87),u=n(66),l=n(36)("socket.io-client:manager"),c=n(78),h=n(125),f=Object.prototype.hasOwnProperty;function p(t,e){if(!(this instanceof p))return new p(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=p,p.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},p.prototype.updateSocketIds=function(){for(var t in this.nsps)f.call(this.nsps,t)&&(this.nsps[t].id=this.engine.id)},o(p.prototype),p.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},p.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},p.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(t,e){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=a(n,"open",function(){i.onopen(),t&&t()}),s=a(n,"error",function(e){if(l("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else i.maybeReconnectOnOpen()});if(!1!==this._timeout){var u=this._timeout;l("connect attempt will timeout after %d",u);var c=setTimeout(function(){l("connect attempt timed out after %d",u),o.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",u)},u);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},p.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(a(t,"data",u(this,"ondata"))),this.subs.push(a(t,"ping",u(this,"onping"))),this.subs.push(a(t,"pong",u(this,"onpong"))),this.subs.push(a(t,"error",u(this,"onerror"))),this.subs.push(a(t,"close",u(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",u(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(t){this.decoder.add(t)},p.prototype.ondecoded=function(t){this.emit("packet",t)},p.prototype.onerror=function(t){l("error",t),this.emitAll("error",t)},p.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new i(this,t,e),this.nsps[t]=n;var r=this;n.on("connecting",o),n.on("connect",function(){n.id=r.engine.id}),this.autoConnect&&o()}function o(){~c(r.connecting,n)||r.connecting.push(n)}return n},p.prototype.destroy=function(t){var e=c(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},p.prototype.packet=function(t){l("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()}))},p.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},p.prototype.cleanup=function(){l("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(t){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();l("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(l("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(l("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(l("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},p.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e){t.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},function(t,e,n){var r=n(50),i=n(89),o=n(184),s=n(87),a=n(66),u=n(36)("socket.io-client:socket"),l=n(77);t.exports=f;var c={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=i.prototype.emit;function f(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}i(f.prototype),f.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[s(t,"open",a(this,"onopen")),s(t,"packet",a(this,"onpacket")),s(t,"close",a(this,"onclose"))]}},f.prototype.open=f.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},f.prototype.send=function(){var t=o(arguments);return t.unshift("message"),this.emit.apply(this,t),this},f.prototype.emit=function(t){if(c.hasOwnProperty(t))return h.apply(this,arguments),this;var e=o(arguments),n=r.EVENT;l(e)&&(n=r.BINARY_EVENT);var i={type:n,data:e,options:{}};return i.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),delete this.flags,this},f.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},f.prototype.onopen=function(){u("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:r.CONNECT,query:this.query}):this.packet({type:r.CONNECT}))},f.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},f.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(t);break;case r.ACK:case r.BINARY_ACK:this.onack(t);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",t.data)}},f.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?h.apply(this,e):this.receiveBuffer.push(e)},f.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var i=o(arguments);u("sending ack %j",i);var s=l(i)?r.BINARY_ACK:r.ACK;e.packet({type:s,id:t,data:i})}}},f.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},f.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},f.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)h.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},f.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},f.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},f.prototype.close=f.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},f.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){(function(e){t.exports=function(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}}).call(e,n(1))},function(t,e,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,s={},a=0,u=0;function l(t){var e="";do{e=i[t%o]+e,t=Math.floor(t/o)}while(t>0);return e}function c(){var t=l(+new Date);return t!==r?(a=0,r=t):t+"."+l(a++)}for(;u<o;u++)s[i[u]]=u;c.encode=l,c.decode=function(t){var e=0;for(u=0;u<t.length;u++)e=e*o+s[t.charAt(u)];return e},t.exports=c},function(t,e,n){t.exports={default:n(206),__esModule:!0}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(51);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function r(t){var e=arguments.length,n=void 0,r=void 0;for(n=1;n<e;n++)for(r in arguments[n])t[r]=arguments[n][r];return t}function i(t,e){var n=arguments.length,i=void 0;for(t.prototype=
/*! Kefir.js v3.8.6
 *  https://github.com/kefirjs/kefir
 */
function(t){var e=function(){};return e.prototype=t,new e}(e.prototype),t.prototype.constructor=t,i=2;i<n;i++)r(t.prototype,arguments[i]);return t}n.d(e,"dissableDeprecationWarnings",function(){return zn}),n.d(e,"Kefir",function(){return $n}),n.d(e,"Observable",function(){return g}),n.d(e,"Stream",function(){return b}),n.d(e,"Property",function(){return x}),n.d(e,"never",function(){return T}),n.d(e,"later",function(){return O}),n.d(e,"interval",function(){return M}),n.d(e,"sequentially",function(){return C}),n.d(e,"fromPoll",function(){return R}),n.d(e,"withInterval",function(){return L}),n.d(e,"fromCallback",function(){return j}),n.d(e,"fromNodeCallback",function(){return B}),n.d(e,"fromEvents",function(){return V}),n.d(e,"stream",function(){return N}),n.d(e,"constant",function(){return X}),n.d(e,"constantError",function(){return W}),n.d(e,"fromPromise",function(){return tt}),n.d(e,"fromESObservable",function(){return at}),n.d(e,"combine",function(){return ft}),n.d(e,"zip",function(){return tn}),n.d(e,"merge",function(){return on}),n.d(e,"concat",function(){return un}),n.d(e,"Pool",function(){return ln}),n.d(e,"pool",function(){return Hn}),n.d(e,"repeat",function(){return an}),n.d(e,"staticLand",function(){return dt});var o=["<nothing>"],s="end",a="value",u="error",l="any";function c(t,e){var n=void 0,r=void 0,i=void 0,o=void 0;if(0===t.length)return e;if(0===e.length)return t;for(o=0,n=new Array(t.length+e.length),r=t.length,i=0;i<r;i++,o++)n[o]=t[i];for(r=e.length,i=0;i<r;i++,o++)n[o]=e[i];return n}function h(t,e){var n=t.length,r=void 0;for(r=0;r<n;r++)if(t[r]===e)return r;return-1}function f(t,e){var n=t.length,r=void 0;for(r=0;r<n;r++)if(e(t[r]))return r;return-1}function p(t){var e=t.length,n=new Array(e),r=void 0;for(r=0;r<e;r++)n[r]=t[r];return n}function d(t,e){var n=t.length,r=void 0,i=void 0,o=void 0;if(e>=0&&e<n){if(1===n)return[];for(r=new Array(n-1),i=0,o=0;i<n;i++)i!==e&&(r[o]=t[i],o++);return r}return t}function y(t,e){var n=t.length,r=new Array(n),i=void 0;for(i=0;i<n;i++)r[i]=e(t[i]);return r}function _(t,e){return-1!==h(t,e)}function v(t,e,n){t===l?e(n):t===n.type&&(t===a||t===u?e(n.value):e())}function m(){this._items=[],this._spies=[],this._inLoop=0,this._removedItems=null}function g(){this._dispatcher=new m,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null,this._spyHandlers=null}function b(){g.call(this)}function x(){g.call(this),this._currentEvent=null}r(m.prototype,{add:function(t,e){return this._items=c(this._items,[{type:t,fn:e}]),this._items.length},remove:function(t,e){var n=f(this._items,function(n){return n.type===t&&n.fn===e});return 0!==this._inLoop&&-1!==n&&(null===this._removedItems&&(this._removedItems=[]),this._removedItems.push(this._items[n])),this._items=d(this._items,n),this._items.length},addSpy:function(t){return this._spies=c(this._spies,[t]),this._spies.length},removeSpy:function(t){return this._spies=d(this._spies,this._spies.indexOf(t)),this._spies.length},dispatch:function(t){this._inLoop++;for(var e=0,n=this._spies;null!==this._spies&&e<n.length;e++)n[e](t);for(var r=0,i=this._items;r<i.length&&null!==this._items;r++)null!==this._removedItems&&_(this._removedItems,i[r])||v(i[r].type,i[r].fn,t);this._inLoop--,0===this._inLoop&&(this._removedItems=null)},cleanup:function(){this._items=null,this._spies=null}}),r(g.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(t){this._active!==t&&(this._active=t,t?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(t,e){switch(t){case a:return this._emitValue(e);case u:return this._emitError(e);case s:return this._emitEnd()}},_emitValue:function(t){this._alive&&this._dispatcher.dispatch({type:a,value:t})},_emitError:function(t){this._alive&&this._dispatcher.dispatch({type:u,value:t})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:s}),this._clear())},_on:function(t,e){return this._alive?(this._dispatcher.add(t,e),this._setActive(!0)):v(t,e,{type:s}),this},_off:function(t,e){this._alive&&(0===this._dispatcher.remove(t,e)&&this._setActive(!1));return this},onValue:function(t){return this._on(a,t)},onError:function(t){return this._on(u,t)},onEnd:function(t){return this._on(s,t)},onAny:function(t){return this._on(l,t)},offValue:function(t){return this._off(a,t)},offError:function(t){return this._off(u,t)},offEnd:function(t){return this._off(s,t)},offAny:function(t){return this._off(l,t)},observe:function(t,e,n){var r=this,i=!1,o=t&&"function"!=typeof t?t:{value:t,error:e,end:n},l=function(t){t.type===s&&(i=!0),t.type===a&&o.value?o.value(t.value):t.type===u&&o.error?o.error(t.value):t.type===s&&o.end&&o.end(t.value)};return this.onAny(l),{unsubscribe:function(){i||(r.offAny(l),i=!0)},get closed(){return i}}},_ofSameType:function(t,e){return t.prototype.getType()===this.getType()?t:e},setName:function(t,e){return this._name=e?t._name+"."+e:t,this},log:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),e=void 0,n=function(n){var r="<"+n.type+(e?":current":"")+">";n.type===s?console.log(t,r):console.log(t,r,n.value)};return this._alive&&(this._logHandlers||(this._logHandlers=[]),this._logHandlers.push({name:t,handler:n})),e=!0,this.onAny(n),e=!1,this},offLog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._logHandlers){var e=f(this._logHandlers,function(e){return e.name===t});-1!==e&&(this.offAny(this._logHandlers[e].handler),this._logHandlers.splice(e,1))}return this},spy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),e=function(e){var n="<"+e.type+">";e.type===s?console.log(t,n):console.log(t,n,e.value)};return this._alive&&(this._spyHandlers||(this._spyHandlers=[]),this._spyHandlers.push({name:t,handler:e}),this._dispatcher.addSpy(e)),this},offSpy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._spyHandlers){var e=f(this._spyHandlers,function(e){return e.name===t});-1!==e&&(this._dispatcher.removeSpy(this._spyHandlers[e].handler),this._spyHandlers.splice(e,1))}return this}}),g.prototype.toString=function(){return"["+this._name+"]"},i(b,g,{_name:"stream",getType:function(){return"stream"}}),i(x,g,{_name:"property",_emitValue:function(t){this._alive&&(this._currentEvent={type:a,value:t},this._activating||this._dispatcher.dispatch({type:a,value:t}))},_emitError:function(t){this._alive&&(this._currentEvent={type:u,value:t},this._activating||this._dispatcher.dispatch({type:u,value:t}))},_emitEnd:function(){this._alive&&(this._alive=!1,this._activating||this._dispatcher.dispatch({type:s}),this._clear())},_on:function(t,e){return this._alive&&(this._dispatcher.add(t,e),this._setActive(!0)),null!==this._currentEvent&&v(t,e,this._currentEvent),this._alive||v(t,e,{type:s}),this},getType:function(){return"property"}});var w=new b;function T(){return w}function S(t){function e(t,e){var n=this;b.call(this),this._wait=t,this._intervalId=null,this._$onTick=function(){return n._onTick()},this._init(e)}return i(e,b,{_init:function(){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){b.prototype._clear.call(this),this._$onTick=null,this._free()}},t),e}w._emitEnd(),w._name="never";var E=S({_name:"later",_init:function(t){var e=t.x;this._x=e},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}});function O(t,e){return new E(t,{x:e})}var A=S({_name:"interval",_init:function(t){var e=t.x;this._x=e},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}});function M(t,e){return new A(t,{x:e})}var P=S({_name:"sequentially",_init:function(t){var e=t.xs;this._xs=p(e)},_free:function(){this._xs=null},_onTick:function(){1===this._xs.length?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}});function C(t,e){return 0===e.length?T():new P(t,{xs:e})}var k=S({_name:"fromPoll",_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_onTick:function(){var t=this._fn;this._emitValue(t())}});function R(t,e){return new k(t,{fn:e})}function I(t){function e(e){return t._emitValue(e),t._active}function n(e){return t._emit(e.type,e.value),t._active}return{value:e,error:function(e){return t._emitError(e),t._active},end:function(){return t._emitEnd(),t._active},event:n,emit:e,emitEvent:n}}var D=S({_name:"withInterval",_init:function(t){var e=t.fn;this._fn=e,this._emitter=I(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){(0,this._fn)(this._emitter)}});function L(t,e){return new D(t,{fn:e})}function F(t){b.call(this),this._fn=t,this._unsubscribe=null}function N(t){return new F(t)}function j(t){var e=!1;return N(function(n){e||(t(function(t){n.emit(t),n.end()}),e=!0)}).setName("fromCallback")}function B(t){var e=!1;return N(function(n){e||(t(function(t,e){t?n.error(t):n.emit(e),n.end()}),e=!0)}).setName("fromNodeCallback")}function U(t,e){switch(e){case 0:return function(){return t()};case 1:return function(e){return t(e[0])};case 2:return function(e){return t(e[0],e[1])};case 3:return function(e){return t(e[0],e[1],e[2])};case 4:return function(e){return t(e[0],e[1],e[2],e[3])};default:return function(e){return t.apply(null,e)}}}i(F,b,{_name:"stream",_onActivation:function(){var t=(0,this._fn)(I(this));this._unsubscribe="function"==typeof t?t:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){null!==this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){b.prototype._clear.call(this),this._fn=null}});var q=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];function V(t,e,n){for(var r=void 0,i=void 0,o=0;o<q.length;o++)if("function"==typeof t[q[o][0]]&&"function"==typeof t[q[o][1]]){r=q[o][0],i=q[o][1];break}if(void 0===r)throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return function(t,e,n){return N(function(r){var i=n?function(){r.emit(function(t,e,n){var r=n?n.length:0;if(null==e)switch(r){case 0:return t();case 1:return t(n[0]);case 2:return t(n[0],n[1]);case 3:return t(n[0],n[1],n[2]);case 4:return t(n[0],n[1],n[2],n[3]);default:return t.apply(null,n)}else switch(r){case 0:return t.call(e);default:return t.apply(e,n)}}(n,this,arguments))}:function(t){r.emit(t)};return t(i),function(){return e(i)}}).setName("fromSubUnsub")}(function(n){return t[r](e,n)},function(n){return t[i](e,n)},n).setName("fromEvents")}function G(t){this._currentEvent={type:"value",value:t,current:!0}}function X(t){return new G(t)}function H(t){this._currentEvent={type:"error",value:t,current:!0}}function W(t){return new H(t)}function z(t,e){return function(n,r){var i=this;t.call(this),this._source=n,this._name=n._name+"."+e,this._init(r),this._$handleAny=function(t){return i._handleAny(t)}}}function Y(t){return{_init:function(){},_free:function(){},_handleValue:function(t){this._emitValue(t)},_handleError:function(t){this._emitError(t)},_handleEnd:function(){this._emitEnd()},_handleAny:function(t){switch(t.type){case a:return this._handleValue(t.value);case u:return this._handleError(t.value);case s:return this._handleEnd()}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){t.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function $(t,e){var n=z(b,t);return i(n,b,Y(b),e),n}function Z(t,e){var n=z(x,t);return i(n,x,Y(x),e),n}i(G,x,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),i(H,x,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null});var K=Z("toProperty",{_init:function(t){var e=t.fn;this._getInitialCurrent=e},_onActivation:function(){if(null!==this._getInitialCurrent){var t=this._getInitialCurrent;this._emitValue(t())}this._source.onAny(this._$handleAny)}});function Q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==e&&"function"!=typeof e)throw new Error("You should call toProperty() with a function or no arguments.");return new K(t,{fn:e})}var J=$("changes",{_handleValue:function(t){this._activating||this._emitValue(t)},_handleError:function(t){this._activating||this._emitError(t)}});function tt(t){var e=!1;return Q(N(function(n){if(!e){var r=t.then(function(t){n.emit(t),n.end()},function(t){n.error(t),n.end()});r&&"function"==typeof r.done&&r.done(),e=!0}}),null).setName("fromPromise")}function et(){if("function"==typeof Promise)return Promise;throw new Error("There isn't default Promise, use shim or parameter")}var nt="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function rt(t,e){return t(e={exports:{}},e.exports),e.exports}var it=rt(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,n=t.Symbol;"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable";return e}}),ot=rt(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(t){return t&&t.__esModule?t:{default:t}}(it);n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==nt?nt:t;var i=(0,r.default)(n);e.default=i}),st=ot.default?ot.default:ot;function at(t){var e=t[st]?t[st]():t;return N(function(t){var n=e.subscribe({error:function(e){t.error(e),t.end()},next:function(e){t.emit(e)},complete:function(){t.end()}});return n.unsubscribe?function(){n.unsubscribe()}:n}).setName("fromESObservable")}function ut(t){this._observable=t.takeErrors(1)}function lt(){return new ut(this)}function ct(t,e,n){for(var r in t)t.hasOwnProperty(r)&&(e.push(r),n.push(t[r]))}function ht(t,e,n){var r=this;b.call(this),this._activeCount=t.length,this._sources=c(t,e),this._combinator=n,this._aliveCount=0,this._latestValues=new Array(this._sources.length),this._latestErrors=new Array(this._sources.length),function(t,e){var n=t.length,r=void 0;for(r=0;r<n;r++)t[r]=e}(this._latestValues,o),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var i=function(t){r._$handlers.push(function(e){return r._handleAny(t,e)})},s=0;s<this._sources.length;s++)i(s)}function ft(t,e,n){return"function"==typeof e&&(n=e,e=void 0),Array.isArray(t)?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2];if(!Array.isArray(e))throw new Error("Combine can only combine active and passive collections of the same type.");return n=n?U(n,t.length+e.length):function(t){return t},0===t.length?T():new ht(t,e,n)}(t,e,n):function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];if("object"!=typeof e||Array.isArray(e))throw new Error("Combine can only combine active and passive collections of the same type.");var r=[],i=[],o=[];return ct(t,r,i),ct(e,r,o),0===i.length?T():new ht(i,o,function(t){for(var e={},i=t.length-1;0<=i;i--)e[r[i]]=t[i];return n?n(e):e})}(t,e,n)}r(ut.prototype,{subscribe:function(t,e,n){var r=this,i="function"==typeof t?{next:t,error:e,complete:n}:t,o=function(t){t.type===s&&(l=!0),t.type===a&&i.next?i.next(t.value):t.type===u&&i.error?i.error(t.value):t.type===s&&i.complete&&i.complete(t.value)};this._observable.onAny(o);var l=!1;return{unsubscribe:function(){l=!0,r._observable.offAny(o)},get closed(){return l}}}}),ut.prototype[st]=function(){return this},i(ht,b,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var t=this._activeCount;t<this._sources.length;t++)this._sources[t].onAny(this._$handlers[t]);for(var e=0;e<this._activeCount;e++)this._sources[e].onAny(this._$handlers[e]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var t=this._sources.length,e=void 0;for(e=0;e<t;e++)this._sources[e].offAny(this._$handlers[e])},_emitIfFull:function(){for(var t=!0,e=!1,n=this._latestValues.length,r=new Array(n),i=new Array(n),s=0;s<n;s++)r[s]=this._latestValues[s],i[s]=this._latestErrors[s],r[s]===o&&(t=!1),void 0!==i[s]&&(e=!0);if(t){var a=this._combinator;this._emitValue(a(r))}e&&this._emitError(function(t){for(var e=void 0,n=0;n<t.length;n++)void 0!==t[n]&&(void 0===e||e.index<t[n].index)&&(e=t[n]);return e.error}(i))},_handleAny:function(t,e){e.type===a||e.type===u?(e.type===a&&(this._latestValues[t]=e.value,this._latestErrors[t]=void 0),e.type===u&&(this._latestValues[t]=o,this._latestErrors[t]={index:this._latestErrorIndex++,error:e.value}),t<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):t<this._activeCount&&(this._aliveCount--,0===this._aliveCount&&(this._activating?this._endAfterActivation=!0:this._emitEnd()))},_clear:function(){b.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}});var pt={empty:function(){return T()},concat:function(t,e){return t.merge(e)},of:function(t){return X(t)},map:function(t,e){return e.map(t)},bimap:function(t,e,n){return n.mapErrors(t).map(e)},ap:function(t,e){return ft([t,e],function(t,e){return t(e)})},chain:function(t,e){return e.flatMap(t)}},dt=Object.freeze({Observable:pt}),yt={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleValue:function(t){var e=this._fn;this._emitValue(e(t))}},_t=$("map",yt),vt=Z("map",yt),mt=function(t){return t};function gt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mt;return new(t._ofSameType(_t,vt))(t,{fn:e})}var bt={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleValue:function(t){(0,this._fn)(t)&&this._emitValue(t)}},xt=$("filter",bt),wt=Z("filter",bt),Tt=function(t){return t};var St={_init:function(t){var e=t.n;this._n=e,e<=0&&this._emitEnd()},_handleValue:function(t){0!==this._n&&(this._n--,this._emitValue(t),0===this._n&&this._emitEnd())}},Et=$("take",St),Ot=Z("take",St);var At={_init:function(t){var e=t.n;this._n=e,e<=0&&this._emitEnd()},_handleError:function(t){0!==this._n&&(this._n--,this._emitError(t),0===this._n&&this._emitEnd())}},Mt=$("takeErrors",At),Pt=Z("takeErrors",At);var Ct={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleValue:function(t){(0,this._fn)(t)?this._emitValue(t):this._emitEnd()}},kt=$("takeWhile",Ct),Rt=Z("takeWhile",Ct),It=function(t){return t};var Dt={_init:function(){this._lastValue=o},_free:function(){this._lastValue=null},_handleValue:function(t){this._lastValue=t},_handleEnd:function(){this._lastValue!==o&&this._emitValue(this._lastValue),this._emitEnd()}},Lt=$("last",Dt),Ft=Z("last",Dt);var Nt={_init:function(t){var e=t.n;this._n=Math.max(0,e)},_handleValue:function(t){0===this._n?this._emitValue(t):this._n--}},jt=$("skip",Nt),Bt=Z("skip",Nt);var Ut={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleValue:function(t){var e=this._fn;null===this._fn||e(t)||(this._fn=null),null===this._fn&&this._emitValue(t)}},qt=$("skipWhile",Ut),Vt=Z("skipWhile",Ut),Gt=function(t){return t};var Xt={_init:function(t){var e=t.fn;this._fn=e,this._prev=o},_free:function(){this._fn=null,this._prev=null},_handleValue:function(t){var e=this._fn;this._prev!==o&&e(this._prev,t)||(this._prev=t,this._emitValue(t))}},Ht=$("skipDuplicates",Xt),Wt=Z("skipDuplicates",Xt),zt=function(t,e){return t===e};function Yt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zt;return new(t._ofSameType(Ht,Wt))(t,{fn:e})}var $t={_init:function(t){var e=t.fn,n=t.seed;this._fn=e,this._prev=n},_free:function(){this._prev=null,this._fn=null},_handleValue:function(t){if(this._prev!==o){var e=this._fn;this._emitValue(e(this._prev,t))}this._prev=t}},Zt=$("diff",$t),Kt=Z("diff",$t);function Qt(t,e){return[t,e]}var Jt=Z("scan",{_init:function(t){var e=t.fn,n=t.seed;this._fn=e,this._seed=n,n!==o&&this._emitValue(n)},_free:function(){this._fn=null,this._seed=null},_handleValue:function(t){var e=this._fn;null===this._currentEvent||this._currentEvent.type===u?this._emitValue(this._seed===o?t:e(this._seed,t)):this._emitValue(e(this._currentEvent.value,t))}});var te=$("flatten",{_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleValue:function(t){for(var e=(0,this._fn)(t),n=0;n<e.length;n++)this._emitValue(e[n])}}),ee=function(t){return t};var ne={},re={_init:function(t){var e=this,n=t.wait;this._wait=Math.max(0,n),this._buff=[],this._$shiftBuff=function(){var t=e._buff.shift();t===ne?e._emitEnd():e._emitValue(t)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._buff.push(t),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(ne),setTimeout(this._$shiftBuff,this._wait))}},ie=$("delay",re),oe=Z("delay",re);var se=Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},ae={_init:function(t){var e=this,n=t.wait,r=t.leading,i=t.trailing;this._wait=Math.max(0,n),this._leading=r,this._trailing=i,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return e._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(t){if(this._activating)this._emitValue(t);else{var e=se();0!==this._lastCallTime||this._leading||(this._lastCallTime=e);var n=this._wait-(e-this._lastCallTime);n<=0?(this._cancelTrailing(),this._lastCallTime=e,this._emitValue(t)):this._trailing&&(this._cancelTrailing(),this._trailingValue=t,this._timeoutId=setTimeout(this._$trailingCall,n))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?se():0,this._endLater&&this._emitEnd()}},ue=$("throttle",ae),le=Z("throttle",ae);var ce={_init:function(t){var e=this,n=t.wait,r=t.immediate;this._wait=Math.max(0,n),this._immediate=r,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return e._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._lastAttempt=se(),this._immediate&&!this._timeoutId&&this._emitValue(t),this._timeoutId||(this._timeoutId=setTimeout(this._$later,this._wait)),this._immediate||(this._laterValue=t))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var t=se()-this._lastAttempt;t<this._wait&&t>=0?this._timeoutId=setTimeout(this._$later,this._wait-t):(this._timeoutId=null,this._immediate||(this._emitValue(this._laterValue),this._laterValue=null),this._endLater&&this._emitEnd())}},he=$("debounce",ce),fe=Z("debounce",ce);var pe={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleError:function(t){var e=this._fn;this._emitError(e(t))}},de=$("mapErrors",pe),ye=Z("mapErrors",pe),_e=function(t){return t};var ve={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleError:function(t){(0,this._fn)(t)&&this._emitError(t)}},me=$("filterErrors",ve),ge=Z("filterErrors",ve),be=function(t){return t};var xe={_handleValue:function(){}},we=$("ignoreValues",xe),Te=Z("ignoreValues",xe);var Se={_handleError:function(){}},Ee=$("ignoreErrors",Se),Oe=Z("ignoreErrors",Se);var Ae={_handleEnd:function(){}},Me=$("ignoreEnd",Ae),Pe=Z("ignoreEnd",Ae);var Ce={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleEnd:function(){var t=this._fn;this._emitValue(t()),this._emitEnd()}},ke=$("beforeEnd",Ce),Re=Z("beforeEnd",Ce);var Ie={_init:function(t){var e=t.min,n=t.max;this._max=n,this._min=e,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(t){this._buff=function(t,e,n){var r=Math.min(n,t.length+1),i=t.length-r+1,o=new Array(r),s=void 0;for(s=i;s<r;s++)o[s-i]=t[s];return o[r-1]=e,o}(this._buff,t,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},De=$("slidingWindow",Ie),Le=Z("slidingWindow",Ie);var Fe={_init:function(t){var e=t.fn,n=t.flushOnEnd;this._fn=e,this._flushOnEnd=n,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),(0,this._fn)(t)||this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Ne=$("bufferWhile",Fe),je=Z("bufferWhile",Fe),Be=function(t){return t};var Ue={_init:function(t){var e=t.count,n=t.flushOnEnd;this._count=e,this._flushOnEnd=n,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),this._buff.length>=this._count&&this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},qe=$("bufferWithCount",Ue),Ve=Z("bufferWithCount",Ue);var Ge={_init:function(t){var e=this,n=t.wait,r=t.count,i=t.flushOnEnd;this._wait=n,this._count=r,this._flushOnEnd=i,this._intervalId=null,this._$onTick=function(){return e._flush()},this._buff=[]},_free:function(){this._$onTick=null,this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),this._buff.length>=this._count&&(clearInterval(this._intervalId),this._flush(),this._intervalId=setInterval(this._$onTick,this._wait))},_handleEnd:function(){this._flushOnEnd&&0!==this._buff.length&&this._flush(),this._emitEnd()},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait),this._source.onAny(this._$handleAny)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this._source.offAny(this._$handleAny)}},Xe=$("bufferWithTimeOrCount",Ge),He=Z("bufferWithTimeOrCount",Ge);var We={_init:function(t){var e=t.transducer;this._xform=e(function(t){return{"@@transducer/step":function(e,n){return t._emitValue(n),null},"@@transducer/result":function(){return t._emitEnd(),null}}}(this))},_free:function(){this._xform=null},_handleValue:function(t){null!==this._xform["@@transducer/step"](null,t)&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},ze=$("transduce",We),Ye=Z("transduce",We);var $e={_init:function(t){var e=t.fn;this._handler=e,this._emitter=I(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(t){this._handler(this._emitter,t)}},Ze=$("withHandler",$e),Ke=Z("withHandler",$e);var Qe=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function Je(t,e){var n=this;b.call(this),this._buffers=y(t,function(t){return Qe(t)?p(t):[]}),this._sources=y(t,function(t){return Qe(t)?T():t}),this._combinator=e?U(e,this._sources.length):function(t){return t},this._aliveCount=0,this._$handlers=[];for(var r=function(t){n._$handlers.push(function(e){return n._handleAny(t,e)})},i=0;i<this._sources.length;i++)r(i)}function tn(t,e){return 0===t.length?T():new Je(t,e)}i(Je,b,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var t=this._sources.length;this._aliveCount=t;for(var e=0;e<t&&this._active;e++)this._sources[e].onAny(this._$handlers[e])},_onDeactivation:function(){for(var t=0;t<this._sources.length;t++)this._sources[t].offAny(this._$handlers[t])},_emit:function(){for(var t=new Array(this._buffers.length),e=0;e<this._buffers.length;e++)t[e]=this._buffers[e].shift();var n=this._combinator;this._emitValue(n(t))},_isFull:function(){for(var t=0;t<this._buffers.length;t++)if(0===this._buffers[t].length)return!1;return!0},_handleAny:function(t,e){e.type===a&&(this._buffers[t].push(e.value),this._isFull()&&this._emit()),e.type===u&&this._emitError(e.value),e.type===s&&(this._aliveCount--,0===this._aliveCount&&this._emitEnd())},_clear:function(){b.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}});var en=function(t){return t};function nn(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.queueLim,r=void 0===n?0:n,i=e.concurLim,o=void 0===i?-1:i,s=e.drop,a=void 0===s?"new":s;b.call(this),this._queueLim=r<0?-1:r,this._concurLim=o<0?-1:o,this._drop=a,this._queue=[],this._curSources=[],this._$handleSubAny=function(e){return t._handleSubAny(e)},this._$endHandlers=[],this._currentlyAdding=null,0===this._concurLim&&this._emitEnd()}function rn(t){nn.call(this),this._addAll(t),this._initialised=!0}function on(t){return 0===t.length?T():new rn(t)}function sn(t){var e=this;b.call(this),this._generator=t,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(t){return e._handleAny(t)}}i(nn,b,{_name:"abstractPool",_add:function(t,e){e=e||en,-1===this._concurLim||this._curSources.length<this._concurLim?this._addToCur(e(t)):-1===this._queueLim||this._queue.length<this._queueLim?this._addToQueue(e(t)):"old"===this._drop&&(this._removeOldest(),this._add(t,e))},_addAll:function(t){var e=this;!function(t,e){var n=t.length,r=void 0;for(r=0;r<n;r++)e(t[r])}(t,function(t){return e._add(t)})},_remove:function(t){-1===this._removeCur(t)&&this._removeQueue(t)},_addToQueue:function(t){this._queue=c(this._queue,[t])},_addToCur:function(t){if(this._active){if(!t._alive)return t._currentEvent&&this._emit(t._currentEvent.type,t._currentEvent.value),void(this._active&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()));this._currentlyAdding=t,t.onAny(this._$handleSubAny),this._currentlyAdding=null,t._alive&&(this._curSources=c(this._curSources,[t]),this._active&&this._subToEnd(t))}else this._curSources=c(this._curSources,[t])},_subToEnd:function(t){var e=this,n=function(){return e._removeCur(t)};this._$endHandlers.push({obs:t,handler:n}),t.onEnd(n)},_subscribe:function(t){t.onAny(this._$handleSubAny),this._active&&this._subToEnd(t)},_unsubscribe:function(t){t.offAny(this._$handleSubAny);var e=f(this._$endHandlers,function(e){return e.obs===t});-1!==e&&(t.offEnd(this._$endHandlers[e].handler),this._$endHandlers.splice(e,1))},_handleSubAny:function(t){t.type===a?this._emitValue(t.value):t.type===u&&this._emitError(t.value)},_removeQueue:function(t){var e=h(this._queue,t);return this._queue=d(this._queue,e),e},_removeCur:function(t){this._active&&this._unsubscribe(t);var e=h(this._curSources,t);return this._curSources=d(this._curSources,e),-1!==e&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()),e},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){0!==this._queue.length&&(this._queue=p(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var t=0,e=this._curSources;t<e.length&&this._active;t++)this._subscribe(e[t])},_onDeactivation:function(){for(var t=0,e=this._curSources;t<e.length;t++)this._unsubscribe(e[t]);null!==this._currentlyAdding&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return 0===this._curSources.length},_onEmpty:function(){},_clear:function(){b.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),i(rn,nn,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),i(sn,b,{_name:"repeat",_handleAny:function(t){t.type===s?(this._source=null,this._getSource()):this._emit(t.type,t.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var t=this._generator;null===this._source&&this._alive&&this._active;)this._source=t(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){b.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}});var an=function(t){return new sn(t)};function un(t){return an(function(e){return t.length>e&&t[e]}).setName("concat")}function ln(){nn.call(this)}function cn(t,e,n){var r=this;nn.call(this,n),this._source=t,this._fn=e,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(t){return r._handleMain(t)}}function hn(t,e){cn.call(this,t,e)}function fn(t,e){return function(n,r,i){var s=this;t.call(this),this._primary=n,this._secondary=r,this._name=n._name+"."+e,this._lastSecondary=o,this._$handleSecondaryAny=function(t){return s._handleSecondaryAny(t)},this._$handlePrimaryAny=function(t){return s._handlePrimaryAny(t)},this._init(i)}}function pn(t){return{_init:function(){},_free:function(){},_handlePrimaryValue:function(t){this._emitValue(t)},_handlePrimaryError:function(t){this._emitError(t)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(t){this._lastSecondary=t},_handleSecondaryError:function(t){this._emitError(t)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(t){switch(t.type){case a:return this._handlePrimaryValue(t.value);case u:return this._handlePrimaryError(t.value);case s:return this._handlePrimaryEnd(t.value)}},_handleSecondaryAny:function(t){switch(t.type){case a:return this._handleSecondaryValue(t.value);case u:return this._handleSecondaryError(t.value);case s:this._handleSecondaryEnd(t.value),this._removeSecondary()}},_removeSecondary:function(){null!==this._secondary&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){null!==this._secondary&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){t.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function dn(t,e){var n=fn(b,t);return i(n,b,pn(b),e),n}function yn(t,e){var n=fn(x,t);return i(n,x,pn(x),e),n}i(ln,nn,{_name:"pool",plug:function(t){return this._add(t),this},unplug:function(t){return this._remove(t),this}}),i(cn,nn,{_onActivation:function(){nn.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){nn.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(t){t.type===a&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1);t.type===u&&this._emitError(t.value),t.type===s&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){nn.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),i(hn,cn,{_handleMain:function(t){t.type===u&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1);t.type===a&&this._emitValue(t.value),t.type===s&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}});var _n={_handlePrimaryValue:function(t){this._lastSecondary!==o&&this._lastSecondary&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary!==o&&this._lastSecondary||this._emitEnd()}},vn=dn("filterBy",_n),mn=yn("filterBy",_n);var gn=function(t,e){return e};var bn={_handlePrimaryValue:function(t){this._lastSecondary!==o&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary===o&&this._emitEnd()}},xn=dn("skipUntilBy",bn),wn=yn("skipUntilBy",bn);var Tn={_handleSecondaryValue:function(){this._emitEnd()}},Sn=dn("takeUntilBy",Tn),En=yn("takeUntilBy",Tn);var On={_init:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).flushOnEnd,e=void 0===t||t;this._buff=[],this._flushOnEnd=e},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(t){this._buff.push(t)},_handleSecondaryValue:function(){this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._emitEnd()}},An=dn("bufferBy",On),Mn=yn("bufferBy",On);var Pn={_init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.flushOnEnd,n=void 0===e||e,r=t.flushOnChange,i=void 0!==r&&r;this._buff=[],this._flushOnEnd=n,this._flushOnChange=i},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(t){this._buff.push(t),this._lastSecondary===o||this._lastSecondary||this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._lastSecondary!==o&&!this._lastSecondary||this._emitEnd()},_handleSecondaryValue:function(t){this._flushOnChange&&!t&&this._flush(),this._lastSecondary=t}},Cn=dn("bufferWhileBy",Pn),kn=yn("bufferWhileBy",Pn);var Rn=function(){return!1},In=function(){return!0};var Dn={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleValue:function(t){var e=(0,this._fn)(t);e.convert?this._emitError(e.error):this._emitValue(t)}},Ln=$("valuesToErrors",Dn),Fn=Z("valuesToErrors",Dn),Nn=function(t){return{convert:!0,error:t}};var jn={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleError:function(t){var e=(0,this._fn)(t);e.convert?this._emitValue(e.value):this._emitError(t)}},Bn=$("errorsToValues",jn),Un=Z("errorsToValues",jn),qn=function(t){return{convert:!0,value:t}};var Vn={_handleError:function(t){this._emitError(t),this._emitEnd()}},Gn=$("endOnError",Vn),Xn=Z("endOnError",Vn);g.prototype.toProperty=function(t){return Q(this,t)},g.prototype.changes=function(){return function(t){return new J(t)}(this)},g.prototype.toPromise=function(t){return function(t){var e=null;return new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:et())(function(n,r){t.onAny(function(t){t.type===s&&null!==e?((e.type===a?n:r)(e.value),e=null):e=t})})}(this,t)},g.prototype.toESObservable=lt,g.prototype[st]=lt,g.prototype.map=function(t){return gt(this,t)},g.prototype.filter=function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tt;return new(t._ofSameType(xt,wt))(t,{fn:e})}(this,t)},g.prototype.take=function(t){return function(t,e){return new(t._ofSameType(Et,Ot))(t,{n:e})}(this,t)},g.prototype.takeErrors=function(t){return function(t,e){return new(t._ofSameType(Mt,Pt))(t,{n:e})}(this,t)},g.prototype.takeWhile=function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:It;return new(t._ofSameType(kt,Rt))(t,{fn:e})}(this,t)},g.prototype.last=function(){return function(t){return new(t._ofSameType(Lt,Ft))(t)}(this)},g.prototype.skip=function(t){return function(t,e){return new(t._ofSameType(jt,Bt))(t,{n:e})}(this,t)},g.prototype.skipWhile=function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gt;return new(t._ofSameType(qt,Vt))(t,{fn:e})}(this,t)},g.prototype.skipDuplicates=function(t){return Yt(this,t)},g.prototype.diff=function(t,e){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return new(t._ofSameType(Zt,Kt))(t,{fn:e||Qt,seed:n})}(this,t,e)},g.prototype.scan=function(t,e){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return new Jt(t,{fn:e,seed:n})}(this,t,e)},g.prototype.flatten=function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee;return new te(t,{fn:e})}(this,t)},g.prototype.delay=function(t){return function(t,e){return new(t._ofSameType(ie,oe))(t,{wait:e})}(this,t)},g.prototype.throttle=function(t,e){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.leading,i=void 0===r||r,o=n.trailing,s=void 0===o||o;return new(t._ofSameType(ue,le))(t,{wait:e,leading:i,trailing:s})}(this,t,e)},g.prototype.debounce=function(t,e){return function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).immediate,r=void 0!==n&&n;return new(t._ofSameType(he,fe))(t,{wait:e,immediate:r})}(this,t,e)},g.prototype.mapErrors=function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_e;return new(t._ofSameType(de,ye))(t,{fn:e})}(this,t)},g.prototype.filterErrors=function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be;return new(t._ofSameType(me,ge))(t,{fn:e})}(this,t)},g.prototype.ignoreValues=function(){return function(t){return new(t._ofSameType(we,Te))(t)}(this)},g.prototype.ignoreErrors=function(){return function(t){return new(t._ofSameType(Ee,Oe))(t)}(this)},g.prototype.ignoreEnd=function(){return function(t){return new(t._ofSameType(Me,Pe))(t)}(this)},g.prototype.beforeEnd=function(t){return function(t,e){return new(t._ofSameType(ke,Re))(t,{fn:e})}(this,t)},g.prototype.slidingWindow=function(t,e){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new(t._ofSameType(De,Le))(t,{min:n,max:e})}(this,t,e)},g.prototype.bufferWhile=function(t,e){return function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,r=void 0===n||n;return new(t._ofSameType(Ne,je))(t,{fn:e||Be,flushOnEnd:r})}(this,t,e)},g.prototype.bufferWithCount=function(t,e){return function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,r=void 0===n||n;return new(t._ofSameType(qe,Ve))(t,{count:e,flushOnEnd:r})}(this,t,e)},g.prototype.bufferWithTimeOrCount=function(t,e,n){return function(t,e,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).flushOnEnd,i=void 0===r||r;return new(t._ofSameType(Xe,He))(t,{wait:e,count:n,flushOnEnd:i})}(this,t,e,n)},g.prototype.transduce=function(t){return function(t,e){return new(t._ofSameType(ze,Ye))(t,{transducer:e})}(this,t)},g.prototype.withHandler=function(t){return function(t,e){return new(t._ofSameType(Ze,Ke))(t,{fn:e})}(this,t)},g.prototype.thru=function(t){return t(this)},g.prototype.combine=function(t,e){return ft([this,t],e)},g.prototype.zip=function(t,e){return tn([this,t],e)},g.prototype.merge=function(t){return on([this,t])},g.prototype.concat=function(t){return un([this,t])};var Hn=function(){return new ln};g.prototype.flatMap=function(t){return new cn(this,t).setName(this,"flatMap")},g.prototype.flatMapLatest=function(t){return new cn(this,t,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},g.prototype.flatMapFirst=function(t){return new cn(this,t,{concurLim:1}).setName(this,"flatMapFirst")},g.prototype.flatMapConcat=function(t){return new cn(this,t,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},g.prototype.flatMapConcurLimit=function(t,e){return new cn(this,t,{queueLim:-1,concurLim:e}).setName(this,"flatMapConcurLimit")},g.prototype.flatMapErrors=function(t){return new hn(this,t).setName(this,"flatMapErrors")},g.prototype.filterBy=function(t){return function(t,e){return new(t._ofSameType(vn,mn))(t,e)}(this,t)},g.prototype.sampledBy=function(t,e){return function(t,e,n){return ft([e],[t],n?function(t,e){return n(e,t)}:gn).setName(t,"sampledBy")}(this,t,e)},g.prototype.skipUntilBy=function(t){return function(t,e){return new(t._ofSameType(xn,wn))(t,e)}(this,t)},g.prototype.takeUntilBy=function(t){return function(t,e){return new(t._ofSameType(Sn,En))(t,e)}(this,t)},g.prototype.bufferBy=function(t,e){return function(t,e,n){return new(t._ofSameType(An,Mn))(t,e,n)}(this,t,e)},g.prototype.bufferWhileBy=function(t,e){return function(t,e,n){return new(t._ofSameType(Cn,kn))(t,e,n)}(this,t,e)};var Wn=!0;function zn(){Wn=!1}function Yn(t){if(Wn&&console&&"function"==typeof console.warn){console.warn(t,"\nHere is an Error object for you containing the call stack:",new Error)}}g.prototype.awaiting=function(t){return Yn("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145"),function(t,e){var n=on([gt(t,In),gt(e,Rn)]);return(n=Q(n=Yt(n),Rn)).setName(t,"awaiting")}(this,t)},g.prototype.valuesToErrors=function(t){return Yn("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149"),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nn;return new(t._ofSameType(Ln,Fn))(t,{fn:e})}(this,t)},g.prototype.errorsToValues=function(t){return Yn("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149"),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn;return new(t._ofSameType(Bn,Un))(t,{fn:e})}(this,t)},g.prototype.endOnError=function(){return Yn("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150"),function(t){return new(t._ofSameType(Gn,Xn))(t)}(this)};var $n={Observable:g,Stream:b,Property:x,never:T,later:O,interval:M,sequentially:C,fromPoll:R,withInterval:L,fromCallback:j,fromNodeCallback:B,fromEvents:V,stream:N,constant:X,constantError:W,fromPromise:tt,fromESObservable:at,combine:ft,zip:tn,merge:on,concat:un,Pool:ln,pool:Hn,repeat:an,staticLand:dt};$n.Kefir=$n,e.default=$n}.call(e,n(1))},function(t,e,n){t.exports=!n(15)&&!n(25)(function(){return 7!=Object.defineProperty(n(67)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(22),i=n(194),o=n(60),s=n(55)("IE_PROTO"),a=function(){},u=function(){var t,e=n(67)("iframe"),r=o.length;for(e.style.display="none",n(193).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(20),i=n(30),o=n(130)(!1),s=n(55)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),u=0,l=[];for(n in a)n!=s&&r(a,n)&&l.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){"use strict";var r=n(215)(!0);n(114)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){n(217);for(var r=n(11),i=n(26),o=n(37),s=n(13)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var l=a[u],c=r[l],h=c&&c.prototype;h&&!h[s]&&i(h,s,l),o[l]=o.Array}},function(t,e,n){"use strict";var r=n(140);e.a=function(t){return(t=n.i(r.a)(Math.abs(t)))?t[1]:NaN}},function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}},function(t,e,n){"use strict";e.b=l,e.c=function(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())},e.a=function(t,e){var n,r,s,f=u,p=u,d=i.b,y=!1;function _(){return n=Math.min(f.length,p.length)>2?h:c,r=s=null,v}function v(e){return(r||(r=n(f,p,y?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,d)))(+e)}return v.invert=function(t){return(s||(s=n(p,f,l,y?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},v.domain=function(t){return arguments.length?(f=o.a.call(t,a.a),_()):f.slice()},v.range=function(t){return arguments.length?(p=o.b.call(t),_()):p.slice()},v.rangeRound=function(t){return p=o.b.call(t),d=i.c,_()},v.clamp=function(t){return arguments.length?(y=!!t,_()):y},v.interpolate=function(t){return arguments.length?(d=t,_()):d},_()};var r=n(33),i=n(72),o=n(44),s=n(144),a=n(249),u=[0,1];function l(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:n.i(s.a)(e)}function c(t,e,n,r){var i=t[0],o=t[1],s=e[0],a=e[1];return o<i?(i=n(o,i),s=r(a,s)):(i=n(i,o),s=r(s,a)),function(t){return s(i(t))}}function h(t,e,i,o){var s=Math.min(t.length,e.length)-1,a=new Array(s),u=new Array(s),l=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<s;)a[l]=i(t[l],t[l+1]),u[l]=o(e[l],e[l+1]);return function(e){var i=n.i(r.c)(t,e,1,s)-1;return u[i](a[i](e))}}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e,n){t.nativeLines?function(t,e){var n=0,r=t.points;if(0===r.length)return;var o=e.points,s=r.length/2,a=(0,i.hex2rgb)(t.lineColor),u=t.lineAlpha,l=a[0]*u,c=a[1]*u,h=a[2]*u;for(n=1;n<s;n++){var f=r[2*(n-1)],p=r[2*(n-1)+1],d=r[2*n],y=r[2*n+1];o.push(f,p),o.push(l,c,h,u),o.push(d,y),o.push(l,c,h,u)}}(t,n):function(t,e){var n=t.points;if(0===n.length)return;var o=new r.Point(n[0],n[1]),s=new r.Point(n[n.length-2],n[n.length-1]);if(o.x===s.x&&o.y===s.y){(n=n.slice()).pop(),n.pop();var a=(s=new r.Point(n[n.length-2],n[n.length-1])).x+.5*(o.x-s.x),u=s.y+.5*(o.y-s.y);n.unshift(a,u),n.push(a,u)}var l=e.points,c=e.indices,h=n.length/2,f=n.length,p=l.length/6,d=t.lineWidth/2,y=(0,i.hex2rgb)(t.lineColor),_=t.lineAlpha,v=y[0]*_,m=y[1]*_,g=y[2]*_,b=n[0],x=n[1],w=n[2],T=n[3],S=0,E=0,O=-(x-T),A=b-w,M=0,P=0,C=0,k=0,R=Math.sqrt(O*O+A*A);O/=R,A/=R,O*=d,A*=d;var I=t.lineAlignment,D=2*(1-I),L=2*I;l.push(b-O*D,x-A*D,v,m,g,_),l.push(b+O*L,x+A*L,v,m,g,_);for(var F=1;F<h-1;++F){b=n[2*(F-1)],x=n[2*(F-1)+1],w=n[2*F],T=n[2*F+1],S=n[2*(F+1)],E=n[2*(F+1)+1],O=-(x-T),A=b-w,R=Math.sqrt(O*O+A*A),O/=R,A/=R,O*=d,A*=d,M=-(T-E),P=w-S,R=Math.sqrt(M*M+P*P),M/=R,P/=R;var N=-A+x-(-A+T),j=-O+w-(-O+b),B=(-O+b)*(-A+T)-(-O+w)*(-A+x),U=-(P*=d)+E-(-P+T),q=-(M*=d)+w-(-M+S),V=(-M+S)*(-P+T)-(-M+w)*(-P+E),G=N*q-U*j;if(Math.abs(G)<.1)G+=10.1,l.push(w-O*D,T-A*D,v,m,g,_),l.push(w+O*L,T+A*L,v,m,g,_);else{var X=(j*V-q*B)/G,H=(U*B-N*V)/G,W=(X-w)*(X-w)+(H-T)*(H-T);W>196*d*d?(C=O-M,k=A-P,R=Math.sqrt(C*C+k*k),C/=R,k/=R,C*=d,k*=d,l.push(w-C*D,T-k*D),l.push(v,m,g,_),l.push(w+C*L,T+k*L),l.push(v,m,g,_),l.push(w-C*L*D,T-k*D),l.push(v,m,g,_),f++):(l.push(w+(X-w)*D,T+(H-T)*D),l.push(v,m,g,_),l.push(w-(X-w)*L,T-(H-T)*L),l.push(v,m,g,_))}}b=n[2*(h-2)],x=n[2*(h-2)+1],w=n[2*(h-1)],T=n[2*(h-1)+1],O=-(x-T),A=b-w,R=Math.sqrt(O*O+A*A),O/=R,A/=R,O*=d,A*=d,l.push(w-O*D,T-A*D),l.push(v,m,g,_),l.push(w+O*L,T+A*L),l.push(v,m,g,_),c.push(p);for(var z=0;z<f;++z)c.push(p++);c.push(p-1)}(t,e)};var r=n(9),i=n(4)},function(t,e,n){"use strict";e.__esModule=!0;var r=m(n(405)),i=m(n(635)),o=m(n(636)),s=m(n(634)),a=m(n(109)),u=m(n(108)),l=m(n(630)),c=m(n(58)),h=m(n(629)),f=m(n(631)),p=m(n(639)),d=m(n(640)),y=n(4),_=m(n(18)),v=n(2);function m(t){return t&&t.__esModule?t:{default:t}}var g=0,b=function(t){function e(n,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"WebGL",n,r,s));return a.legacy=a.options.legacy,a.legacy&&(_.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=v.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer,powerPreference:a.options.powerPreference},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new i.default(a),a.stencilManager=new o.default(a),a.emptyRenderer=new u.default(a),a.currentRenderer=a.emptyRenderer,a.textureManager=null,a.filterManager=null,a.initPlugins(),a.options.context&&(0,d.default)(a.options.context),a.gl=a.options.context||_.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=g++,a.state=new f.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.drawModes=(0,p.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this._unknownBoundTextures=!1,this.textureManager=new l.default(this),this.filterManager=new s.default(this),this.textureGC=new h.default(this),this.state.resetToDefault(),this.rootRenderTarget=new a.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var n=new _.default.GLTexture.fromData(t,null,1,1),r={_glTextures:{}};r._glTextures[this.CONTEXT_UID]={};for(var i=0;i<e;i++){var o=new c.default;o._glTextures[this.CONTEXT_UID]=n,this.boundTextures[i]=r,this.emptyTextures[i]=o,this.bindTexture(null,i)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,n,r,i){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!i){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,r),this.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){r.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var n=t.baseTexture._glRenderTargets[this.CONTEXT_UID];return n&&n.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var n=void 0;if(t){var r=t.baseTexture;r._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(r,0),this.unbindTexture(r),(n=r._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)}else n=this.rootRenderTarget;return n.transform=e,this.bindRenderTarget(n),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,n){if((t=(t=t||this.emptyTextures[e]).baseTexture||t).touched=this.textureGC.count,n)e=e||0;else{for(var r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===t)return r;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;if(t=t.baseTexture||t,this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]===this.emptyTextures[n]&&(e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[n]._glTextures[this.CONTEXT_UID].texture))}for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===t&&(this.boundTextures[r]=this.emptyTextures[r],e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new _.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._unknownBoundTextures=!0;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(r.default);e.default=b,y.pluginTarget.mixin(b)},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(function(t){return t&&t.__esModule?t:{default:t}}(n(83)).default);e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var r=n(9),i=n(2),o=function(t){return t&&t.__esModule?t:{default:t}}(n(8)),s=n(18);var a=function(){function t(e,n,a,u,l,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new r.Rectangle(0,0,1,1),this.resolution=l||o.default.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new r.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==u?u:o.default.SCALE_MODE,this.root=c||!1,this.root?(this.frameBuffer=new s.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=s.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===i.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(n,a)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var n=this.projectionMatrix;e=e||t,n.identity(),this.root?(n.a=1/t.width*2,n.d=-1/t.height*2,n.tx=-1-e.x*n.a,n.ty=1-e.y*n.d):(n.a=1/t.width*2,n.d=1/t.height*2,n.tx=-1-e.x*n.a,n.ty=-1-e.y*n.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var n=this.frame||this.size;this.calculateProjection(n)}},t.prototype.destroy=function(){this.frameBuffer.stencil&&this.gl.deleteRenderbuffer(this.frameBuffer.stencil),this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();e.default=a},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4);var i={getTintedTexture:function(t,e){var n=t._texture,r="#"+("00000"+(0|(e=i.roundColor(e))).toString(16)).substr(-6);n.tintCache=n.tintCache||{};var o=n.tintCache[r],s=void 0;if(o){if(o.tintId===n._updateID)return n.tintCache[r];s=n.tintCache[r]}else s=i.canvas||document.createElement("canvas");if(i.tintMethod(n,e,s),s.tintId=n._updateID,i.convertTintToImage){var a=new Image;a.src=s.toDataURL(),n.tintCache[r]=a}else n.tintCache[r]=s,i.canvas=null;return s},tintWithMultiply:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithOverlay:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithPerPixel:function(t,e,n){var i=n.getContext("2d"),o=t._frame.clone(),s=t.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,n.width=Math.ceil(o.width),n.height=Math.ceil(o.height),i.save(),i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),i.restore();for(var a=(0,r.hex2rgb)(e),u=a[0],l=a[1],c=a[2],h=i.getImageData(0,0,o.width,o.height),f=h.data,p=0;p<f.length;p+=4)f[p+0]*=u,f[p+1]*=l,f[p+2]*=c;i.putImageData(h,0,0)},roundColor:function(t){var e=i.cacheStepsPerColorChannel,n=(0,r.hex2rgb)(t);return n[0]=Math.min(255,n[0]/e*e),n[1]=Math.min(255,n[1]/e*e),n[2]=Math.min(255,n[2]/e*e),(0,r.rgb2hex)(n)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,function(t){return t&&t.__esModule?t:{default:t}}(n(407)).default)(),tintMethod:0};i.tintMethod=i.canUseMultiply?i.tintWithMultiply:i.tintWithPerPixel,e.default=i},function(t,e,n){var r=n(176),i=n(50),o=n(86),s=n(36)("socket.io-client");t.exports=e=u;var a=e.managers={};function u(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i=r(t),u=i.source,l=i.id,c=i.path,h=a[l]&&c in a[l].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||h?(s("ignoring socket cache for %s",u),n=o(u,e)):(a[l]||(s("new io instance for %s",u),a[l]=o(u,e)),n=a[l]),i.query&&!e.query?e.query=i.query:e&&"object"==typeof e.query&&(e.query=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}(e.query)),n.socket(i.path,e)}e.protocol=i.protocol,e.connect=u,e.Manager=n(86),e.Socket=n(88)},,function(t,e,n){var r=n(51),i=n(13)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){"use strict";var r=n(42),i=n(19),o=n(132),s=n(26),a=n(37),u=n(209),l=n(69),c=n(131),h=n(13)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,y,_,v){u(n,e,d);var m,g,b,x=function(t){if(!f&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",T="values"==y,S=!1,E=t.prototype,O=E[h]||E["@@iterator"]||y&&E[y],A=O||x(y),M=y?T?x("entries"):A:void 0,P="Array"==e&&E.entries||O;if(P&&(b=c(P.call(new t)))!==Object.prototype&&b.next&&(l(b,w,!0),r||"function"==typeof b[h]||s(b,h,p)),T&&O&&"values"!==O.name&&(S=!0,A=function(){return O.call(this)}),r&&!v||!f&&!S&&E[h]||s(E,h,A),a[e]=A,a[w]=p,y)if(m={values:T?A:x("values"),keys:_?A:x("keys"),entries:M},v)for(g in m)g in E||o(E,g,m[g]);else i(i.P+i.F*(f||S),e,m);return m}},function(t,e,n){var r=n(19),i=n(6),o=n(25);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",s)}},function(t,e,n){var r=n(54),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onRoomUpdate=e.onScoreUpdate=e.onCliNewLine=e.onCliResponse=e.emitToken=e.emitCli=e.onInventoryStateChange=e.onUseItem=e.onRequestInput=e.onForceLogout=e.onReconnect=e.onConnectError=e.onConnect=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(111)),i=n(96);var o=(0,r.default)("/player");e.onConnect=(0,i.fromEvents)(o,"connect"),e.onConnectError=(0,i.fromEvents)(o,"connect_error"),e.onReconnect=(0,i.fromEvents)(o,"reconnect"),e.onForceLogout=(0,i.fromEvents)(o,"force logout"),e.onRequestInput=(0,i.fromEvents)(o,"request input"),e.onUseItem=(0,i.fromEvents)(o,"use item"),e.onInventoryStateChange=(0,i.fromEvents)(o,"inventory state"),e.emitCli=o.emit.bind(o,"cli"),e.emitToken=o.emit.bind(o,"player"),e.onCliResponse=(0,i.fromEvents)(o,"cli answer"),e.onCliNewLine=(0,i.fromEvents)(o,"cli newline"),e.onScoreUpdate=(0,i.fromEvents)(o,"score update"),e.onRoomUpdate=(0,i.fromEvents)(o,"room update")},function(t,e){function n(){}t.exports=function(t,e,r){var i=!1;return r=r||n,o.count=t,0===t?e():o;function o(t,n){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,e(t),e=r):0!==o.count||i||e(null,n)}}},function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)o[a]=i[s];return o.buffer}},function(t,e,n){t.exports={default:n(491),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(476));e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){"use strict";e.__esModule=!0;var r=s(n(477)),i=s(n(475)),o=s(n(204));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,o.default)(e)));t.prototype=(0,i.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(204));e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o="";for(n=0;n<i;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(t){var e,r,i,o,s,a=.75*t.length,u=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var c=new ArrayBuffer(a),h=new Uint8Array(c);for(e=0;e<u;e+=4)r=n[t.charCodeAt(e)],i=n[t.charCodeAt(e+1)],o=n[t.charCodeAt(e+2)],s=n[t.charCodeAt(e+3)],h[l++]=r<<2|i>>4,h[l++]=(15&i)<<4|o>>2,h[l++]=(3&o)<<6|63&s;return c}}()},function(t,e,n){"use strict";"use restrict";function r(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=r,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var i=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=r<<i&255}}(i),e.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},function(t,e,n){(function(e){var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function s(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}t[e]=r}}}function a(t,e){e=e||{};var r=new n;s(t);for(var i=0;i<t.length;i++)r.append(t[i]);return e.type?r.getBlob(e.type):r.getBlob()}function u(t,e){return s(t),new Blob(t,e||{})}t.exports=r?i?e.Blob:u:o?a:void 0}).call(e,n(1))},function(t,e){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){var n=this;function r(){n.off(t,r),e.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){var r=n(30),i=n(116),o=n(133);t.exports=function(t){return function(e,n,s){var a,u=r(e),l=i(u.length),c=o(s,l);if(t&&n!=n){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var r=n(20),i=n(41),o=n(55)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){t.exports=n(26)},function(t,e,n){var r=n(54),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(11),i=n(6),o=n(42),s=n(135),a=n(23).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,n){e.f=n(13)},function(t,e,n){"use strict";var r=n(71);e.a=function(t,e,n){if(null==n&&(n=r.a),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,o=(i-1)*e,s=Math.floor(o),a=+n(t[s],s,t);return a+(+n(t[s+1],s+1,t)-a)*(o-s)}}},function(t,e,n){"use strict";n.d(e,"b",function(){return r});var r="$";function i(){}function o(t,e){var n=new i;if(t instanceof i)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,o=-1,s=t.length;if(null==e)for(;++o<s;)n.set(o,t[o]);else for(;++o<s;)n.set(e(r=t[o],o,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}i.prototype=o.prototype={constructor:i,has:function(t){return r+t in this},get:function(t){return this[r+t]},set:function(t,e){return this[r+t]=e,this},remove:function(t){var e=r+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===r&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===r&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===r&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===r&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===r&&++t;return t},empty:function(){for(var t in this)if(t[0]===r)return!1;return!0},each:function(t){for(var e in this)e[0]===r&&t(this[e],e.slice(1),this)}},e.a=o},function(t,e,n){"use strict";e.c=i,n.d(e,"e",function(){return o}),n.d(e,"d",function(){return s}),e.h=b,e.b=T,e.g=S,e.a=E,e.f=k;var r=n(139);function i(){}var o=.7,s=1/o,a="\\s*([+-]?\\d+)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),f=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),p=new RegExp("^rgba\\("+[a,a,a,u]+"\\)$"),d=new RegExp("^rgba\\("+[l,l,l,u]+"\\)$"),y=new RegExp("^hsl\\("+[u,l,l]+"\\)$"),_=new RegExp("^hsla\\("+[u,l,l,u]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function m(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}function b(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=c.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?x(e):3===n?new E(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new E(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new E(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=h.exec(t))?new E(e[1],e[2],e[3],1):(e=f.exec(t))?new E(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=p.exec(t))?w(e[1],e[2],e[3],e[4]):(e=d.exec(t))?w(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=y.exec(t))?P(e[1],e[2]/100,e[3]/100,1):(e=_.exec(t))?P(e[1],e[2]/100,e[3]/100,e[4]):v.hasOwnProperty(t)?x(v[t]):"transparent"===t?new E(NaN,NaN,NaN,0):null}function x(t){return new E(t>>16&255,t>>8&255,255&t,1)}function w(t,e,n,r){return r<=0&&(t=e=n=NaN),new E(t,e,n,r)}function T(t){return t instanceof i||(t=b(t)),t?new E((t=t.rgb()).r,t.g,t.b,t.opacity):new E}function S(t,e,n,r){return 1===arguments.length?T(t):new E(t,e,n,null==r?1:r)}function E(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function O(){return"#"+M(this.r)+M(this.g)+M(this.b)}function A(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function M(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function P(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new R(t,e,n,r)}function C(t){if(t instanceof R)return new R(t.h,t.s,t.l,t.opacity);if(t instanceof i||(t=b(t)),!t)return new R;if(t instanceof R)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,u=s-o,l=(s+o)/2;return u?(a=e===s?(n-r)/u+6*(n<r):n===s?(r-e)/u+2:(e-n)/u+4,u/=l<.5?s+o:2-s-o,a*=60):u=l>0&&l<1?0:a,new R(a,u,l,t.opacity)}function k(t,e,n,r){return 1===arguments.length?C(t):new R(t,e,n,null==r?1:r)}function R(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function I(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}n.i(r.a)(i,b,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:m,formatHex:m,formatHsl:function(){return C(this).formatHsl()},formatRgb:g,toString:g}),n.i(r.a)(E,S,n.i(r.b)(i,{brighter:function(t){return t=null==t?s:Math.pow(s,t),new E(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?o:Math.pow(o,t),new E(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:O,formatHex:O,formatRgb:A,toString:A})),n.i(r.a)(R,k,n.i(r.b)(i,{brighter:function(t){return t=null==t?s:Math.pow(s,t),new R(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?o:Math.pow(o,t),new R(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new E(I(t>=240?t-240:t+120,i,r),I(t,i,r),I(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}))},function(t,e,n){"use strict";e.b=function(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n},e.a=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t}},function(t,e,n){"use strict";e.a=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}},function(t,e,n){"use strict";function r(t,e,n,r,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*r+s*i)/6}e.b=r,e.a=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[i],s=t[i+1],a=i>0?t[i-1]:2*o-s,u=i<e-1?t[i+2]:2*s-o;return r((n-i/e)*e,a,o,s,u)}}},function(t,e,n){"use strict";e.a=function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},e.b=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}},function(t,e,n){"use strict";var r=n(38),i=n(246),o=n(241),s=n(244),a=n(104),u=n(245),l=n(247),c=n(243),h=n(142);e.a=function(t,e){var f,p=typeof e;return null==e||"boolean"===p?n.i(c.a)(e):("number"===p?a.a:"string"===p?(f=n.i(r.f)(e))?(e=f,i.a):l.a:e instanceof r.f?i.a:e instanceof Date?s.a:n.i(h.a)(e)?h.b:Array.isArray(e)?o.a:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?u.a:a.a)(t,e)}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s});var r,i,o,s,a=n(254);!function(t){r=n.i(a.a)(t),i=r.format,r.parse,o=r.utcFormat,s=r.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},function(t,e,n){"use strict";n(14);var r=n(585);n.d(e,"v",function(){return r.a}),n.d(e,"h",function(){return r.a});var i=n(588);n.d(e,"u",function(){return i.a}),n.d(e,"g",function(){return i.a});var o=n(586);n.d(e,"t",function(){return o.a});var s=n(584);n.d(e,"s",function(){return s.a});var a=n(583);n.d(e,"k",function(){return a.a});var u=n(595);n.d(e,"r",function(){return u.a}),n.d(e,"m",function(){return u.a}),n.d(e,"j",function(){return u.b}),n.d(e,"n",function(){return u.c});var l=n(587);n.d(e,"q",function(){return l.a});var c=n(596);n.d(e,"l",function(){return c.a});var h=n(591);n.d(e,"f",function(){return h.a});var f=n(590);n.d(e,"e",function(){return f.a});var p=n(589);n.d(e,"d",function(){return p.a});var d=n(593);n.d(e,"c",function(){return d.a}),n.d(e,"o",function(){return d.a}),n.d(e,"i",function(){return d.b}),n.d(e,"p",function(){return d.c});var y=n(592);n.d(e,"b",function(){return y.a});var _=n(594);n.d(e,"a",function(){return _.a})},function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,a,u,l,c,p,d,_=e&&e.length,v=_?e[0]*n:t.length,m=i(t,0,v,n,!0),g=[];if(!m||m.next===m.prev)return g;if(_&&(m=function(t,e,n,r){var s,a,u,l,c,p=[];for(s=0,a=e.length;s<a;s++)u=e[s]*r,l=s<a-1?e[s+1]*r:t.length,(c=i(t,u,l,r,!1))===c.next&&(c.steiner=!0),p.push(y(c));for(p.sort(h),s=0;s<p.length;s++)f(p[s],n),n=o(n,n.next);return n}(t,e,m,n)),t.length>80*n){r=u=t[0],a=l=t[1];for(var b=n;b<v;b+=n)c=t[b],p=t[b+1],c<r&&(r=c),p<a&&(a=p),c>u&&(u=c),p>l&&(l=p);d=0!==(d=Math.max(u-r,l-a))?1/d:0}return s(m,g,n,r,a,d),g}function i(t,e,n,r,i){var o,s;if(i===M(t,e,n,r)>0)for(o=e;o<n;o+=r)s=E(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=E(o,t[o],t[o+1],s);return s&&g(s,s.next)&&(O(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!g(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(O(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function s(t,e,n,r,i,h,f){if(t){!f&&h&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=d(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(u=l;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1)}(i)}(t,r,i,h);for(var p,y,_=t;t.prev!==t.next;)if(p=t.prev,y=t.next,h?u(t,r,i,h):a(t))e.push(p.i/n),e.push(t.i/n),e.push(y.i/n),O(t),t=y.next,_=y.next;else if((t=y)===_){f?1===f?s(t=l(o(t),e,n),e,n,r,i,h,2):2===f&&c(t,e,n,r,i,h):s(o(t),e,n,r,i,h,1);break}}}function a(t){var e=t.prev,n=t,r=t.next;if(m(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(_(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&m(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,s=t.next;if(m(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,c=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=d(a,u,e,n,r),f=d(l,c,e,n,r),p=t.prevZ,y=t.nextZ;p&&p.z>=h&&y&&y.z<=f;){if(p!==t.prev&&p!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,y!==t.prev&&y!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,y.x,y.y)&&m(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;y&&y.z<=f;){if(y!==t.prev&&y!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,y.x,y.y)&&m(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function l(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!g(i,s)&&b(i,r,r.next,s)&&T(i,s)&&T(s,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(s.i/n),O(r),O(r.next),r=t=s),r=r.next}while(r!==t);return o(r)}function c(t,e,n,r,i,a){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&v(u,l)){var c=S(u,l);return u=o(u,u.next),c=o(c,c.next),s(u,e,n,r,i,a),void s(c,e,n,r,i,a)}l=l.next}u=u.next}while(u!==t)}function h(t,e){return t.x-e.x}function f(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n;var u,l=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&_(o<h?i:s,o,c,h,o<h?s:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),T(r,t)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&p(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(t,e)){var n=S(e,t);o(e,e.next),o(n,n.next)}}function p(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function d(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function y(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function _(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||g(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,n,r){var i=w(m(t,e,n)),o=w(m(t,e,r)),s=w(m(n,r,t)),a=w(m(n,r,e));return i!==o&&s!==a||(!(0!==i||!x(t,n,e))||(!(0!==o||!x(t,r,e))||(!(0!==s||!x(n,t,r))||!(0!==a||!x(n,e,r)))))}function x(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function w(t){return t>0?1:t<0?-1:0}function T(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function S(t,e){var n=new A(t.i,t.x,t.y),r=new A(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function E(t,e,n,r){var i=new A(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function O(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function A(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=r,t.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(M(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,c=a<u-1?e[a+1]*n:t.length;s-=Math.abs(M(t,l,c,n))}var h=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,p=r[a+1]*n,d=r[a+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){t.exports=n(149)},function(t,e,n){t.exports=n(150),t.exports.parser=n(16)},function(t,e,n){(function(e){var r=n(75),i=n(47),o=n(35)("engine.io-client:socket"),s=n(78),a=n(16),u=n(79),l=n(161),c=n(49);function h(t,n){if(!(this instanceof h))return new h(t,n);n=n||{},t&&"object"==typeof t&&(n=t,t=null),t?(t=u(t),n.hostname=t.host,n.secure="https"===t.protocol||"wss"===t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=u(n.host).host),this.secure=null!=n.secure?n.secure:e.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(e.location?location.hostname:"localhost"),this.port=n.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized?null:n.rejectUnauthorized,this.forceNode=!!n.forceNode;var r="object"==typeof e&&e;r.global===r&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=h,h.priorWebsocketSuccess=!1,i(h.prototype),h.protocol=a.protocol,h.Socket=h,h.Transport=n(45),h.transports=n(75),h.parser=n(16),h.prototype.createTransport=function(t){o('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);return e.EIO=a.protocol,e.transport=t,this.id&&(e.sid=this.id),new r[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress})},h.prototype.open=function(){var t;if(this.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},h.prototype.setTransport=function(t){o("setting transport %s",t.name);var e=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},h.prototype.probe=function(t){o('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(o('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(o('probe transport "%s" pong',t),r.upgrading=!0,r.emit("upgrading",e),!e)return;h.priorWebsocketSuccess="websocket"===e.name,o('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){n||"closed"!==r.readyState&&(o("changing transport and sending upgrade packet"),f(),r.setTransport(e),e.send([{type:"upgrade"}]),r.emit("upgrade",e),e=null,r.upgrading=!1,r.flush())})}else{o('probe transport "%s" failed',t);var s=new Error("probe error");s.transport=e.name,r.emit("upgradeError",s)}}))}function s(){n||(n=!0,f(),e.close(),e=null)}function a(n){var i=new Error("probe error: "+n);i.transport=e.name,s(),o('probe transport "%s" failed because of error: %s',t,n),r.emit("upgradeError",i)}function u(){a("transport closed")}function l(){a("socket closed")}function c(t){e&&t.name!==e.name&&(o('"%s" works - aborting "%s"',t.name,e.name),s())}function f(){e.removeListener("open",i),e.removeListener("error",a),e.removeListener("close",u),r.removeListener("close",l),r.removeListener("upgrading",c)}h.priorWebsocketSuccess=!1,e.once("open",i),e.once("error",a),e.once("close",u),this.once("close",l),this.once("upgrading",c),e.open()},h.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},h.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(l(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else o('packet received with socket readyState "%s"',this.readyState)},h.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},h.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},h.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},h.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},h.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},h.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},h.prototype.write=h.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},h.prototype.sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},h.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():e()}):this.upgrading?r():e()}function e(){t.onClose("forced close"),o("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function r(){t.once("upgrade",n),t.once("upgradeError",n)}return this},h.prototype.onError=function(t){o("socket error %j",t),h.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},h.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){o('socket close with reason: "%s"',t);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0}},h.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~s(this.transports,t[n])&&e.push(t[n]);return e}}).call(e,n(1))},function(t,e,n){(function(e){var r=n(76),i=n(32);t.exports=l;var o,s=/\n/g,a=/\\n/g;function u(){}function l(t){r.call(this,t),this.query=this.query||{},o||(e.___eio||(e.___eio=[]),o=e.___eio),this.index=o.length;var n=this;o.push(function(t){n.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=u)},!1)}i(l,r),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},l.prototype.doWrite=function(t,e){var n=this;if(!this.form){var r,i=document.createElement("form"),o=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=u,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function l(){c(),e()}function c(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(t)}catch(t){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),c(),t=t.replace(a,"\\\n"),this.area.value=t.replace(s,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&l()}:this.iframe.onload=l}}).call(e,n(1))},function(t,e,n){(function(e){var r=n(46),i=n(76),o=n(47),s=n(32),a=n(35)("engine.io-client:polling-xhr");function u(){}function l(t){if(i.call(this,t),this.requestTimeout=t.requestTimeout,e.location){var n="https:"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=t.hostname!==e.location.hostname||r!==t.port,this.xs=t.secure!==n}else this.extraHeaders=t.extraHeaders}function c(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function h(){for(var t in c.requests)c.requests.hasOwnProperty(t)&&c.requests[t].abort()}t.exports=l,t.exports.Request=c,s(l,i),l.prototype.supportsBinary=!0,l.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new c(t)},l.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},l.prototype.doPoll=function(){a("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},o(c.prototype),c.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new r(t),i=this;try{a("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in n.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.extraHeaders[o])}catch(t){}if(this.supportsBinary&&(n.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{n.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){i.onLoad()},n.onerror=function(){i.onError(n.responseText)}):n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?i.onLoad():setTimeout(function(){i.onError(n.status)},0))},a("xhr data %s",this.data),n.send(this.data)}catch(t){return void setTimeout(function(){i.onError(t)},0)}e.document&&(this.index=c.requestsCount++,c.requests[this.index]=this)},c.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},c.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},c.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},c.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,t)try{this.xhr.abort()}catch(t){}e.document&&delete c.requests[this.index],this.xhr=null}},c.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(t){}if("application/octet-stream"===e)t=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){for(var n=new Uint8Array(this.xhr.response),r=[],i=0,o=n.length;i<o;i++)r.push(n[i]);t=String.fromCharCode.apply(null,r)}else t=this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},c.prototype.hasXDR=function(){return void 0!==e.XDomainRequest&&!this.xs&&this.enablesXDR},c.prototype.abort=function(){this.cleanup()},c.requestsCount=0,c.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",h):e.addEventListener&&e.addEventListener("beforeunload",h,!1))}).call(e,n(1))},function(t,e,n){(function(e){var r,i=n(45),o=n(16),s=n(49),a=n(32),u=n(91),l=n(35)("engine.io-client:websocket"),c=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{r=n(187)}catch(t){}var h=c;function f(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=c&&!t.forceNode,this.usingBrowserWebSocket||(h=r),i.call(this,t)}h||"undefined"!=typeof window||(h=r),t.exports=f,a(f,i),f.prototype.name="websocket",f.prototype.supportsBinary=!0,f.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e={agent:this.agent,perMessageDeflate:this.perMessageDeflate};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(e.headers=this.extraHeaders),this.localAddress&&(e.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new h(t):new h(t,void 0,e)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},f.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},f.prototype.write=function(t){var n=this;this.writable=!1;for(var r=t.length,i=0,s=r;i<s;i++)!function(t){o.encodePacket(t,n.supportsBinary,function(i){if(!n.usingBrowserWebSocket){var o={};if(t.options&&(o.compress=t.options.compress),n.perMessageDeflate)("string"==typeof i?e.Buffer.byteLength(i):i.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,o)}catch(t){l("websocket closed before onclose event")}--r||a()})}(t[i]);function a(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}},f.prototype.onClose=function(){i.prototype.onClose.call(this)},f.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},f.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=u()),this.supportsBinary||(t.b64=1),(t=s.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},f.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===f.prototype.name)}}).call(e,n(1))},function(t,e,n){(e=t.exports=o.debug=o).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(155),e.names=[],e.skips=[],e.formatters={};var r,i=0;function o(t){function n(){}function o(){var t=o,n=+new Date,s=n-(r||n);t.diff=s,t.prev=r,t.curr=n,r=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=e.colors[i++%e.colors.length]);for(var a=new Array(arguments.length),u=0;u<a.length;u++)a[u]=arguments[u];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var l=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;l++;var i=e.formatters[r];if("function"==typeof i){var o=a[l];n=i.call(t,o),a.splice(l,1),l--}return n}),a=e.formatArgs.apply(t,a),(o.log||e.log||console.log.bind(console)).apply(t,a)}n.enabled=!1,o.enabled=!0;var s=e.enabled(t)?o:n;return s.namespace=t,s}},function(t,e){var n=1e3,r=60*n,i=60*r,o=24*i,s=365.25*o;function a(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>1e4)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===u&&!1===isNaN(t))return e.long?function(t){return a(t,o,"day")||a(t,i,"hour")||a(t,r,"minute")||a(t,n,"second")||t+" ms"}(t):function(t){if(t>=o)return Math.round(t/o)+"d";if(t>=i)return Math.round(t/i)+"h";if(t>=r)return Math.round(t/r)+"m";if(t>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,n){var r,i,o;!function(n){var s=/iPhone/i,a=/iPod/i,u=/iPad/i,l=/\bAndroid(?:.+)Mobile\b/i,c=/Android/i,h=/\bAndroid(?:.+)SD4930UR\b/i,f=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,p=/Windows Phone/i,d=/\bWindows(?:.+)ARM\b/i,y=/BlackBerry/i,_=/BB10/i,v=/Opera Mini/i,m=/\b(CriOS|Chrome)(?:.+)Mobile/i,g=/Mobile(?:.+)Firefox\b/i;function b(t,e){return t.test(e)}function x(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),n=e.split("[FBAN");void 0!==n[1]&&(e=n[0]),void 0!==(n=e.split("Twitter"))[1]&&(e=n[0]);var r={apple:{phone:b(s,e)&&!b(p,e),ipod:b(a,e),tablet:!b(s,e)&&b(u,e)&&!b(p,e),device:(b(s,e)||b(a,e)||b(u,e))&&!b(p,e)},amazon:{phone:b(h,e),tablet:!b(h,e)&&b(f,e),device:b(h,e)||b(f,e)},android:{phone:!b(p,e)&&b(h,e)||!b(p,e)&&b(l,e),tablet:!b(p,e)&&!b(h,e)&&!b(l,e)&&(b(f,e)||b(c,e)),device:!b(p,e)&&(b(h,e)||b(f,e)||b(l,e)||b(c,e))||b(/\bokhttp\b/i,e)},windows:{phone:b(p,e),tablet:b(d,e),device:b(p,e)||b(d,e)},other:{blackberry:b(y,e),blackberry10:b(_,e),opera:b(v,e),firefox:b(g,e),chrome:b(m,e),device:b(y,e)||b(_,e)||b(v,e)||b(g,e)||b(m,e)}};return r.any=r.apple.device||r.android.device||r.windows.device||r.other.device,r.phone=r.apple.phone||r.android.phone||r.windows.phone,r.tablet=r.apple.tablet||r.android.tablet||r.windows.tablet,r}void 0!==t&&t.exports&&"undefined"==typeof window?t.exports=x:void 0!==t&&t.exports&&"undefined"!=typeof window?(t.exports=x(),t.exports.isMobile=x):(i=[],r=n.isMobile=x(),void 0===(o="function"==typeof r?r.apply(e,i):r)||(t.exports=o))}(this)},function(t,e,n){(function(t,r){var i;/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */(function(){var o=n(185),s={function:!0,object:!0},a=s[typeof e]&&e&&!e.nodeType&&e,u=s[typeof window]&&window||this,l=a&&s[typeof t]&&t&&!t.nodeType&&"object"==typeof r&&r;function c(t,e){t||(t=u.Object()),e||(e=u.Object());var n=t.Number||u.Number,r=t.String||u.String,i=t.Object||u.Object,o=t.Date||u.Date,a=t.SyntaxError||u.SyntaxError,l=t.TypeError||u.TypeError,h=t.Math||u.Math,f=t.JSON||u.JSON;"object"==typeof f&&f&&(e.stringify=f.stringify,e.parse=f.parse);var p,d,y,_=i.prototype,v=_.toString,m=new o(-0xc782b5b800cec);try{m=-109252==m.getUTCFullYear()&&0===m.getUTCMonth()&&1===m.getUTCDate()&&10==m.getUTCHours()&&37==m.getUTCMinutes()&&6==m.getUTCSeconds()&&708==m.getUTCMilliseconds()}catch(t){}function g(t){if(g[t]!==y)return g[t];var i;if("bug-string-char-index"==t)i="a"!="a"[0];else if("json"==t)i=g("json-stringify")&&g("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var u=e.stringify,l="function"==typeof u&&m;if(l){(s=function(){return 1}).toJSON=s;try{l="0"===u(0)&&"0"===u(new n)&&'""'==u(new r)&&u(v)===y&&u(y)===y&&u()===y&&"1"===u(s)&&"[1]"==u([s])&&"[null]"==u([y])&&"null"==u(null)&&"[null,null,null]"==u([y,v,null])&&u({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===u(null,s)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new o(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new o(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new o(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new o(-1))}catch(t){l=!1}}i=l}if("json-parse"==t){var c=e.parse;if("function"==typeof c)try{if(0===c("0")&&!c(!1)){var h=5==(s=c(a)).a.length&&1===s.a[0];if(h){try{h=!c('"\t"')}catch(t){}if(h)try{h=1!==c("01")}catch(t){}if(h)try{h=1!==c("1.")}catch(t){}}}}catch(t){h=!1}i=h}}return g[t]=!!i}if(!g("json")){var b=g("bug-string-char-index");if(!m)var x=h.floor,w=[0,31,59,90,120,151,181,212,243,273,304,334],T=function(t,e){return w[e]+365*(t-1970)+x((t-1969+(e=+(e>1)))/4)-x((t-1901+e)/100)+x((t-1601+e)/400)};if((p=_.hasOwnProperty)||(p=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=v?p=function(t){var e=this.__proto__,n=t in(this.__proto__=null,this);return this.__proto__=e,n}:(e=n.constructor,p=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,p.call(this,t)}),d=function(t,e){var n,r,i,o=0;for(i in(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n)p.call(r,i)&&o++;return n=r=null,o?d=2==o?function(t,e){var n,r={},i="[object Function]"==v.call(t);for(n in t)i&&"prototype"==n||p.call(r,n)||!(r[n]=1)||!p.call(t,n)||e(n)}:function(t,e){var n,r,i="[object Function]"==v.call(t);for(n in t)i&&"prototype"==n||!p.call(t,n)||(r="constructor"===n)||e(n);(r||p.call(t,n="constructor"))&&e(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],d=function(t,e){var n,i,o="[object Function]"==v.call(t),a=!o&&"function"!=typeof t.constructor&&s[typeof t.hasOwnProperty]&&t.hasOwnProperty||p;for(n in t)o&&"prototype"==n||!a.call(t,n)||e(n);for(i=r.length;n=r[--i];a.call(t,n)&&e(n));}),d(t,e)},!g("json-stringify")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},E=function(t,e){return("000000"+(e||0)).slice(-t)},O=function(t){for(var e='"',n=0,r=t.length,i=!b||r>10,o=i&&(b?t.split(""):t);n<r;n++){var s=t.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=S[s];break;default:if(s<32){e+="\\u00"+E(2,s.toString(16));break}e+=i?o[n]:t.charAt(n)}}return e+'"'},A=function(t,e,n,r,i,o,s){var a,u,c,h,f,_,m,g,b,w,S,M,P,C,k,R;try{a=e[t]}catch(t){}if("object"==typeof a&&a)if("[object Date]"!=(u=v.call(a))||p.call(a,"toJSON"))"function"==typeof a.toJSON&&("[object Number]"!=u&&"[object String]"!=u&&"[object Array]"!=u||p.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&a<1/0){if(T){for(f=x(a/864e5),c=x(f/365.2425)+1970-1;T(c+1,0)<=f;c++);for(h=x((f-T(c,0))/30.42);T(c,h+1)<=f;h++);f=1+f-T(c,h),m=x((_=(a%864e5+864e5)%864e5)/36e5)%24,g=x(_/6e4)%60,b=x(_/1e3)%60,w=_%1e3}else c=a.getUTCFullYear(),h=a.getUTCMonth(),f=a.getUTCDate(),m=a.getUTCHours(),g=a.getUTCMinutes(),b=a.getUTCSeconds(),w=a.getUTCMilliseconds();a=(c<=0||c>=1e4?(c<0?"-":"+")+E(6,c<0?-c:c):E(4,c))+"-"+E(2,h+1)+"-"+E(2,f)+"T"+E(2,m)+":"+E(2,g)+":"+E(2,b)+"."+E(3,w)+"Z"}else a=null;if(n&&(a=n.call(e,t,a)),null===a)return"null";if("[object Boolean]"==(u=v.call(a)))return""+a;if("[object Number]"==u)return a>-1/0&&a<1/0?""+a:"null";if("[object String]"==u)return O(""+a);if("object"==typeof a){for(C=s.length;C--;)if(s[C]===a)throw l();if(s.push(a),S=[],k=o,o+=i,"[object Array]"==u){for(P=0,C=a.length;P<C;P++)M=A(P,a,n,r,i,o,s),S.push(M===y?"null":M);R=S.length?i?"[\n"+o+S.join(",\n"+o)+"\n"+k+"]":"["+S.join(",")+"]":"[]"}else d(r||a,function(t){var e=A(t,a,n,r,i,o,s);e!==y&&S.push(O(t)+":"+(i?" ":"")+e)}),R=S.length?i?"{\n"+o+S.join(",\n"+o)+"\n"+k+"}":"{"+S.join(",")+"}":"{}";return s.pop(),R}};e.stringify=function(t,e,n){var r,i,o,a;if(s[typeof e]&&e)if("[object Function]"==(a=v.call(e)))i=e;else if("[object Array]"==a){o={};for(var u,l=0,c=e.length;l<c;u=e[l++],("[object String]"==(a=v.call(u))||"[object Number]"==a)&&(o[u]=1));}if(n)if("[object Number]"==(a=v.call(n))){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else"[object String]"==a&&(r=n.length<=10?n:n.slice(0,10));return A("",((u={})[""]=t,u),i,o,r,"",[])}}if(!g("json-parse")){var M,P,C=r.fromCharCode,k={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},R=function(){throw M=P=null,a()},I=function(){for(var t,e,n,r,i,o=P,s=o.length;M<s;)switch(i=o.charCodeAt(M)){case 9:case 10:case 13:case 32:M++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=b?o.charAt(M):o[M],M++,t;case 34:for(t="@",M++;M<s;)if((i=o.charCodeAt(M))<32)R();else if(92==i)switch(i=o.charCodeAt(++M)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=k[i],M++;break;case 117:for(e=++M,n=M+4;M<n;M++)(i=o.charCodeAt(M))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||R();t+=C("0x"+o.slice(e,M));break;default:R()}else{if(34==i)break;for(i=o.charCodeAt(M),e=M;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++M);t+=o.slice(e,M)}if(34==o.charCodeAt(M))return M++,t;R();default:if(e=M,45==i&&(r=!0,i=o.charCodeAt(++M)),i>=48&&i<=57){for(48==i&&((i=o.charCodeAt(M+1))>=48&&i<=57)&&R(),r=!1;M<s&&((i=o.charCodeAt(M))>=48&&i<=57);M++);if(46==o.charCodeAt(M)){for(n=++M;n<s&&((i=o.charCodeAt(n))>=48&&i<=57);n++);n==M&&R(),M=n}if(101==(i=o.charCodeAt(M))||69==i){for(43!=(i=o.charCodeAt(++M))&&45!=i||M++,n=M;n<s&&((i=o.charCodeAt(n))>=48&&i<=57);n++);n==M&&R(),M=n}return+o.slice(e,M)}if(r&&R(),"true"==o.slice(M,M+4))return M+=4,!0;if("false"==o.slice(M,M+5))return M+=5,!1;if("null"==o.slice(M,M+4))return M+=4,null;R()}return"$"},D=function(t){var e,n;if("$"==t&&R(),"string"==typeof t){if("@"==(b?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=I());n||(n=!0))n&&(","==t?"]"==(t=I())&&R():R()),","==t&&R(),e.push(D(t));return e}if("{"==t){for(e={};"}"!=(t=I());n||(n=!0))n&&(","==t?"}"==(t=I())&&R():R()),","!=t&&"string"==typeof t&&"@"==(b?t.charAt(0):t[0])&&":"==I()||R(),e[t.slice(1)]=D(I());return e}R()}return t},L=function(t,e,n){var r=F(t,e,n);r===y?delete t[e]:t[e]=r},F=function(t,e,n){var r,i=t[e];if("object"==typeof i&&i)if("[object Array]"==v.call(i))for(r=i.length;r--;)L(i,r,n);else d(i,function(t){L(i,t,n)});return n.call(t,e,i)};e.parse=function(t,e){var n,r;return M=0,P=""+t,n=D(I()),"$"!=I()&&R(),M=P=null,e&&"[object Function]"==v.call(e)?F(((r={})[""]=n,r),"",e):n}}}return e.runInContext=c,e}if(!l||l.global!==l&&l.window!==l&&l.self!==l||(u=l),a&&!o)c(u,a);else{var h=u.JSON,f=u.JSON3,p=!1,d=c(u,u.JSON3={noConflict:function(){return p||(p=!0,u.JSON=h,u.JSON3=f,h=f=null),d}});u.JSON={parse:d.parse,stringify:d.stringify}}o&&(void 0===(i=function(){return d}.call(e,n,e,t))||(t.exports=i))}).call(this)}).call(e,n(31)(t),n(1))},function(t,e,n){(function(e){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(e,n(1))},function(t,e){var n=null,r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=function(t,e){if(!n){var i=Object.keys(r);n={};for(var o=0;o<i.length;++o){var s=i[o];n[t[s]]=r[s]}}return n[e]}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(9);var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:((t=t||new r.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=t[0],s=t[1];e=o<e?o:e,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,o=t[2],s=t[3],e=o<e?o:e,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,o=t[4],s=t[5],e=o<e?o:e,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,o=t[6],s=t[7],e=o<e?o:e,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,this.minX=e,this.minY=n,this.maxX=r,this.maxY=i},t.prototype.addFrame=function(t,e,n,r,i){var o=t.worldTransform,s=o.a,a=o.b,u=o.c,l=o.d,c=o.tx,h=o.ty,f=this.minX,p=this.minY,d=this.maxX,y=this.maxY,_=s*e+u*n+c,v=a*e+l*n+h;f=_<f?_:f,p=v<p?v:p,d=_>d?_:d,y=v>y?v:y,v=a*r+l*n+h,f=(_=s*r+u*n+c)<f?_:f,p=v<p?v:p,d=_>d?_:d,y=v>y?v:y,v=a*e+l*i+h,f=(_=s*e+u*i+c)<f?_:f,p=v<p?v:p,d=_>d?_:d,y=v>y?v:y,v=a*r+l*i+h,f=(_=s*r+u*i+c)<f?_:f,p=v<p?v:p,d=_>d?_:d,y=v>y?v:y,this.minX=f,this.minY=p,this.maxX=d,this.maxY=y},t.prototype.addVertices=function(t,e,n,r){for(var i=t.worldTransform,o=i.a,s=i.b,a=i.c,u=i.d,l=i.tx,c=i.ty,h=this.minX,f=this.minY,p=this.maxX,d=this.maxY,y=n;y<r;y+=2){var _=e[y],v=e[y+1],m=o*_+a*v+l,g=u*v+s*_+c;h=m<h?m:h,f=g<f?g:f,p=m>p?m:p,d=g>d?g:d}this.minX=h,this.minY=f,this.maxX=p,this.maxY=d},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=i&&r<=o){var s=this.minX,a=this.minY,u=this.maxX,l=this.maxY;this.minX=n<s?n:s,this.minY=r<a?r:a,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=i&&r<=o){var s=this.minX,a=this.minY,u=this.maxX,l=this.maxY;this.minX=n<s?n:s,this.minY=r<a?r:a,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t}();e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var r=n(9);var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,n=this.worldTransform,r=this.localTransform;n.a=r.a*e.a+r.b*e.c,n.b=r.a*e.b+r.b*e.d,n.c=r.c*e.a+r.d*e.c,n.d=r.c*e.b+r.d*e.d,n.tx=r.tx*e.a+r.ty*e.c+e.tx,n.ty=r.tx*e.b+r.ty*e.d+e.ty,this._worldID++},t}();e.default=i,i.prototype.updateWorldTransform=i.prototype.updateTransform,i.IDENTITY=new i},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(166)),o=n(2);var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=s,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new i.default;var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new i.default;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,o=t.y;return e.x=this.d*n*r+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*o+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,n,r,i,o,s,a,u){return this.a=Math.cos(s+u)*i,this.b=Math.sin(s+u)*i,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(n*this.a+r*this.c),this.ty=e-(n*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,s=-Math.atan2(-r,i),a=Math.atan2(n,e),u=Math.abs(s+a);return u<1e-5||Math.abs(o.PI_2-u)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=a),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(r*r+i*i),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();e.default=s},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(2);var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=Number(e),this.y=Number(n),this.width=Number(r),this.height=Number(o),this.type=i.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);this.x=e,this.width=Math.max(n-e,0),this.y=r,this.height=Math.max(i-r,0)},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=n-e,this.y=r,this.height=i-r},t.prototype.ceil=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001,n=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=r-this.y},r(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(9),o=n(4),s=n(2),a=l(n(39)),u=l(n(81));function l(t){return t&&t.__esModule?t:{default:t}}var c=new i.Point,h=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._anchor=new i.ObservablePoint(r._onAnchorUpdate,r,n?n.defaultAnchor.x:0,n?n.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=s.BLEND_MODES.NORMAL,r.shader=null,r.cachedTint=16777215,r.texture=n||a.default.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.pluginName="sprite",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,o.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,o.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,u=this.vertexData,l=t.trim,c=t.orig,h=this._anchor,f=0,p=0,d=0,y=0;l?(f=(p=l.x-h._x*c.width)+l.width,d=(y=l.y-h._y*c.height)+l.height):(f=(p=-h._x*c.width)+c.width,d=(y=-h._y*c.height)+c.height),u[0]=n*p+i*y+s,u[1]=o*y+r*p+a,u[2]=n*f+i*y+s,u[3]=o*y+r*f+a,u[4]=n*f+i*d+s,u[5]=o*d+r*f+a,u[6]=n*p+i*d+s,u[7]=o*d+r*p+a}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,n=t.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,s=i.b,a=i.c,u=i.d,l=i.tx,c=i.ty,h=-r._x*n.width,f=h+n.width,p=-r._y*n.height,d=p+n.height;e[0]=o*h+a*p+l,e[1]=u*p+s*h+c,e[2]=o*f+a*p+l,e[3]=u*p+s*f+c,e[4]=o*f+a*d+l,e[5]=u*d+s*f+c,e[6]=o*h+a*d+l,e[7]=u*d+s*h+c},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new i.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);var e=this._texture.orig.width,n=this._texture.orig.height,r=-e*this.anchor.x,i=0;return c.x>=r&&c.x<r+e&&(i=-n*this.anchor.y,c.y>=i&&c.y<i+n)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var n="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null,this.shader=null},e.from=function(t){return new e(a.default.from(t))},e.fromFrame=function(t){var n=o.TextureCache[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(n)},e.fromImage=function(t,n,r){return new e(a.default.fromImage(t,n,r))},r(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,o.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,o.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t||a.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(u.default);e.default=h},function(t,e,n){"use strict";e.__esModule=!0;var r=i(n(413));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=null;if(!(n instanceof r.default)){var s=arguments[1],a=arguments[2],u=arguments[3],l=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+a+") instead of the ctor directly."),o=arguments[0],i=null,n=new r.default(s,a,u,l)}var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return c.legacyRenderer=o,c.valid=!0,c._updateUvs(),c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e,n){t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,n||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,n,i,o){return new e(new r.default(t,n,i,o))},e}(i(n(39)).default);e.default=o},function(t,e,n){"use strict";e.__esModule=!0,e.Ticker=e.shared=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(647));var i=new r.default;i.autoStart=!0,i.destroy=function(){},e.shared=i,e.Ticker=r.default},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){for(var e=6*t,n=new Uint16Array(e),r=0,i=0;r<e;r+=6,i+=4)n[r+0]=i+0,n[r+1]=i+1,n[r+2]=i+2,n[r+3]=i+0,n[r+4]=i+2,n[r+5]=i+3;return n}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),i=function(t){return t&&t.__esModule?t:{default:t}}(n(432));var o=r.ticker.shared;r.settings.UPLOADS_PER_FRAME=4;var s=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.limiter=new i.default(r.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){n.queue&&n.prepareItems()},this.registerFindHook(f),this.registerFindHook(p),this.registerFindHook(a),this.registerFindHook(u),this.registerFindHook(l),this.registerUploadHook(c),this.registerUploadHook(h)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,o.addOnce(this.tick,this,r.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)o.addOnce(this.tick,this,r.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var s=this.completes.slice(0);this.completes.length=0;for(var a=0,u=s.length;a<u;a++)s[a]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof r.Container)for(var i=t.children.length-1;i>=0;i--)this.add(t.children[i]);return this},t.prototype.destroy=function(){this.ticking&&o.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function a(t,e){var n=!1;if(t&&t._textures&&t._textures.length)for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof r.Texture){var o=t._textures[i].baseTexture;-1===e.indexOf(o)&&(e.push(o),n=!0)}return n}function u(t,e){return t instanceof r.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function l(t,e){if(t._texture&&t._texture instanceof r.Texture){var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function c(t,e){return e instanceof r.Text&&(e.updateText(!0),!0)}function h(t,e){if(e instanceof r.TextStyle){var n=e.toFontString();return r.TextMetrics.measureFont(n),!0}return!1}function f(t,e){if(t instanceof r.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function p(t,e){return t instanceof r.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}e.default=s},function(t,e){t.exports="attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n    vTextureCoord = aTextureCoord;\r\n}\r\n"},,function(t,e,n){"use strict";e.__esModule=!0,e.Resource=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=s(n(386)),o=s(n(258));function s(t){return t&&t.__esModule?t:{default:t}}var a=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),u=null;function l(){}var c=e.Resource=function(){function t(e,n,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"!=typeof e||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=e,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=l,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new o.default,this.onProgress=new o.default,this.onComplete=new o.default,this.onAfterMiddleware=new o.default}return t.setExtensionLoadType=function(e,n){h(t._loadTypeMap,e,n)},t.setExtensionXhrType=function(e,n){h(t._xhrTypeMap,e,n)},t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var n=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(n)},1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:a&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,n){n||(n=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=n,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(f(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(f(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(f(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,n="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(n=e.responseText),0===r&&(n.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(n,"text/xml")}else{var o=document.createElement("div");o.innerHTML=n,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||n;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,u||(u=document.createElement("a")),u.href=t;var n=!(t=(0,i.default)(u.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&n&&r===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var r=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(r>-1?r:t.length,i>-1?i:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function h(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}function f(t){return t.toString().replace("object ","")}c.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},c.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},c.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},c.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},c._loadTypeMap={gif:c.LOAD_TYPE.IMAGE,png:c.LOAD_TYPE.IMAGE,bmp:c.LOAD_TYPE.IMAGE,jpg:c.LOAD_TYPE.IMAGE,jpeg:c.LOAD_TYPE.IMAGE,tif:c.LOAD_TYPE.IMAGE,tiff:c.LOAD_TYPE.IMAGE,webp:c.LOAD_TYPE.IMAGE,tga:c.LOAD_TYPE.IMAGE,svg:c.LOAD_TYPE.IMAGE,"svg+xml":c.LOAD_TYPE.IMAGE,mp3:c.LOAD_TYPE.AUDIO,ogg:c.LOAD_TYPE.AUDIO,wav:c.LOAD_TYPE.AUDIO,mp4:c.LOAD_TYPE.VIDEO,webm:c.LOAD_TYPE.VIDEO},c._xhrTypeMap={xhtml:c.XHR_RESPONSE_TYPE.DOCUMENT,html:c.XHR_RESPONSE_TYPE.DOCUMENT,htm:c.XHR_RESPONSE_TYPE.DOCUMENT,xml:c.XHR_RESPONSE_TYPE.DOCUMENT,tmx:c.XHR_RESPONSE_TYPE.DOCUMENT,svg:c.XHR_RESPONSE_TYPE.DOCUMENT,tsx:c.XHR_RESPONSE_TYPE.DOCUMENT,gif:c.XHR_RESPONSE_TYPE.BLOB,png:c.XHR_RESPONSE_TYPE.BLOB,bmp:c.XHR_RESPONSE_TYPE.BLOB,jpg:c.XHR_RESPONSE_TYPE.BLOB,jpeg:c.XHR_RESPONSE_TYPE.BLOB,tif:c.XHR_RESPONSE_TYPE.BLOB,tiff:c.XHR_RESPONSE_TYPE.BLOB,webp:c.XHR_RESPONSE_TYPE.BLOB,tga:c.XHR_RESPONSE_TYPE.BLOB,json:c.XHR_RESPONSE_TYPE.JSON,text:c.XHR_RESPONSE_TYPE.TEXT,txt:c.XHR_RESPONSE_TYPE.TEXT,ttf:c.XHR_RESPONSE_TYPE.BUFFER,otf:c.XHR_RESPONSE_TYPE.BUFFER},c.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",t.exports.default=c},function(t,e,n){(function(e){var r=n(79),i=n(36)("socket.io-client:url");t.exports=function(t,n){var o=t;n=n||e.location,null==t&&(t=n.protocol+"//"+n.host);"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t=void 0!==n?n.protocol+"//"+t:"https://"+t),i("parse %s",t),o=r(t));o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443"));o.path=o.path||"/";var s=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+s+":"+o.port,o.href=o.protocol+"://"+s+(n&&n.port===o.port?"":":"+o.port),o}}).call(e,n(1))},function(t,e,n){(e=t.exports=o.debug=o).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(178),e.names=[],e.skips=[],e.formatters={};var r,i=0;function o(t){function n(){}function o(){var t=o,n=+new Date,s=n-(r||n);t.diff=s,t.prev=r,t.curr=n,r=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=e.colors[i++%e.colors.length]);for(var a=new Array(arguments.length),u=0;u<a.length;u++)a[u]=arguments[u];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var l=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;l++;var i=e.formatters[r];if("function"==typeof i){var o=a[l];n=i.call(t,o),a.splice(l,1),l--}return n}),a=e.formatArgs.apply(t,a),(o.log||e.log||console.log.bind(console)).apply(t,a)}n.enabled=!1,o.enabled=!0;var s=e.enabled(t)?o:n;return s.namespace=t,s}},function(t,e){var n=1e3,r=60*n,i=60*r,o=24*i,s=365.25*o;function a(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>1e4)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===u&&!1===isNaN(t))return e.long?function(t){return a(t,o,"day")||a(t,i,"hour")||a(t,r,"minute")||a(t,n,"second")||t+" ms"}(t):function(t){if(t>=o)return Math.round(t/o)+"d";if(t>=i)return Math.round(t/i)+"h";if(t>=r)return Math.round(t/r)+"m";if(t>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){(function(t){var r=n(182),i=n(90);e.deconstructPacket=function(t){var e=[],n=t.data;var o=t;return o.data=function t(n){if(!n)return n;if(i(n)){var o={_placeholder:!0,num:e.length};return e.push(n),o}if(r(n)){for(var s=new Array(n.length),a=0;a<n.length;a++)s[a]=t(n[a]);return s}if("object"==typeof n&&!(n instanceof Date)){for(var u in s={},n)s[u]=t(n[u]);return s}return n}(n),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=function t(n){if(n&&n._placeholder)return e[n.num];if(r(n)){for(var i=0;i<n.length;i++)n[i]=t(n[i]);return n}if(n&&"object"==typeof n){for(var o in n)n[o]=t(n[o]);return n}return n}(t.data),t.attachments=void 0,t},e.removeBlobs=function(e,n){var o=0,s=e;!function e(a,u,l){if(!a)return a;if(t.Blob&&a instanceof Blob||t.File&&a instanceof File){o++;var c=new FileReader;c.onload=function(){l?l[u]=this.result:s=this.result,--o||n(s)},c.readAsArrayBuffer(a)}else if(r(a))for(var h=0;h<a.length;h++)e(a[h],h,a);else if(a&&"object"==typeof a&&!i(a))for(var f in a)e(a[f],f,a)}(s),o||n(s)}}).call(e,n(1))},function(t,e,n){function r(){var t;try{t=e.storage.debug}catch(t){}return t}(e=t.exports=n(181)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var r="color: "+this.color,i=0,o=0;return(t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1)))[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++i)}),t.splice(o,0,r),t},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(r())},function(t,e,n){(e=t.exports=function(t){function n(){}function o(){var t=o,n=+new Date,s=n-(r||n);t.diff=s,t.prev=r,t.curr=n,r=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=e.colors[i++%e.colors.length]);var a=Array.prototype.slice.call(arguments);a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var u=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;u++;var i=e.formatters[r];if("function"==typeof i){var o=a[u];n=i.call(t,o),a.splice(u,1),u--}return n}),"function"==typeof e.formatArgs&&(a=e.formatArgs.apply(t,a));var l=o.log||e.log||console.log.bind(console);l.apply(t,a)}n.enabled=!1,o.enabled=!0;var s=e.enabled(t)?o:n;return s.namespace=t,s}).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(183),e.names=[],e.skips=[],e.formatters={};var r,i=0},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){var n=1e3,r=60*n,i=60*r,o=24*i,s=365.25*o;function a(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){return e=e||{},"string"==typeof t?function(t){if((t=""+t).length>1e4)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a}}(t):e.long?function(t){return a(t,o,"day")||a(t,i,"hour")||a(t,r,"minute")||a(t,n,"second")||t+" ms"}(t):function(t){return t>=o?Math.round(t/o)+"d":t>=i?Math.round(t/i)+"h":t>=r?Math.round(t/r)+"m":t>=n?Math.round(t/n)+"s":t+"ms"}(t)}},function(t,e){t.exports=function(t,e){for(var n=[],r=(e=e||0)||0;r<t.length;r++)n[r-e]=t[r];return n}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){(function(t,r){var i;/*! https://mths.be/wtf8 v1.0.0 by @mathias */!function(o){var s="object"==typeof e&&e,a=("object"==typeof t&&t&&t.exports,"object"==typeof r&&r);a.global!==a&&a.window;var u,l,c,h=String.fromCharCode;function f(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function p(t,e){return h(t>>e&63|128)}function d(t){if(0==(4294967168&t))return h(t);var e="";return 0==(4294965248&t)?e=h(t>>6&31|192):0==(4294901760&t)?(e=h(t>>12&15|224),e+=p(t,6)):0==(4292870144&t)&&(e=h(t>>18&7|240),e+=p(t,12),e+=p(t,6)),e+=h(63&t|128)}function y(){if(c>=l)throw Error("Invalid byte index");var t=255&u[c];if(c++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function _(){var t,e;if(c>l)throw Error("Invalid byte index");if(c==l)return!1;if(t=255&u[c],c++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|y())>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|y()<<6|y())>=2048)return e;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=(15&t)<<18|y()<<12|y()<<6|y())>=65536&&e<=1114111)return e;throw Error("Invalid WTF-8 detected")}var v={version:"1.0.0",encode:function(t){for(var e=f(t),n=e.length,r=-1,i="";++r<n;)i+=d(e[r]);return i},decode:function(t){u=f(t),l=u.length,c=0;for(var e,n=[];!1!==(e=_());)n.push(e);return function(t){for(var e,n=t.length,r=-1,i="";++r<n;)(e=t[r])>65535&&(i+=h((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=h(e);return i}(n)}};void 0===(i=function(){return v}.call(e,n,e,t))||(t.exports=i)}()}).call(e,n(31)(t),n(1))},function(t,e){},,function(t,e,n){(function(t,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o,s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",f=1,p=2,d=4,y=1,_=2,v=1,m=2,g=4,b=8,x=16,w=32,T=64,S=128,E=256,O=512,A=30,M="...",P=800,C=16,k=1,R=2,I=1/0,D=9007199254740991,L=1.7976931348623157e308,F=NaN,N=4294967295,j=N-1,B=N>>>1,U=[["ary",S],["bind",v],["bindKey",m],["curry",b],["curryRight",x],["flip",O],["partial",w],["partialRight",T],["rearg",E]],q="[object Arguments]",V="[object Array]",G="[object AsyncFunction]",X="[object Boolean]",H="[object Date]",W="[object DOMException]",z="[object Error]",Y="[object Function]",$="[object GeneratorFunction]",Z="[object Map]",K="[object Number]",Q="[object Null]",J="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",rt="[object String]",it="[object Symbol]",ot="[object Undefined]",st="[object WeakMap]",at="[object WeakSet]",ut="[object ArrayBuffer]",lt="[object DataView]",ct="[object Float32Array]",ht="[object Float64Array]",ft="[object Int8Array]",pt="[object Int16Array]",dt="[object Int32Array]",yt="[object Uint8Array]",_t="[object Uint8ClampedArray]",vt="[object Uint16Array]",mt="[object Uint32Array]",gt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,xt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wt=/&(?:amp|lt|gt|quot|#39);/g,Tt=/[&<>"']/g,St=RegExp(wt.source),Et=RegExp(Tt.source),Ot=/<%-([\s\S]+?)%>/g,At=/<%([\s\S]+?)%>/g,Mt=/<%=([\s\S]+?)%>/g,Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ct=/^\w*$/,kt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rt=/[\\^$.*+?()[\]{}|]/g,It=RegExp(Rt.source),Dt=/^\s+|\s+$/g,Lt=/^\s+/,Ft=/\s+$/,Nt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jt=/\{\n\/\* \[wrapped with (.+)\] \*/,Bt=/,? & /,Ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/\\(\\)?/g,Vt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gt=/\w*$/,Xt=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,zt=/^0o[0-7]+$/i,Yt=/^(?:0|[1-9]\d*)$/,$t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zt=/($^)/,Kt=/['\n\r\u2028\u2029\\]/g,Qt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Jt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+Jt+"]",ne="["+Qt+"]",re="\\d+",ie="[\\u2700-\\u27bf]",oe="[a-z\\xdf-\\xf6\\xf8-\\xff]",se="[^\\ud800-\\udfff"+Jt+re+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ae="\\ud83c[\\udffb-\\udfff]",ue="[^\\ud800-\\udfff]",le="(?:\\ud83c[\\udde6-\\uddff]){2}",ce="[\\ud800-\\udbff][\\udc00-\\udfff]",he="[A-Z\\xc0-\\xd6\\xd8-\\xde]",fe="(?:"+oe+"|"+se+")",pe="(?:"+he+"|"+se+")",de="(?:"+ne+"|"+ae+")"+"?",ye="[\\ufe0e\\ufe0f]?"+de+("(?:\\u200d(?:"+[ue,le,ce].join("|")+")[\\ufe0e\\ufe0f]?"+de+")*"),_e="(?:"+[ie,le,ce].join("|")+")"+ye,ve="(?:"+[ue+ne+"?",ne,le,ce,te].join("|")+")",me=RegExp("['’]","g"),ge=RegExp(ne,"g"),be=RegExp(ae+"(?="+ae+")|"+ve+ye,"g"),xe=RegExp([he+"?"+oe+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ee,he,"$"].join("|")+")",pe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ee,he+fe,"$"].join("|")+")",he+"?"+fe+"+(?:['’](?:d|ll|m|re|s|t|ve))?",he+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",re,_e].join("|"),"g"),we=RegExp("[\\u200d\\ud800-\\udfff"+Qt+"\\ufe0e\\ufe0f]"),Te=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Se=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ee=-1,Oe={};Oe[ct]=Oe[ht]=Oe[ft]=Oe[pt]=Oe[dt]=Oe[yt]=Oe[_t]=Oe[vt]=Oe[mt]=!0,Oe[q]=Oe[V]=Oe[ut]=Oe[X]=Oe[lt]=Oe[H]=Oe[z]=Oe[Y]=Oe[Z]=Oe[K]=Oe[J]=Oe[et]=Oe[nt]=Oe[rt]=Oe[st]=!1;var Ae={};Ae[q]=Ae[V]=Ae[ut]=Ae[lt]=Ae[X]=Ae[H]=Ae[ct]=Ae[ht]=Ae[ft]=Ae[pt]=Ae[dt]=Ae[Z]=Ae[K]=Ae[J]=Ae[et]=Ae[nt]=Ae[rt]=Ae[it]=Ae[yt]=Ae[_t]=Ae[vt]=Ae[mt]=!0,Ae[z]=Ae[Y]=Ae[st]=!1;var Me={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pe=parseFloat,Ce=parseInt,ke="object"==typeof t&&t&&t.Object===Object&&t,Re="object"==typeof self&&self&&self.Object===Object&&self,Ie=ke||Re||Function("return this")(),De="object"==typeof e&&e&&!e.nodeType&&e,Le=De&&"object"==typeof r&&r&&!r.nodeType&&r,Fe=Le&&Le.exports===De,Ne=Fe&&ke.process,je=function(){try{var t=Le&&Le.require&&Le.require("util").types;return t||Ne&&Ne.binding&&Ne.binding("util")}catch(t){}}(),Be=je&&je.isArrayBuffer,Ue=je&&je.isDate,qe=je&&je.isMap,Ve=je&&je.isRegExp,Ge=je&&je.isSet,Xe=je&&je.isTypedArray;function He(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function We(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function ze(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ye(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function $e(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ze(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Ke(t,e){return!!(null==t?0:t.length)&&un(t,e,0)>-1}function Qe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Je(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function tn(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function en(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function nn(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function rn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var on=fn("length");function sn(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function an(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function un(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):an(t,cn,n)}function ln(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function cn(t){return t!=t}function hn(t,e){var n=null==t?0:t.length;return n?yn(t,e)/n:F}function fn(t){return function(e){return null==e?o:e[t]}}function pn(t){return function(e){return null==t?o:t[e]}}function dn(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function yn(t,e){for(var n,r=-1,i=t.length;++r<i;){var s=e(t[r]);s!==o&&(n=n===o?s:n+s)}return n}function _n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function vn(t){return function(e){return t(e)}}function mn(t,e){return Je(e,function(e){return t[e]})}function gn(t,e){return t.has(e)}function bn(t,e){for(var n=-1,r=t.length;++n<r&&un(e,t[n],0)>-1;);return n}function xn(t,e){for(var n=t.length;n--&&un(e,t[n],0)>-1;);return n}var wn=pn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Tn=pn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Sn(t){return"\\"+Me[t]}function En(t){return we.test(t)}function On(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function An(t,e){return function(n){return t(e(n))}}function Mn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==h||(t[n]=h,o[i++]=n)}return o}function Pn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Cn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function kn(t){return En(t)?function(t){var e=be.lastIndex=0;for(;be.test(t);)++e;return e}(t):on(t)}function Rn(t){return En(t)?function(t){return t.match(be)||[]}(t):function(t){return t.split("")}(t)}var In=pn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Dn=function t(e){var n=(e=null==e?Ie:Dn.defaults(Ie.Object(),e,Dn.pick(Ie,Se))).Array,r=e.Date,i=e.Error,Qt=e.Function,Jt=e.Math,te=e.Object,ee=e.RegExp,ne=e.String,re=e.TypeError,ie=n.prototype,oe=Qt.prototype,se=te.prototype,ae=e["__core-js_shared__"],ue=oe.toString,le=se.hasOwnProperty,ce=0,he=function(){var t=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),fe=se.toString,pe=ue.call(te),de=Ie._,ye=ee("^"+ue.call(le).replace(Rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=Fe?e.Buffer:o,ve=e.Symbol,be=e.Uint8Array,we=_e?_e.allocUnsafe:o,Me=An(te.getPrototypeOf,te),ke=te.create,Re=se.propertyIsEnumerable,De=ie.splice,Le=ve?ve.isConcatSpreadable:o,Ne=ve?ve.iterator:o,je=ve?ve.toStringTag:o,on=function(){try{var t=jo(te,"defineProperty");return t({},"",{}),t}catch(t){}}(),pn=e.clearTimeout!==Ie.clearTimeout&&e.clearTimeout,Ln=r&&r.now!==Ie.Date.now&&r.now,Fn=e.setTimeout!==Ie.setTimeout&&e.setTimeout,Nn=Jt.ceil,jn=Jt.floor,Bn=te.getOwnPropertySymbols,Un=_e?_e.isBuffer:o,qn=e.isFinite,Vn=ie.join,Gn=An(te.keys,te),Xn=Jt.max,Hn=Jt.min,Wn=r.now,zn=e.parseInt,Yn=Jt.random,$n=ie.reverse,Zn=jo(e,"DataView"),Kn=jo(e,"Map"),Qn=jo(e,"Promise"),Jn=jo(e,"Set"),tr=jo(e,"WeakMap"),er=jo(te,"create"),nr=tr&&new tr,rr={},ir=cs(Zn),or=cs(Kn),sr=cs(Qn),ar=cs(Jn),ur=cs(tr),lr=ve?ve.prototype:o,cr=lr?lr.valueOf:o,hr=lr?lr.toString:o;function fr(t){if(Aa(t)&&!_a(t)&&!(t instanceof _r)){if(t instanceof yr)return t;if(le.call(t,"__wrapped__"))return hs(t)}return new yr(t)}var pr=function(){function t(){}return function(e){if(!Oa(e))return{};if(ke)return ke(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function dr(){}function yr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function _r(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=N,this.__views__=[]}function vr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function mr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function gr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function br(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new gr;++e<n;)this.add(t[e])}function xr(t){var e=this.__data__=new mr(t);this.size=e.size}function wr(t,e){var n=_a(t),r=!n&&ya(t),i=!n&&!r&&ba(t),o=!n&&!r&&!i&&La(t),s=n||r||i||o,a=s?_n(t.length,ne):[],u=a.length;for(var l in t)!e&&!le.call(t,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ho(l,u))||a.push(l);return a}function Tr(t){var e=t.length;return e?t[bi(0,e-1)]:o}function Sr(t,e){return as(eo(t),Ir(e,0,t.length))}function Er(t){return as(eo(t))}function Or(t,e,n){(n===o||fa(t[e],n))&&(n!==o||e in t)||kr(t,e,n)}function Ar(t,e,n){var r=t[e];le.call(t,e)&&fa(r,n)&&(n!==o||e in t)||kr(t,e,n)}function Mr(t,e){for(var n=t.length;n--;)if(fa(t[n][0],e))return n;return-1}function Pr(t,e,n,r){return jr(t,function(t,i,o){e(r,t,n(t),o)}),r}function Cr(t,e){return t&&no(e,ru(e),t)}function kr(t,e,n){"__proto__"==e&&on?on(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Rr(t,e){for(var r=-1,i=e.length,s=n(i),a=null==t;++r<i;)s[r]=a?o:Qa(t,e[r]);return s}function Ir(t,e,n){return t==t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function Dr(t,e,n,r,i,s){var a,u=e&f,l=e&p,c=e&d;if(n&&(a=i?n(t,r,i,s):n(t)),a!==o)return a;if(!Oa(t))return t;var h=_a(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&le.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return eo(t,a)}else{var y=qo(t),_=y==Y||y==$;if(ba(t))return $i(t,u);if(y==J||y==q||_&&!i){if(a=l||_?{}:Go(t),!u)return l?function(t,e){return no(t,Uo(t),e)}(t,function(t,e){return t&&no(e,iu(e),t)}(a,t)):function(t,e){return no(t,Bo(t),e)}(t,Cr(a,t))}else{if(!Ae[y])return i?t:{};a=function(t,e,n){var r=t.constructor;switch(e){case ut:return Zi(t);case X:case H:return new r(+t);case lt:return function(t,e){var n=e?Zi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ct:case ht:case ft:case pt:case dt:case yt:case _t:case vt:case mt:return Ki(t,n);case Z:return new r;case K:case rt:return new r(t);case et:return function(t){var e=new t.constructor(t.source,Gt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case nt:return new r;case it:return function(t){return cr?te(cr.call(t)):{}}(t)}}(t,y,u)}}s||(s=new xr);var v=s.get(t);if(v)return v;s.set(t,a),Ra(t)?t.forEach(function(r){a.add(Dr(r,e,n,r,t,s))}):Ma(t)&&t.forEach(function(r,i){a.set(i,Dr(r,e,n,i,t,s))});var m=h?o:(c?l?ko:Co:l?iu:ru)(t);return ze(m||t,function(r,i){m&&(r=t[i=r]),Ar(a,i,Dr(r,e,n,i,t,s))}),a}function Lr(t,e,n){var r=n.length;if(null==t)return!r;for(t=te(t);r--;){var i=n[r],s=e[i],a=t[i];if(a===o&&!(i in t)||!s(a))return!1}return!0}function Fr(t,e,n){if("function"!=typeof t)throw new re(u);return rs(function(){t.apply(o,n)},e)}function Nr(t,e,n,r){var i=-1,o=Ke,a=!0,u=t.length,l=[],c=e.length;if(!u)return l;n&&(e=Je(e,vn(n))),r?(o=Qe,a=!1):e.length>=s&&(o=gn,a=!1,e=new br(e));t:for(;++i<u;){var h=t[i],f=null==n?h:n(h);if(h=r||0!==h?h:0,a&&f==f){for(var p=c;p--;)if(e[p]===f)continue t;l.push(h)}else o(e,f,r)||l.push(h)}return l}fr.templateSettings={escape:Ot,evaluate:At,interpolate:Mt,variable:"",imports:{_:fr}},fr.prototype=dr.prototype,fr.prototype.constructor=fr,yr.prototype=pr(dr.prototype),yr.prototype.constructor=yr,_r.prototype=pr(dr.prototype),_r.prototype.constructor=_r,vr.prototype.clear=function(){this.__data__=er?er(null):{},this.size=0},vr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},vr.prototype.get=function(t){var e=this.__data__;if(er){var n=e[t];return n===l?o:n}return le.call(e,t)?e[t]:o},vr.prototype.has=function(t){var e=this.__data__;return er?e[t]!==o:le.call(e,t)},vr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=er&&e===o?l:e,this},mr.prototype.clear=function(){this.__data__=[],this.size=0},mr.prototype.delete=function(t){var e=this.__data__,n=Mr(e,t);return!(n<0||(n==e.length-1?e.pop():De.call(e,n,1),--this.size,0))},mr.prototype.get=function(t){var e=this.__data__,n=Mr(e,t);return n<0?o:e[n][1]},mr.prototype.has=function(t){return Mr(this.__data__,t)>-1},mr.prototype.set=function(t,e){var n=this.__data__,r=Mr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},gr.prototype.clear=function(){this.size=0,this.__data__={hash:new vr,map:new(Kn||mr),string:new vr}},gr.prototype.delete=function(t){var e=Fo(this,t).delete(t);return this.size-=e?1:0,e},gr.prototype.get=function(t){return Fo(this,t).get(t)},gr.prototype.has=function(t){return Fo(this,t).has(t)},gr.prototype.set=function(t,e){var n=Fo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},br.prototype.add=br.prototype.push=function(t){return this.__data__.set(t,l),this},br.prototype.has=function(t){return this.__data__.has(t)},xr.prototype.clear=function(){this.__data__=new mr,this.size=0},xr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},xr.prototype.get=function(t){return this.__data__.get(t)},xr.prototype.has=function(t){return this.__data__.has(t)},xr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof mr){var r=n.__data__;if(!Kn||r.length<s-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new gr(r)}return n.set(t,e),this.size=n.size,this};var jr=oo(Wr),Br=oo(zr,!0);function Ur(t,e){var n=!0;return jr(t,function(t,r,i){return n=!!e(t,r,i)}),n}function qr(t,e,n){for(var r=-1,i=t.length;++r<i;){var s=t[r],a=e(s);if(null!=a&&(u===o?a==a&&!Da(a):n(a,u)))var u=a,l=s}return l}function Vr(t,e){var n=[];return jr(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Gr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=Xo),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?Gr(a,e-1,n,r,i):tn(i,a):r||(i[i.length]=a)}return i}var Xr=so(),Hr=so(!0);function Wr(t,e){return t&&Xr(t,e,ru)}function zr(t,e){return t&&Hr(t,e,ru)}function Yr(t,e){return Ze(e,function(e){return Ta(t[e])})}function $r(t,e){for(var n=0,r=(e=Hi(e,t)).length;null!=t&&n<r;)t=t[ls(e[n++])];return n&&n==r?t:o}function Zr(t,e,n){var r=e(t);return _a(t)?r:tn(r,n(t))}function Kr(t){return null==t?t===o?ot:Q:je&&je in te(t)?function(t){var e=le.call(t,je),n=t[je];try{t[je]=o;var r=!0}catch(t){}var i=fe.call(t);return r&&(e?t[je]=n:delete t[je]),i}(t):function(t){return fe.call(t)}(t)}function Qr(t,e){return t>e}function Jr(t,e){return null!=t&&le.call(t,e)}function ti(t,e){return null!=t&&e in te(t)}function ei(t,e,r){for(var i=r?Qe:Ke,s=t[0].length,a=t.length,u=a,l=n(a),c=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Je(f,vn(e))),c=Hn(f.length,c),l[u]=!r&&(e||s>=120&&f.length>=120)?new br(u&&f):o}f=t[0];var p=-1,d=l[0];t:for(;++p<s&&h.length<c;){var y=f[p],_=e?e(y):y;if(y=r||0!==y?y:0,!(d?gn(d,_):i(h,_,r))){for(u=a;--u;){var v=l[u];if(!(v?gn(v,_):i(t[u],_,r)))continue t}d&&d.push(_),h.push(y)}}return h}function ni(t,e,n){var r=null==(t=ts(t,e=Hi(e,t)))?t:t[ls(ws(e))];return null==r?o:He(r,t,n)}function ri(t){return Aa(t)&&Kr(t)==q}function ii(t,e,n,r,i){return t===e||(null==t||null==e||!Aa(t)&&!Aa(e)?t!=t&&e!=e:function(t,e,n,r,i,s){var a=_a(t),u=_a(e),l=a?V:qo(t),c=u?V:qo(e),h=(l=l==q?J:l)==J,f=(c=c==q?J:c)==J,p=l==c;if(p&&ba(t)){if(!ba(e))return!1;a=!0,h=!1}if(p&&!h)return s||(s=new xr),a||La(t)?Mo(t,e,n,r,i,s):function(t,e,n,r,i,o,s){switch(n){case lt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ut:return!(t.byteLength!=e.byteLength||!o(new be(t),new be(e)));case X:case H:case K:return fa(+t,+e);case z:return t.name==e.name&&t.message==e.message;case et:case rt:return t==e+"";case Z:var a=On;case nt:var u=r&y;if(a||(a=Pn),t.size!=e.size&&!u)return!1;var l=s.get(t);if(l)return l==e;r|=_,s.set(t,e);var c=Mo(a(t),a(e),r,i,o,s);return s.delete(t),c;case it:if(cr)return cr.call(t)==cr.call(e)}return!1}(t,e,l,n,r,i,s);if(!(n&y)){var d=h&&le.call(t,"__wrapped__"),v=f&&le.call(e,"__wrapped__");if(d||v){var m=d?t.value():t,g=v?e.value():e;return s||(s=new xr),i(m,g,n,r,s)}}return!!p&&(s||(s=new xr),function(t,e,n,r,i,s){var a=n&y,u=Co(t),l=u.length,c=Co(e).length;if(l!=c&&!a)return!1;for(var h=l;h--;){var f=u[h];if(!(a?f in e:le.call(e,f)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var d=!0;s.set(t,e),s.set(e,t);for(var _=a;++h<l;){f=u[h];var v=t[f],m=e[f];if(r)var g=a?r(m,v,f,e,t,s):r(v,m,f,t,e,s);if(!(g===o?v===m||i(v,m,n,r,s):g)){d=!1;break}_||(_="constructor"==f)}if(d&&!_){var b=t.constructor,x=e.constructor;b!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x)&&(d=!1)}return s.delete(t),s.delete(e),d}(t,e,n,r,i,s))}(t,e,n,r,ii,i))}function oi(t,e,n,r){var i=n.length,s=i,a=!r;if(null==t)return!s;for(t=te(t);i--;){var u=n[i];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<s;){var l=(u=n[i])[0],c=t[l],h=u[1];if(a&&u[2]){if(c===o&&!(l in t))return!1}else{var f=new xr;if(r)var p=r(c,h,l,t,e,f);if(!(p===o?ii(h,c,y|_,r,f):p))return!1}}return!0}function si(t){return!(!Oa(t)||function(t){return!!he&&he in t}(t))&&(Ta(t)?ye:Wt).test(cs(t))}function ai(t){return"function"==typeof t?t:null==t?Pu:"object"==typeof t?_a(t)?pi(t[0],t[1]):fi(t):ju(t)}function ui(t){if(!Zo(t))return Gn(t);var e=[];for(var n in te(t))le.call(t,n)&&"constructor"!=n&&e.push(n);return e}function li(t){if(!Oa(t))return function(t){var e=[];if(null!=t)for(var n in te(t))e.push(n);return e}(t);var e=Zo(t),n=[];for(var r in t)("constructor"!=r||!e&&le.call(t,r))&&n.push(r);return n}function ci(t,e){return t<e}function hi(t,e){var r=-1,i=ma(t)?n(t.length):[];return jr(t,function(t,n,o){i[++r]=e(t,n,o)}),i}function fi(t){var e=No(t);return 1==e.length&&e[0][2]?Qo(e[0][0],e[0][1]):function(n){return n===t||oi(n,t,e)}}function pi(t,e){return zo(t)&&Ko(e)?Qo(ls(t),e):function(n){var r=Qa(n,t);return r===o&&r===e?Ja(n,t):ii(e,r,y|_)}}function di(t,e,n,r,i){t!==e&&Xr(e,function(s,a){if(i||(i=new xr),Oa(s))!function(t,e,n,r,i,s,a){var u=es(t,n),l=es(e,n),c=a.get(l);if(c)Or(t,n,c);else{var h=s?s(u,l,n+"",t,e,a):o,f=h===o;if(f){var p=_a(l),d=!p&&ba(l),y=!p&&!d&&La(l);h=l,p||d||y?_a(u)?h=u:ga(u)?h=eo(u):d?(f=!1,h=$i(l,!0)):y?(f=!1,h=Ki(l,!0)):h=[]:Ca(l)||ya(l)?(h=u,ya(u)?h=Ga(u):Oa(u)&&!Ta(u)||(h=Go(l))):f=!1}f&&(a.set(l,h),i(h,l,r,s,a),a.delete(l)),Or(t,n,h)}}(t,e,a,n,di,r,i);else{var u=r?r(es(t,a),s,a+"",t,e,i):o;u===o&&(u=s),Or(t,a,u)}},iu)}function yi(t,e){var n=t.length;if(n)return Ho(e+=e<0?n:0,n)?t[e]:o}function _i(t,e,n){var r=-1;return e=Je(e.length?e:[Pu],vn(Lo())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(hi(t,function(t,n,i){return{criteria:Je(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u=Qi(i[r],o[r]);if(u){if(r>=a)return u;var l=n[r];return u*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)})}function vi(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=$r(t,s);n(a,s)&&Ei(o,Hi(s,t),a)}return o}function mi(t,e,n,r){var i=r?ln:un,o=-1,s=e.length,a=t;for(t===e&&(e=eo(e)),n&&(a=Je(t,vn(n)));++o<s;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(a,c,u,r))>-1;)a!==t&&De.call(a,u,1),De.call(t,u,1);return t}function gi(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Ho(i)?De.call(t,i,1):Ni(t,i)}}return t}function bi(t,e){return t+jn(Yn()*(e-t+1))}function xi(t,e){var n="";if(!t||e<1||e>D)return n;do{e%2&&(n+=t),(e=jn(e/2))&&(t+=t)}while(e);return n}function wi(t,e){return is(Jo(t,e,Pu),t+"")}function Ti(t){return Tr(fu(t))}function Si(t,e){var n=fu(t);return as(n,Ir(e,0,n.length))}function Ei(t,e,n,r){if(!Oa(t))return t;for(var i=-1,s=(e=Hi(e,t)).length,a=s-1,u=t;null!=u&&++i<s;){var l=ls(e[i]),c=n;if(i!=a){var h=u[l];(c=r?r(h,l,u):o)===o&&(c=Oa(h)?h:Ho(e[i+1])?[]:{})}Ar(u,l,c),u=u[l]}return t}var Oi=nr?function(t,e){return nr.set(t,e),t}:Pu,Ai=on?function(t,e){return on(t,"toString",{configurable:!0,enumerable:!1,value:Ou(e),writable:!0})}:Pu;function Mi(t){return as(fu(t))}function Pi(t,e,r){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var s=n(o);++i<o;)s[i]=t[i+e];return s}function Ci(t,e){var n;return jr(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function ki(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=B){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!Da(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return Ri(t,e,Pu,n)}function Ri(t,e,n,r){e=n(e);for(var i=0,s=null==t?0:t.length,a=e!=e,u=null===e,l=Da(e),c=e===o;i<s;){var h=jn((i+s)/2),f=n(t[h]),p=f!==o,d=null===f,y=f==f,_=Da(f);if(a)var v=r||y;else v=c?y&&(r||p):u?y&&p&&(r||!d):l?y&&p&&!d&&(r||!_):!d&&!_&&(r?f<=e:f<e);v?i=h+1:s=h}return Hn(s,j)}function Ii(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!fa(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function Di(t){return"number"==typeof t?t:Da(t)?F:+t}function Li(t){if("string"==typeof t)return t;if(_a(t))return Je(t,Li)+"";if(Da(t))return hr?hr.call(t):"";var e=t+"";return"0"==e&&1/t==-I?"-0":e}function Fi(t,e,n){var r=-1,i=Ke,o=t.length,a=!0,u=[],l=u;if(n)a=!1,i=Qe;else if(o>=s){var c=e?null:wo(t);if(c)return Pn(c);a=!1,i=gn,l=new br}else l=e?[]:u;t:for(;++r<o;){var h=t[r],f=e?e(h):h;if(h=n||0!==h?h:0,a&&f==f){for(var p=l.length;p--;)if(l[p]===f)continue t;e&&l.push(f),u.push(h)}else i(l,f,n)||(l!==u&&l.push(f),u.push(h))}return u}function Ni(t,e){return null==(t=ts(t,e=Hi(e,t)))||delete t[ls(ws(e))]}function ji(t,e,n,r){return Ei(t,e,n($r(t,e)),r)}function Bi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Pi(t,r?0:o,r?o+1:i):Pi(t,r?o+1:0,r?i:o)}function Ui(t,e){var n=t;return n instanceof _r&&(n=n.value()),en(e,function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))},n)}function qi(t,e,r){var i=t.length;if(i<2)return i?Fi(t[0]):[];for(var o=-1,s=n(i);++o<i;)for(var a=t[o],u=-1;++u<i;)u!=o&&(s[o]=Nr(s[o]||a,t[u],e,r));return Fi(Gr(s,1),e,r)}function Vi(t,e,n){for(var r=-1,i=t.length,s=e.length,a={};++r<i;){var u=r<s?e[r]:o;n(a,t[r],u)}return a}function Gi(t){return ga(t)?t:[]}function Xi(t){return"function"==typeof t?t:Pu}function Hi(t,e){return _a(t)?t:zo(t,e)?[t]:us(Xa(t))}var Wi=wi;function zi(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:Pi(t,e,n)}var Yi=pn||function(t){return Ie.clearTimeout(t)};function $i(t,e){if(e)return t.slice();var n=t.length,r=we?we(n):new t.constructor(n);return t.copy(r),r}function Zi(t){var e=new t.constructor(t.byteLength);return new be(e).set(new be(t)),e}function Ki(t,e){var n=e?Zi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Qi(t,e){if(t!==e){var n=t!==o,r=null===t,i=t==t,s=Da(t),a=e!==o,u=null===e,l=e==e,c=Da(e);if(!u&&!c&&!s&&t>e||s&&a&&l&&!u&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!s&&!c&&t<e||c&&n&&i&&!r&&!s||u&&n&&i||!a&&i||!l)return-1}return 0}function Ji(t,e,r,i){for(var o=-1,s=t.length,a=r.length,u=-1,l=e.length,c=Xn(s-a,0),h=n(l+c),f=!i;++u<l;)h[u]=e[u];for(;++o<a;)(f||o<s)&&(h[r[o]]=t[o]);for(;c--;)h[u++]=t[o++];return h}function to(t,e,r,i){for(var o=-1,s=t.length,a=-1,u=r.length,l=-1,c=e.length,h=Xn(s-u,0),f=n(h+c),p=!i;++o<h;)f[o]=t[o];for(var d=o;++l<c;)f[d+l]=e[l];for(;++a<u;)(p||o<s)&&(f[d+r[a]]=t[o++]);return f}function eo(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function no(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var u=e[s],l=r?r(n[u],t[u],u,n,t):o;l===o&&(l=t[u]),i?kr(n,u,l):Ar(n,u,l)}return n}function ro(t,e){return function(n,r){var i=_a(n)?We:Pr,o=e?e():{};return i(n,t,Lo(r,2),o)}}function io(t){return wi(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:o,a=i>2?n[2]:o;for(s=t.length>3&&"function"==typeof s?(i--,s):o,a&&Wo(n[0],n[1],a)&&(s=i<3?o:s,i=1),e=te(e);++r<i;){var u=n[r];u&&t(e,u,r,s)}return e})}function oo(t,e){return function(n,r){if(null==n)return n;if(!ma(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=te(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function so(t){return function(e,n,r){for(var i=-1,o=te(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}function ao(t){return function(e){var n=En(e=Xa(e))?Rn(e):o,r=n?n[0]:e.charAt(0),i=n?zi(n,1).join(""):e.slice(1);return r[t]()+i}}function uo(t){return function(e){return en(Tu(yu(e).replace(me,"")),t,"")}}function lo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=pr(t.prototype),r=t.apply(n,e);return Oa(r)?r:n}}function co(t){return function(e,n,r){var i=te(e);if(!ma(e)){var s=Lo(n,3);e=ru(e),n=function(t){return s(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[s?e[a]:a]:o}}function ho(t){return Po(function(e){var n=e.length,r=n,i=yr.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new re(u);if(i&&!a&&"wrapper"==Io(s))var a=new yr([],!0)}for(r=a?r:n;++r<n;){var l=Io(s=e[r]),c="wrapper"==l?Ro(s):o;a=c&&Yo(c[0])&&c[1]==(S|b|w|E)&&!c[4].length&&1==c[9]?a[Io(c[0])].apply(a,c[3]):1==s.length&&Yo(s)?a[l]():a.thru(s)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&_a(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function fo(t,e,r,i,s,a,u,l,c,h){var f=e&S,p=e&v,d=e&m,y=e&(b|x),_=e&O,g=d?o:lo(t);return function v(){for(var m=arguments.length,b=n(m),x=m;x--;)b[x]=arguments[x];if(y)var w=Do(v),T=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(b,w);if(i&&(b=Ji(b,i,s,y)),a&&(b=to(b,a,u,y)),m-=T,y&&m<h){var S=Mn(b,w);return bo(t,e,fo,v.placeholder,r,b,S,l,c,h-m)}var E=p?r:this,O=d?E[t]:t;return m=b.length,l?b=function(t,e){for(var n=t.length,r=Hn(e.length,n),i=eo(t);r--;){var s=e[r];t[r]=Ho(s,n)?i[s]:o}return t}(b,l):_&&m>1&&b.reverse(),f&&c<m&&(b.length=c),this&&this!==Ie&&this instanceof v&&(O=g||lo(O)),O.apply(E,b)}}function po(t,e){return function(n,r){return function(t,e,n,r){return Wr(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function yo(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=Li(n),r=Li(r)):(n=Di(n),r=Di(r)),i=t(n,r)}return i}}function _o(t){return Po(function(e){return e=Je(e,vn(Lo())),wi(function(n){var r=this;return t(e,function(t){return He(t,r,n)})})})}function vo(t,e){var n=(e=e===o?" ":Li(e)).length;if(n<2)return n?xi(e,t):e;var r=xi(e,Nn(t/kn(e)));return En(e)?zi(Rn(r),0,t).join(""):r.slice(0,t)}function mo(t){return function(e,r,i){return i&&"number"!=typeof i&&Wo(e,r,i)&&(r=i=o),e=Ba(e),r===o?(r=e,e=0):r=Ba(r),function(t,e,r,i){for(var o=-1,s=Xn(Nn((e-t)/(r||1)),0),a=n(s);s--;)a[i?s:++o]=t,t+=r;return a}(e,r,i=i===o?e<r?1:-1:Ba(i),t)}}function go(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Va(e),n=Va(n)),t(e,n)}}function bo(t,e,n,r,i,s,a,u,l,c){var h=e&b;e|=h?w:T,(e&=~(h?T:w))&g||(e&=~(v|m));var f=[t,e,i,h?s:o,h?a:o,h?o:s,h?o:a,u,l,c],p=n.apply(o,f);return Yo(t)&&ns(p,f),p.placeholder=r,os(p,t,e)}function xo(t){var e=Jt[t];return function(t,n){if(t=Va(t),(n=null==n?0:Hn(Ua(n),292))&&qn(t)){var r=(Xa(t)+"e").split("e");return+((r=(Xa(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var wo=Jn&&1/Pn(new Jn([,-0]))[1]==I?function(t){return new Jn(t)}:Du;function To(t){return function(e){var n=qo(e);return n==Z?On(e):n==nt?Cn(e):function(t,e){return Je(e,function(e){return[e,t[e]]})}(e,t(e))}}function So(t,e,r,i,s,a,l,c){var f=e&m;if(!f&&"function"!=typeof t)throw new re(u);var p=i?i.length:0;if(p||(e&=~(w|T),i=s=o),l=l===o?l:Xn(Ua(l),0),c=c===o?c:Ua(c),p-=s?s.length:0,e&T){var d=i,y=s;i=s=o}var _=f?o:Ro(t),O=[t,e,r,i,s,d,y,a,l,c];if(_&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<(v|m|S),s=r==S&&n==b||r==S&&n==E&&t[7].length<=e[8]||r==(S|E)&&e[7].length<=e[8]&&n==b;if(!o&&!s)return t;r&v&&(t[2]=e[2],i|=n&v?0:g);var a=e[3];if(a){var u=t[3];t[3]=u?Ji(u,a,e[4]):a,t[4]=u?Mn(t[3],h):e[4]}(a=e[5])&&(u=t[5],t[5]=u?to(u,a,e[6]):a,t[6]=u?Mn(t[5],h):e[6]),(a=e[7])&&(t[7]=a),r&S&&(t[8]=null==t[8]?e[8]:Hn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(O,_),t=O[0],e=O[1],r=O[2],i=O[3],s=O[4],!(c=O[9]=O[9]===o?f?0:t.length:Xn(O[9]-p,0))&&e&(b|x)&&(e&=~(b|x)),e&&e!=v)A=e==b||e==x?function(t,e,r){var i=lo(t);return function s(){for(var a=arguments.length,u=n(a),l=a,c=Do(s);l--;)u[l]=arguments[l];var h=a<3&&u[0]!==c&&u[a-1]!==c?[]:Mn(u,c);return(a-=h.length)<r?bo(t,e,fo,s.placeholder,o,u,h,o,o,r-a):He(this&&this!==Ie&&this instanceof s?i:t,this,u)}}(t,e,c):e!=w&&e!=(v|w)||s.length?fo.apply(o,O):function(t,e,r,i){var o=e&v,s=lo(t);return function e(){for(var a=-1,u=arguments.length,l=-1,c=i.length,h=n(c+u),f=this&&this!==Ie&&this instanceof e?s:t;++l<c;)h[l]=i[l];for(;u--;)h[l++]=arguments[++a];return He(f,o?r:this,h)}}(t,e,r,i);else var A=function(t,e,n){var r=e&v,i=lo(t);return function e(){return(this&&this!==Ie&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,r);return os((_?Oi:ns)(A,O),t,e)}function Eo(t,e,n,r){return t===o||fa(t,se[n])&&!le.call(r,n)?e:t}function Oo(t,e,n,r,i,s){return Oa(t)&&Oa(e)&&(s.set(e,t),di(t,e,o,Oo,s),s.delete(e)),t}function Ao(t){return Ca(t)?o:t}function Mo(t,e,n,r,i,s){var a=n&y,u=t.length,l=e.length;if(u!=l&&!(a&&l>u))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var h=-1,f=!0,p=n&_?new br:o;for(s.set(t,e),s.set(e,t);++h<u;){var d=t[h],v=e[h];if(r)var m=a?r(v,d,h,e,t,s):r(d,v,h,t,e,s);if(m!==o){if(m)continue;f=!1;break}if(p){if(!rn(e,function(t,e){if(!gn(p,e)&&(d===t||i(d,t,n,r,s)))return p.push(e)})){f=!1;break}}else if(d!==v&&!i(d,v,n,r,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function Po(t){return is(Jo(t,o,vs),t+"")}function Co(t){return Zr(t,ru,Bo)}function ko(t){return Zr(t,iu,Uo)}var Ro=nr?function(t){return nr.get(t)}:Du;function Io(t){for(var e=t.name+"",n=rr[e],r=le.call(rr,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Do(t){return(le.call(fr,"placeholder")?fr:t).placeholder}function Lo(){var t=fr.iteratee||Cu;return t=t===Cu?ai:t,arguments.length?t(arguments[0],arguments[1]):t}function Fo(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function No(t){for(var e=ru(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ko(i)]}return e}function jo(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return si(n)?n:o}var Bo=Bn?function(t){return null==t?[]:(t=te(t),Ze(Bn(t),function(e){return Re.call(t,e)}))}:qu,Uo=Bn?function(t){for(var e=[];t;)tn(e,Bo(t)),t=Me(t);return e}:qu,qo=Kr;function Vo(t,e,n){for(var r=-1,i=(e=Hi(e,t)).length,o=!1;++r<i;){var s=ls(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ea(i)&&Ho(s,i)&&(_a(t)||ya(t))}function Go(t){return"function"!=typeof t.constructor||Zo(t)?{}:pr(Me(t))}function Xo(t){return _a(t)||ya(t)||!!(Le&&t&&t[Le])}function Ho(t,e){var n=typeof t;return!!(e=null==e?D:e)&&("number"==n||"symbol"!=n&&Yt.test(t))&&t>-1&&t%1==0&&t<e}function Wo(t,e,n){if(!Oa(n))return!1;var r=typeof e;return!!("number"==r?ma(n)&&Ho(e,n.length):"string"==r&&e in n)&&fa(n[e],t)}function zo(t,e){if(_a(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Da(t))||Ct.test(t)||!Pt.test(t)||null!=e&&t in te(e)}function Yo(t){var e=Io(t),n=fr[e];if("function"!=typeof n||!(e in _r.prototype))return!1;if(t===n)return!0;var r=Ro(n);return!!r&&t===r[0]}(Zn&&qo(new Zn(new ArrayBuffer(1)))!=lt||Kn&&qo(new Kn)!=Z||Qn&&"[object Promise]"!=qo(Qn.resolve())||Jn&&qo(new Jn)!=nt||tr&&qo(new tr)!=st)&&(qo=function(t){var e=Kr(t),n=e==J?t.constructor:o,r=n?cs(n):"";if(r)switch(r){case ir:return lt;case or:return Z;case sr:return"[object Promise]";case ar:return nt;case ur:return st}return e});var $o=ae?Ta:Vu;function Zo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||se)}function Ko(t){return t==t&&!Oa(t)}function Qo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==o||t in te(n))}}function Jo(t,e,r){return e=Xn(e===o?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=Xn(i.length-e,0),a=n(s);++o<s;)a[o]=i[e+o];o=-1;for(var u=n(e+1);++o<e;)u[o]=i[o];return u[e]=r(a),He(t,this,u)}}function ts(t,e){return e.length<2?t:$r(t,Pi(e,0,-1))}function es(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ns=ss(Oi),rs=Fn||function(t,e){return Ie.setTimeout(t,e)},is=ss(Ai);function os(t,e,n){var r=e+"";return is(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Nt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ze(U,function(n){var r="_."+n[0];e&n[1]&&!Ke(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(jt);return e?e[1].split(Bt):[]}(r),n)))}function ss(t){var e=0,n=0;return function(){var r=Wn(),i=C-(r-n);if(n=r,i>0){if(++e>=P)return arguments[0]}else e=0;return t.apply(o,arguments)}}function as(t,e){var n=-1,r=t.length,i=r-1;for(e=e===o?r:e;++n<e;){var s=bi(n,i),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var us=function(t){var e=sa(t,function(t){return n.size===c&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(kt,function(t,n,r,i){e.push(r?i.replace(qt,"$1"):n||t)}),e});function ls(t){if("string"==typeof t||Da(t))return t;var e=t+"";return"0"==e&&1/t==-I?"-0":e}function cs(t){if(null!=t){try{return ue.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function hs(t){if(t instanceof _r)return t.clone();var e=new yr(t.__wrapped__,t.__chain__);return e.__actions__=eo(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var fs=wi(function(t,e){return ga(t)?Nr(t,Gr(e,1,ga,!0)):[]}),ps=wi(function(t,e){var n=ws(e);return ga(n)&&(n=o),ga(t)?Nr(t,Gr(e,1,ga,!0),Lo(n,2)):[]}),ds=wi(function(t,e){var n=ws(e);return ga(n)&&(n=o),ga(t)?Nr(t,Gr(e,1,ga,!0),o,n):[]});function ys(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Ua(n);return i<0&&(i=Xn(r+i,0)),an(t,Lo(e,3),i)}function _s(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=Ua(n),i=n<0?Xn(r+i,0):Hn(i,r-1)),an(t,Lo(e,3),i,!0)}function vs(t){return null!=t&&t.length?Gr(t,1):[]}function ms(t){return t&&t.length?t[0]:o}var gs=wi(function(t){var e=Je(t,Gi);return e.length&&e[0]===t[0]?ei(e):[]}),bs=wi(function(t){var e=ws(t),n=Je(t,Gi);return e===ws(n)?e=o:n.pop(),n.length&&n[0]===t[0]?ei(n,Lo(e,2)):[]}),xs=wi(function(t){var e=ws(t),n=Je(t,Gi);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?ei(n,o,e):[]});function ws(t){var e=null==t?0:t.length;return e?t[e-1]:o}var Ts=wi(Ss);function Ss(t,e){return t&&t.length&&e&&e.length?mi(t,e):t}var Es=Po(function(t,e){var n=null==t?0:t.length,r=Rr(t,e);return gi(t,Je(e,function(t){return Ho(t,n)?+t:t}).sort(Qi)),r});function Os(t){return null==t?t:$n.call(t)}var As=wi(function(t){return Fi(Gr(t,1,ga,!0))}),Ms=wi(function(t){var e=ws(t);return ga(e)&&(e=o),Fi(Gr(t,1,ga,!0),Lo(e,2))}),Ps=wi(function(t){var e=ws(t);return e="function"==typeof e?e:o,Fi(Gr(t,1,ga,!0),o,e)});function Cs(t){if(!t||!t.length)return[];var e=0;return t=Ze(t,function(t){if(ga(t))return e=Xn(t.length,e),!0}),_n(e,function(e){return Je(t,fn(e))})}function ks(t,e){if(!t||!t.length)return[];var n=Cs(t);return null==e?n:Je(n,function(t){return He(e,o,t)})}var Rs=wi(function(t,e){return ga(t)?Nr(t,e):[]}),Is=wi(function(t){return qi(Ze(t,ga))}),Ds=wi(function(t){var e=ws(t);return ga(e)&&(e=o),qi(Ze(t,ga),Lo(e,2))}),Ls=wi(function(t){var e=ws(t);return e="function"==typeof e?e:o,qi(Ze(t,ga),o,e)}),Fs=wi(Cs);var Ns=wi(function(t){var e=t.length,n=e>1?t[e-1]:o;return ks(t,n="function"==typeof n?(t.pop(),n):o)});function js(t){var e=fr(t);return e.__chain__=!0,e}function Bs(t,e){return e(t)}var Us=Po(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Rr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof _r&&Ho(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Bs,args:[i],thisArg:o}),new yr(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(o),t})):this.thru(i)});var qs=ro(function(t,e,n){le.call(t,n)?++t[n]:kr(t,n,1)});var Vs=co(ys),Gs=co(_s);function Xs(t,e){return(_a(t)?ze:jr)(t,Lo(e,3))}function Hs(t,e){return(_a(t)?Ye:Br)(t,Lo(e,3))}var Ws=ro(function(t,e,n){le.call(t,n)?t[n].push(e):kr(t,n,[e])});var zs=wi(function(t,e,r){var i=-1,o="function"==typeof e,s=ma(t)?n(t.length):[];return jr(t,function(t){s[++i]=o?He(e,t,r):ni(t,e,r)}),s}),Ys=ro(function(t,e,n){kr(t,n,e)});function $s(t,e){return(_a(t)?Je:hi)(t,Lo(e,3))}var Zs=ro(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Ks=wi(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Wo(t,e[0],e[1])?e=[]:n>2&&Wo(e[0],e[1],e[2])&&(e=[e[0]]),_i(t,Gr(e,1),[])}),Qs=Ln||function(){return Ie.Date.now()};function Js(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,So(t,S,o,o,o,o,e)}function ta(t,e){var n;if("function"!=typeof e)throw new re(u);return t=Ua(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var ea=wi(function(t,e,n){var r=v;if(n.length){var i=Mn(n,Do(ea));r|=w}return So(t,r,e,n,i)}),na=wi(function(t,e,n){var r=v|m;if(n.length){var i=Mn(n,Do(na));r|=w}return So(e,r,t,n,i)});function ra(t,e,n){var r,i,s,a,l,c,h=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new re(u);function y(e){var n=r,s=i;return r=i=o,h=e,a=t.apply(s,n)}function _(t){var n=t-c;return c===o||n>=e||n<0||p&&t-h>=s}function v(){var t=Qs();if(_(t))return m(t);l=rs(v,function(t){var n=e-(t-c);return p?Hn(n,s-(t-h)):n}(t))}function m(t){return l=o,d&&r?y(t):(r=i=o,a)}function g(){var t=Qs(),n=_(t);if(r=arguments,i=this,c=t,n){if(l===o)return function(t){return h=t,l=rs(v,e),f?y(t):a}(c);if(p)return Yi(l),l=rs(v,e),y(c)}return l===o&&(l=rs(v,e)),a}return e=Va(e)||0,Oa(n)&&(f=!!n.leading,s=(p="maxWait"in n)?Xn(Va(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),g.cancel=function(){l!==o&&Yi(l),h=0,r=c=i=l=o},g.flush=function(){return l===o?a:m(Qs())},g}var ia=wi(function(t,e){return Fr(t,1,e)}),oa=wi(function(t,e,n){return Fr(t,Va(e)||0,n)});function sa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new re(u);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(sa.Cache||gr),n}function aa(t){if("function"!=typeof t)throw new re(u);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}sa.Cache=gr;var ua=Wi(function(t,e){var n=(e=1==e.length&&_a(e[0])?Je(e[0],vn(Lo())):Je(Gr(e,1),vn(Lo()))).length;return wi(function(r){for(var i=-1,o=Hn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return He(t,this,r)})}),la=wi(function(t,e){var n=Mn(e,Do(la));return So(t,w,o,e,n)}),ca=wi(function(t,e){var n=Mn(e,Do(ca));return So(t,T,o,e,n)}),ha=Po(function(t,e){return So(t,E,o,o,o,e)});function fa(t,e){return t===e||t!=t&&e!=e}var pa=go(Qr),da=go(function(t,e){return t>=e}),ya=ri(function(){return arguments}())?ri:function(t){return Aa(t)&&le.call(t,"callee")&&!Re.call(t,"callee")},_a=n.isArray,va=Be?vn(Be):function(t){return Aa(t)&&Kr(t)==ut};function ma(t){return null!=t&&Ea(t.length)&&!Ta(t)}function ga(t){return Aa(t)&&ma(t)}var ba=Un||Vu,xa=Ue?vn(Ue):function(t){return Aa(t)&&Kr(t)==H};function wa(t){if(!Aa(t))return!1;var e=Kr(t);return e==z||e==W||"string"==typeof t.message&&"string"==typeof t.name&&!Ca(t)}function Ta(t){if(!Oa(t))return!1;var e=Kr(t);return e==Y||e==$||e==G||e==tt}function Sa(t){return"number"==typeof t&&t==Ua(t)}function Ea(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=D}function Oa(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Aa(t){return null!=t&&"object"==typeof t}var Ma=qe?vn(qe):function(t){return Aa(t)&&qo(t)==Z};function Pa(t){return"number"==typeof t||Aa(t)&&Kr(t)==K}function Ca(t){if(!Aa(t)||Kr(t)!=J)return!1;var e=Me(t);if(null===e)return!0;var n=le.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ue.call(n)==pe}var ka=Ve?vn(Ve):function(t){return Aa(t)&&Kr(t)==et};var Ra=Ge?vn(Ge):function(t){return Aa(t)&&qo(t)==nt};function Ia(t){return"string"==typeof t||!_a(t)&&Aa(t)&&Kr(t)==rt}function Da(t){return"symbol"==typeof t||Aa(t)&&Kr(t)==it}var La=Xe?vn(Xe):function(t){return Aa(t)&&Ea(t.length)&&!!Oe[Kr(t)]};var Fa=go(ci),Na=go(function(t,e){return t<=e});function ja(t){if(!t)return[];if(ma(t))return Ia(t)?Rn(t):eo(t);if(Ne&&t[Ne])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Ne]());var e=qo(t);return(e==Z?On:e==nt?Pn:fu)(t)}function Ba(t){return t?(t=Va(t))===I||t===-I?(t<0?-1:1)*L:t==t?t:0:0===t?t:0}function Ua(t){var e=Ba(t),n=e%1;return e==e?n?e-n:e:0}function qa(t){return t?Ir(Ua(t),0,N):0}function Va(t){if("number"==typeof t)return t;if(Da(t))return F;if(Oa(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Oa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Dt,"");var n=Ht.test(t);return n||zt.test(t)?Ce(t.slice(2),n?2:8):Xt.test(t)?F:+t}function Ga(t){return no(t,iu(t))}function Xa(t){return null==t?"":Li(t)}var Ha=io(function(t,e){if(Zo(e)||ma(e))no(e,ru(e),t);else for(var n in e)le.call(e,n)&&Ar(t,n,e[n])}),Wa=io(function(t,e){no(e,iu(e),t)}),za=io(function(t,e,n,r){no(e,iu(e),t,r)}),Ya=io(function(t,e,n,r){no(e,ru(e),t,r)}),$a=Po(Rr);var Za=wi(function(t,e){t=te(t);var n=-1,r=e.length,i=r>2?e[2]:o;for(i&&Wo(e[0],e[1],i)&&(r=1);++n<r;)for(var s=e[n],a=iu(s),u=-1,l=a.length;++u<l;){var c=a[u],h=t[c];(h===o||fa(h,se[c])&&!le.call(t,c))&&(t[c]=s[c])}return t}),Ka=wi(function(t){return t.push(o,Oo),He(su,o,t)});function Qa(t,e,n){var r=null==t?o:$r(t,e);return r===o?n:r}function Ja(t,e){return null!=t&&Vo(t,e,ti)}var tu=po(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),t[e]=n},Ou(Pu)),eu=po(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),le.call(t,e)?t[e].push(n):t[e]=[n]},Lo),nu=wi(ni);function ru(t){return ma(t)?wr(t):ui(t)}function iu(t){return ma(t)?wr(t,!0):li(t)}var ou=io(function(t,e,n){di(t,e,n)}),su=io(function(t,e,n,r){di(t,e,n,r)}),au=Po(function(t,e){var n={};if(null==t)return n;var r=!1;e=Je(e,function(e){return e=Hi(e,t),r||(r=e.length>1),e}),no(t,ko(t),n),r&&(n=Dr(n,f|p|d,Ao));for(var i=e.length;i--;)Ni(n,e[i]);return n});var uu=Po(function(t,e){return null==t?{}:function(t,e){return vi(t,e,function(e,n){return Ja(t,n)})}(t,e)});function lu(t,e){if(null==t)return{};var n=Je(ko(t),function(t){return[t]});return e=Lo(e),vi(t,n,function(t,n){return e(t,n[0])})}var cu=To(ru),hu=To(iu);function fu(t){return null==t?[]:mn(t,ru(t))}var pu=uo(function(t,e,n){return e=e.toLowerCase(),t+(n?du(e):e)});function du(t){return wu(Xa(t).toLowerCase())}function yu(t){return(t=Xa(t))&&t.replace($t,wn).replace(ge,"")}var _u=uo(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),vu=uo(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),mu=ao("toLowerCase");var gu=uo(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var bu=uo(function(t,e,n){return t+(n?" ":"")+wu(e)});var xu=uo(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),wu=ao("toUpperCase");function Tu(t,e,n){return t=Xa(t),(e=n?o:e)===o?function(t){return Te.test(t)}(t)?function(t){return t.match(xe)||[]}(t):function(t){return t.match(Ut)||[]}(t):t.match(e)||[]}var Su=wi(function(t,e){try{return He(t,o,e)}catch(t){return wa(t)?t:new i(t)}}),Eu=Po(function(t,e){return ze(e,function(e){e=ls(e),kr(t,e,ea(t[e],t))}),t});function Ou(t){return function(){return t}}var Au=ho(),Mu=ho(!0);function Pu(t){return t}function Cu(t){return ai("function"==typeof t?t:Dr(t,f))}var ku=wi(function(t,e){return function(n){return ni(n,t,e)}}),Ru=wi(function(t,e){return function(n){return ni(t,n,e)}});function Iu(t,e,n){var r=ru(e),i=Yr(e,r);null!=n||Oa(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Yr(e,ru(e)));var o=!(Oa(n)&&"chain"in n&&!n.chain),s=Ta(t);return ze(i,function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=eo(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,tn([this.value()],arguments))})}),t}function Du(){}var Lu=_o(Je),Fu=_o($e),Nu=_o(rn);function ju(t){return zo(t)?fn(ls(t)):function(t){return function(e){return $r(e,t)}}(t)}var Bu=mo(),Uu=mo(!0);function qu(){return[]}function Vu(){return!1}var Gu=yo(function(t,e){return t+e},0),Xu=xo("ceil"),Hu=yo(function(t,e){return t/e},1),Wu=xo("floor");var zu=yo(function(t,e){return t*e},1),Yu=xo("round"),$u=yo(function(t,e){return t-e},0);return fr.after=function(t,e){if("function"!=typeof e)throw new re(u);return t=Ua(t),function(){if(--t<1)return e.apply(this,arguments)}},fr.ary=Js,fr.assign=Ha,fr.assignIn=Wa,fr.assignInWith=za,fr.assignWith=Ya,fr.at=$a,fr.before=ta,fr.bind=ea,fr.bindAll=Eu,fr.bindKey=na,fr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return _a(t)?t:[t]},fr.chain=js,fr.chunk=function(t,e,r){e=(r?Wo(t,e,r):e===o)?1:Xn(Ua(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var s=0,a=0,u=n(Nn(i/e));s<i;)u[a++]=Pi(t,s,s+=e);return u},fr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},fr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return tn(_a(r)?eo(r):[r],Gr(e,1))},fr.cond=function(t){var e=null==t?0:t.length,n=Lo();return t=e?Je(t,function(t){if("function"!=typeof t[1])throw new re(u);return[n(t[0]),t[1]]}):[],wi(function(n){for(var r=-1;++r<e;){var i=t[r];if(He(i[0],this,n))return He(i[1],this,n)}})},fr.conforms=function(t){return function(t){var e=ru(t);return function(n){return Lr(n,t,e)}}(Dr(t,f))},fr.constant=Ou,fr.countBy=qs,fr.create=function(t,e){var n=pr(t);return null==e?n:Cr(n,e)},fr.curry=function t(e,n,r){var i=So(e,b,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},fr.curryRight=function t(e,n,r){var i=So(e,x,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},fr.debounce=ra,fr.defaults=Za,fr.defaultsDeep=Ka,fr.defer=ia,fr.delay=oa,fr.difference=fs,fr.differenceBy=ps,fr.differenceWith=ds,fr.drop=function(t,e,n){var r=null==t?0:t.length;return r?Pi(t,(e=n||e===o?1:Ua(e))<0?0:e,r):[]},fr.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Pi(t,0,(e=r-(e=n||e===o?1:Ua(e)))<0?0:e):[]},fr.dropRightWhile=function(t,e){return t&&t.length?Bi(t,Lo(e,3),!0,!0):[]},fr.dropWhile=function(t,e){return t&&t.length?Bi(t,Lo(e,3),!0):[]},fr.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Wo(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=Ua(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:Ua(r))<0&&(r+=i),r=n>r?0:qa(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},fr.filter=function(t,e){return(_a(t)?Ze:Vr)(t,Lo(e,3))},fr.flatMap=function(t,e){return Gr($s(t,e),1)},fr.flatMapDeep=function(t,e){return Gr($s(t,e),I)},fr.flatMapDepth=function(t,e,n){return n=n===o?1:Ua(n),Gr($s(t,e),n)},fr.flatten=vs,fr.flattenDeep=function(t){return null!=t&&t.length?Gr(t,I):[]},fr.flattenDepth=function(t,e){return null!=t&&t.length?Gr(t,e=e===o?1:Ua(e)):[]},fr.flip=function(t){return So(t,O)},fr.flow=Au,fr.flowRight=Mu,fr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},fr.functions=function(t){return null==t?[]:Yr(t,ru(t))},fr.functionsIn=function(t){return null==t?[]:Yr(t,iu(t))},fr.groupBy=Ws,fr.initial=function(t){return null!=t&&t.length?Pi(t,0,-1):[]},fr.intersection=gs,fr.intersectionBy=bs,fr.intersectionWith=xs,fr.invert=tu,fr.invertBy=eu,fr.invokeMap=zs,fr.iteratee=Cu,fr.keyBy=Ys,fr.keys=ru,fr.keysIn=iu,fr.map=$s,fr.mapKeys=function(t,e){var n={};return e=Lo(e,3),Wr(t,function(t,r,i){kr(n,e(t,r,i),t)}),n},fr.mapValues=function(t,e){var n={};return e=Lo(e,3),Wr(t,function(t,r,i){kr(n,r,e(t,r,i))}),n},fr.matches=function(t){return fi(Dr(t,f))},fr.matchesProperty=function(t,e){return pi(t,Dr(e,f))},fr.memoize=sa,fr.merge=ou,fr.mergeWith=su,fr.method=ku,fr.methodOf=Ru,fr.mixin=Iu,fr.negate=aa,fr.nthArg=function(t){return t=Ua(t),wi(function(e){return yi(e,t)})},fr.omit=au,fr.omitBy=function(t,e){return lu(t,aa(Lo(e)))},fr.once=function(t){return ta(2,t)},fr.orderBy=function(t,e,n,r){return null==t?[]:(_a(e)||(e=null==e?[]:[e]),_a(n=r?o:n)||(n=null==n?[]:[n]),_i(t,e,n))},fr.over=Lu,fr.overArgs=ua,fr.overEvery=Fu,fr.overSome=Nu,fr.partial=la,fr.partialRight=ca,fr.partition=Zs,fr.pick=uu,fr.pickBy=lu,fr.property=ju,fr.propertyOf=function(t){return function(e){return null==t?o:$r(t,e)}},fr.pull=Ts,fr.pullAll=Ss,fr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?mi(t,e,Lo(n,2)):t},fr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?mi(t,e,o,n):t},fr.pullAt=Es,fr.range=Bu,fr.rangeRight=Uu,fr.rearg=ha,fr.reject=function(t,e){return(_a(t)?Ze:Vr)(t,aa(Lo(e,3)))},fr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Lo(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return gi(t,i),n},fr.rest=function(t,e){if("function"!=typeof t)throw new re(u);return wi(t,e=e===o?e:Ua(e))},fr.reverse=Os,fr.sampleSize=function(t,e,n){return e=(n?Wo(t,e,n):e===o)?1:Ua(e),(_a(t)?Sr:Si)(t,e)},fr.set=function(t,e,n){return null==t?t:Ei(t,e,n)},fr.setWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:Ei(t,e,n,r)},fr.shuffle=function(t){return(_a(t)?Er:Mi)(t)},fr.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Wo(t,e,n)?(e=0,n=r):(e=null==e?0:Ua(e),n=n===o?r:Ua(n)),Pi(t,e,n)):[]},fr.sortBy=Ks,fr.sortedUniq=function(t){return t&&t.length?Ii(t):[]},fr.sortedUniqBy=function(t,e){return t&&t.length?Ii(t,Lo(e,2)):[]},fr.split=function(t,e,n){return n&&"number"!=typeof n&&Wo(t,e,n)&&(e=n=o),(n=n===o?N:n>>>0)?(t=Xa(t))&&("string"==typeof e||null!=e&&!ka(e))&&!(e=Li(e))&&En(t)?zi(Rn(t),0,n):t.split(e,n):[]},fr.spread=function(t,e){if("function"!=typeof t)throw new re(u);return e=null==e?0:Xn(Ua(e),0),wi(function(n){var r=n[e],i=zi(n,0,e);return r&&tn(i,r),He(t,this,i)})},fr.tail=function(t){var e=null==t?0:t.length;return e?Pi(t,1,e):[]},fr.take=function(t,e,n){return t&&t.length?Pi(t,0,(e=n||e===o?1:Ua(e))<0?0:e):[]},fr.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Pi(t,(e=r-(e=n||e===o?1:Ua(e)))<0?0:e,r):[]},fr.takeRightWhile=function(t,e){return t&&t.length?Bi(t,Lo(e,3),!1,!0):[]},fr.takeWhile=function(t,e){return t&&t.length?Bi(t,Lo(e,3)):[]},fr.tap=function(t,e){return e(t),t},fr.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new re(u);return Oa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ra(t,e,{leading:r,maxWait:e,trailing:i})},fr.thru=Bs,fr.toArray=ja,fr.toPairs=cu,fr.toPairsIn=hu,fr.toPath=function(t){return _a(t)?Je(t,ls):Da(t)?[t]:eo(us(Xa(t)))},fr.toPlainObject=Ga,fr.transform=function(t,e,n){var r=_a(t),i=r||ba(t)||La(t);if(e=Lo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Oa(t)&&Ta(o)?pr(Me(t)):{}}return(i?ze:Wr)(t,function(t,r,i){return e(n,t,r,i)}),n},fr.unary=function(t){return Js(t,1)},fr.union=As,fr.unionBy=Ms,fr.unionWith=Ps,fr.uniq=function(t){return t&&t.length?Fi(t):[]},fr.uniqBy=function(t,e){return t&&t.length?Fi(t,Lo(e,2)):[]},fr.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?Fi(t,o,e):[]},fr.unset=function(t,e){return null==t||Ni(t,e)},fr.unzip=Cs,fr.unzipWith=ks,fr.update=function(t,e,n){return null==t?t:ji(t,e,Xi(n))},fr.updateWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:ji(t,e,Xi(n),r)},fr.values=fu,fr.valuesIn=function(t){return null==t?[]:mn(t,iu(t))},fr.without=Rs,fr.words=Tu,fr.wrap=function(t,e){return la(Xi(e),t)},fr.xor=Is,fr.xorBy=Ds,fr.xorWith=Ls,fr.zip=Fs,fr.zipObject=function(t,e){return Vi(t||[],e||[],Ar)},fr.zipObjectDeep=function(t,e){return Vi(t||[],e||[],Ei)},fr.zipWith=Ns,fr.entries=cu,fr.entriesIn=hu,fr.extend=Wa,fr.extendWith=za,Iu(fr,fr),fr.add=Gu,fr.attempt=Su,fr.camelCase=pu,fr.capitalize=du,fr.ceil=Xu,fr.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=Va(n))==n?n:0),e!==o&&(e=(e=Va(e))==e?e:0),Ir(Va(t),e,n)},fr.clone=function(t){return Dr(t,d)},fr.cloneDeep=function(t){return Dr(t,f|d)},fr.cloneDeepWith=function(t,e){return Dr(t,f|d,e="function"==typeof e?e:o)},fr.cloneWith=function(t,e){return Dr(t,d,e="function"==typeof e?e:o)},fr.conformsTo=function(t,e){return null==e||Lr(t,e,ru(e))},fr.deburr=yu,fr.defaultTo=function(t,e){return null==t||t!=t?e:t},fr.divide=Hu,fr.endsWith=function(t,e,n){t=Xa(t),e=Li(e);var r=t.length,i=n=n===o?r:Ir(Ua(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},fr.eq=fa,fr.escape=function(t){return(t=Xa(t))&&Et.test(t)?t.replace(Tt,Tn):t},fr.escapeRegExp=function(t){return(t=Xa(t))&&It.test(t)?t.replace(Rt,"\\$&"):t},fr.every=function(t,e,n){var r=_a(t)?$e:Ur;return n&&Wo(t,e,n)&&(e=o),r(t,Lo(e,3))},fr.find=Vs,fr.findIndex=ys,fr.findKey=function(t,e){return sn(t,Lo(e,3),Wr)},fr.findLast=Gs,fr.findLastIndex=_s,fr.findLastKey=function(t,e){return sn(t,Lo(e,3),zr)},fr.floor=Wu,fr.forEach=Xs,fr.forEachRight=Hs,fr.forIn=function(t,e){return null==t?t:Xr(t,Lo(e,3),iu)},fr.forInRight=function(t,e){return null==t?t:Hr(t,Lo(e,3),iu)},fr.forOwn=function(t,e){return t&&Wr(t,Lo(e,3))},fr.forOwnRight=function(t,e){return t&&zr(t,Lo(e,3))},fr.get=Qa,fr.gt=pa,fr.gte=da,fr.has=function(t,e){return null!=t&&Vo(t,e,Jr)},fr.hasIn=Ja,fr.head=ms,fr.identity=Pu,fr.includes=function(t,e,n,r){t=ma(t)?t:fu(t),n=n&&!r?Ua(n):0;var i=t.length;return n<0&&(n=Xn(i+n,0)),Ia(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&un(t,e,n)>-1},fr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Ua(n);return i<0&&(i=Xn(r+i,0)),un(t,e,i)},fr.inRange=function(t,e,n){return e=Ba(e),n===o?(n=e,e=0):n=Ba(n),function(t,e,n){return t>=Hn(e,n)&&t<Xn(e,n)}(t=Va(t),e,n)},fr.invoke=nu,fr.isArguments=ya,fr.isArray=_a,fr.isArrayBuffer=va,fr.isArrayLike=ma,fr.isArrayLikeObject=ga,fr.isBoolean=function(t){return!0===t||!1===t||Aa(t)&&Kr(t)==X},fr.isBuffer=ba,fr.isDate=xa,fr.isElement=function(t){return Aa(t)&&1===t.nodeType&&!Ca(t)},fr.isEmpty=function(t){if(null==t)return!0;if(ma(t)&&(_a(t)||"string"==typeof t||"function"==typeof t.splice||ba(t)||La(t)||ya(t)))return!t.length;var e=qo(t);if(e==Z||e==nt)return!t.size;if(Zo(t))return!ui(t).length;for(var n in t)if(le.call(t,n))return!1;return!0},fr.isEqual=function(t,e){return ii(t,e)},fr.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:o)?n(t,e):o;return r===o?ii(t,e,o,n):!!r},fr.isError=wa,fr.isFinite=function(t){return"number"==typeof t&&qn(t)},fr.isFunction=Ta,fr.isInteger=Sa,fr.isLength=Ea,fr.isMap=Ma,fr.isMatch=function(t,e){return t===e||oi(t,e,No(e))},fr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,oi(t,e,No(e),n)},fr.isNaN=function(t){return Pa(t)&&t!=+t},fr.isNative=function(t){if($o(t))throw new i(a);return si(t)},fr.isNil=function(t){return null==t},fr.isNull=function(t){return null===t},fr.isNumber=Pa,fr.isObject=Oa,fr.isObjectLike=Aa,fr.isPlainObject=Ca,fr.isRegExp=ka,fr.isSafeInteger=function(t){return Sa(t)&&t>=-D&&t<=D},fr.isSet=Ra,fr.isString=Ia,fr.isSymbol=Da,fr.isTypedArray=La,fr.isUndefined=function(t){return t===o},fr.isWeakMap=function(t){return Aa(t)&&qo(t)==st},fr.isWeakSet=function(t){return Aa(t)&&Kr(t)==at},fr.join=function(t,e){return null==t?"":Vn.call(t,e)},fr.kebabCase=_u,fr.last=ws,fr.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=Ua(n))<0?Xn(r+i,0):Hn(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):an(t,cn,i,!0)},fr.lowerCase=vu,fr.lowerFirst=mu,fr.lt=Fa,fr.lte=Na,fr.max=function(t){return t&&t.length?qr(t,Pu,Qr):o},fr.maxBy=function(t,e){return t&&t.length?qr(t,Lo(e,2),Qr):o},fr.mean=function(t){return hn(t,Pu)},fr.meanBy=function(t,e){return hn(t,Lo(e,2))},fr.min=function(t){return t&&t.length?qr(t,Pu,ci):o},fr.minBy=function(t,e){return t&&t.length?qr(t,Lo(e,2),ci):o},fr.stubArray=qu,fr.stubFalse=Vu,fr.stubObject=function(){return{}},fr.stubString=function(){return""},fr.stubTrue=function(){return!0},fr.multiply=zu,fr.nth=function(t,e){return t&&t.length?yi(t,Ua(e)):o},fr.noConflict=function(){return Ie._===this&&(Ie._=de),this},fr.noop=Du,fr.now=Qs,fr.pad=function(t,e,n){t=Xa(t);var r=(e=Ua(e))?kn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return vo(jn(i),n)+t+vo(Nn(i),n)},fr.padEnd=function(t,e,n){t=Xa(t);var r=(e=Ua(e))?kn(t):0;return e&&r<e?t+vo(e-r,n):t},fr.padStart=function(t,e,n){t=Xa(t);var r=(e=Ua(e))?kn(t):0;return e&&r<e?vo(e-r,n)+t:t},fr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),zn(Xa(t).replace(Lt,""),e||0)},fr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Wo(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=Ba(t),e===o?(e=t,t=0):e=Ba(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Yn();return Hn(t+i*(e-t+Pe("1e-"+((i+"").length-1))),e)}return bi(t,e)},fr.reduce=function(t,e,n){var r=_a(t)?en:dn,i=arguments.length<3;return r(t,Lo(e,4),n,i,jr)},fr.reduceRight=function(t,e,n){var r=_a(t)?nn:dn,i=arguments.length<3;return r(t,Lo(e,4),n,i,Br)},fr.repeat=function(t,e,n){return e=(n?Wo(t,e,n):e===o)?1:Ua(e),xi(Xa(t),e)},fr.replace=function(){var t=arguments,e=Xa(t[0]);return t.length<3?e:e.replace(t[1],t[2])},fr.result=function(t,e,n){var r=-1,i=(e=Hi(e,t)).length;for(i||(i=1,t=o);++r<i;){var s=null==t?o:t[ls(e[r])];s===o&&(r=i,s=n),t=Ta(s)?s.call(t):s}return t},fr.round=Yu,fr.runInContext=t,fr.sample=function(t){return(_a(t)?Tr:Ti)(t)},fr.size=function(t){if(null==t)return 0;if(ma(t))return Ia(t)?kn(t):t.length;var e=qo(t);return e==Z||e==nt?t.size:ui(t).length},fr.snakeCase=gu,fr.some=function(t,e,n){var r=_a(t)?rn:Ci;return n&&Wo(t,e,n)&&(e=o),r(t,Lo(e,3))},fr.sortedIndex=function(t,e){return ki(t,e)},fr.sortedIndexBy=function(t,e,n){return Ri(t,e,Lo(n,2))},fr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ki(t,e);if(r<n&&fa(t[r],e))return r}return-1},fr.sortedLastIndex=function(t,e){return ki(t,e,!0)},fr.sortedLastIndexBy=function(t,e,n){return Ri(t,e,Lo(n,2),!0)},fr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ki(t,e,!0)-1;if(fa(t[n],e))return n}return-1},fr.startCase=bu,fr.startsWith=function(t,e,n){return t=Xa(t),n=null==n?0:Ir(Ua(n),0,t.length),e=Li(e),t.slice(n,n+e.length)==e},fr.subtract=$u,fr.sum=function(t){return t&&t.length?yn(t,Pu):0},fr.sumBy=function(t,e){return t&&t.length?yn(t,Lo(e,2)):0},fr.template=function(t,e,n){var r=fr.templateSettings;n&&Wo(t,e,n)&&(e=o),t=Xa(t),e=za({},e,r,Eo);var i,s,a=za({},e.imports,r.imports,Eo),u=ru(a),l=mn(a,u),c=0,h=e.interpolate||Zt,f="__p += '",p=ee((e.escape||Zt).source+"|"+h.source+"|"+(h===Mt?Vt:Zt).source+"|"+(e.evaluate||Zt).source+"|$","g"),d="//# sourceURL="+(le.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Ee+"]")+"\n";t.replace(p,function(e,n,r,o,a,u){return r||(r=o),f+=t.slice(c,u).replace(Kt,Sn),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),f+="';\n";var y=le.call(e,"variable")&&e.variable;y||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(gt,""):f).replace(bt,"$1").replace(xt,"$1;"),f="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var _=Su(function(){return Qt(u,d+"return "+f).apply(o,l)});if(_.source=f,wa(_))throw _;return _},fr.times=function(t,e){if((t=Ua(t))<1||t>D)return[];var n=N,r=Hn(t,N);e=Lo(e),t-=N;for(var i=_n(r,e);++n<t;)e(n);return i},fr.toFinite=Ba,fr.toInteger=Ua,fr.toLength=qa,fr.toLower=function(t){return Xa(t).toLowerCase()},fr.toNumber=Va,fr.toSafeInteger=function(t){return t?Ir(Ua(t),-D,D):0===t?t:0},fr.toString=Xa,fr.toUpper=function(t){return Xa(t).toUpperCase()},fr.trim=function(t,e,n){if((t=Xa(t))&&(n||e===o))return t.replace(Dt,"");if(!t||!(e=Li(e)))return t;var r=Rn(t),i=Rn(e);return zi(r,bn(r,i),xn(r,i)+1).join("")},fr.trimEnd=function(t,e,n){if((t=Xa(t))&&(n||e===o))return t.replace(Ft,"");if(!t||!(e=Li(e)))return t;var r=Rn(t);return zi(r,0,xn(r,Rn(e))+1).join("")},fr.trimStart=function(t,e,n){if((t=Xa(t))&&(n||e===o))return t.replace(Lt,"");if(!t||!(e=Li(e)))return t;var r=Rn(t);return zi(r,bn(r,Rn(e))).join("")},fr.truncate=function(t,e){var n=A,r=M;if(Oa(e)){var i="separator"in e?e.separator:i;n="length"in e?Ua(e.length):n,r="omission"in e?Li(e.omission):r}var s=(t=Xa(t)).length;if(En(t)){var a=Rn(t);s=a.length}if(n>=s)return t;var u=n-kn(r);if(u<1)return r;var l=a?zi(a,0,u).join(""):t.slice(0,u);if(i===o)return l+r;if(a&&(u+=l.length-u),ka(i)){if(t.slice(u).search(i)){var c,h=l;for(i.global||(i=ee(i.source,Xa(Gt.exec(i))+"g")),i.lastIndex=0;c=i.exec(h);)var f=c.index;l=l.slice(0,f===o?u:f)}}else if(t.indexOf(Li(i),u)!=u){var p=l.lastIndexOf(i);p>-1&&(l=l.slice(0,p))}return l+r},fr.unescape=function(t){return(t=Xa(t))&&St.test(t)?t.replace(wt,In):t},fr.uniqueId=function(t){var e=++ce;return Xa(t)+e},fr.upperCase=xu,fr.upperFirst=wu,fr.each=Xs,fr.eachRight=Hs,fr.first=ms,Iu(fr,function(){var t={};return Wr(fr,function(e,n){le.call(fr.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),fr.VERSION="4.17.15",ze(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){fr[t].placeholder=fr}),ze(["drop","take"],function(t,e){_r.prototype[t]=function(n){n=n===o?1:Xn(Ua(n),0);var r=this.__filtered__&&!e?new _r(this):this.clone();return r.__filtered__?r.__takeCount__=Hn(n,r.__takeCount__):r.__views__.push({size:Hn(n,N),type:t+(r.__dir__<0?"Right":"")}),r},_r.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ze(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==k||3==n;_r.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Lo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),ze(["head","last"],function(t,e){var n="take"+(e?"Right":"");_r.prototype[t]=function(){return this[n](1).value()[0]}}),ze(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");_r.prototype[t]=function(){return this.__filtered__?new _r(this):this[n](1)}}),_r.prototype.compact=function(){return this.filter(Pu)},_r.prototype.find=function(t){return this.filter(t).head()},_r.prototype.findLast=function(t){return this.reverse().find(t)},_r.prototype.invokeMap=wi(function(t,e){return"function"==typeof t?new _r(this):this.map(function(n){return ni(n,t,e)})}),_r.prototype.reject=function(t){return this.filter(aa(Lo(t)))},_r.prototype.slice=function(t,e){t=Ua(t);var n=this;return n.__filtered__&&(t>0||e<0)?new _r(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=Ua(e))<0?n.dropRight(-e):n.take(e-t)),n)},_r.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},_r.prototype.toArray=function(){return this.take(N)},Wr(_r.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=fr[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);i&&(fr.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof _r,l=a[0],c=u||_a(e),h=function(t){var e=i.apply(fr,tn([t],a));return r&&f?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,p=!!this.__actions__.length,d=s&&!f,y=u&&!p;if(!s&&c){e=y?e:new _r(this);var _=t.apply(e,a);return _.__actions__.push({func:Bs,args:[h],thisArg:o}),new yr(_,f)}return d&&y?t.apply(this,a):(_=this.thru(h),d?r?_.value()[0]:_.value():_)})}),ze(["pop","push","shift","sort","splice","unshift"],function(t){var e=ie[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);fr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(_a(i)?i:[],t)}return this[n](function(n){return e.apply(_a(n)?n:[],t)})}}),Wr(_r.prototype,function(t,e){var n=fr[e];if(n){var r=n.name+"";le.call(rr,r)||(rr[r]=[]),rr[r].push({name:e,func:n})}}),rr[fo(o,m).name]=[{name:"wrapper",func:o}],_r.prototype.clone=function(){var t=new _r(this.__wrapped__);return t.__actions__=eo(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=eo(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=eo(this.__views__),t},_r.prototype.reverse=function(){if(this.__filtered__){var t=new _r(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},_r.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=_a(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Hn(e,t+s);break;case"takeRight":t=Xn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,l=r?a:s-1,c=this.__iteratees__,h=c.length,f=0,p=Hn(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return Ui(t,this.__actions__);var d=[];t:for(;u--&&f<p;){for(var y=-1,_=t[l+=e];++y<h;){var v=c[y],m=v.iteratee,g=v.type,b=m(_);if(g==R)_=b;else if(!b){if(g==k)continue t;break t}}d[f++]=_}return d},fr.prototype.at=Us,fr.prototype.chain=function(){return js(this)},fr.prototype.commit=function(){return new yr(this.value(),this.__chain__)},fr.prototype.next=function(){this.__values__===o&&(this.__values__=ja(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},fr.prototype.plant=function(t){for(var e,n=this;n instanceof dr;){var r=hs(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},fr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof _r){var e=t;return this.__actions__.length&&(e=new _r(this)),(e=e.reverse()).__actions__.push({func:Bs,args:[Os],thisArg:o}),new yr(e,this.__chain__)}return this.thru(Os)},fr.prototype.toJSON=fr.prototype.valueOf=fr.prototype.value=function(){return Ui(this.__wrapped__,this.__actions__)},fr.prototype.first=fr.prototype.head,Ne&&(fr.prototype[Ne]=function(){return this}),fr}();Ie._=Dn,(i=function(){return Dn}.call(e,n,e,r))===o||(r.exports=i)}).call(this)}).call(e,n(1),n(31)(t))},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(474)),i=o(n(191));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,r.default)(Object(t)))return function(t,e){var n=[],r=!0,o=!1,s=void 0;try{for(var a,u=(0,i.default)(t);!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,s=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw s}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){t.exports={default:n(486),__esModule:!0}},function(t,e,n){t.exports={default:n(207),__esModule:!0}},function(t,e,n){var r=n(11).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(23),i=n(22),o=n(40);t.exports=n(15)?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),a=s.length,u=0;a>u;)r.f(t,n=s[u++],e[n]);return t}},,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(192));e.getHelp=function(t){if(!t)return"The following verbs are available:\n\n"+o()+"\n\nUse them such as 'look door', 'grab note' or 'go back'.\n\nYou can also type help for a specific verb, such as 'help grab' to get more info.";if(!i[t])return"Sorry Dave, I can't find a help entry for "+t+".\n\n"+o();return function(t){return i[t]}(t)},e.getVerbs=function(){return["help","clear","look","iam","remove","grab","pick up","open","interface","connect","breadcrumb","panic","goto","map","go back","score"]};var i={look:"Usage: 'look {something}'\n\nWill let you observe {something}, either that or examine the room you're in.\n\nLook there is [something|look around] over there!",clear:"Usage: 'clear'\n\nWipes out the terminal screen with a very specific window cleaner formula.",iam:"Usage: 'iam {name}'\n\nGets or sets your name on the highscore list.\n\nIf none is provided a silly name will be provided for you by the state of Leethäckia",grab:"Usage: 'grab {item}' or 'pick up {item}'\n\nPicks up an item from the ground.\n\nOr from anywhere really... I'm not the judge of you.",remove:"Usage: 'remove {item}'\n\nRemoves an item from somwhere or something.",open:"Usage: 'open {item}'\n\n  Opens an item. Mostly used for dusty old doors.\n\nYou could knock on it too but the Leethack devs didn't bother to implement that.",interface:"Usage: 'interface {item}' or 'connect {item}'\n\nUse this to connect your P.I.N.X. device to an item. Not all items are interfacable, but some are.",use:"Usage: 'use {item}'\n\nUse this to actually use an item, such as a toilet.",breadcrumb:"Usage: 'breadcrumb'\n\nUse this to see where you've been m'lord and where you can [go back|go back].",score:"Usage: 'score'\n\nPrints out how you got your current points. So we can all agree you're not a lying son of a cheat... or a unicorn.\n\nYou never know when those sneaky buggers show up. 🌈🦄 ",go:"Usage: 'go'\n\nThis is mainly used to go back as in 'go back', to reverse progress in the game and return to your previous room",map:"Usage: 'map'\n\nIf you're lost, you can always consult the map, fabulously rendered in two wholesome dimensions.",panic:"Usage: 'panic'\n\nIf you are having problems in a room you can panic in order to gain a greater understanding of the current room (get a tip). This gives a tiny penalty, but time is also important.",goto:"Usage: 'goto {room}'\n\nIf you don't want to traverse the map with multiple go back statements, you can goto a room that you have unlocked","go back":"Usage: 'go back'\n  \nIf you want to go back to the previous room, use this command"};function o(){return(0,r.default)(i).map(function(t){return"["+t+"|help "+t+"]"}).join(", ")}},function(t,e,n){"use strict";e.__esModule=!0;var r=s(n(479)),i=s(n(478)),o="function"==typeof i.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};function s(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof i.default&&"symbol"===o(r.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":void 0===t?"undefined":o(t)}},,function(t,e,n){n(218),t.exports=n(6).Object.assign},function(t,e,n){n(219),t.exports=n(6).Object.keys},function(t,e){t.exports=function(){}},function(t,e,n){"use strict";var r=n(98),i=n(53),o=n(69),s={};n(26)(s,n(13)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(43)("meta"),i=n(17),o=n(20),s=n(23).f,a=0,u=Object.isExtensible||function(){return!0},l=!n(25)(function(){return u(Object.preventExtensions({}))}),c=function(t){s(t,r,{value:{i:"O"+ ++a,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return l&&h.NEED&&u(t)&&!o(t,r)&&c(t),t}}},function(t,e,n){"use strict";var r=n(15),i=n(40),o=n(99),s=n(68),a=n(41),u=n(94),l=Object.assign;t.exports=!l||n(25)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=r})?function(t,e){for(var n=a(t),l=arguments.length,c=1,h=o.f,f=s.f;l>c;)for(var p,d=u(arguments[c++]),y=h?i(d).concat(h(d)):i(d),_=y.length,v=0;_>v;)p=y[v++],r&&!f.call(d,p)||(n[p]=d[p]);return n}:l},function(t,e,n){var r=n(68),i=n(53),o=n(30),s=n(70),a=n(20),u=n(97),l=Object.getOwnPropertyDescriptor;e.f=n(15)?l:function(t,e){if(t=o(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(100),i=n(60).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(54),i=n(52);t.exports=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),l=a.length;return u<0||u>=l?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(t,e,n){var r=n(113),i=n(13)("iterator"),o=n(37);t.exports=n(6).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){"use strict";var r=n(208),i=n(210),o=n(37),s=n(30);t.exports=n(114)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(19);r(r.S+r.F,"Object",{assign:n(212)})},function(t,e,n){var r=n(41),i=n(40);n(115)("keys",function(){return function(t){return i(r(t))}})},function(t,e){},,,,function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=Array.prototype,i=r.slice,o=r.map},function(t,e,n){"use strict";var r=n(56),i=n(226),o=n.i(i.a)(r.a),s=o.right;o.left;e.a=s},function(t,e,n){"use strict";var r=n(56);e.a=function(t){return 1===t.length&&(t=function(t){return function(e,i){return n.i(r.a)(t(e),i)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}},function(t,e,n){"use strict";var r=n(235);e.a=function(t,e){var i=n.i(r.a)(t,e);return i?Math.sqrt(i):i}},function(t,e,n){"use strict";e.a=function(t,e){var n,r,i,o=t.length,s=-1;if(null==e){for(;++s<o;)if(null!=(n=t[s])&&n>=n)for(r=i=n;++s<o;)null!=(n=t[s])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++s<o;)if(null!=(n=e(t[s],s,t))&&n>=n)for(r=i=n;++s<o;)null!=(n=e(t[s],s,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}},function(t,e,n){"use strict";e.a=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r}},function(t,e,n){"use strict";e.a=r;function r(t,e){return[t,e]}},function(t,e,n){"use strict";e.a=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}},function(t,e,n){"use strict";e.a=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}},function(t,e,n){"use strict";e.b=s,e.c=function(t,e,n){var s=Math.abs(e-t)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),u=s/a;u>=r?a*=10:u>=i?a*=5:u>=o&&(a*=2);return e<t?-a:a};var r=Math.sqrt(50),i=Math.sqrt(10),o=Math.sqrt(2);function s(t,e,n){var s=(e-t)/Math.max(0,n),a=Math.floor(Math.log(s)/Math.LN10),u=s/Math.pow(10,a);return a>=0?(u>=r?10:u>=i?5:u>=o?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(u>=r?10:u>=i?5:u>=o?2:1)}e.a=function(t,e,n){var r,i,o,a,u=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=s(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o}},function(t,e,n){"use strict";var r=n(229);function i(t){return t.length}e.a=function(t){if(!(a=t.length))return[];for(var e=-1,o=n.i(r.a)(t,i),s=new Array(o);++e<o;)for(var a,u=-1,l=s[e]=new Array(a);++u<a;)l[u]=t[u][e];return s}},function(t,e,n){"use strict";var r=n(71);e.a=function(t,e){var i,o,s=t.length,a=0,u=-1,l=0,c=0;if(null==e)for(;++u<s;)isNaN(i=n.i(r.a)(t[u]))||(c+=(o=i-l)*(i-(l+=o/++a)));else for(;++u<s;)isNaN(i=n.i(r.a)(e(t[u],u,t)))||(c+=(o=i-l)*(i-(l+=o/++a)));if(a>1)return c/(a-1)}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r=Math.PI/180,i=180/Math.PI},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r,i=n(140);e.b=function(t,e){var o=n.i(i.a)(t,e);if(!o)return t+"";var s=o[0],a=o[1],u=a-(r=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,l=s.length;return u===l?s:u>l?s+new Array(u-l+1).join("0"):u>0?s.slice(0,u)+"."+s.slice(u):"0."+new Array(1-u).join("0")+n.i(i.a)(t,Math.max(0,e+u-1))[0]}},function(t,e,n){"use strict";e.a=i;var r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i(t){if(!(e=r.exec(t)))throw new Error("invalid format: "+t);var e;return new o({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function o(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}i.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},function(t,e,n){"use strict";var r=n(541);n.d(e,"f",function(){return r.a}),n.d(e,"c",function(){return r.b});n(240);var i=n(238);n.d(e,"a",function(){return i.a});var o=n(548);n.d(e,"e",function(){return o.a});var s=n(549);n.d(e,"b",function(){return s.a});var a=n(550);n.d(e,"d",function(){return a.a})},function(t,e,n){"use strict";var r=n(103),i=n(542),o=n(543),s=n(238),a=n(545),u=n(546),l=n(237),c=n(547),h=Array.prototype.map,f=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];e.a=function(t){var e=void 0===t.grouping||void 0===t.thousands?c.a:n.i(i.a)(h.call(t.grouping,Number),t.thousands+""),p=void 0===t.currency?"":t.currency[0]+"",d=void 0===t.currency?"":t.currency[1]+"",y=void 0===t.decimal?".":t.decimal+"",_=void 0===t.numerals?c.a:n.i(o.a)(h.call(t.numerals,String)),v=void 0===t.percent?"%":t.percent+"",m=void 0===t.minus?"-":t.minus+"",g=void 0===t.nan?"NaN":t.nan+"";function b(t){var r=(t=n.i(s.a)(t)).fill,i=t.align,o=t.sign,c=t.symbol,h=t.zero,b=t.width,x=t.comma,w=t.precision,T=t.trim,S=t.type;"n"===S?(x=!0,S="g"):u.a[S]||(void 0===w&&(w=12),T=!0,S="g"),(h||"0"===r&&"="===i)&&(h=!0,r="0",i="=");var E="$"===c?p:"#"===c&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",O="$"===c?d:/[%p]/.test(S)?v:"",A=u.a[S],M=/[defgprs%]/.test(S);function P(t){var s,u,c,p=E,d=O;if("c"===S)d=A(t)+d,t="";else{var v=(t=+t)<0;if(t=isNaN(t)?g:A(Math.abs(t),w),T&&(t=n.i(a.a)(t)),v&&0==+t&&(v=!1),p=(v?"("===o?o:m:"-"===o||"("===o?"":o)+p,d=("s"===S?f[8+l.a/3]:"")+d+(v&&"("===o?")":""),M)for(s=-1,u=t.length;++s<u;)if(48>(c=t.charCodeAt(s))||c>57){d=(46===c?y+t.slice(s+1):t.slice(s))+d,t=t.slice(0,s);break}}x&&!h&&(t=e(t,1/0));var P=p.length+t.length+d.length,C=P<b?new Array(b-P+1).join(r):"";switch(x&&h&&(t=e(C+t,C.length?b-d.length:1/0),C=""),i){case"<":t=p+t+d+C;break;case"=":t=p+C+t+d;break;case"^":t=C.slice(0,P=C.length>>1)+p+t+d+C.slice(P);break;default:t=C+p+t+d}return _(t)}return w=void 0===w?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),P.toString=function(){return t+""},P}return{format:b,formatPrefix:function(t,e){var i=b(((t=n.i(s.a)(t)).type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(n.i(r.a)(e)/3))),a=Math.pow(10,-o),u=f[8+o/3];return function(t){return i(a*t)+u}}}}},function(t,e,n){"use strict";e.a=i;var r=n(143);n(142);function i(t,e){var i,o=e?e.length:0,s=t?Math.min(o,t.length):0,a=new Array(s),u=new Array(o);for(i=0;i<s;++i)a[i]=n.i(r.a)(t[i],e[i]);for(;i<o;++i)u[i]=e[i];return function(t){for(i=0;i<s;++i)u[i]=a[i](t);return u}}},function(t,e,n){"use strict";var r=n(141);e.a=function(t){var e=t.length;return function(i){var o=Math.floor(((i%=1)<0?++i:i)*e),s=t[(o+e-1)%e],a=t[o%e],u=t[(o+1)%e],l=t[(o+2)%e];return n.i(r.b)((i-o/e)*e,s,a,u,l)}}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}},function(t,e,n){"use strict";var r=n(143);e.a=function(t,e){var i,o={},s={};for(i in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)i in t?o[i]=n.i(r.a)(t[i],e[i]):s[i]=e[i];return function(t){for(i in o)s[i]=o[i](t);return s}}},function(t,e,n){"use strict";var r=n(38),i=n(141),o=n(242),s=n(57);function a(t){return function(e){var i,o,s=e.length,a=new Array(s),u=new Array(s),l=new Array(s);for(i=0;i<s;++i)o=n.i(r.e)(e[i]),a[i]=o.r||0,u[i]=o.g||0,l[i]=o.b||0;return a=t(a),u=t(u),l=t(l),o.opacity=1,function(t){return o.r=a(t),o.g=u(t),o.b=l(t),o+""}}}e.a=function t(e){var i=n.i(s.c)(e);function o(t,e){var o=i((t=n.i(r.e)(t)).r,(e=n.i(r.e)(e)).r),a=i(t.g,e.g),u=i(t.b,e.b),l=n.i(s.a)(t.opacity,e.opacity);return function(e){return t.r=o(e),t.g=a(e),t.b=u(e),t.opacity=l(e),t+""}}return o.gamma=t,o}(1);a(i.a),a(o.a)},function(t,e,n){"use strict";var r=n(104),i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o=new RegExp(i.source,"g");e.a=function(t,e){var s,a,u,l=i.lastIndex=o.lastIndex=0,c=-1,h=[],f=[];for(t+="",e+="";(s=i.exec(t))&&(a=o.exec(e));)(u=a.index)>l&&(u=e.slice(l,u),h[c]?h[c]+=u:h[++c]=u),(s=s[0])===(a=a[0])?h[c]?h[c]+=a:h[++c]=a:(h[++c]=null,f.push({i:c,x:n.i(r.a)(s,a)})),l=o.lastIndex;return l<e.length&&(u=e.slice(l),h[c]?h[c]+=u:h[++c]=u),h.length<2?f[0]?function(t){return function(e){return t(e)+""}}(f[0].x):function(t){return function(){return t}}(e):(e=f.length,function(t){for(var n,r=0;r<e;++r)h[(n=f[r]).i]=n.x(t);return h.join("")})}},function(t,e,n){"use strict";e.a=function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],s=t[i];return s<o&&(n=r,r=i,i=n,n=o,o=s,s=n),t[r]=e.floor(o),t[i]=e.ceil(s),t}},function(t,e,n){"use strict";e.a=function(t){return+t}},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),e.a=function t(e){var s=n.i(r.a)(),a=[],u=o;e=null==e?[]:i.b.call(e);function l(t){var n=t+"",r=s.get(n);if(!r){if(u!==o)return u;s.set(n,r=a.push(t))}return e[(r-1)%e.length]}l.domain=function(t){if(!arguments.length)return a.slice();a=[],s=n.i(r.a)();for(var e,i,o=-1,u=t.length;++o<u;)s.has(i=(e=t[o])+"")||s.set(i,a.push(e));return l};l.range=function(t){return arguments.length?(e=i.b.call(t),l):e.slice()};l.unknown=function(t){return arguments.length?(u=t,l):u};l.copy=function(){return t().domain(a).range(e).unknown(u)};return l};var r=n(534),i=n(44),o={name:"implicit"}},function(t,e,n){"use strict";e.b=g;var r=n(33),i=n(72),o=n(146),s=n(252),a=n(44),u=n(105),l=n(248),c=1e3,h=60*c,f=60*h,p=24*f,d=7*p,y=30*p,_=365*p;function v(t){return new Date(t)}function m(t){return t instanceof Date?+t:+new Date(+t)}function g(t,e,o,s,b,x,w,T,S){var E=n.i(u.a)(u.b,i.a),O=E.invert,A=E.domain,M=S(".%L"),P=S(":%S"),C=S("%I:%M"),k=S("%I %p"),R=S("%a %d"),I=S("%b %d"),D=S("%B"),L=S("%Y"),F=[[w,1,c],[w,5,5*c],[w,15,15*c],[w,30,30*c],[x,1,h],[x,5,5*h],[x,15,15*h],[x,30,30*h],[b,1,f],[b,3,3*f],[b,6,6*f],[b,12,12*f],[s,1,p],[s,2,2*p],[o,1,d],[e,1,y],[e,3,3*y],[t,1,_]];function N(n){return(w(n)<n?M:x(n)<n?P:b(n)<n?C:s(n)<n?k:e(n)<n?o(n)<n?R:I:t(n)<n?D:L)(n)}function j(e,i,o,s){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(o-i)/e,u=n.i(r.e)(function(t){return t[2]}).right(F,a);u===F.length?(s=n.i(r.d)(i/_,o/_,e),e=t):u?(s=(u=F[a/F[u-1][2]<F[u][2]/a?u-1:u])[1],e=u[0]):(s=Math.max(n.i(r.d)(i,o,e),1),e=T)}return null==s?e:e.every(s)}return E.invert=function(t){return new Date(O(t))},E.domain=function(t){return arguments.length?A(a.a.call(t,m)):A().map(v)},E.ticks=function(t,e){var n,r=A(),i=r[0],o=r[r.length-1],s=o<i;return s&&(n=i,i=o,o=n),n=(n=j(t,i,o,e))?n.range(i,o+1):[],s?n.reverse():n},E.tickFormat=function(t,e){return null==e?N:S(e)},E.nice=function(t,e){var r=A();return(t=j(t,r[0],r[r.length-1],e))?A(n.i(l.a)(r,t)):E},E.copy=function(){return n.i(u.c)(E,g(t,e,o,s,b,x,w,T,S))},E}e.a=function(){return g(o.l,o.q,o.r,o.k,o.s,o.t,o.u,o.v,s.b).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}},function(t,e,n){"use strict";var r=n(145);n.d(e,"b",function(){return r.c}),n.d(e,"a",function(){return r.a});n(254),n(253),n(582)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(145),i="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||n.i(r.a)(i)},function(t,e,n){"use strict";e.a=function(t){var e=t.dateTime,u=t.date,l=t.time,c=t.periods,h=t.days,f=t.shortDays,mt=t.months,gt=t.shortMonths,bt=p(c),xt=d(c),wt=p(h),Tt=d(h),St=p(f),Et=d(f),Ot=p(mt),At=d(mt),Mt=p(gt),Pt=d(gt),Ct={a:function(t){return f[t.getDay()]},A:function(t){return h[t.getDay()]},b:function(t){return gt[t.getMonth()]},B:function(t){return mt[t.getMonth()]},c:null,d:L,e:L,f:U,H:F,I:N,j:j,L:B,m:q,M:V,p:function(t){return c[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:_t,s:vt,S:G,u:X,U:H,V:W,w:z,W:Y,x:null,X:null,y:$,Y:Z,Z:K,"%":yt},kt={a:function(t){return f[t.getUTCDay()]},A:function(t){return h[t.getUTCDay()]},b:function(t){return gt[t.getUTCMonth()]},B:function(t){return mt[t.getUTCMonth()]},c:null,d:Q,e:Q,f:rt,H:J,I:tt,j:et,L:nt,m:it,M:ot,p:function(t){return c[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:_t,s:vt,S:st,u:at,U:ut,V:lt,w:ct,W:ht,x:null,X:null,y:ft,Y:pt,Z:dt,"%":yt},Rt={a:function(t,e,n){var r=St.exec(e.slice(n));return r?(t.w=Et[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=wt.exec(e.slice(n));return r?(t.w=Tt[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=Mt.exec(e.slice(n));return r?(t.m=Pt[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=Ot.exec(e.slice(n));return r?(t.m=At[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return Lt(t,e,n,r)},d:E,e:E,f:k,H:A,I:A,j:O,L:C,m:S,M:M,p:function(t,e,n){var r=bt.exec(e.slice(n));return r?(t.p=xt[r[0].toLowerCase()],n+r[0].length):-1},q:T,Q:I,s:D,S:P,u:_,U:v,V:m,w:y,W:g,x:function(t,e,n){return Lt(t,u,e,n)},X:function(t,e,n){return Lt(t,l,e,n)},y:x,Y:b,Z:w,"%":R};function It(t,e){return function(n){var r,i,o,s=[],u=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===t.charCodeAt(u)&&(s.push(t.slice(l,u)),null!=(i=a[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),s.push(r),l=u+1);return s.push(t.slice(l,u)),s.join("")}}function Dt(t,e){return function(a){var u,l,c=s(1900,void 0,1),h=Lt(c,t,a+="",0);if(h!=a.length)return null;if("Q"in c)return new Date(c.Q);if("s"in c)return new Date(1e3*c.s+("L"in c?c.L:0));if(!e||"Z"in c||(c.Z=0),"p"in c&&(c.H=c.H%12+12*c.p),void 0===c.m&&(c.m="q"in c?c.q:0),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(u=o(s(c.y,0,1)),l=u.getUTCDay(),u=l>4||0===l?r.i.ceil(u):n.i(r.i)(u),u=r.d.offset(u,7*(c.V-1)),c.y=u.getUTCFullYear(),c.m=u.getUTCMonth(),c.d=u.getUTCDate()+(c.w+6)%7):(u=i(s(c.y,0,1)),l=u.getDay(),u=l>4||0===l?r.j.ceil(u):n.i(r.j)(u),u=r.k.offset(u,7*(c.V-1)),c.y=u.getFullYear(),c.m=u.getMonth(),c.d=u.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),l="Z"in c?o(s(c.y,0,1)).getUTCDay():i(s(c.y,0,1)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(l+5)%7:c.w+7*c.U-(l+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,o(c)):i(c)}}function Lt(t,e,n,r){for(var i,o,s=0,u=e.length,l=n.length;s<u;){if(r>=l)return-1;if(37===(i=e.charCodeAt(s++))){if(i=e.charAt(s++),!(o=Rt[i in a?e.charAt(s++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return Ct.x=It(u,Ct),Ct.X=It(l,Ct),Ct.c=It(e,Ct),kt.x=It(u,kt),kt.X=It(l,kt),kt.c=It(e,kt),{format:function(t){var e=It(t+="",Ct);return e.toString=function(){return t},e},parse:function(t){var e=Dt(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=It(t+="",kt);return e.toString=function(){return t},e},utcParse:function(t){var e=Dt(t+="",!0);return e.toString=function(){return t},e}}};var r=n(146);function i(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function o(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function s(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var a={"-":"",_:" ",0:"0"},u=/^\s*\d+/,l=/^%/,c=/[\\^$*+?|[\]().{}]/g;function h(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function f(t){return t.replace(c,"\\$&")}function p(t){return new RegExp("^(?:"+t.map(f).join("|")+")","i")}function d(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function y(t,e,n){var r=u.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function _(t,e,n){var r=u.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function v(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function m(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function g(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function b(t,e,n){var r=u.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function x(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function w(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function T(t,e,n){var r=u.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function S(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function E(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function O(t,e,n){var r=u.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function A(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function M(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function P(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function C(t,e,n){var r=u.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function k(t,e,n){var r=u.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function R(t,e,n){var r=l.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function I(t,e,n){var r=u.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function D(t,e,n){var r=u.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function L(t,e){return h(t.getDate(),e,2)}function F(t,e){return h(t.getHours(),e,2)}function N(t,e){return h(t.getHours()%12||12,e,2)}function j(t,e){return h(1+r.k.count(n.i(r.l)(t),t),e,3)}function B(t,e){return h(t.getMilliseconds(),e,3)}function U(t,e){return B(t,e)+"000"}function q(t,e){return h(t.getMonth()+1,e,2)}function V(t,e){return h(t.getMinutes(),e,2)}function G(t,e){return h(t.getSeconds(),e,2)}function X(t){var e=t.getDay();return 0===e?7:e}function H(t,e){return h(r.m.count(n.i(r.l)(t)-1,t),e,2)}function W(t,e){var i=t.getDay();return t=i>=4||0===i?n.i(r.n)(t):r.n.ceil(t),h(r.n.count(n.i(r.l)(t),t)+(4===n.i(r.l)(t).getDay()),e,2)}function z(t){return t.getDay()}function Y(t,e){return h(r.j.count(n.i(r.l)(t)-1,t),e,2)}function $(t,e){return h(t.getFullYear()%100,e,2)}function Z(t,e){return h(t.getFullYear()%1e4,e,4)}function K(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+h(e/60|0,"0",2)+h(e%60,"0",2)}function Q(t,e){return h(t.getUTCDate(),e,2)}function J(t,e){return h(t.getUTCHours(),e,2)}function tt(t,e){return h(t.getUTCHours()%12||12,e,2)}function et(t,e){return h(1+r.d.count(n.i(r.a)(t),t),e,3)}function nt(t,e){return h(t.getUTCMilliseconds(),e,3)}function rt(t,e){return nt(t,e)+"000"}function it(t,e){return h(t.getUTCMonth()+1,e,2)}function ot(t,e){return h(t.getUTCMinutes(),e,2)}function st(t,e){return h(t.getUTCSeconds(),e,2)}function at(t){var e=t.getUTCDay();return 0===e?7:e}function ut(t,e){return h(r.o.count(n.i(r.a)(t)-1,t),e,2)}function lt(t,e){var i=t.getUTCDay();return t=i>=4||0===i?n.i(r.p)(t):r.p.ceil(t),h(r.p.count(n.i(r.a)(t),t)+(4===n.i(r.a)(t).getUTCDay()),e,2)}function ct(t){return t.getUTCDay()}function ht(t,e){return h(r.i.count(n.i(r.a)(t)-1,t),e,2)}function ft(t,e){return h(t.getUTCFullYear()%100,e,2)}function pt(t,e){return h(t.getUTCFullYear()%1e4,e,4)}function dt(){return"+0000"}function yt(){return"%"}function _t(t){return+t}function vt(t){return Math.floor(+t/1e3)}},,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,n,r){void 0===n&&(n=!1),i(this,t),this._fn=e,this._once=n,this._thisArg=r,this._next=this._prev=this._owner=null}return r(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function s(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var a=function(){function t(){i(this,t),this._head=this._tail=void 0}return r(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=o,e.default=a,t.exports=e.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";t.exports=function(t,e){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(t,e,r){e&&(i[n.q.name][e]=r)}),i}},function(t,e){var n=function(t,e,n,r,i){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=n||-1,this.format=r||t.RGBA,this.type=i||t.UNSIGNED_BYTE};n.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var n=t.videoWidth||t.width,r=t.videoHeight||t.height;r!==this.height||n!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=n,this.height=r};var r=!1;n.prototype.uploadData=function(t,e,n){this.bind();var i=this.gl;if(t instanceof Float32Array){if(!r){if(!i.getExtension("OES_texture_float"))throw new Error("floating point textures not available");r=!0}this.type=i.FLOAT}else this.type=this.type||i.UNSIGNED_BYTE;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||n!==this.height?i.texImage2D(i.TEXTURE_2D,0,this.format,e,n,0,this.format,this.type,t||null):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e,n,this.format,this.type,t||null),this.width=e,this.height=n},n.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},n.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},n.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},n.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},n.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},n.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},n.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},n.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},n.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},n.fromSource=function(t,e,r){var i=new n(t);return i.premultiplyAlpha=r||!1,i.upload(e),i},n.fromData=function(t,e,r,i){var o=new n(t);return o.uploadData(e,r,i),o},t.exports=n},function(t,e){t.exports=function(t,e,n){var r;if(n){var i=n.tempAttribState,o=n.attribState;for(r=0;r<i.length;r++)i[r]=!1;for(r=0;r<e.length;r++)i[e[r].attribute.location]=!0;for(r=0;r<o.length;r++)o[r]!==i[r]&&(o[r]=i[r],n.attribState[r]?t.enableVertexAttribArray(r):t.disableVertexAttribArray(r))}else for(r=0;r<e.length;r++){var s=e[r];t.enableVertexAttribArray(s.attribute.location)}}},function(t,e){var n=function(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.log(t.getShaderInfoLog(r)),null)};t.exports=function(t,e,r,i){var o=n(t,t.VERTEX_SHADER,e),s=n(t,t.FRAGMENT_SHADER,r),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),i)for(var u in i)t.bindAttribLocation(a,i[u],u);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(a,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(a)),t.deleteProgram(a),a=null),t.deleteShader(o),t.deleteShader(s),a}},function(t,e){var n=function(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e};t.exports=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return n(2*e);case"bvec3":return n(3*e);case"bvec4":return n(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},function(t,e,n){var r=n(162),i=n(394),o=function(t,e,n,r){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,n||0,r||0)};t.exports=function(t,e){for(var n={},s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<s;a++){var u=t.getActiveAttrib(e,a),l=r(t,u.type);n[u.name]={type:l,size:i(l),location:t.getAttribLocation(e,u.name),pointer:o}}return n}},function(t,e,n){var r=n(162),i=n(390);t.exports=function(t,e){for(var n={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=t.getActiveUniform(e,s),u=a.name.replace(/\[.*?\]/,""),l=r(t,a.type);n[u]={type:l,size:a.size,location:t.getUniformLocation(e,u),value:i(l,a.size)}}return n}},function(t,e){var n=function(t){return function(){return this.data[t].value}},r={float:function(t,e,n){t.uniform1f(e,n)},vec2:function(t,e,n){t.uniform2f(e,n[0],n[1])},vec3:function(t,e,n){t.uniform3f(e,n[0],n[1],n[2])},vec4:function(t,e,n){t.uniform4f(e,n[0],n[1],n[2],n[3])},int:function(t,e,n){t.uniform1i(e,n)},ivec2:function(t,e,n){t.uniform2i(e,n[0],n[1])},ivec3:function(t,e,n){t.uniform3i(e,n[0],n[1],n[2])},ivec4:function(t,e,n){t.uniform4i(e,n[0],n[1],n[2],n[3])},bool:function(t,e,n){t.uniform1i(e,n)},bvec2:function(t,e,n){t.uniform2i(e,n[0],n[1])},bvec3:function(t,e,n){t.uniform3i(e,n[0],n[1],n[2])},bvec4:function(t,e,n){t.uniform4i(e,n[0],n[1],n[2],n[3])},mat2:function(t,e,n){t.uniformMatrix2fv(e,!1,n)},mat3:function(t,e,n){t.uniformMatrix3fv(e,!1,n)},mat4:function(t,e,n){t.uniformMatrix4fv(e,!1,n)},sampler2D:function(t,e,n){t.uniform1i(e,n)}},i={float:function(t,e,n){t.uniform1fv(e,n)},vec2:function(t,e,n){t.uniform2fv(e,n)},vec3:function(t,e,n){t.uniform3fv(e,n)},vec4:function(t,e,n){t.uniform4fv(e,n)},int:function(t,e,n){t.uniform1iv(e,n)},ivec2:function(t,e,n){t.uniform2iv(e,n)},ivec3:function(t,e,n){t.uniform3iv(e,n)},ivec4:function(t,e,n){t.uniform4iv(e,n)},bool:function(t,e,n){t.uniform1iv(e,n)},bvec2:function(t,e,n){t.uniform2iv(e,n)},bvec3:function(t,e,n){t.uniform3iv(e,n)},bvec4:function(t,e,n){t.uniform4iv(e,n)},sampler2D:function(t,e,n){t.uniform1iv(e,n)}};function o(t,e){return function(n){this.data[t].value=n;var o=this.data[t].location;1===e.size?r[e.type](this.gl,o,n):i[e.type](this.gl,o,n)}}function s(t,e){for(var n=e,r=0;r<t.length-1;r++){var i=n[t[r]]||{data:{}};n[t[r]]=i,n=i}return n}t.exports=function(t,e){var r={data:{}};r.gl=t;for(var i=Object.keys(e),a=0;a<i.length;a++){var u=i[a],l=u.split("."),c=l[l.length-1],h=s(l,r),f=e[u];h.data[c]=f,h.gl=t,Object.defineProperty(h,c,{get:n(c),set:o(c,f)})}return r}},function(t,e){var n={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=function(t){return n[t]}},function(t,e){t.exports=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t}},function(t,e,n){"use strict";e.__esModule=!0,e.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(398),o=l(n(81)),s=n(170),a=l(n(8)),u=n(2);function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e,n,r,u,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:n||a.default.RENDER_OPTIONS.height,forceCanvas:!!u,sharedTicker:!!l},r)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,i.autoDetectRenderer)(e),this.stage=new o.default,this._ticker=null,this.ticker=e.sharedTicker?s.shared:new s.Ticker,e.autoStart&&this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t,e){if(this._ticker){var n=this._ticker;this.ticker=null,n.destroy()}this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},r(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,u.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();e.default=c},function(t,e,n){"use strict";e.__esModule=!0,e.autoDetectRenderer=function(t,e,n,s){var a=t&&t.forceCanvas;void 0!==s&&(a=s);if(!a&&r.isWebGLSupported())return new o.default(t,e,n);return new i.default(t,e,n)};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(4)),i=s(n(82)),o=s(n(107));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=h(n(48)),o=n(2),s=h(n(8)),a=h(n(401)),u=h(n(400)),l=h(n(163)),c=n(9);function h(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this)),r=s.default.TRANSFORM_MODE===o.TRANSFORM_MODE.STATIC?a.default:u.default;return n.tempDisplayObjectParent=null,n.transform=new r,n.alpha=1,n.visible=!0,n.renderable=!0,n.parent=null,n.worldAlpha=1,n.filterArea=null,n._filters=null,n._enabledFilters=null,n._bounds=new l.default,n._boundsID=0,n._lastBoundsID=-1,n._boundsRect=null,n._localBoundsRect=null,n._mask=null,n._destroyed=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new c.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new c.Rectangle),t=this._localBoundsRect);var r=this.getBounds(!1,t);return this.parent=n,this.transform=e,r},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,r){return e&&(t=e.toGlobal(t,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=u,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},r(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(i.default);e.default=f,f.prototype.displayObjectUpdateTransform=f.prototype.updateTransform},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(9);var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n.position=new i.Point(0,0),n.scale=new i.Point(1,1),n.skew=new i.ObservablePoint(n.updateSkew,n,0,0),n.pivot=new i.Point(0,0),n._rotation=0,n._cx=1,n._sx=0,n._cy=0,n._sy=1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},r(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(n(164)).default);e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(9);var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n.position=new i.ObservablePoint(n.onChange,n,0,0),n.scale=new i.ObservablePoint(n.onChange,n,1,1),n.pivot=new i.ObservablePoint(n.onChange,n,0,0),n.skew=new i.ObservablePoint(n.updateSkew,n,0,0),n._rotation=0,n._cx=1,n._sx=0,n._cy=0,n._sy=1,n._localID=0,n._currentLocalID=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},r(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(n(164)).default);e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(e,n,r,i,o,s,a,u,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lineWidth=e,this.lineAlignment=l,this.nativeLines=a,this.lineColor=n,this.lineAlpha=r,this._lineTint=n,this.fillColor=i,this.fillAlpha=o,this._fillTint=i,this.fill=s,this.holes=[],this.shape=u,this.type=u.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape,this.lineAlignment)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(165));var i=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],o=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],s=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],a=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],u=[],l=[];function c(t){return t<0?-1:t>0?1:0}!function(){for(var t=0;t<16;t++){var e=[];l.push(e);for(var n=0;n<16;n++)for(var h=c(i[t]*i[n]+s[t]*o[n]),f=c(o[t]*i[n]+a[t]*o[n]),p=c(i[t]*s[n]+s[t]*a[n]),d=c(o[t]*s[n]+a[t]*a[n]),y=0;y<16;y++)if(i[y]===h&&o[y]===f&&s[y]===p&&a[y]===d){e.push(y);break}}for(var _=0;_<16;_++){var v=new r.default;v.set(i[_],o[_],s[_],a[_],0,0),u.push(v)}}();var h={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return i[t]},uY:function(t){return o[t]},vX:function(t){return s[t]},vY:function(t){return a[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return l[t][e]},sub:function(t,e){return l[t][h.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?h.S:h.N:2*Math.abs(e)<=Math.abs(t)?t>0?h.E:h.W:e>0?t>0?h.SE:h.SW:t>0?h.NE:h.NW},matrixAppendRotationInv:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=u[h.inv(e)];i.tx=n,i.ty=r,t.append(i)}};e.default=h},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._x=r,this._y=i,this.cb=e,this.scope=n}return t.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e||this.cb,n||this.scope,this._x,this._y)},t.prototype.set=function(t,e){var n=t||0,r=e||(0!==e?n:0);this._x===n&&this._y===r||(this._x=n,this._y=r,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(4),o=n(9),s=n(2),a=h(n(8)),u=h(n(81)),l=h(n(169)),c=h(n(48));function h(t){return t&&t.__esModule?t:{default:t}}var f=new o.Matrix,p=function(t){function e(n,r,l,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return(0,i.sayHello)(n),"number"==typeof r&&(r=Object.assign({width:r,height:l||a.default.RENDER_OPTIONS.height},c)),r=Object.assign({},a.default.RENDER_OPTIONS,r),h.options=r,h.type=s.RENDERER_TYPE.UNKNOWN,h.screen=new o.Rectangle(0,0,r.width,r.height),h.view=r.view||document.createElement("canvas"),h.resolution=r.resolution||a.default.RESOLUTION,h.transparent=r.transparent,h.autoResize=r.autoResize||!1,h.blendModes=null,h.preserveDrawingBuffer=r.preserveDrawingBuffer,h.clearBeforeRender=r.clearBeforeRender,h.roundPixels=r.roundPixels,h._backgroundColor=0,h._backgroundColorRgba=[0,0,0,0],h._backgroundColorString="#000000",h.backgroundColor=r.backgroundColor||h._backgroundColor,h._tempDisplayObjectParent=new u.default,h._lastObjectRendered=h._tempDisplayObjectParent,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,n,r){r=r||t.getLocalBounds();var i=l.default.create(0|r.width,0|r.height,e,n);return f.tx=-r.x,f.ty=-r.y,this.render(t,i,!1,f,!!t.parent),i},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},r(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,i.hex2string)(t),(0,i.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(c.default);e.default=p},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(8));var o=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||i.default.RESOLUTION,this.resize(e,n)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},r(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();e.default=o},function(t,e,n){"use strict";function r(t){var e=document.createElement("canvas");e.width=6,e.height=1;var n=e.getContext("2d");return n.fillStyle=t,n.fillRect(0,0,6,1),e}e.__esModule=!0,e.default=function(){if("undefined"==typeof document)return!1;var t=r("#ff00ff"),e=r("#ffff00"),n=document.createElement("canvas");n.width=6,n.height=1;var i=n.getContext("2d");i.globalCompositeOperation="multiply",i.drawImage(t,0,0),i.drawImage(e,2,0);var o=i.getImageData(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=u(n(632)),o=n(4),s=n(2),a=u(n(8));function u(t){return t&&t.__esModule?t:{default:t}}var l={},c=function(){function t(e,n,r){for(var u in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this._blendMode=s.BLEND_MODES.NORMAL,this.uniformData=r||(0,i.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[u]=this.uniformData[u].value,this.uniformData[u].type&&(this.uniformData[u].type=this.uniformData[u].type.toLowerCase());this.glShaders={},l[this.vertexSrc+this.fragmentSrc]||(l[this.vertexSrc+this.fragmentSrc]=(0,o.uid)()),this.glShaderKey=l[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=a.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,n,r,i){t.applyFilter(this,e,n,r)},r(t,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();e.default=c},function(t,e,n){"use strict";e.__esModule=!0;var r=s(n(408)),i=n(9),o=(n(27),s(n(414)));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new i.Matrix,o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return n.renderable=!1,o.maskSprite=n,o.maskMatrix=r,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,n,r){var i=this.maskSprite,s=this.maskSprite.texture;s.valid&&(s.transform||(s.transform=new o.default(s,0)),s.transform.update(),this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(s.transform.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=s.transform.uClampFrame,t.applyFilter(this,e,n,r))},e}(r.default);e.default=a},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(18)),i=o(n(171));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var o=0;o<4;o++)this.interleaved[4*o]=this.vertices[2*o],this.interleaved[4*o+1]=this.vertices[2*o+1],this.interleaved[4*o+2]=this.uvs[2*o],this.interleaved[4*o+3]=this.uvs[2*o+1];this.indices=(0,i.default)(1),this.vertexBuffer=r.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(e,n)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,n=e.x,r=e.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();e.default=s},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(e,n,r,i,o,s,a,u,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e,this.style=n,this.width=r,this.height=i,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=u,this.fontProperties=l}return t.measureText=function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;r=void 0===r||null===r?n.wordWrap:r;var o=n.toFontString(),s=t.measureFont(o),a=i.getContext("2d");a.font=o;for(var u=(r?t.wordWrap(e,n,i):e).split(/(?:\r\n|\r|\n)/),l=new Array(u.length),c=0,h=0;h<u.length;h++){var f=a.measureText(u[h]).width+(u[h].length-1)*n.letterSpacing;l[h]=f,c=Math.max(c,f)}var p=c+n.strokeThickness;n.dropShadow&&(p+=n.dropShadowDistance);var d=n.lineHeight||s.fontSize+n.strokeThickness,y=Math.max(d,s.fontSize+n.strokeThickness)+(u.length-1)*(d+n.leading);return n.dropShadow&&(y+=n.dropShadowDistance),new t(e,n,p,y,u,l,d+n.leading,c,s)},t.wordWrap=function(e,n){for(var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas).getContext("2d"),i=0,o="",s="",a={},u=n.letterSpacing,l=n.whiteSpace,c=t.collapseSpaces(l),h=t.collapseNewlines(l),f=!c,p=n.wordWrapWidth+u,d=t.tokenize(e),y=0;y<d.length;y++){var _=d[y];if(t.isNewline(_)){if(!h){s+=t.addLine(o),f=!c,o="",i=0;continue}_=" "}if(c){var v=t.isBreakingSpace(_),m=t.isBreakingSpace(o[o.length-1]);if(v&&m)continue}var g=t.getFromCache(_,u,a,r);if(g>p)if(""!==o&&(s+=t.addLine(o),o="",i=0),t.canBreakWords(_,n.breakWords))for(var b=_.split(""),x=0;x<b.length;x++){for(var w=b[x],T=1;b[x+T];){var S=b[x+T],E=w[w.length-1];if(t.canBreakChars(E,S,_,x,n.breakWords))break;w+=S,T++}x+=w.length-1;var O=t.getFromCache(w,u,a,r);O+i>p&&(s+=t.addLine(o),f=!1,o="",i=0),o+=w,i+=O}else{o.length>0&&(s+=t.addLine(o),o="",i=0);var A=y===d.length-1;s+=t.addLine(_,!A),f=!1,o="",i=0}else g+i>p&&(f=!1,s+=t.addLine(o),o="",i=0),(o.length>0||!t.isBreakingSpace(_)||f)&&(o+=_,i+=g)}return s+=t.addLine(o,!1)},t.addLine=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=t.trimRight(e),e=n?e+"\n":e},t.getFromCache=function(t,e,n,r){var i=n[t];if(void 0===i){var o=t.length*e;i=r.measureText(t).width+o,n[t]=i}return i},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var n=e.length-1;n>=0;n--){var r=e[n];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var n=[],r="";if("string"!=typeof e)return n;for(var i=0;i<e.length;i++){var o=e[i];t.isBreakingSpace(o)||t.isNewline(o)?(""!==r&&(n.push(r),r=""),n.push(o)):r+=o}return""!==r&&n.push(r),n},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,n,r,i){return!0},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var n={},r=t._canvas,i=t._context;i.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(i.measureText(o).width),a=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),u=2*a;a=a*t.BASELINE_MULTIPLIER|0,r.width=s,r.height=u,i.fillStyle="#f00",i.fillRect(0,0,s,u),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);var l=i.getImageData(0,0,s,u).data,c=l.length,h=4*s,f=0,p=0,d=!1;for(f=0;f<a;++f){for(var y=0;y<h;y+=4)if(255!==l[p+y]){d=!0;break}if(d)break;p+=h}for(n.ascent=a-f,p=c-h,d=!1,f=u;f>a;--f){for(var _=0;_<h;_+=4)if(255!==l[p+_]){d=!0;break}if(d)break;p-=h}return n.descent=f-a,n.fontSize=n.ascent+n.descent,t._fonts[e]=n,n},t.clearMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?delete t._fonts[e]:t._fonts={}},t}();e.default=r;var i=document.createElement("canvas");i.width=i.height=10,r._canvas=i,r._context=i.getContext("2d"),r._fonts={},r.METRICS_STRING="|Éq",r.BASELINE_SYMBOL="M",r.BASELINE_MULTIPLIER=1.4,r._newlines=[10,13],r._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(2),o=n(4);var s={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:i.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},a=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.styleID=0,this.reset(),h(this,e,e)}return t.prototype.clone=function(){var e={};return h(e,this,s),new t(e)},t.prototype.reset=function(){h(this,s,s)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;n>=0;n--){var r=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&a.indexOf(r)<0&&(r='"'+r+'"'),e[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},r(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=c(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=c(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=c(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();function l(t){return"number"==typeof t?(0,o.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function c(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=l(t[e]);return t}return l(t)}function h(t,e,n){for(var r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}e.default=u},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(58)),i=o(n(8));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments[2],s=arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,null,o));return a.resolution=s||i.default.RESOLUTION,a.width=Math.ceil(n),a.height=Math.ceil(r),a.realWidth=a.width*a.resolution,a.realHeight=a.height*a.resolution,a.scaleMode=void 0!==o?o:i.default.SCALE_MODE,a.hasLoaded=!0,a._glRenderTargets={},a._canvasRenderTarget=null,a.valid=!1,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(r.default);e.default=s},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(165));var o=new i.default,s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._texture=e,this.mapCoord=new i.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===n?.5:n}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,r=0;r<t.length;r+=2){var i=t[r],o=t[r+1];e[r]=i*n.a+o*n.c+n.tx,e[r+1]=i*n.b+o*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=e.orig,i=e.trim;i&&(o.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(o));var s=e.baseTexture,a=this.uClampFrame,u=this.clampMargin/s.resolution,l=this.clampOffset;return a[0]=(e._frame.x+u+l)/s.width,a[1]=(e._frame.y+u+l)/s.height,a[2]=(e._frame.x+e._frame.width-u+l)/s.width,a[3]=(e._frame.y+e._frame.height-u+l)/s.height,this.uClampOffset[0]=l/s.realWidth,this.uClampOffset[1]=l/s.realHeight,!0},r(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();e.default=s},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(403));var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,n){var i=e.width,o=e.height;if(n){var s=t.width/2/i,a=t.height/2/o,u=t.x/i+s,l=t.y/o+a;n=r.default.add(n,r.default.NW),this.x0=u+s*r.default.uX(n),this.y0=l+a*r.default.uY(n),n=r.default.add(n,2),this.x1=u+s*r.default.uX(n),this.y1=l+a*r.default.uY(n),n=r.default.add(n,2),this.x2=u+s*r.default.uX(n),this.y2=l+a*r.default.uY(n),n=r.default.add(n,2),this.x3=u+s*r.default.uX(n),this.y3=l+a*r.default.uY(n)}else this.x0=t.x/i,this.y0=t.y/o,this.x1=(t.x+t.width)/i,this.y1=t.y/o,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/o,this.x3=t.x/i,this.y3=(t.y+t.height)/o;this.uvsUint32[0]=(65535&Math.round(65535*this.y0))<<16|65535&Math.round(65535*this.x0),this.uvsUint32[1]=(65535&Math.round(65535*this.y1))<<16|65535&Math.round(65535*this.x1),this.uvsUint32[2]=(65535&Math.round(65535*this.y2))<<16|65535&Math.round(65535*this.x2),this.uvsUint32[3]=(65535&Math.round(65535*this.y3))<<16|65535&Math.round(65535*this.x3)},t}();e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=l(n(58)),o=n(4),s=n(170),a=n(2),u=l(n(417));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(n,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!n)throw new Error("No video source element specified.");(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r));return o.width=n.videoWidth,o.height=n.videoHeight,o._autoUpdate=!0,o._isAutoUpdating=!1,o.autoPlay=i,o.update=o.update.bind(o),o._onCanPlay=o._onCanPlay.bind(o),n.addEventListener("play",o._onPlayStart.bind(o)),n.addEventListener("pause",o._onPlayStop.bind(o)),o.hasLoaded=!1,o.__loaded=!1,o._isSourceReady()?o._onCanPlay():(n.addEventListener("canplay",o._onCanPlay),n.addEventListener("canplaythrough",o._onCanPlay)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(s.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(s.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&s.shared.remove(this.update,this),this.source&&this.source._pixiId&&(i.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),t.prototype.destroy.call(this)},e.fromVideo=function(t,n,r){t._pixiId||(t._pixiId="video_"+(0,o.uid)());var s=o.BaseTextureCache[t._pixiId];return s||(s=new e(t,n,r),i.default.addToCache(s,t._pixiId)),s},e.fromUrl=function(t,n,r,i){var o=document.createElement("video");o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline","");var s=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===r&&0!==s.indexOf("data:")?o.crossOrigin=(0,u.default)(s):r&&(o.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(t))for(var a=0;a<t.length;++a)o.appendChild(h(t[a].src||t[a],t[a].mime));else o.appendChild(h(s,t.mime));return o.load(),e.fromVideo(o,n,i)},r(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(s.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(s.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(i.default);function h(t,e){if(!e){var n=t.split("?").shift().toLowerCase();e="video/"+n.substr(n.lastIndexOf(".")+1)}var r=document.createElement("source");return r.src=t,r.type=e,r}e.default=c,c.fromUrls=c.fromUrl},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,i||(i=document.createElement("a"));i.href=t;var n=!(t=r.default.parse(i.href)).port&&""===e.port||t.port===e.port;if(t.hostname!==e.hostname||!n||t.protocol!==e.protocol)return"anonymous";return""};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(437));var i=void 0},function(t,e,n){"use strict";e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.AnimatedSprite=void 0;var r=n(659);Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return a(r).default}});var i=n(661);Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return a(i).default}});var o=n(665);Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return a(o).default}});var s=n(660);function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return a(s).default}}),n(662),n(663),n(664)},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),o=u(n(422)),s=u(n(421)),a=u(n(423));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(n,r,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u=u||5;var l=(0,o.default)(u,!0),c=(0,s.default)(u),h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,l,c));return h.resolution=a||i.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=n||8,h.firstRun=!0,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,n,r){if(this.firstRun){var i=t.renderer.gl,u=(0,a.default)(i);this.vertexSrc=(0,o.default)(u,!0),this.fragmentSrc=(0,s.default)(u),this.firstRun=!1}if(this.uniforms.strength=1/n.size.width*(n.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{for(var l=t.getRenderTarget(!0),c=e,h=l,f=0;f<this.passes-1;f++){t.applyFilter(this,c,h,!0);var p=h;h=c,c=p}t.applyFilter(this,c,n,r),t.returnRenderTarget(l)}},r(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(i.Filter);e.default=l},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),o=u(n(422)),s=u(n(421)),a=u(n(423));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(n,r,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u=u||5;var l=(0,o.default)(u,!1),c=(0,s.default)(u),h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,l,c));return h.resolution=a||i.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=n||8,h.firstRun=!0,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,n,r){if(this.firstRun){var i=t.renderer.gl,u=(0,a.default)(i);this.vertexSrc=(0,o.default)(u,!1),this.fragmentSrc=(0,s.default)(u),this.firstRun=!1}if(this.uniforms.strength=1/n.size.height*(n.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{for(var l=t.getRenderTarget(!0),c=e,h=l,f=0;f<this.passes-1;f++){t.applyFilter(this,c,h,!0);var p=h;h=c,c=p}t.applyFilter(this,c,n,r),t.returnRenderTarget(l)}},r(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(i.Filter);e.default=l},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){for(var e=r[t],n=e.length,o=i,s="",a=void 0,u=0;u<t;u++){var l="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",u);a=u,u>=n&&(a=t-u-1),l=l.replace("%value%",e[a]),s+=l,s+="\n"}return o=(o=o.replace("%blur%",s)).replace("%size%",t)};var r={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},i=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){var n=Math.ceil(t/2),i=r,o="",s=void 0;s=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var u=s.replace("%index%",a);u=u.replace("%sampleIndex%",a-(n-1)+".0"),o+=u,o+="\n"}return i=(i=i.replace("%blur%",o)).replace("%size%",t)};var r=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){var e=t.getParameter(t.MAX_VARYING_VECTORS),n=15;for(;n>e;)n-=2;return n}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3));var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.global=new i.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},r(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},r(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();e.default=i,i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(t,e,n){"use strict";e.__esModule=!0,e.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(t,e,n){"use strict";e.__esModule=!0,e.parse=s,e.default=function(){return function(t,e){if(t.data&&t.type===i.Resource.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var n=t.isDataUrl?"":r.dirname(t.url);t.isDataUrl&&("."===n&&(n=""),this.baseUrl&&n&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(n+="/")),(n=n.replace(this.baseUrl,""))&&"/"!==n.charAt(n.length-1)&&(n+="/");for(var o=t.data.getElementsByTagName("page"),a={},u=function(n){a[n.metadata.pageFile]=n.texture,Object.keys(a).length===o.length&&(s(t,a),e())},l=0;l<o.length;++l){var c=o[l].getAttribute("file"),h=n+c,f=!1;for(var p in this.resources){var d=this.resources[p];if(d.url===h){d.metadata.pageFile=c,d.texture?u(d):d.onAfterMiddleware.add(u),f=!0;break}}if(!f){var y={crossOrigin:t.crossOrigin,loadType:i.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:c},t.metadata.imageMetadata),parentResource:t};this.add(h,y,u)}}}else e();else e()}};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(27)),i=n(85),o=n(418);function s(t,e){t.bitmapFont=o.BitmapText.registerFont(t.data,e)}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){var n=t.name+"_image";if(t.data&&t.type===r.Resource.TYPE.JSON&&t.data.frames&&!this.resources[n]){var i={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},a=s(t,this.baseUrl);this.add(n,a,i,function(n){if(n.error)e(n.error);else{var r=new o.Spritesheet(n.texture.baseTexture,t.data,t.url);r.parse(function(){t.spritesheet=r,t.textures=r.textures,e()})}})}else e()}},e.getResourcePath=s;var r=n(85),i=function(t){return t&&t.__esModule?t:{default:t}}(n(437)),o=n(3);function s(t,e){return t.isDataUrl?t.data.meta.image:i.default.resolve(t.url.replace(e,""),t.data.meta.image)}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){t.data&&t.type===r.Resource.TYPE.IMAGE&&(t.texture=i.default.fromLoader(t.data,t.url,t.name)),e()}};var r=n(85),i=function(t){return t&&t.__esModule?t:{default:t}}(n(39))},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(84));var i=function(t){function e(n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return s._ready=!0,s.verticesX=i||10,s.verticesY=o||10,s.drawMode=r.default.DRAW_MODES.TRIANGLES,s.refresh(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,n=[],r=[],i=[],o=this.verticesX-1,s=this.verticesY-1,a=t.width/o,u=t.height/s,l=0;l<e;l++){var c=l%this.verticesX,h=l/this.verticesX|0;n.push(c*a,h*u),r.push(c/o,h/s)}for(var f=o*s,p=0;p<f;p++){var d=p%o,y=p/o|0,_=y*this.verticesX+d,v=y*this.verticesX+d+1,m=(y+1)*this.verticesX+d,g=(y+1)*this.verticesX+d+1;i.push(_,v,m),i.push(v,g,m)}this.vertices=new Float32Array(n),this.uvs=new Float32Array(r),this.colors=new Float32Array([]),this.indices=new Uint16Array(i),this.dirty++,this.indexDirty++,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){r.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(r.default);e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();e.default=r},function(t,e,n){"use strict";function r(){}function i(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}e.__esModule=!0,e.eachSeries=function(t,e,n,r){var i=0,o=t.length;!function s(a){a||i===o?n&&n(a):r?setTimeout(function(){e(t[i++],s)},1):e(t[i++],s)}()},e.queue=function(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var n=0,o={_tasks:[],concurrency:e,saturated:r,unsaturated:r,buffer:e/4,empty:r,drain:r,error:r,started:!1,paused:!1,push:function(t,e){s(t,!1,e)},kill:function(){n=0,o.drain=r,o.started=!1,o._tasks=[]},unshift:function(t,e){s(t,!0,e)},process:function(){for(;!o.paused&&n<o.concurrency&&o._tasks.length;){var e=o._tasks.shift();0===o._tasks.length&&o.empty(),(n+=1)===o.concurrency&&o.saturated(),t(e.data,i(a(e)))}},length:function(){return o._tasks.length},running:function(){return n},idle:function(){return o._tasks.length+n===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var t=1;t<=o.concurrency;t++)o.process()}}};function s(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(o.started=!0,null==t&&o.idle())setTimeout(function(){return o.drain()},1);else{var i={data:t,callback:"function"==typeof n?n:r};e?o._tasks.unshift(i):o._tasks.push(i),setTimeout(function(){return o.process()},1)}}function a(t){return function(){n-=1,t.callback.apply(t,arguments),null!=arguments[0]&&o.error(arguments[0],t.data),n<=o.concurrency-o.buffer&&o.unsaturated(),o.idle()&&o.drain(),o.process()}}return o}},function(t,e,n){"use strict";e.__esModule=!0,e.encodeBinary=i;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(t){for(var e="",n=0;n<t.length;){for(var i=[0,0,0],o=[0,0,0,0],s=0;s<i.length;++s)n<t.length?i[s]=255&t.charCodeAt(n++):i[s]=0;switch(o[0]=i[0]>>2,o[1]=(3&i[0])<<4|i[1]>>4,o[2]=(15&i[1])<<2|i[2]>>6,o[3]=63&i[2],n-(t.length-1)){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var a=0;a<o.length;++a)e+=r.charAt(o[a])}return e}t.exports.default=i},,,function(t,e,n){"use strict";var r=n(604),i=n(712);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=g,e.resolve=function(t,e){return g(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?g(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=g(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),h=["%","/","?",";","#"].concat(c),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=n(700);function g(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",l=t.split(a);l[0]=l[0].replace(/\\/g,"/");var g=t=l.join(a);if(g=g.trim(),!n&&1===t.split("#").length){var b=u.exec(g);if(b)return this.path=g,this.href=g,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=s.exec(g);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,g=g.substr(x.length)}if(n||x||g.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===g.substr(0,2);!T||x&&_[x]||(g=g.substr(2),this.slashes=!0)}if(!_[x]&&(T||x&&!v[x])){for(var S,E,O=-1,A=0;A<f.length;A++){-1!==(M=g.indexOf(f[A]))&&(-1===O||M<O)&&(O=M)}-1!==(E=-1===O?g.lastIndexOf("@"):g.lastIndexOf("@",O))&&(S=g.slice(0,E),g=g.slice(E+1),this.auth=decodeURIComponent(S)),O=-1;for(A=0;A<h.length;A++){var M;-1!==(M=g.indexOf(h[A]))&&(-1===O||M<O)&&(O=M)}-1===O&&(O=g.length),this.host=g.slice(0,O),g=g.slice(O),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var C=this.hostname.split(/\./),k=(A=0,C.length);A<k;A++){var R=C[A];if(R&&!R.match(p)){for(var I="",D=0,L=R.length;D<L;D++)R.charCodeAt(D)>127?I+="x":I+=R[D];if(!I.match(p)){var F=C.slice(0,A),N=C.slice(A+1),j=R.match(d);j&&(F.push(j[1]),N.unshift(j[2])),N.length&&(g="/"+N.join(".")+g),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+B,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==g[0]&&(g="/"+g))}if(!y[w])for(A=0,k=c.length;A<k;A++){var q=c[A];if(-1!==g.indexOf(q)){var V=encodeURIComponent(q);V===q&&(V=escape(q)),g=g.split(q).join(V)}}var G=g.indexOf("#");-1!==G&&(this.hash=g.substr(G),g=g.slice(0,G));var X=g.indexOf("?");if(-1!==X?(this.search=g.substr(X),this.query=g.substr(X+1),e&&(this.query=m.parse(this.query)),g=g.slice(0,X)):e&&(this.search="",this.query={}),g&&(this.pathname=g),v[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var H=this.search||"";this.path=B+H}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=m.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(g(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),l=0;l<u.length;l++){var c=u[l];"protocol"!==c&&(n[c]=t[c])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var p=h[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||_[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var y=n.pathname||"",m=n.search||"";n.path=y+m}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||g||n.host&&t.pathname,w=x,T=n.pathname&&n.pathname.split("/")||[],S=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===T[0]?T[0]=n.host:T.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),x=x&&(""===d[0]||""===T[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,T=d;else if(d.length)T||(T=[]),T.pop(),T=T.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(S)n.hostname=n.host=T.shift(),(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.host=n.hostname=P.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=T.slice(-1)[0],O=(n.host||t.host||T.length>1)&&("."===E||".."===E)||""===E,A=0,M=T.length;M>=0;M--)"."===(E=T[M])?T.splice(M,1):".."===E?(T.splice(M,1),A++):A&&(T.splice(M,1),A--);if(!x&&!w)for(;A--;A)T.unshift("..");!x||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),O&&"/"!==T.join("/").substr(-1)&&T.push("");var P,C=""===T[0]||T[0]&&"/"===T[0].charAt(0);S&&(n.hostname=n.host=C?"":T.length?T.shift():"",(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.host=n.hostname=P.shift()));return(x=x||n.host&&T.length)&&!C&&T.unshift(""),T.length?n.pathname=T.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTerminal=function(t){var e=t.parentEl,n=t.onSubmit,l=t.width,c=void 0===l?1e3:l,h=t.showStatusBar,f=void 0!==h&&h,p=(0,r.default)({parentEl:e,width:c}),d=!1,y="",_=p.stage,v=p.mouse,m=p.screenArea,g=p.view,b=p.keyboard,x=n&&b?(0,o.createPromptLine)({stage:_,onEnterText:function(t){var e=d?"> "+y+":":">";S.print(e+" "+t,!0),S.print("",!0),n(t,S)},onCancelAnimation:function(){return T.cancelAnimations()},keyboard:b}):null,w=(0,u.createMap)({stage:_,prompt:x}),T=(0,i.createLogText)({stage:_,prompt:x,screenArea:m,view:g,mouse:v,showStatusBar:f});f&&(0,s.createStatusBar)({view:g,stage:_,width:c,prompt:x,mouse:v});var S={onAnimate:x?x.animate:function(){},onInput:x?x.onInput:function(){},onSubmit:x?x.onSubmit:function(){},onKeyUp:x?x.onKeyUp:function(){},onKeyDown:x?x.onKeyDown:function(){},clear:function(){T.clear()},showHelp:function(t){S.print((0,a.getHelp)(t))},showMap:function(){p.pushProcess(w),T.reset()},print:function(t,e,n){T.print(t,e,n)},cancelAnimation:function(){T.setDisabled(!1),x.setDisabled(!1),T.cancelAnimations()},disableInput:function(){T.setDisabled(!0),x&&x.setDisabled(!0)},enableInput:function(){T.setDisabled(!1),x&&x.setDisabled(!1)},setInputMode:function(t,e){d=t,y=e,x&&x.setInputMode(t,e)},isInputMode:function(){return x.isInputMode()},setPrompt:function(t){return x.setPrompt(t)}};return p.pushProcess(S),S};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(466)),i=n(468),o=n(472),s=n(473),a=n(203),u=n(471)},function(t,e,n){t.exports={default:n(488),__esModule:!0}},,,,,,,,function(t,e){t.exports={volume:-20,attack:.017,decay:.011,sustain:.0162,release:.0353,sustainLevel:1,frequency:605,source:"sine",highpass:796}},function(t,e){t.exports={volume:-20,attack:.011,sustain:.29,release:.279,frequency:605,jumpAt1:.1543,jumpBy1:.47,jumpAt2:.36,jumpBy2:.22}},function(t,e){t.exports={volume:-30,attack:.017,decay:.089,sustain:.24,release:.344,sustainLevel:.9,frequency:358,sweep:.275,jumpAt1:.45,jumpBy1:1,jumpAt2:.27,jumpBy2:.55,source:"square",vibrato:.09,vibratoFreq:16,lowpass:6170}},function(t,e){t.exports={volume:-10,attack:.011,decay:.063,sustain:.17,release:.24,frequency:174.5,sweep:.76,jumpAt1:.2066,jumpBy1:.6,jumpAt2:.51,vibrato:.09,vibratoFreq:11}},function(t,e){t.exports={volume:-20,decay:.168,sustain:.15,release:.207,frequency:1137,sweep:-.4027,pulseWidth:.12,vibrato:.1107,vibratoFreq:15.5,lowpass:6628}},function(t,e){t.exports={volume:-32,attack:.017,decay:.096,sustain:.11,release:.298,jumpAt1:.15,jumpBy1:.54,jumpAt2:.32,jumpBy2:-.18,source:"sawtooth",pulseWidth:.8,tremolo:.05,tremoloFreq:8.5,vibratoFreq:20}},function(t,e){t.exports={volume:-21,attack:.011,decay:.011,sustain:.07,release:.2387,frequency:400,jumpAt1:.52,jumpBy1:-.15,harmonics:3,vibrato:.15,highpass:469}},function(t,e){t.exports={volume:-44,attack:.226,decay:.063,sustain:.37,release:.272,frequency:643,sweep:1.42,source:"sawtooth",vibrato:.27,vibratoFreq:25,compressorThreshold:-34.67}},function(t,e){t.exports={volume:-14,attack:.069,decay:.122,release:.325,sweep:-.62,source:"square",harmonics:6,vibrato:.26,vibratoFreq:25}},function(t,e){t.exports={volume:-14,attack:.069,decay:.122,release:.325,sweep:.82,source:"square",harmonics:6,vibrato:.26,vibratoFreq:25}},function(t,e){t.exports={volume:-32,attack:.024,decay:.128,sustain:.07,release:.305,frequency:396,sweep:.97,jumpAt1:.2108,pulseWidth:.79}},function(t,e){t.exports={volume:-32,attack:.024,decay:.128,sustain:.06,release:.246,frequency:567,sweep:-.44,jumpAt1:.48,pulseWidth:.79}},function(t,e){t.exports={volume:-35,attack:.024,decay:.03,sustain:.06,release:.056,sustainLevel:.2,frequency:147,sweep:-.05,repeat:5.3,jumpAt1:.42,jumpBy1:-.3,source:"sawtooth",vibratoFreq:4,lowpass:731}},function(t,e){t.exports={volume:-23,attack:.03,decay:.089,sustain:.11,release:.109,source:"pink noise",tremoloFreq:25,vibratoFreq:40.5,lowpass:6235,lowpassSweep:-1998,highpass:600,highpassSweep:2725}},function(t,e,n){"use strict";var r=u(n(120)),i=u(n(121)),o=u(n(122)),s=u(n(124)),a=u(n(123));function u(t){return t&&t.__esModule?t:{default:t}}var l=n(24),c=function(t){function e(t){(0,i.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,n(173),n(701)));return o.bendFactor=[6,6],o.overscanColor=[0,0,0,1],t&&(o.overscanColor=[.07331,.337,.1337,1]),o.uniforms.mappedMatrix=new l.Matrix,o.uniforms.unmappedMatrix=new l.Matrix,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"bendFactor",get:function(){return this.uniforms.bendFactor},set:function(t){this.uniforms.bendFactor=t}},{key:"overscanColor",get:function(){return this.uniforms.overscanColor},set:function(t){this.uniforms.overscanColor=t}}]),e}(l.Filter);c.prototype.apply=function(t,e,n){this.uniforms.mappedMatrix=t.calculateNormalizedScreenSpaceMatrix(this.uniforms.mappedMatrix),this.uniforms.unmappedMatrix=this.uniforms.mappedMatrix.clone().invert(),t.applyFilter(this,e,n)},t.exports=c},function(t,e,n){"use strict";var r=u(n(120)),i=u(n(121)),o=u(n(122)),s=u(n(124)),a=u(n(123));function u(t){return t&&t.__esModule?t:{default:t}}var l=n(24),c=function(t){function e(t){(0,i.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,n(173),n(702)));return o.noise=.2,o.uniforms.mappedMatrix=new l.Matrix,o.uniforms.unmappedMatrix=new l.Matrix,o.uniforms.time=0,o.uniforms.chroma=0,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"noise",get:function(){return this.uniforms.noise},set:function(t){this.uniforms.noise=t}},{key:"time",get:function(){return this.uniforms.time},set:function(t){this.uniforms.time=t}},{key:"chroma",get:function(){return this.uniforms.chroma},set:function(t){this.uniforms.chroma=t}}]),e}(l.Filter);c.prototype.apply=function(t,e,n){this.uniforms.mappedMatrix=t.calculateNormalizedScreenSpaceMatrix(this.uniforms.mappedMatrix),this.uniforms.unmappedMatrix=this.uniforms.mappedMatrix.clone().invert(),t.applyFilter(this,e,n)},t.exports=c},function(t,e,n){"use strict";var r=u(n(120)),i=u(n(121)),o=u(n(122)),s=u(n(124)),a=u(n(123));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){(0,i.default)(this,e);var t=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,n(173),n(703)));return t.time=0,t.noiseFactor=0,t.noiseTimeFactor=.2,t.cellularFactor=0,t.cellularTimeFactor=0,t.cellularJitter=.04,t.cellularScale=5,t}return(0,a.default)(e,t),(0,o.default)(e,[{key:"noiseFactor",get:function(){return this.uniforms.noiseFactor},set:function(t){this.uniforms.noiseFactor=t}},{key:"noiseTimeFactor",get:function(){return this.uniforms.noiseTimeFactor},set:function(t){this.uniforms.noiseTimeFactor=t}},{key:"cellularFactor",get:function(){return this.uniforms.cellularFactor},set:function(t){this.uniforms.cellularFactor=t}},{key:"cellularTimeFactor",get:function(){return this.uniforms.cellularTimeFactor},set:function(t){this.uniforms.cellularTimeFactor=t}},{key:"cellularJitter",get:function(){return this.uniforms.cellularJitter},set:function(t){this.uniforms.cellularJitter=t}},{key:"cellularScale",get:function(){return this.uniforms.cellularScale},set:function(t){this.uniforms.cellularScale=t}},{key:"time",get:function(){return this.uniforms.time},set:function(t){this.uniforms.time=t}}]),e}(n(24).Filter);t.exports=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.completeInput=function(t,e){var n=t.substring(2,e+2),i=t.substring(e+2),o=n.split(" ");if(n.length<1||o.length<1)return null;var s=o[o.length-1],a=new RegExp("^"+s),u=(0,r.getVerbs)().find(function(t){return t.match(a)});if(u)return{diff:u.length-s.length,found:u,output:o.slice(0,o-2).join(" ")+u+i};return null};var r=n(203)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCaret=function(t){var e=+new Date,n=!0,i=0,a=0,u=0,l=new r.Graphics;t.addChild(l);var c=!1;function h(){if(l.clear(),!c&&(n||a!==u)){var t=2*s(),e=a*s()+t,r=a===u?2:(u-a)*s();l.beginFill(16777215,.5),l.drawRect(e,i,r,o()),l.endFill()}}return{setDisabled:function(t){c=t},update:function(t,e,n){i=t,a=e,u=n,h()},animate:function(){var t=+new Date,r=t-e;r>300&&(n=!n,e=t),h()}}};var r=n(24),i=n(65),o=i.getCharacterHeight,s=i.getCharacterWidth},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.parentEl,n=t.width,c=void 0===n?1e3:n,d=t.backgroundColor,y=void 0===d?"#000000":d,_=t.aspectRatio,v=void 0===_?16/9:_,m=c/v,g=h.autoDetectRenderer(c,m,{backgroundColor:y});!function(t){t instanceof h.WebGLRenderer||window.alert("No hardware renderer detected!\nYou need a browser with hardware acceleration enabled to run this game!")}(g);var b=g.view;e.appendChild(b);var x=new h.Container,w=new h.Container;x.addChild(w);var T=new h.Container;x.addChild(T);var S=new h.Rectangle(0,0,g.width,g.height);x.filterArea=S,w.filterArea=S;var E=new r.default(!1),O=new i.default,A=new o.default;x.filters=[E,A,O],p&&function(t){var e=t.glitchFilter,n=t.crtFilter,r=(t.bulgeFilter,new u.default.GUI),i=r.addFolder("Cow Fever");i.add(e,"noiseFactor",0,.003,1e-4),i.add(e,"noiseTimeFactor",1,10,.01),i.add(e,"cellularFactor",0,.1,.001),i.add(e,"cellularScale",1,10,.01),i.add(e,"cellularJitter",1,10,.01),i.add(e,"cellularTimeFactor",.001,.1,.001),r.addFolder("Chromatic Abberation").add(n,"chroma",0,.01,.001)}({crtFilter:E,bulgeFilter:O,glitchFilter:A});window.setGlitchFilter=function(t){var e=t.noiseFactor,n=t.noiseTimeFactor,r=t.cellularFactor,i=t.cellularTimeFactor,o=t.cellularJitter,s=t.cellularScale;null!=e&&(A.noiseFactor=e),null!=n&&(A.noiseTimeFactor=n),null!=r&&(A.cellularFactor=r),null!=i&&(A.cellularTimeFactor=i),null!=o&&(A.cellularJitter=o),null!=s&&(A.cellularScale=s)};var M=(0,s.createMouse)({view:b});(0,l.createCursor)({view:b,stage:T,mouse:M});var P=[],C=!1,k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;C=!0,setTimeout(function(){C=!1},t)},R=function(t){if(!(C||P.length<1)){var e=P[P.length-1];t(e)}},I=(0,a.createKeyboardInput)({onInput:function(t){R(function(e){return(e.onInput||f)(t,L)})},onKeyDown:function(t){R(function(e){return(e.onKeyDown||f)(t,L)})},onKeyUp:function(t){R(function(e){return(e.onKeyUp||f)(t,L)})},onSubmit:function(t){t.preventDefault(),R(function(e){return(e.onSubmit||f)(t,L)})}}),D=function(t){return(t.onAnimate||f)(L)};!function t(){window.requestAnimationFrame(t);E.time+=.05;A.time+=1;R(D);g.render(x)}();var L={stage:w,screenArea:S,view:b,mouse:M,keyboard:I,pushProcess:function(t){k(),P.push(t),(t.onBegin||f)(L)},popProcess:function(){k(),P.pop()}};return L};var r=c(n(462)),i=c(n(461)),o=c(n(463)),s=n(470),a=n(467),u=c(n(597)),l=n(469);function c(t){return t&&t.__esModule?t:{default:t}}var h=n(24);var f=Function.prototype,p=!1},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createKeyboardInput=function(t){var e=t.onInput,n=t.onKeyDown,r=t.onKeyUp,i=t.onSubmit,o=document.getElementById("prompt"),s=document.getElementById("prompt-form");if(!o)return null;return o.addEventListener("input",e),o.addEventListener("keydown",n),o.addEventListener("keyup",r),s.addEventListener("submit",i),{setPromptValue:function(t){o.value=t},getPromptValue:function(){return o.value},getSelection:function(){return{selectionStart:o.selectionStart,selectionEnd:o.selectionEnd}},setSelectionRange:function(t,e){o.setSelectionRange(t,e)},clearPrompt:function(){o.value=""}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(92)),i=o(n(190));function o(t){return t&&t.__esModule?t:{default:t}}e.createLogText=function(t){var e=t.stage,n=t.prompt,o=t.screenArea,a=(t.view,t.mouse),g=t.showStatusBar,b=!1,x=[],w=[],T=new s.Container;T.y=g?p():0,e.addChild(T);var S=function(){return w.length},E=function(){n&&(n.setDisabled(b),n.updatePosition(S()*p()+(g?p():0)))},O=function(){w.forEach(function(t,e){return t.setOffset(e)}),x.forEach(function(t){return t.setOffset(S())})},A=function(){var t=n?n.getHeight():0;if(S()*p()+t>=o.height-(g?p():0)){var e=w.length-16,r=w.splice(0,e);r.forEach(function(t){return t.dispose()})}};d.add(function(t){!function(t){if(w.forEach(function(e){return e.update(t)}),x.length<=0)return;n&&n.setDisabled(!0);if(y.startPrint(),x[0].isRendered()){w.push(x.splice(0,1)[0]);var e=x[0];return A(),O(),void(e?e.setOffset(S()):(E(),y.stopPrint()))}x[0].animate(),O()}(t)});return a.onClick(function(t){var e=function(t){var e=t.x,r=t.y,i=w.find(function(t,e){return t.hit(r-e*p())});if(n&&i)return i.getPartAt(e)}((0,r.default)({},t,{y:t.y-(g?p():0)}));e&&e.isLink&&n.setPrompt(e.insertCommand)}),a.onMove(function(t){var e=t.x,n=t.y;w.forEach(function(t,r){var i=t.hit(n-(r*p()+(g?p():0)));t.parts.forEach(function(t){var n=t.hit(e);t.onHover(i&&n)})})}),{setDisabled:function(t){b=t,n&&n.setDisabled(b)},print:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2];t.split("\n\n").forEach(function(t){return e.printLine(t,n,r)})},printLine:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2],r=function(t){var e=t.text,n=t.stage,r=t.isImmediate,o=t.textStyle;return e.split(/(\[.*?])|\n\n/g).map(function(t){return t.replace(/\n/g," ")}).reduce(function(t,e){return function t(e,o){var s=e[e.length-1];if(o&&!s.tryPush(o)){var a=o.splitAt(v-s.getLength()),u=(0,i.default)(a,2),l=u[0],c=u[1];s.forcePush(l);var h=m({stage:n,isImmediate:r});e.push(h),t(e,c)}return e}(t,function t(e){var n=e.part,r=e.isImmediate,o=e.textStyle,a=0,d=/^\[.*]$/.test(n),y=d?n.substring(1,n.length-1):n,v=y.split("|"),m=(0,i.default)(v,2),g=m[0],b=m[1],x=void 0===b?"look "+g:b,w=d?l:o||u,T=new s.Text(r?g:"",w),S=d?new s.Graphics:null;T.x=0,T.y=0;var E=function(){return r||a>=n.length},O=0,A=0;return{update:function(){if(d){O>A?A+=_(Math.abs(O-A)/2,0,p()):O<A&&(A-=_(Math.abs(O-A)/2,0,p()));var t=T.x,e=T.text.length*f();S.clear(),S.beginFill(h[0],h[1]),S.drawRect(t,0,e,A),S.endFill()}},animate:function(){E()||(a++,T.text=g.substring(0,a))},cancelAnimation:function(){E()||(T.text=g)},isRendered:E,setXOffset:function(t){T.x=t*f()},getLength:function(){return g.length},hit:function(t){var e=t-T.x;return e>=0&&e<=T.text.length*f()},part:y,insertCommand:x,isLink:d,setStage:function(t){d&&t.addChild(S),t.addChild(T)},splitAt:function(e){if(d)return[null,this];var i=function(t,e){for(var n=0,r=0;n<=t.length&&n<=e;)" "===t.charAt(n)&&(r=n),++n;return r}(n,e);return[t({part:n.substr(0,i),isImmediate:r,textStyle:o}),t({part:n.substr(i+1),isImmediate:r,textStyle:o})]},onHover:function(t){d&&(O=t?p():0,T.style=t?c:w)}}}({part:e,isImmediate:r,textStyle:o}))},[m({stage:n,isImmediate:r})])}({text:t,stage:T,isImmediate:e,textStyle:n});e?w=w.concat(r):x=x.concat(r),O(),A(),O(),E()},reset:function(){E()},cancelAnimations:function(){x.length>0&&(w=w.concat(x),x=[]),w.forEach(function(t){return t.cancelAnimation()}),A(),O(),E(),y.stopPrint()},clear:function(){x.forEach(function(t){return t.dispose()}),w.forEach(function(t){return t.dispose()}),x.length=0,w.length=0,n&&n.updatePosition(g?p():0)}}};var s=n(24),a=n(65),u=a.style,l=a.linkStyle,c=a.linkHoverStyle,h=a.linkRectColor,f=a.getCharacterWidth,p=a.getCharacterHeight,d=s.ticker.shared,y=n(64),_=n(189).clamp,v=60;function m(t){var e=t.stage,n=t.isImmediate,r=new s.Container;e.addChild(r),r.y=0,r.x=0;var i=[],o=0;function a(t){t&&(t.setStage(r),t.setXOffset(i.reduce(function(t,e){return e.getLength()+t},0)),i.push(t),o+=t.getLength())}var u=0,l=function(){return n||u>=i.length},c=function(){i.forEach(function(t){return t.update()})};return{tryPush:function(t){return o+t.getLength()<=v&&(a(t),!0)},forcePush:a,getLength:function(){return o},setOffset:function(t){r.y=t*p()},hit:function(t){return t>=0&&t<=p()},getPartAt:function(t){return i.find(function(e){return e.hit(t)})},isRendered:l,update:c,animate:function t(){if(!l())return i[u].isRendered()?(++u,t()):void i[u].animate()},cancelAnimation:function(){l()||(i.forEach(function(t){return t.cancelAnimation()}),c())},dispose:function(){e.removeChild(r),r.destroy()},parts:i}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCursor=function(t){var e=t.mouse,n=t.stage,s=!1,a=0,u=0,l=0,c=o().domain([0,1]).range([.3,1]),h=r.Sprite.fromImage("images/cursor.png");n.addChild(h),e.onMove(function(t){a=t.x-h.width/2,u=t.y-h.height/2}),e.onEnter(function(){s=!0}),e.onLeave(function(){s=!1});i.add(function(t){var e=(l+=t)%80/80;h.alpha=s?c(e):0,h.position={x:a,y:u}})};var r=n(24),i=r.ticker.shared,o=n(564).scaleLinear},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createMouse=function(t){var e=t.view,n=[],i=[],o=[],s=[];return e.addEventListener("click",function(t){var i=r(t,e);n.forEach(function(t){return t(i)})}),e.addEventListener("mousemove",function(t){var n=r(t,e);i.forEach(function(t){return t(n)})}),e.addEventListener("mouseenter",function(){o.forEach(function(t){return t()})}),e.addEventListener("mouseleave",function(){s.forEach(function(t){return t()})}),{onClick:function(t){n.push(t)},onMove:function(t){i.push(t)},onEnter:function(t){o.push(t)},onLeave:function(t){s.push(t)}}};var r=function(t,e){var n=t.pageX,r=t.pageY,i=e.width,o=e.height,s=e.offsetWidth,a=e.offsetHeight,u=e.getBoundingClientRect();return{x:(n-u.left)/s*i,y:(r-u.top)/a*o}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(191)),i=a(n(480));e.createMap=function(t){(0,i.default)(t);var e=new u.Container,n=new u.Graphics,a=new u.Text("",l);a.x=10,a.y=10,e.addChild(n),e.addChild(a);var h=0,f=0,p=void 0,d=new u.Container;function y(t){var n=t.stage,r=t.popProcess,i=t.keyboard;(0,s.playSweepOut)(),clearInterval(p),n.removeChild(e),d&&d.destroy(),r(),i.clearPrompt()}return{onAnimate:function(t){t.screenArea},onBegin:function(t){var i=t.stage,l=t.screenArea;(0,s.playSweepIn)(),clearInterval(p),h=-l.height,f=0,p=setInterval(function(){h=function(t,e,n){return t*n+(1-t)*e}(f+=.05,-l.height,0),e.y=h,f>1&&clearInterval(p)},10),n.clear(),n.beginFill(0,.7),n.drawRect(0,0,l.width+2,l.height),n.endFill(),e.y=h,i.addChild(e),a.y=l.height-20,a.text="Loading map...",d=new u.Container,n.addChild(d),function(){var t=window.localStorage.getItem("playerToken"),e=c?"/map/"+t+"/god":"/map/"+t;return window.fetch(e).then(function(t){return t.json()})}().then(function(e){a.text="h, j, k, l to move and <enter> to exit...";for(var n=new u.Texture.fromImage("/images/room-tiles-32x32.png"),i=[],s=0;s<12;s++)for(var c=0;c<8;c++){var h=new u.Texture(n,new u.Rectangle(32*c+.1,32*s+.1,31.8,31.8));i.push(h)}var f=!0,p=!1,_=void 0;try{for(var v,m=function(){var e=v.value,n=e.room,r=e.isCurrent,s=32*(n.offset[0]+n.rect[0]),a=32*(n.offset[1]+n.rect[1]),l=32*n.tiles.length,c=32*n.tiles[0].length,h=new u.Graphics;h.hitArea=new u.Rectangle(s,a,c,l),h.interactive=!0,h.on("mouseover",function(){h.beginFill(11206485,.5),h.drawRect(s,a,c,l),h.endFill()}),h.on("mouseout",function(){h.clear()}),h.on("mousedown",function(){(0,o.emitCli)("goto "+n.id),y(t)});for(var f=0;f<n.tiles.length;f++)for(var p=n.tiles[f],_=0;_<p.length;_++){var m=p[_];if(m>0){var g=new u.Sprite(i[m-1]);g.x=s+32*_,g.y=a+32*f,r&&(g.tint=3407667),d.addChild(g)}}d.addChild(h)},g=(0,r.default)(e);!(f=(v=g.next()).done);f=!0)m()}catch(t){p=!0,_=t}finally{try{!f&&g.return&&g.return()}finally{if(p)throw _}}d.scale=new u.Point(.4,.4);var b=e.find(function(t){return t.isCurrent});if(b&&b.room){var x=b.room,w=32*x.offset[0]*.4,T=32*x.offset[1]*.4;d.x=l.width/2-w,d.y=l.height/2-T-10}})},onKeyDown:function(t,e){switch(t.key){case"ArrowUp":case"j":case"w":d.y-=30;break;case"ArrowDown":case"k":case"s":d.y+=30;break;case"ArrowLeft":case"h":case"a":d.x-=30;break;case"ArrowRight":case"l":case"d":d.x+=30;break;case"Enter":case"Escape":case"q":y(e)}}}};var o=n(117),s=n(64);function a(t){return t&&t.__esModule?t:{default:t}}var u=n(24),l=n(65).style,c=!1},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPromptLine=function(t){var e=t.stage,n=t.onEnterText,u=t.onCancelAnimation,l=t.keyboard,c=!1,h=0,f=!1,p="",d=function(){var t=window.localStorage.getItem(a);if(!t||t.length<1)return[];return t.split("\n")}(),y=o(e),_=new r.Text("> ",i);function v(){var t=l.getSelection(),e=t.selectionStart,n=t.selectionEnd;y.update(_.y,f?p.length+2+e:e,f?p.length+2+n:n)}function m(){var t=l.getPromptValue();_.text=f?"> "+p+": "+t:"> "+t,v()}return _.x=0,_.y=0,e.addChild(_),{onInput:function(t){m()},onKeyUp:function(t){if(c&&(t.preventDefault(),t.stopPropagation()),"c"===t.key&&t.ctrlKey&&(l.setPromptValue(""),m(),t.preventDefault(),t.stopPropagation()),!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey))if("ArrowUp"===t.key)h<=0||(h--,l.setPromptValue(d[h]),m()),t.preventDefault(),t.stopPropagation();else if("ArrowDown"===t.key)h>=d.length-1||(h++,l.setPromptValue(d[h]),m()),t.preventDefault(),t.stopPropagation();else if("Tab"===t.key)return t.preventDefault(),void t.stopPropagation();v()},onKeyDown:function(t){c?("Enter"!==t.key&&"Escape"!==t.key||u(),t.preventDefault(),t.stopPropagation()):"Tab"===t.key&&(function(){var t=l.getSelection().selectionStart,e=s(_.text,t);if(e){l.setPromptValue(e.output),m();var n=t+e.diff;l.setSelectionRange(n,n)}}(),t.preventDefault(),t.stopPropagation()),v()},onSubmit:function(t){var e=l.getPromptValue();!function(t){!t||t.length<1||/^ .*/.test(t)||(d.push(t),d.length>500&&d.splice(0,1),function(t){window.localStorage.setItem(a,t.join("\n"))}(d),h=d.length)}(e),l.setPromptValue(""),n(e),m(),t.preventDefault(),t.stopPropagation()},setDisabled:function(t){c=t,y.setDisabled(t)},updatePosition:function(t){_.y=t,v()},animate:function(){_.alpha=c?0:1,y.animate()},setPrompt:function(t){l.setPromptValue(t),m()},getHeight:function(){return _.height},setInputMode:function(t,e){f=t,p=e,m()},isInputMode:function(){return f}}};var r=n(24),i=n(65).style,o=n(465).createCaret,s=n(464).completeInput,a="leethack-history"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createStatusBar=function(t){t.view;var e=t.stage,n=t.width,s=t.mouse,h=t.prompt,f=0,p=0,d=void 0,y=c,_=16777215,v=new o.Container;v.y=1,v.x=1,e.addChild(v);var m=new o.Graphics;v.addChild(m);var g=new o.Graphics;v.addChild(g);var b=new o.Text("",a);v.addChild(b);var x=new o.Text("",a);v.addChild(x),m.clear(),m.beginFill(16777215,1),m.drawRect(0,0,n,u()),m.endFill();var w=function(t){return t.replace("-"," ").split(" ").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join(" ")},T=function(){y&&(b.text=" ? | "+y),x.text="Points: "+f,x.x=n-l()*(9+(""+f).length),g.clear(),g.beginFill(_,1),g.drawRect(0,0,3.5*l(),u()),g.endFill()};T();var S=function(t){f=t,T()};r.onScoreUpdate.observe(function(t){if(t&&null!=t.amount){var e=f;p=t.amount,clearTimeout(d),d=setInterval(function(){if(e>p)return clearTimeout(d),void S(p);e+=Math.ceil((p-e)/2),S(e)},120)}}),r.onRoomUpdate.observe(function(t){var e=function(t){if(t.name)return t.name;return w(t.roomId)}(JSON.parse(t));y!==e&&(y!==c&&setTimeout(i.playDoorSound,400),function(t){y=t,T()}(e))});var E=function(t){return t.y>0&&t.y<u()&&t.x>0&&t.x<3.5*l()};return s.onClick(function(t){E(t)&&(window.open("/helpdoc","_blank").blur(),window.focus(),h.setPrompt("help"))}),s.onMove(function(t){_=E(t)?16729167:16777215,T()}),s.onLeave(function(){_=16777215,T()}),{}};var r=n(117),i=n(64),o=n(24),s=n(65),a=s.statusBarStyle,u=s.getCharacterHeight,l=s.getCharacterWidth,c="Loading Limbo"},function(t,e,n){t.exports={default:n(487),__esModule:!0}},function(t,e,n){t.exports={default:n(489),__esModule:!0}},function(t,e,n){t.exports={default:n(490),__esModule:!0}},function(t,e,n){t.exports={default:n(492),__esModule:!0}},function(t,e,n){t.exports={default:n(493),__esModule:!0}},function(t,e,n){t.exports={default:n(494),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}},,,,,,function(t,e,n){n(102),n(101),t.exports=n(500)},function(t,e,n){n(102),n(101),t.exports=n(501)},function(t,e,n){var r=n(6),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,n){n(502);var r=n(6).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){n(503);var r=n(6).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){n(504),t.exports=n(6).Object.getPrototypeOf},function(t,e,n){n(505),t.exports=n(6).Object.setPrototypeOf},function(t,e,n){n(506),n(220),n(507),n(508),t.exports=n(6).Symbol},function(t,e,n){n(101),n(102),t.exports=n(135).f("iterator")},function(t,e,n){var r=n(40),i=n(99),o=n(68);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var s,a=n(t),u=o.f,l=0;a.length>l;)u.call(t,s=a[l++])&&e.push(s);return e}},function(t,e,n){var r=n(51);t.exports=Array.isArray||function(t){return"Array"==r(t)}},,function(t,e,n){var r=n(30),i=n(214).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return s.slice()}}(t):i(r(t))}},function(t,e,n){var r=n(17),i=n(22),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(59)(Function.call,n(213).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){var r=n(22),i=n(216);t.exports=n(6).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r=n(113),i=n(13)("iterator"),o=n(37);t.exports=n(6).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||o.hasOwnProperty(r(e))}},function(t,e,n){var r=n(19);r(r.S,"Object",{create:n(98)})},function(t,e,n){var r=n(19);r(r.S+r.F*!n(15),"Object",{defineProperty:n(23).f})},function(t,e,n){var r=n(41),i=n(131);n(115)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(19);r(r.S,"Object",{setPrototypeOf:n(499).set})},function(t,e,n){"use strict";var r=n(11),i=n(20),o=n(15),s=n(19),a=n(132),u=n(211).KEY,l=n(25),c=n(61),h=n(69),f=n(43),p=n(13),d=n(135),y=n(134),_=n(495),v=n(496),m=n(22),g=n(17),b=n(41),x=n(30),w=n(70),T=n(53),S=n(98),E=n(498),O=n(213),A=n(99),M=n(23),P=n(40),C=O.f,k=M.f,R=E.f,I=r.Symbol,D=r.JSON,L=D&&D.stringify,F=p("_hidden"),N=p("toPrimitive"),j={}.propertyIsEnumerable,B=c("symbol-registry"),U=c("symbols"),q=c("op-symbols"),V=Object.prototype,G="function"==typeof I&&!!A.f,X=r.QObject,H=!X||!X.prototype||!X.prototype.findChild,W=o&&l(function(){return 7!=S(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=C(V,e);r&&delete V[e],k(t,e,n),r&&t!==V&&k(V,e,r)}:k,z=function(t){var e=U[t]=S(I.prototype);return e._k=t,e},Y=G&&"symbol"==typeof I.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof I},$=function(t,e,n){return t===V&&$(q,e,n),m(t),e=w(e,!0),m(n),i(U,e)?(n.enumerable?(i(t,F)&&t[F][e]&&(t[F][e]=!1),n=S(n,{enumerable:T(0,!1)})):(i(t,F)||k(t,F,T(1,{})),t[F][e]=!0),W(t,e,n)):k(t,e,n)},Z=function(t,e){m(t);for(var n,r=_(e=x(e)),i=0,o=r.length;o>i;)$(t,n=r[i++],e[n]);return t},K=function(t){var e=j.call(this,t=w(t,!0));return!(this===V&&i(U,t)&&!i(q,t))&&(!(e||!i(this,t)||!i(U,t)||i(this,F)&&this[F][t])||e)},Q=function(t,e){if(t=x(t),e=w(e,!0),t!==V||!i(U,e)||i(q,e)){var n=C(t,e);return!n||!i(U,e)||i(t,F)&&t[F][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=R(x(t)),r=[],o=0;n.length>o;)i(U,e=n[o++])||e==F||e==u||r.push(e);return r},tt=function(t){for(var e,n=t===V,r=R(n?q:x(t)),o=[],s=0;r.length>s;)!i(U,e=r[s++])||n&&!i(V,e)||o.push(U[e]);return o};G||(a((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(q,n),i(this,F)&&i(this[F],t)&&(this[F][t]=!1),W(this,t,T(1,n))};return o&&H&&W(V,t,{configurable:!0,set:e}),z(t)}).prototype,"toString",function(){return this._k}),O.f=Q,M.f=$,n(214).f=E.f=J,n(68).f=K,A.f=tt,o&&!n(42)&&a(V,"propertyIsEnumerable",K,!0),d.f=function(t){return z(p(t))}),s(s.G+s.W+s.F*!G,{Symbol:I});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)p(et[nt++]);for(var rt=P(p.store),it=0;rt.length>it;)y(rt[it++]);s(s.S+s.F*!G,"Symbol",{for:function(t){return i(B,t+="")?B[t]:B[t]=I(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){H=!0},useSimple:function(){H=!1}}),s(s.S+s.F*!G,"Object",{create:function(t,e){return void 0===e?S(t):Z(S(t),e)},defineProperty:$,defineProperties:Z,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:tt});var ot=l(function(){A.f(1)});s(s.S+s.F*ot,"Object",{getOwnPropertySymbols:function(t){return A.f(b(t))}}),D&&s(s.S+s.F*(!G||l(function(){var t=I();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(g(e)||void 0!==t)&&!Y(t))return v(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,L.apply(D,r)}}),I.prototype[N]||n(26)(I.prototype,N,I.prototype.valueOf),h(I,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){n(134)("asyncIterator")},function(t,e,n){n(134)("observable")},,,,,,,,,function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";n(230)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(224),n(225),n(517),n(228),n(521),n(231),n(233),n(232)},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(71)},function(t,e,n){"use strict";n(56),n(71),n(136)},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(56)},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(224),n(56),n(71),n(136)},function(t,e,n){"use strict";n(227)},function(t,e,n){"use strict";n(234)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(536),n(537);var r=n(137);n.d(e,"a",function(){return r.a});n(535),n(538),n(533)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(137)},function(t,e,n){"use strict";var r=n(137);function i(){}var o=r.a.prototype;function s(t,e){var n=new i;if(t instanceof i)t.each(function(t){n.add(t)});else if(t){var r=-1,o=t.length;if(null==e)for(;++r<o;)n.add(t[r]);else for(;++r<o;)n.add(e(t[r],r,t))}return n}i.prototype=s.prototype={constructor:i,has:o.has,add:function(t){return t+="",this[r.b+t]=t,this},remove:o.remove,clear:o.clear,values:o.keys,size:o.size,empty:o.empty,each:o.each}},function(t,e,n){"use strict"},function(t,e,n){"use strict";e.a=d;var r=n(139),i=n(138),o=n(236),s=-.14861,a=1.78277,u=-.29227,l=-.90649,c=1.97294,h=c*l,f=c*a,p=a*u-l*s;function d(t,e,r,s){return 1===arguments.length?function(t){if(t instanceof y)return new y(t.h,t.s,t.l,t.opacity);t instanceof i.a||(t=n.i(i.b)(t));var e=t.r/255,r=t.g/255,s=t.b/255,a=(p*s+h*e-f*r)/(p+h-f),d=s-a,_=(c*(r-a)-u*d)/l,v=Math.sqrt(_*_+d*d)/(c*a*(1-a)),m=v?Math.atan2(_,d)*o.a-120:NaN;return new y(m<0?m+360:m,v,a,t.opacity)}(t):new y(t,e,r,null==s?1:s)}function y(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}n.i(r.a)(y,d,n.i(r.b)(i.c,{brighter:function(t){return t=null==t?i.d:Math.pow(i.d,t),new y(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?i.e:Math.pow(i.e,t),new y(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*o.b,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),h=Math.sin(t);return new i.a(255*(e+n*(s*r+a*h)),255*(e+n*(u*r+l*h)),255*(e+n*(c*r)),this.opacity)}}))},function(t,e,n){"use strict";e.b=d,e.a=x;var r=n(139),i=n(138),o=n(236),s=.96422,a=1,u=.82521,l=4/29,c=6/29,h=3*c*c,f=c*c*c;function p(t){if(t instanceof y)return new y(t.l,t.a,t.b,t.opacity);if(t instanceof w)return T(t);t instanceof i.a||(t=n.i(i.b)(t));var e,r,o=g(t.r),l=g(t.g),c=g(t.b),h=_((.2225045*o+.7168786*l+.0606169*c)/a);return o===l&&l===c?e=r=h:(e=_((.4360747*o+.3850649*l+.1430804*c)/s),r=_((.0139322*o+.0971045*l+.7141733*c)/u)),new y(116*h-16,500*(e-h),200*(h-r),t.opacity)}function d(t,e,n,r){return 1===arguments.length?p(t):new y(t,e,n,null==r?1:r)}function y(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function _(t){return t>f?Math.pow(t,1/3):t/h+l}function v(t){return t>c?t*t*t:h*(t-l)}function m(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function g(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function b(t){if(t instanceof w)return new w(t.h,t.c,t.l,t.opacity);if(t instanceof y||(t=p(t)),0===t.a&&0===t.b)return new w(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*o.a;return new w(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function x(t,e,n,r){return 1===arguments.length?b(t):new w(t,e,n,null==r?1:r)}function w(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function T(t){if(isNaN(t.h))return new y(t.l,0,0,t.opacity);var e=t.h*o.b;return new y(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}n.i(r.a)(y,d,n.i(r.b)(i.c,{brighter:function(t){return new y(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new y(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=s*v(e),t=a*v(t),n=u*v(n),new i.a(m(3.1338561*e-1.6168667*t-.4906146*n),m(-.9787684*e+1.9161415*t+.033454*n),m(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),n.i(r.a)(w,x,n.i(r.b)(i.c,{brighter:function(t){return new w(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new w(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return T(this).rgb()}}))},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r,i,o,s=n(240);!function(t){r=n.i(s.a)(t),i=r.format,o=r.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})},function(t,e,n){"use strict";e.a=function(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}},function(t,e,n){"use strict";e.a=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}},function(t,e,n){"use strict";var r=n(140);e.a=function(t,e){var i=n.i(r.a)(t,e);if(!i)return t+"";var o=i[0],s=i[1];return s<0?"0."+new Array(-s).join("0")+o:o.length>s+1?o.slice(0,s+1)+"."+o.slice(s+1):o+new Array(s-o.length+2).join("0")}},function(t,e,n){"use strict";e.a=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}},function(t,e,n){"use strict";var r=n(237),i=n(544);e.a={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return n.i(i.a)(100*t,e)},r:i.a,s:r.b,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";var r=n(103);e.a=function(t){return Math.max(0,-n.i(r.a)(Math.abs(t)))}},function(t,e,n){"use strict";var r=n(103);e.a=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n.i(r.a)(e)/3)))-n.i(r.a)(Math.abs(t)))}},function(t,e,n){"use strict";var r=n(103);e.a=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,n.i(r.a)(e)-n.i(r.a)(t))+1}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(38),i=n(57);function o(t){return function e(o){function s(e,s){var a=t((e=n.i(r.a)(e)).h,(s=n.i(r.a)(s)).h),u=n.i(i.a)(e.s,s.s),l=n.i(i.a)(e.l,s.l),c=n.i(i.a)(e.opacity,s.opacity);return function(t){return e.h=a(t),e.s=u(t),e.l=l(Math.pow(t,o)),e.opacity=c(t),e+""}}return o=+o,s.gamma=e,s}(1)}o(i.b);var s=o(i.a)},function(t,e,n){"use strict"},function(t,e,n){"use strict";var r=n(38),i=n(57);function o(t){return function(e,o){var s=t((e=n.i(r.b)(e)).h,(o=n.i(r.b)(o)).h),a=n.i(i.a)(e.c,o.c),u=n.i(i.a)(e.l,o.l),l=n.i(i.a)(e.opacity,o.opacity);return function(t){return e.h=s(t),e.c=a(t),e.l=u(t),e.opacity=l(t),e+""}}}o(i.b),o(i.a)},function(t,e,n){"use strict";var r=n(38),i=n(57);function o(t){return function(e,o){var s=t((e=n.i(r.d)(e)).h,(o=n.i(r.d)(o)).h),a=n.i(i.a)(e.s,o.s),u=n.i(i.a)(e.l,o.l),l=n.i(i.a)(e.opacity,o.opacity);return function(t){return e.h=s(t),e.s=a(t),e.l=u(t),e.opacity=l(t),e+""}}}o(i.b),o(i.a)},function(t,e,n){"use strict";n(57)},function(t,e,n){"use strict";n(38),n(57)},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=180/Math.PI,i={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};e.b=function(t,e,n,i,o,s){var a,u,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(u=Math.sqrt(n*n+i*i))&&(n/=u,i/=u,l/=u),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:o,translateY:s,rotate:Math.atan2(e,t)*r,skewX:Math.atan(l)*r,scaleX:a,scaleY:u}}},function(t,e,n){"use strict";var r=n(104),i=n(562);function o(t,e,i,o){function s(t){return t.length?t.pop()+" ":""}return function(a,u){var l=[],c=[];return a=t(a),u=t(u),function(t,o,s,a,u,l){if(t!==s||o!==a){var c=u.push("translate(",null,e,null,i);l.push({i:c-4,x:n.i(r.a)(t,s)},{i:c-2,x:n.i(r.a)(o,a)})}else(s||a)&&u.push("translate("+s+e+a+i)}(a.translateX,a.translateY,u.translateX,u.translateY,l,c),function(t,e,i,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:i.push(s(i)+"rotate(",null,o)-2,x:n.i(r.a)(t,e)})):e&&i.push(s(i)+"rotate("+e+o)}(a.rotate,u.rotate,l,c),function(t,e,i,a){t!==e?a.push({i:i.push(s(i)+"skewX(",null,o)-2,x:n.i(r.a)(t,e)}):e&&i.push(s(i)+"skewX("+e+o)}(a.skewX,u.skewX,l,c),function(t,e,i,o,a,u){if(t!==i||e!==o){var l=a.push(s(a)+"scale(",null,",",null,")");u.push({i:l-4,x:n.i(r.a)(t,i)},{i:l-2,x:n.i(r.a)(e,o)})}else 1===i&&1===o||a.push(s(a)+"scale("+i+","+o+")")}(a.scaleX,a.scaleY,u.scaleX,u.scaleY,l,c),a=u=null,function(t){for(var e,n=-1,r=c.length;++n<r;)l[(e=c[n]).i]=e.x(t);return l.join("")}}}o(i.a,"px, ","px)","deg)"),o(i.b,", ",")",")")},function(t,e,n){"use strict";e.a=function(t){if("none"===t)return a.a;r||(r=document.createElement("DIV"),i=document.documentElement,o=document.defaultView);return r.style.transform=t,t=o.getComputedStyle(i.appendChild(r),null).getPropertyValue("transform"),i.removeChild(r),t=t.slice(7,-1).split(","),n.i(a.b)(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])},e.b=function(t){if(null==t)return a.a;s||(s=document.createElementNS("http://www.w3.org/2000/svg","g"));return s.setAttribute("transform",t),(t=s.transform.baseVal.consolidate())?(t=t.matrix,n.i(a.b)(t.a,t.b,t.c,t.d,t.e,t.f)):a.a};var r,i,o,s,a=n(560)},function(t,e,n){"use strict";Math.SQRT2},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(565);n.d(e,"scaleBand",function(){return r.a}),n.d(e,"scalePoint",function(){return r.b});var i=n(571);n.d(e,"scaleIdentity",function(){return i.a});var o=n(74);n.d(e,"scaleLinear",function(){return o.a});var s=n(572);n.d(e,"scaleLog",function(){return s.a});var a=n(250);n.d(e,"scaleOrdinal",function(){return a.a}),n.d(e,"scaleImplicit",function(){return a.b});var u=n(573);n.d(e,"scalePow",function(){return u.a}),n.d(e,"scaleSqrt",function(){return u.b});var l=n(574);n.d(e,"scaleQuantile",function(){return l.a});var c=n(575);n.d(e,"scaleQuantize",function(){return c.a});var h=n(578);n.d(e,"scaleThreshold",function(){return h.a});var f=n(251);n.d(e,"scaleTime",function(){return f.a});var p=n(580);n.d(e,"scaleUtc",function(){return p.a});var d=n(566);n.d(e,"schemeCategory10",function(){return d.a});var y=n(568);n.d(e,"schemeCategory20b",function(){return y.a});var _=n(569);n.d(e,"schemeCategory20c",function(){return _.a});var v=n(567);n.d(e,"schemeCategory20",function(){return v.a});var m=n(570);n.d(e,"interpolateCubehelixDefault",function(){return m.a});var g=n(576);n.d(e,"interpolateRainbow",function(){return g.a}),n.d(e,"interpolateWarm",function(){return g.b}),n.d(e,"interpolateCool",function(){return g.c});var b=n(581);n.d(e,"interpolateViridis",function(){return b.a}),n.d(e,"interpolateMagma",function(){return b.b}),n.d(e,"interpolateInferno",function(){return b.c}),n.d(e,"interpolatePlasma",function(){return b.d});var x=n(577);n.d(e,"scaleSequential",function(){return x.a})},function(t,e,n){"use strict";e.a=o,e.b=function(){return function t(e){var n=e.copy;e.padding=e.paddingOuter;delete e.paddingInner;delete e.paddingOuter;e.copy=function(){return t(n())};return e}(o().paddingInner(1))};var r=n(33),i=n(250);function o(){var t,e,s=n.i(i.a)().unknown(void 0),a=s.domain,u=s.range,l=[0,1],c=!1,h=0,f=0,p=.5;function d(){var i=a().length,o=l[1]<l[0],s=l[o-0],d=l[1-o];t=(d-s)/Math.max(1,i-h+2*f),c&&(t=Math.floor(t)),s+=(d-s-t*(i-h))*p,e=t*(1-h),c&&(s=Math.round(s),e=Math.round(e));var y=n.i(r.h)(i).map(function(e){return s+t*e});return u(o?y.reverse():y)}return delete s.unknown,s.domain=function(t){return arguments.length?(a(t),d()):a()},s.range=function(t){return arguments.length?(l=[+t[0],+t[1]],d()):l.slice()},s.rangeRound=function(t){return l=[+t[0],+t[1]],c=!0,d()},s.bandwidth=function(){return e},s.step=function(){return t},s.round=function(t){return arguments.length?(c=!!t,d()):c},s.padding=function(t){return arguments.length?(h=f=Math.max(0,Math.min(1,t)),d()):h},s.paddingInner=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),d()):h},s.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),d()):f},s.align=function(t){return arguments.length?(p=Math.max(0,Math.min(1,t)),d()):p},s.copy=function(){return o().domain(a()).range(l).round(c).paddingInner(h).paddingOuter(f).align(p)},d()}},function(t,e,n){"use strict";var r=n(73);e.a=n.i(r.a)("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf")},function(t,e,n){"use strict";var r=n(73);e.a=n.i(r.a)("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5")},function(t,e,n){"use strict";var r=n(73);e.a=n.i(r.a)("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6")},function(t,e,n){"use strict";var r=n(73);e.a=n.i(r.a)("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9")},function(t,e,n){"use strict";var r=n(38),i=n(72);e.a=n.i(i.d)(n.i(r.a)(300,.5,0),n.i(r.a)(-240,.5,1))},function(t,e,n){"use strict";e.a=function t(){var e=[0,1];function s(t){return+t}s.invert=s;s.domain=s.range=function(t){return arguments.length?(e=r.a.call(t,o.a),s):e.slice()};s.copy=function(){return t().domain(e)};return n.i(i.b)(s)};var r=n(44),i=n(74),o=n(249)},function(t,e,n){"use strict";e.a=function t(){var e=n.i(a.a)(u,l).domain([1,10]),o=e.domain,c=10,d=f(10),y=h(10);function _(){return d=f(c),y=h(c),o()[0]<0&&(d=p(d),y=p(y)),e}e.base=function(t){return arguments.length?(c=+t,_()):c};e.domain=function(t){return arguments.length?(o(t),_()):o()};e.ticks=function(t){var e,i=o(),s=i[0],a=i[i.length-1];(e=a<s)&&(f=s,s=a,a=f);var u,l,h,f=d(s),p=d(a),_=null==t?10:+t,v=[];if(!(c%1)&&p-f<_){if(f=Math.round(f)-1,p=Math.round(p)+1,s>0){for(;f<p;++f)for(l=1,u=y(f);l<c;++l)if(!((h=u*l)<s)){if(h>a)break;v.push(h)}}else for(;f<p;++f)for(l=c-1,u=y(f);l>=1;--l)if(!((h=u*l)<s)){if(h>a)break;v.push(h)}}else v=n.i(r.a)(f,p,Math.min(p-f,_)).map(y);return e?v.reverse():v};e.tickFormat=function(t,r){if(null==r&&(r=10===c?".0e":","),"function"!=typeof r&&(r=n.i(i.f)(r)),t===1/0)return r;null==t&&(t=10);var o=Math.max(1,c*t/e.ticks().length);return function(t){var e=t/y(Math.round(d(t)));return e*c<c-.5&&(e*=c),e<=o?r(t):""}};e.nice=function(){return o(n.i(s.a)(o(),{floor:function(t){return y(Math.floor(d(t)))},ceil:function(t){return y(Math.ceil(d(t)))}}))};e.copy=function(){return n.i(a.c)(e,t().base(c))};return e};var r=n(33),i=n(239),o=n(144),s=n(248),a=n(105);function u(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:n.i(o.a)(e)}function l(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function c(t){return isFinite(t)?+("1e"+t):t<0?0:t}function h(t){return 10===t?c:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function f(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function p(t){return function(e){return-t(-e)}}},function(t,e,n){"use strict";e.a=a,e.b=function(){return a().exponent(.5)};var r=n(144),i=n(74),o=n(105);function s(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function a(){var t=1,e=n.i(o.a)(function(e,i){return(i=s(i,t)-(e=s(e,t)))?function(n){return(s(n,t)-e)/i}:n.i(r.a)(i)},function(e,n){return n=s(n,t)-(e=s(e,t)),function(r){return s(e+n*r,1/t)}}),u=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,u(u())):t},e.copy=function(){return n.i(o.c)(e,a().exponent(t))},n.i(i.b)(e)}},function(t,e,n){"use strict";e.a=function t(){var e=[],o=[],s=[];function a(){var t=0,i=Math.max(1,o.length);for(s=new Array(i-1);++t<i;)s[t-1]=n.i(r.f)(e,t/i);return u}function u(t){if(!isNaN(t=+t))return o[n.i(r.c)(s,t)]}u.invertExtent=function(t){var n=o.indexOf(t);return n<0?[NaN,NaN]:[n>0?s[n-1]:e[0],n<s.length?s[n]:e[e.length-1]]};u.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,i=0,o=t.length;i<o;++i)null==(n=t[i])||isNaN(n=+n)||e.push(n);return e.sort(r.g),a()};u.range=function(t){return arguments.length?(o=i.b.call(t),a()):o.slice()};u.quantiles=function(){return s.slice()};u.copy=function(){return t().domain(e).range(o)};return u};var r=n(33),i=n(44)},function(t,e,n){"use strict";e.a=function t(){var e=0,s=1,a=1,u=[.5],l=[0,1];function c(t){if(t<=t)return l[n.i(r.c)(u,t,0,a)]}function h(){var t=-1;for(u=new Array(a);++t<a;)u[t]=((t+1)*s-(t-a)*e)/(a+1);return c}c.domain=function(t){return arguments.length?(e=+t[0],s=+t[1],h()):[e,s]};c.range=function(t){return arguments.length?(a=(l=i.b.call(t)).length-1,h()):l.slice()};c.invertExtent=function(t){var n=l.indexOf(t);return n<0?[NaN,NaN]:n<1?[e,u[0]]:n>=a?[u[a-1],s]:[u[n-1],u[n]]};c.copy=function(){return t().domain([e,s]).range(l)};return n.i(o.b)(c)};var r=n(33),i=n(44),o=n(74)},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"c",function(){return s});var r=n(38),i=n(72),o=n.i(i.d)(n.i(r.a)(-100,.75,.35),n.i(r.a)(80,1.5,.8)),s=n.i(i.d)(n.i(r.a)(260,.75,.35),n.i(r.a)(80,1.5,.8)),a=n.i(r.a)();e.a=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return a.h=360*t-100,a.s=1.5-1.5*e,a.l=.8-.9*e,a+""}},function(t,e,n){"use strict";e.a=function t(e){var i=0,o=1,s=!1;function a(t){var n=(t-i)/(o-i);return e(s?Math.max(0,Math.min(1,n)):n)}a.domain=function(t){return arguments.length?(i=+t[0],o=+t[1],a):[i,o]};a.clamp=function(t){return arguments.length?(s=!!t,a):s};a.interpolator=function(t){return arguments.length?(e=t,a):e};a.copy=function(){return t(e).domain([i,o]).clamp(s)};return n.i(r.b)(a)};var r=n(74)},function(t,e,n){"use strict";e.a=function t(){var e=[.5],o=[0,1],s=1;function a(t){if(t<=t)return o[n.i(r.c)(e,t,0,s)]}a.domain=function(t){return arguments.length?(e=i.b.call(t),s=Math.min(e.length,o.length-1),a):e.slice()};a.range=function(t){return arguments.length?(o=i.b.call(t),s=Math.min(e.length,o.length-1),a):o.slice()};a.invertExtent=function(t){var n=o.indexOf(t);return[e[n-1],e[n]]};a.copy=function(){return t().domain(e).range(o)};return a};var r=n(33),i=n(44)},function(t,e,n){"use strict";var r=n(33),i=n(239);e.a=function(t,e,o){var s,a=t[0],u=t[t.length-1],l=n.i(r.d)(a,u,null==e?10:e);switch((o=n.i(i.a)(null==o?",f":o)).type){case"s":var c=Math.max(Math.abs(a),Math.abs(u));return null!=o.precision||isNaN(s=n.i(i.b)(l,c))||(o.precision=s),n.i(i.c)(o,c);case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(s=n.i(i.d)(l,Math.max(Math.abs(a),Math.abs(u))))||(o.precision=s-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(s=n.i(i.e)(l))||(o.precision=s-2*("%"===o.type))}return n.i(i.f)(o)}},function(t,e,n){"use strict";var r=n(251),i=n(252),o=n(146);e.a=function(){return n.i(r.b)(o.a,o.b,o.c,o.d,o.e,o.f,o.g,o.h,i.a).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return a});var r=n(73);function i(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}e.a=i(n.i(r.a)("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var o=i(n.i(r.a)("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),s=i(n.i(r.a)("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),a=i(n.i(r.a)("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"))},function(t,e,n){"use strict";var r=n(253),i=n(145);+new Date("2000-01-01T00:00:00.000Z")||n.i(i.b)(r.a)},function(t,e,n){"use strict";var r=n(14),i=n(34),o=n.i(r.a)(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*i.d)/i.b},function(t){return t.getDate()-1});e.a=o;o.range},function(t,e,n){"use strict";var r=n(14),i=n(34),o=n.i(r.a)(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*i.e-t.getMinutes()*i.d)},function(t,e){t.setTime(+t+e*i.c)},function(t,e){return(e-t)/i.c},function(t){return t.getHours()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(14),i=n.i(r.a)(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?n.i(r.a)(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):i:null},e.a=i;i.range},function(t,e,n){"use strict";var r=n(14),i=n(34),o=n.i(r.a)(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*i.e)},function(t,e){t.setTime(+t+e*i.d)},function(t,e){return(e-t)/i.d},function(t){return t.getMinutes()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(14),i=n.i(r.a)(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()});e.a=i;i.range},function(t,e,n){"use strict";var r=n(14),i=n(34),o=n.i(r.a)(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*i.e)},function(t,e){return(e-t)/i.e},function(t){return t.getUTCSeconds()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(14),i=n(34),o=n.i(r.a)(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/i.b},function(t){return t.getUTCDate()-1});e.a=o;o.range},function(t,e,n){"use strict";var r=n(14),i=n(34),o=n.i(r.a)(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*i.c)},function(t,e){return(e-t)/i.c},function(t){return t.getUTCHours()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(14),i=n(34),o=n.i(r.a)(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*i.d)},function(t,e){return(e-t)/i.d},function(t){return t.getUTCMinutes()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(14),i=n.i(r.a)(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()});e.a=i;i.range},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return c});var r=n(14),i=n(34);function o(t){return n.i(r.a)(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/i.a})}var s=o(0),a=o(1),u=o(2),l=o(3),c=o(4),h=o(5),f=o(6);s.range,a.range,u.range,l.range,c.range,h.range,f.range},function(t,e,n){"use strict";var r=n(14),i=n.i(r.a)(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?n.i(r.a)(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null},e.a=i;i.range},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return c});var r=n(14),i=n(34);function o(t){return n.i(r.a)(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*i.d)/i.a})}var s=o(0),a=o(1),u=o(2),l=o(3),c=o(4),h=o(5),f=o(6);s.range,a.range,u.range,l.range,c.range,h.range,f.range},function(t,e,n){"use strict";var r=n(14),i=n.i(r.a)(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?n.i(r.a)(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null},e.a=i;i.range},function(t,e,n){"use strict";function r(t,e){var n=t.__state.conversionName.toString(),r=Math.round(t.r),i=Math.round(t.g),o=Math.round(t.b),s=t.a,a=Math.round(t.h),u=t.s.toFixed(1),l=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=t.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+s+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+s+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+s+"}":"HSV_OBJ"===n?"{h:"+a+",s:"+u+",v:"+l+"}":"HSVA_OBJ"===n?"{h:"+a+",s:"+u+",v:"+l+",a:"+s+"}":"unknown format"}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"color",function(){return ut}),n.d(e,"controllers",function(){return lt}),n.d(e,"dom",function(){return ct}),n.d(e,"gui",function(){return ht}),n.d(e,"GUI",function(){return ft});var i=Array.prototype.forEach,o=Array.prototype.slice,s={BREAK:{},extend:function(t){return this.each(o.call(arguments,1),function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))},this),t},defaults:function(t){return this.each(o.call(arguments,1),function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))},this),t},compose:function(){var t=o.call(arguments);return function(){for(var e=o.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(i&&t.forEach&&t.forEach===i)t.forEach(e,n);else if(t.length===t.length+0){var r,o=void 0;for(o=0,r=t.length;o<r;o++)if(o in t&&e.call(n,t[o],o)===this.BREAK)return}else for(var s in t)if(e.call(n,t[s],s)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var r=void 0;return function(){var i=this,o=arguments;var s=n||!r;clearTimeout(r),r=setTimeout(function(){r=null,n||t.apply(i,o)},e),s&&t.apply(i,o)}},toArray:function(t){return t.toArray?t.toArray():o.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return isNaN(t)}),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}},a=[{litmus:s.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:r},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:r},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:r},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:r}}},{litmus:s.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:s.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:s.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(s.isNumber(t.r)&&s.isNumber(t.g)&&s.isNumber(t.b)&&s.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(s.isNumber(t.r)&&s.isNumber(t.g)&&s.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(s.isNumber(t.h)&&s.isNumber(t.s)&&s.isNumber(t.v)&&s.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(s.isNumber(t.h)&&s.isNumber(t.s)&&s.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],u=void 0,l=void 0,c=function(){l=!1;var t=arguments.length>1?s.toArray(arguments):arguments[0];return s.each(a,function(e){if(e.litmus(t))return s.each(e.conversions,function(e,n){if(u=e.read(t),!1===l&&!1!==u)return l=u,u.conversionName=n,u.conversion=e,s.BREAK}),s.BREAK}),l},h=void 0,f={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),s=n*(1-i*e),a=n*(1-(1-i)*e),u=[[n,a,o],[s,n,o],[o,n,a],[o,s,n],[a,o,n],[n,o,s]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r=Math.min(t,e,n),i=Math.max(t,e,n),o=i-r,s=void 0;return 0===i?{h:NaN,s:0,v:0}:(s=t===i?(e-n)/o:e===i?2+(n-t)/o:4+(t-e)/o,(s/=6)<0&&(s+=1),{h:360*s,s:o/i,v:i/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(h=8*e)|t&~(255<<h)}},p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},v=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},m=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},g=function(){function t(){if(d(this,t),this.__state=c.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return y(t,[{key:"toString",value:function(){return r(this)}},{key:"toHexString",value:function(){return r(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function b(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(g.recalculateRGB(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(g.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function x(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(g.recalculateHSV(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(g.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}g.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=f.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");s.extend(t.__state,f.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},g.recalculateHSV=function(t){var e=f.rgb_to_hsv(t.r,t.g,t.b);s.extend(t.__state,{s:e.s,v:e.v}),s.isNaN(e.h)?s.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},g.COMPONENTS=["r","g","b","h","s","v","hex","a"],b(g.prototype,"r",2),b(g.prototype,"g",1),b(g.prototype,"b",0),x(g.prototype,"h"),x(g.prototype,"s"),x(g.prototype,"v"),Object.defineProperty(g.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(g.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=f.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var w=function(){function t(e,n){d(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return y(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),T={};s.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(t,e){s.each(t,function(t){T[t]=e})});var S=/(\d+(\.\d+)?)px/;function E(t){if("0"===t||s.isUndefined(t))return 0;var e=t.match(S);return s.isNull(e)?0:parseFloat(e[1])}var O={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var r=n,i=e;s.isUndefined(i)&&(i=!0),s.isUndefined(r)&&(r=!0),t.style.position="absolute",i&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,r){var i=n||{},o=T[e];if(!o)throw new Error("Event type "+e+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var u=i.x||i.clientX||0,l=i.y||i.clientY||0;a.initMouseEvent(e,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,u,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;s.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(e,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(e,i.bubbles||!1,i.cancelable||!0)}s.defaults(a,r),t.dispatchEvent(a)},bind:function(t,e,n,r){var i=r||!1;return t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),O},unbind:function(t,e,n,r){var i=r||!1;return t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),O},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return O},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!==r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return O},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return E(e["border-left-width"])+E(e["border-right-width"])+E(e["padding-left"])+E(e["padding-right"])+E(e.width)},getHeight:function(t){var e=getComputedStyle(t);return E(e["border-top-width"])+E(e["border-bottom-width"])+E(e["padding-top"])+E(e["padding-bottom"])+E(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},A=function(t){function e(t,n){d(this,e);var r=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),O.bind(r.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return v(e,w),y(e,[{key:"setValue",value:function(t){var n=_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(),M=function(t){function e(t,n,r){d(this,e);var i=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r,a=i;if(i.__select=document.createElement("select"),s.isArray(o)){var u={};s.each(o,function(t){u[t]=t}),o=u}return s.each(o,function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),a.__select.appendChild(n)}),i.updateDisplay(),O.bind(i.__select,"change",function(){var t=this.options[this.selectedIndex].value;a.setValue(t)}),i.domElement.appendChild(i.__select),i}return v(e,w),y(e,[{key:"setValue",value:function(t){var n=_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return O.isActive(this.__select)?this:(this.__select.value=this.getValue(),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(),P=function(t){function e(t,n){d(this,e);var r=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;function o(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),O.bind(r.__input,"keyup",o),O.bind(r.__input,"change",o),O.bind(r.__input,"blur",function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),O.bind(r.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return v(e,w),y(e,[{key:"updateDisplay",value:function(){return O.isActive(this.__input)||(this.__input.value=this.getValue()),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}();function C(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var k=function(t){function e(t,n,r){d(this,e);var i=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,s.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=C(i.__impliedStep),i}return v(e,w),y(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=C(t),this}}]),e}();var R=function(t){function e(t,n,r){d(this,e);var i=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));i.__truncationSuspended=!1;var o=i,a=void 0;function u(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function l(t){var e=a-t.clientY;o.setValue(o.getValue()+e*o.__impliedStep),a=t.clientY}function c(){O.unbind(window,"mousemove",l),O.unbind(window,"mouseup",c),u()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),O.bind(i.__input,"change",function(){var t=parseFloat(o.__input.value);s.isNaN(t)||o.setValue(t)}),O.bind(i.__input,"blur",function(){u()}),O.bind(i.__input,"mousedown",function(t){O.bind(window,"mousemove",l),O.bind(window,"mouseup",c),a=t.clientY}),O.bind(i.__input,"keydown",function(t){13===t.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,u())}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return v(e,k),y(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}(this.getValue(),this.__precision),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}();function I(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}var D=function(t){function e(t,n,r,i,o){d(this,e);var s=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:r,max:i,step:o})),a=s;function u(t){t.preventDefault();var e=a.__background.getBoundingClientRect();return a.setValue(I(t.clientX,e.left,e.right,a.__min,a.__max)),!1}function l(){O.unbind(window,"mousemove",u),O.unbind(window,"mouseup",l),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function c(t){var e=t.touches[0].clientX,n=a.__background.getBoundingClientRect();a.setValue(I(e,n.left,n.right,a.__min,a.__max))}function h(){O.unbind(window,"touchmove",c),O.unbind(window,"touchend",h),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}return s.__background=document.createElement("div"),s.__foreground=document.createElement("div"),O.bind(s.__background,"mousedown",function(t){document.activeElement.blur(),O.bind(window,"mousemove",u),O.bind(window,"mouseup",l),u(t)}),O.bind(s.__background,"touchstart",function(t){if(1!==t.touches.length)return;O.bind(window,"touchmove",c),O.bind(window,"touchend",h),c(t)}),O.addClass(s.__background,"slider"),O.addClass(s.__foreground,"slider-fg"),s.updateDisplay(),s.__background.appendChild(s.__foreground),s.domElement.appendChild(s.__background),s}return v(e,k),y(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(),L=function(t){function e(t,n,r){d(this,e);var i=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,O.bind(i.__button,"click",function(t){return t.preventDefault(),o.fire(),!1}),O.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return v(e,w),y(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(),F=function(t){function e(t,n){d(this,e);var r=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.__color=new g(r.getValue()),r.__temp=new g(0);var i=r;r.domElement=document.createElement("div"),O.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",O.bind(r.__input,"keydown",function(t){13===t.keyCode&&f.call(this)}),O.bind(r.__input,"blur",f),O.bind(r.__selector,"mousedown",function(){O.addClass(this,"drag").bind(window,"mouseup",function(){O.removeClass(i.__selector,"drag")})}),O.bind(r.__selector,"touchstart",function(){O.addClass(this,"drag").bind(window,"touchend",function(){O.removeClass(i.__selector,"drag")})});var o=document.createElement("div");function a(t){y(t),O.bind(window,"mousemove",y),O.bind(window,"touchmove",y),O.bind(window,"mouseup",l),O.bind(window,"touchend",l)}function u(t){_(t),O.bind(window,"mousemove",_),O.bind(window,"touchmove",_),O.bind(window,"mouseup",h),O.bind(window,"touchend",h)}function l(){O.unbind(window,"mousemove",y),O.unbind(window,"touchmove",y),O.unbind(window,"mouseup",l),O.unbind(window,"touchend",l),p()}function h(){O.unbind(window,"mousemove",_),O.unbind(window,"touchmove",_),O.unbind(window,"mouseup",h),O.unbind(window,"touchend",h),p()}function f(){var t=c(this.value);!1!==t?(i.__color.__state=t,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function p(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function y(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,r=n.clientX,o=n.clientY,s=(r-e.left)/(e.right-e.left),a=1-(o-e.top)/(e.bottom-e.top);return a>1?a=1:a<0&&(a=0),s>1?s=1:s<0&&(s=0),i.__color.v=a,i.__color.s=s,i.setValue(i.__color.toOriginal()),!1}function _(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__hue_field.getBoundingClientRect(),n=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return s.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),s.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),s.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),s.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),s.extend(o.style,{width:"100%",height:"100%",background:"none"}),j(o,"top","rgba(0,0,0,0)","#000"),s.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),function(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}(r.__hue_field),s.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),O.bind(r.__saturation_field,"mousedown",a),O.bind(r.__saturation_field,"touchstart",a),O.bind(r.__field_knob,"mousedown",a),O.bind(r.__field_knob,"touchstart",a),O.bind(r.__hue_field,"mousedown",u),O.bind(r.__hue_field,"touchstart",u),r.__saturation_field.appendChild(o),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return v(e,w),y(e,[{key:"updateDisplay",value:function(){var t=c(this.getValue());if(!1!==t){var e=!1;s.each(g.COMPONENTS,function(n){if(!s.isUndefined(t[n])&&!s.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}},this),e&&s.extend(this.__color.__state,t)}s.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;s.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,j(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),s.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),e}(),N=["-moz-","-o-","-webkit-","-ms-",""];function j(t,e,n,r){t.style.background="",s.each(N,function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "})}var B=function(t,e){var n=e||document,r=document.createElement("style");r.type="text/css",r.innerHTML=t;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(t){}},U=function(t,e){var n=t[e];return s.isArray(arguments[2])||s.isObject(arguments[2])?new M(t,e,arguments[2]):s.isNumber(n)?s.isNumber(arguments[2])&&s.isNumber(arguments[3])?s.isNumber(arguments[4])?new D(t,e,arguments[2],arguments[3],arguments[4]):new D(t,e,arguments[2],arguments[3]):s.isNumber(arguments[4])?new R(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new R(t,e,{min:arguments[2],max:arguments[3]}):s.isString(n)?new P(t,e):s.isFunction(n)?new L(t,e,""):s.isBoolean(n)?new A(t,e):null};var q=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},V=function(){function t(){d(this,t),this.backgroundElement=document.createElement("div"),s.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),O.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),s.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;O.bind(this.backgroundElement,"click",function(){e.hide()})}return y(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),s.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",O.unbind(t.domElement,"webkitTransitionEnd",e),O.unbind(t.domElement,"transitionend",e),O.unbind(t.domElement,"oTransitionEnd",e)};O.bind(this.domElement,"webkitTransitionEnd",e),O.bind(this.domElement,"transitionend",e),O.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-O.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-O.getHeight(this.domElement)/2+"px"}}]),t}();B(function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var G="Default",X=function(){try{return!!window.localStorage}catch(t){return!1}}(),H=void 0,W=!0,z=void 0,Y=!1,$=[],Z=function t(e){var n=this,r=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),O.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=s.defaults(r,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),r=s.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),s.isUndefined(r.load)?r.load={preset:G}:r.preset&&(r.load.preset=r.preset),s.isUndefined(r.parent)&&r.hideable&&$.push(this),r.resizable=s.isUndefined(r.parent)&&r.resizable,r.autoPlace&&s.isUndefined(r.scrollable)&&(r.scrollable=!0);var i=X&&"true"===localStorage.getItem(nt(this,"isLocal")),o=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(t){n.parent?n.getRoot().preset=t:r.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return r.width},set:function(t){r.width=t,st(n,t)}},name:{get:function(){return r.name},set:function(t){r.name=t,a&&(a.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(e){r.closed=e,r.closed?O.addClass(n.__ul,t.CLASS_CLOSED):O.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return i},set:function(t){X&&(i=t,t?O.bind(window,"unload",o):O.unbind(window,"unload",o),localStorage.setItem(nt(n,"isLocal"),t))}}}),s.isUndefined(r.parent)){if(this.closed=r.closed||!1,O.addClass(this.domElement,t.CLASS_MAIN),O.makeSelectable(this.domElement,!1),X&&i){n.useLocalStorage=!0;var u=localStorage.getItem(nt(this,"gui"));u&&(r.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,O.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),r.closeOnTop?(O.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(O.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),O.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===r.closed&&(r.closed=!0);var l=document.createTextNode(r.name);O.addClass(l,"controller-name"),a=K(n,l);O.addClass(this.__ul,t.CLASS_CLOSED),O.addClass(a,"title"),O.bind(a,"click",function(t){return t.preventDefault(),n.closed=!n.closed,!1}),r.closed||(this.closed=!1)}r.autoPlace&&(s.isUndefined(r.parent)&&(W&&(z=document.createElement("div"),O.addClass(z,"dg"),O.addClass(z,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(z),W=!1),z.appendChild(this.domElement),O.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||st(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},O.bind(window,"resize",this.__resizeHandler),O.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),O.bind(this.__ul,"transitionend",this.__resizeHandler),O.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&ot(this),o=function(){X&&"true"===localStorage.getItem(nt(n,"isLocal"))&&localStorage.setItem(nt(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=o,r.parent||function(){var t=n.getRoot();t.width+=1,s.defer(function(){t.width-=1})}()};function K(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,n):t.__ul.appendChild(r),t.onResize(),r}function Q(t){O.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&O.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function J(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function tt(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[e.property]=e,n.load&&n.load.remembered){var o=n.load.remembered,s=void 0;if(o[t.preset])s=o[t.preset];else{if(!o[G])return;s=o[G]}if(s[r]&&void 0!==s[r][e.property]){var a=s[r][e.property];e.initialValue=a,e.setValue(a)}}}}function et(t,e,n,r){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new F(e,n);else{var o=[e,n].concat(r.factoryArgs);i=U.apply(t,o)}r.before instanceof w&&(r.before=r.before.__li),tt(t,i),O.addClass(i.domElement,"c");var a=document.createElement("span");O.addClass(a,"property-name"),a.innerHTML=i.property;var u=document.createElement("div");u.appendChild(a),u.appendChild(i.domElement);var l=K(t,u,r.before);return O.addClass(l,Z.CLASS_CONTROLLER_ROW),i instanceof F?O.addClass(l,"color"):O.addClass(l,p(i.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,s.extend(n,{options:function(e){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),et(t,n.object,n.property,{before:r,factoryArgs:[s.toArray(arguments)]})}if(s.isArray(e)||s.isObject(e)){var i=n.__li.nextElementSibling;return n.remove(),et(t,n.object,n.property,{before:i,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof D){var r=new R(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});s.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return i.apply(r,t),e.apply(n,t)}}),O.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof R){var i=function(e){if(s.isNumber(n.__min)&&s.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=et(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return e};n.min=s.compose(i,n.min),n.max=s.compose(i,n.max)}else n instanceof A?(O.bind(e,"click",function(){O.fakeEvent(n.__checkbox,"click")}),O.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof L?(O.bind(e,"click",function(){O.fakeEvent(n.__button,"click")}),O.bind(e,"mouseover",function(){O.addClass(n.__button,"hover")}),O.bind(e,"mouseout",function(){O.removeClass(n.__button,"hover")})):n instanceof F&&(O.addClass(e,"color"),n.updateDisplay=s.compose(function(t){return e.style.borderLeftColor=n.__color.toString(),t},n.updateDisplay),n.updateDisplay());n.setValue=s.compose(function(e){return t.getRoot().__preset_select&&n.isModified()&&J(t.getRoot(),!0),e},n.setValue)}(t,l,i),t.__controllers.push(i),i}function nt(t,e){return document.location.href+"."+e}function rt(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function it(t,e){e.style.display=t.useLocalStorage?"block":"none"}function ot(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function r(){O.removeClass(t.__closeButton,Z.CLASS_DRAG),O.unbind(window,"mousemove",n),O.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),e=i.clientX,O.addClass(t.__closeButton,Z.CLASS_DRAG),O.bind(window,"mousemove",n),O.bind(window,"mouseup",r),!1}t.__resize_handle=document.createElement("div"),s.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),O.bind(t.__resize_handle,"mousedown",i),O.bind(t.__closeButton,"mousedown",i),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function st(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function at(t,e){var n={};return s.each(t.__rememberedObjects,function(r,i){var o={},a=t.__rememberedObjectIndecesToControllers[i];s.each(a,function(t,n){o[n]=e?t.initialValue:t.getValue()}),n[i]=o}),n}Z.toggleHide=function(){Y=!Y,s.each($,function(t){t.domElement.style.display=Y?"none":""})},Z.CLASS_AUTO_PLACE="a",Z.CLASS_AUTO_PLACE_CONTAINER="ac",Z.CLASS_MAIN="main",Z.CLASS_CONTROLLER_ROW="cr",Z.CLASS_TOO_TALL="taller-than-window",Z.CLASS_CLOSED="closed",Z.CLASS_CLOSE_BUTTON="close-button",Z.CLASS_CLOSE_TOP="close-top",Z.CLASS_CLOSE_BOTTOM="close-bottom",Z.CLASS_DRAG="drag",Z.DEFAULT_WIDTH=245,Z.TEXT_CLOSED="Close Controls",Z.TEXT_OPEN="Open Controls",Z._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||Z.toggleHide()},O.bind(window,"keydown",Z._keydownHandler,!1),s.extend(Z.prototype,{add:function(t,e){return et(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return et(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;s.defer(function(){e.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&z.removeChild(this.domElement);var t=this;s.each(this.__folders,function(e){t.removeFolder(e)}),O.unbind(window,"keydown",Z._keydownHandler,!1),Q(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new Z(e);this.__folders[t]=n;var r=K(this,n.domElement);return O.addClass(r,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],Q(t);var e=this;s.each(t.__folders,function(e){t.removeFolder(e)}),s.defer(function(){e.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=O.getOffset(t.__ul).top,n=0;s.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(n+=O.getHeight(e))}),window.innerHeight-e-20<n?(O.addClass(t.domElement,Z.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(O.removeClass(t.domElement,Z.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&s.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:s.debounce(function(){this.onResize()},50),remember:function(){if(s.isUndefined(H)&&((H=new V).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;s.each(Array.prototype.slice.call(arguments),function(e){0===t.__rememberedObjects.length&&function(t){var e=t.__save_row=document.createElement("li");O.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),O.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",O.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",O.addClass(r,"button"),O.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",O.addClass(i,"button"),O.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",O.addClass(o,"button"),O.addClass(o,"revert");var a=t.__preset_select=document.createElement("select");t.load&&t.load.remembered?s.each(t.load.remembered,function(e,n){rt(t,n,n===t.preset)}):rt(t,G,!1);if(O.bind(a,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),e.appendChild(a),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(o),X){var u=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage"),c=document.getElementById("dg-save-locally");c.style.display="block","true"===localStorage.getItem(nt(t,"isLocal"))&&l.setAttribute("checked","checked"),it(t,u),O.bind(l,"change",function(){t.useLocalStorage=!t.useLocalStorage,it(t,u)})}var h=document.getElementById("dg-new-constructor");O.bind(h,"keydown",function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||H.hide()}),O.bind(n,"click",function(){h.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),H.show(),h.focus(),h.select()}),O.bind(r,"click",function(){t.save()}),O.bind(i,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),O.bind(o,"click",function(){t.revert()})}(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&st(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=at(this)),t.folders={},s.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=at(this),J(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[G]=at(this,!0)),this.load.remembered[t]=at(this),this.preset=t,rt(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){s.each(this.__controllers,function(e){this.getRoot().load.remembered?tt(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())},this),s.each(this.__folders,function(t){t.revert(t)}),t||J(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&function t(e){0!==e.length&&q.call(window,function(){t(e)});s.each(e,function(t){t.updateDisplay()})}(this.__listening)},updateDisplay:function(){s.each(this.__controllers,function(t){t.updateDisplay()}),s.each(this.__folders,function(t){t.updateDisplay()})}});var ut={Color:g,math:f,interpret:c},lt={Controller:w,BooleanController:A,OptionController:M,StringController:P,NumberController:k,NumberControllerBox:R,NumberControllerSlider:D,FunctionController:L,ColorController:F},ct={dom:O},ht={GUI:Z},ft=Z,pt={color:ut,controllers:lt,dom:ct,gui:ht,GUI:ft};e.default=pt},,,,,,,function(t,e,n){(function(t,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,l=36,c=1,h=26,f=38,p=700,d=72,y=128,_="-",v=/^xn--/,m=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=l-c,w=Math.floor,T=String.fromCharCode;function S(t){throw new RangeError(b[t])}function E(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function O(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+E((t=t.replace(g,".")).split("."),e).join(".")}function A(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function M(t){return E(t,function(t){var e="";return t>65535&&(e+=T((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=T(t)}).join("")}function P(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:l}function C(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function k(t,e,n){var r=0;for(t=n?w(t/p):t>>1,t+=w(t/e);t>x*h>>1;r+=l)t=w(t/x);return w(r+(x+1)*t/(t+f))}function R(t){var e,n,r,i,o,s,a,f,p,v,m=[],g=t.length,b=0,x=y,T=d;for((n=t.lastIndexOf(_))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&S("not-basic"),m.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(o=b,s=1,a=l;i>=g&&S("invalid-input"),((f=P(t.charCodeAt(i++)))>=l||f>w((u-b)/s))&&S("overflow"),b+=f*s,!(f<(p=a<=T?c:a>=T+h?h:a-T));a+=l)s>w(u/(v=l-p))&&S("overflow"),s*=v;T=k(b-o,e=m.length+1,0==o),w(b/e)>u-x&&S("overflow"),x+=w(b/e),b%=e,m.splice(b++,0,x)}return M(m)}function I(t){var e,n,r,i,o,s,a,f,p,v,m,g,b,x,E,O=[];for(g=(t=A(t)).length,e=y,n=0,o=d,s=0;s<g;++s)(m=t[s])<128&&O.push(T(m));for(r=i=O.length,i&&O.push(_);r<g;){for(a=u,s=0;s<g;++s)(m=t[s])>=e&&m<a&&(a=m);for(a-e>w((u-n)/(b=r+1))&&S("overflow"),n+=(a-e)*b,e=a,s=0;s<g;++s)if((m=t[s])<e&&++n>u&&S("overflow"),m==e){for(f=n,p=l;!(f<(v=p<=o?c:p>=o+h?h:p-o));p+=l)E=f-v,x=l-v,O.push(T(C(v+E%x,0))),f=w(E/x);O.push(T(C(f,0))),o=k(n,b,r==i),n=0,++r}++n,++e}return O.join("")}a={version:"1.4.1",ucs2:{decode:A,encode:M},decode:R,encode:I,toASCII:function(t){return O(t,function(t){return m.test(t)?"xn--"+I(t):t})},toUnicode:function(t){return O(t,function(t){return v.test(t)?R(t.slice(4).toLowerCase()):t})}},void 0===(i=function(){return a}.call(e,n,e,t))||(t.exports=i)}()}).call(e,n(31)(t),n(1))},function(t,e){var n=new ArrayBuffer(0),r=function(t,e,r,i){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=i||t.STATIC_DRAW,this.data=n,r&&this.upload(r),this._updateID=0};r.prototype.upload=function(t,e,n){n||this.bind();var r=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?r.bufferSubData(this.type,e,t):r.bufferData(this.type,t,this.drawType),this.data=t},r.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(t,e,n){return new r(t,t.ARRAY_BUFFER,e,n)},r.createIndexBuffer=function(t,e,n){return new r(t,t.ELEMENT_ARRAY_BUFFER,e,n)},r.create=function(t,e,n,i){return new r(t,e,n,i)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=r},function(t,e,n){var r=n(387),i=function(t,e,n){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=n||100};i.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new r(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},i.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},i.prototype.clear=function(t,e,n,r){this.bind();var i=this.gl;i.clearColor(t,e,n,r),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},i.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},i.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},i.prototype.resize=function(t,e){var n=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,this.stencil),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t,e))},i.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},i.createRGBA=function(t,e,n,o){var s=r.fromData(t,null,e,n);s.enableNearestScaling(),s.enableWrapClamp();var a=new i(t,e,n);return a.enableTexture(s),a.unbind(),a},i.createFloat32=function(t,e,n,o){var s=new r.fromData(t,o,e,n);s.enableNearestScaling(),s.enableWrapClamp();var a=new i(t,e,n);return a.enableTexture(s),a.unbind(),a},t.exports=i},function(t,e,n){var r=n(389),i=n(391),o=n(392),s=n(395),a=n(393),u=function(t,e,n,u,l){this.gl=t,u&&(e=s(e,u),n=s(n,u)),this.program=r(t,e,n,l),this.attributes=i(t,this.program),this.uniformData=o(t,this.program),this.uniforms=a(t,this.uniformData)};u.prototype.bind=function(){return this.gl.useProgram(this.program),this},u.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t.exports=u},function(t,e,n){var r=n(388);function i(t,e){if(this.nativeVaoExtension=null,i.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var n=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(n),attribState:new Array(n)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}i.prototype.constructor=i,t.exports=i,i.FORCE_NATIVE=!1,i.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},i.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},i.prototype.activate=function(){for(var t=this.gl,e=null,n=0;n<this.attributes.length;n++){var i=this.attributes[n];e!==i.buffer&&(i.buffer.bind(),e=i.buffer),t.vertexAttribPointer(i.attribute.location,i.attribute.size,i.type||t.FLOAT,i.normalized||!1,i.stride||0,i.start||0)}return r(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},i.prototype.addAttribute=function(t,e,n,r,i,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:n||this.gl.FLOAT,normalized:r||!1,stride:i||0,start:o||0}),this.dirty=!0,this},i.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},i.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},i.prototype.draw=function(t,e,n){var r=this.gl;return this.indexBuffer?r.drawElements(t,e||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(n||0)):r.drawArrays(t,n,e||this.getSize()),this},i.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},i.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},function(t,e){t.exports=function(t,e){var n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!n)throw new Error("This browser does not support webGL. Try using the canvas renderer");return n}},function(t,e,n){t.exports={compileProgram:n(389),defaultValue:n(390),extractAttributes:n(391),extractUniforms:n(392),generateUniformAccessObject:n(393),setPrecision:n(395),mapSize:n(394),mapType:n(162)}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),i=s(n(159)),o=s(n(396));function s(t){return t&&t.__esModule?t:{default:t}}r.utils.mixins.delayMixin(r.DisplayObject.prototype,o.default);var a=100,u=0,l=0,c=2,h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!i.default.tablet&&!i.default.phone||navigator.isCocoonJS||this.createTouchHook();var n=document.createElement("div");n.style.width=a+"px",n.style.height=a+"px",n.style.position="absolute",n.style.top=u+"px",n.style.left=l+"px",n.style.zIndex=c,this.div=n,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,n=0;n<e.length;n++)this.updateAccessibleObjects(e[n])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,n=t.height/this.renderer.height,i=this.div;i.style.left=t.left+"px",i.style.top=t.top+"px",i.style.width=this.renderer.width+"px",i.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var s=this.children[o];if(s.renderId!==this.renderId)s._accessibleActive=!1,r.utils.removeItems(this.children,o,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{i=s._accessibleDiv;var a=s.hitArea,u=s.worldTransform;s.hitArea?(i.style.left=(u.tx+a.x*u.a)*e+"px",i.style.top=(u.ty+a.y*u.d)*n+"px",i.style.width=a.width*u.a*e+"px",i.style.height=a.height*u.d*n+"px"):(a=s.getBounds(),this.capHitArea(a),i.style.left=a.x*e+"px",i.style.top=a.y*n+"px",i.style.width=a.width*e+"px",i.style.height=a.height*n+"px",i.title!==s.accessibleTitle&&null!==s.accessibleTitle&&(i.title=s.accessibleTitle),i.getAttribute("aria-label")!==s.accessibleHint&&null!==s.accessibleHint&&i.setAttribute("aria-label",s.accessibleHint))}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width=a+"px",e.style.height=a+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=c,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();e.default=h,r.WebGLRenderer.registerPlugin("accessibility",h),r.CanvasRenderer.registerPlugin("accessibility",h)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(396);Object.defineProperty(e,"accessibleTarget",{enumerable:!0,get:function(){return o(r).default}});var i=n(611);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return o(i).default}})},function(t,e,n){"use strict";e.__esModule=!0;var r=d(n(81)),i=d(n(169)),o=d(n(39)),s=d(n(402)),a=d(n(168)),u=n(9),l=n(4),c=n(2),h=d(n(163)),f=d(n(615)),p=d(n(82));function d(t){return t&&t.__esModule?t:{default:t}}var y=void 0,_=new u.Matrix,v=new u.Point,m=new Float32Array(4),g=new Float32Array(4),b=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r.fillAlpha=1,r.lineWidth=0,r.nativeLines=n,r.lineColor=0,r.lineAlignment=.5,r.graphicsData=[],r.tint=16777215,r._prevTint=16777215,r.blendMode=c.BLEND_MODES.NORMAL,r.currentPath=null,r._webGL={},r.isMask=!1,r.boundsPadding=0,r._localBounds=new h.default,r.dirty=0,r.fastRectDirty=-1,r.clearDirty=0,r.boundsDirty=-1,r.cachedSpriteDirty=!1,r._spriteRect=null,r._fastRect=!1,r._prevRectTint=null,r._prevRectFillColor=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.lineAlignment=this.lineAlignment,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var n=0;n<this.graphicsData.length;++n)t.graphicsData.push(this.graphicsData[n].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype._quadraticCurveLength=function(t,e,n,r,i,o){var s=t-2*n+i,a=e-2*r+o,u=2*n-2*t,l=2*r-2*e,c=4*(s*s+a*a),h=4*(s*u+a*l),f=u*u+l*l,p=2*Math.sqrt(c+h+f),d=Math.sqrt(c),y=2*c*d,_=2*Math.sqrt(f),v=h/d;return(y*p+d*h*(p-_)+(4*f*c-h*h)*Math.log((2*d+v+p)/(v+_)))/(4*y)},e.prototype._bezierCurveLength=function(t,e,n,r,i,o,s,a){for(var u=0,l=0,c=0,h=0,f=0,p=0,d=0,y=0,_=0,v=0,m=0,g=t,b=e,x=1;x<=10;++x)v=g-(y=(d=(p=(f=1-(l=x/10))*f)*f)*t+3*p*l*n+3*f*(c=l*l)*i+(h=c*l)*s),m=b-(_=d*e+3*p*l*r+3*f*c*o+h*a),g=y,b=_,u+=Math.sqrt(v*v+m*m);return u},e.prototype._segmentsCount=function(t){var n=Math.ceil(t/e.CURVES.maxLength);return n<e.CURVES.minSegments?n=e.CURVES.minSegments:n>e.CURVES.maxSegments&&(n=e.CURVES.maxSegments),n},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=n,this.lineAlignment=r,this.currentPath)if(this.currentPath.shape.points.length){var i=new u.Polygon(this.currentPath.shape.points.slice(-2));i.closed=!1,this.drawShape(i)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},e.prototype.moveTo=function(t,e){var n=new u.Polygon([t,e]);return n.closed=!1,this.drawShape(n),this},e.prototype.lineTo=function(t,e){var n=this.currentPath.shape.points,r=n[n.length-2],i=n[n.length-1];return r===t&&i===e||(n.push(t,e),this.dirty++),this},e.prototype.quadraticCurveTo=function(t,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,s=0,a=0;0===o.length&&this.moveTo(0,0);for(var u=o[o.length-2],l=o[o.length-1],c=e.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(u,l,t,n,r,i)):20,h=1;h<=c;++h){var f=h/c;s=u+(t-u)*f,a=l+(n-l)*f,o.push(s+(t+(r-t)*f-s)*f,a+(n+(i-n)*f-a)*f)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,n,r,i,o,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,u=a[a.length-2],l=a[a.length-1];a.length-=2;var c=e.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(u,l,t,n,r,i,o,s)):20;return(0,f.default)(u,l,t,n,r,i,o,s,c,a),this.dirty++,this},e.prototype.arcTo=function(t,e,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1]-e,u=s-t,l=r-e,c=n-t,h=Math.abs(a*c-u*l);if(h<1e-8||0===i)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var f=a*a+u*u,p=l*l+c*c,d=a*l+u*c,y=i*Math.sqrt(f)/h,_=i*Math.sqrt(p)/h,v=y*d/f,m=_*d/p,g=y*c+_*u,b=y*l+_*a,x=u*(_+v),w=a*(_+v),T=c*(y+m),S=l*(y+m),E=Math.atan2(w-b,x-g),O=Math.atan2(S-b,T-g);this.arc(g+t,b+e,i,E,O,u*l>c*a)}return this.dirty++,this},e.prototype.arc=function(t,n,r,i,o){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(i===o)return this;!s&&o<=i?o+=c.PI_2:s&&i<=o&&(i+=c.PI_2);var a=o-i,u=e.CURVES.adaptive?this._segmentsCount(Math.abs(a)*r):40*Math.ceil(Math.abs(a)/c.PI_2);if(0===a)return this;var l=t+Math.cos(i)*r,h=n+Math.sin(i)*r,f=this.currentPath?this.currentPath.shape.points:null;if(f){var p=Math.abs(f[f.length-2]-l),d=Math.abs(f[f.length-1]-h);p<.001&&d<.001||f.push(l,h)}else this.moveTo(l,h),f=this.currentPath.shape.points;for(var y=a/(2*u),_=2*y,v=Math.cos(y),m=Math.sin(y),g=u-1,b=g%1/g,x=0;x<=g;++x){var w=y+i+_*(x+b*x),T=Math.cos(w),S=-Math.sin(w);f.push((v*T+m*S)*r+t,(v*-S+m*T)*r+n)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,n,r){return this.drawShape(new u.Rectangle(t,e,n,r)),this},e.prototype.drawRoundedRect=function(t,e,n,r,i){return this.drawShape(new u.RoundedRectangle(t,e,n,r,i)),this},e.prototype.drawCircle=function(t,e,n){return this.drawShape(new u.Circle(t,e,n)),this},e.prototype.drawEllipse=function(t,e,n,r){return this.drawShape(new u.Ellipse(t,e,n,r)),this},e.prototype.drawPolygon=function(t){var e=t,n=!0;if(e instanceof u.Polygon&&(n=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}var i=new u.Polygon(e);return i.closed=n,this.drawShape(i),this},e.prototype.drawStar=function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i=i||r/2;for(var s=-1*Math.PI/2+o,a=2*n,u=c.PI_2/a,l=[],h=0;h<a;h++){var f=h%2?i:r,p=h*u+s;l.push(t+f*Math.cos(p),e+f*Math.sin(p))}return this.drawPolygon(l)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===c.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new a.default(new o.default(o.default.WHITE)));var n=this._spriteRect,r=this.graphicsData[0].fillColor;if(16777215===this.tint)n.tint=r;else if(this.tint!==this._prevRectTint||r!==this._prevRectFillColor){var i=m,s=g;(0,l.hex2rgb)(r,i),(0,l.hex2rgb)(this.tint,s),i[0]*=s[0],i[1]*=s[1],i[2]*=s[2],n.tint=(0,l.rgb2hex)(i),this._prevRectTint=this.tint,this._prevRectFillColor=r}n.alpha=this.graphicsData[0].fillAlpha,n.worldAlpha=this.worldAlpha*n.alpha,n.blendMode=this.blendMode,n._texture._frame.width=e.width,n._texture._frame.height=e.height,n.transform.worldTransform=this.transform.worldTransform,n.anchor.set(-e.x/e.width,-e.y/e.height),n._onAnchorUpdate(),n._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,v);for(var e=this.graphicsData,n=0;n<e.length;++n){var r=e[n];if(r.fill&&(r.shape&&r.shape.contains(v.x,v.y))){var i=!1;if(r.holes)for(var o=0;o<r.holes.length;o++){if(r.holes[o].contains(v.x,v.y)){i=!0;break}}if(!i)return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0;if(this.graphicsData.length)for(var i=0,o=0,s=0,a=0,u=0,l=0;l<this.graphicsData.length;l++){var h=this.graphicsData[l],f=h.type,p=h.lineWidth*h.lineAlignment;if(i=h.shape,f===c.SHAPES.RECT||f===c.SHAPES.RREC)o=i.x-p,s=i.y-p,a=i.width+2*p,u=i.height+2*p,t=o<t?o:t,e=o+a>e?o+a:e,n=s<n?s:n,r=s+u>r?s+u:r;else if(f===c.SHAPES.CIRC)o=i.x,s=i.y,a=i.radius+p,u=i.radius+p,t=o-a<t?o-a:t,e=o+a>e?o+a:e,n=s-u<n?s-u:n,r=s+u>r?s+u:r;else if(f===c.SHAPES.ELIP)o=i.x,s=i.y,a=i.width+p,u=i.height+p,t=o-a<t?o-a:t,e=o+a>e?o+a:e,n=s-u<n?s-u:n,r=s+u>r?s+u:r;else for(var d=i.points,y=0,_=0,v=0,m=0,g=0,b=0,x=0,w=0,T=0;T+2<d.length;T+=2)o=d[T],s=d[T+1],y=d[T+2],_=d[T+3],v=Math.abs(y-o),m=Math.abs(_-s),u=2*p,(a=Math.sqrt(v*v+m*m))<1e-9||(b=(u/a*v+m)/2,w=(_+s)/2,t=(x=(y+o)/2)-(g=(u/a*m+v)/2)<t?x-g:t,e=x+g>e?x+g:e,n=w-b<n?w-b:n,r=w+b>r?w+b:r)}else t=0,e=0,n=0,r=0;var S=this.boundsPadding;this._localBounds.minX=t-S,this._localBounds.maxX=e+S,this._localBounds.minY=n-S,this._localBounds.maxY=r+S},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new s.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t,this.lineAlignment);return this.graphicsData.push(e),e.type===c.SHAPES.POLY&&(e.shape.closed=e.shape.closed,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getLocalBounds(),r=i.default.create(n.width,n.height,t,e);y||(y=new p.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(_),_.invert(),_.tx-=n.x,_.ty-=n.y,y.render(this,r,!0,_);var s=o.default.fromCanvas(r.baseTexture._canvasRenderTarget.canvas,t,"graphics");return s.baseTexture.resolution=e,s.baseTexture.update(),s},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var n=0;n<this.graphicsData.length;++n)this.graphicsData[n].destroy();for(var r in this._webGL)for(var i=0;i<this._webGL[r].data.length;++i)this._webGL[r].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},e}(r.default);e.default=b,b._SPRITE_TEXTURE=null,b.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(82)),i=n(2);var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,n=e.context,r=t.worldAlpha,o=t.transform.worldTransform,s=e.resolution;n.setTransform(o.a*s,o.b*s,o.c*s,o.d*s,o.tx*s,o.ty*s),t.canvasTintDirty===t.dirty&&t._prevTint===t.tint||this.updateGraphicsTint(t),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var u=t.graphicsData[a],l=u.shape,c=u._fillTint,h=u._lineTint;if(n.lineWidth=u.lineWidth,u.type===i.SHAPES.POLY){n.beginPath();var f=l.points,p=u.holes,d=void 0,y=void 0,_=void 0,v=void 0;n.moveTo(f[0],f[1]);for(var m=2;m<f.length;m+=2)n.lineTo(f[m],f[m+1]);if(l.closed&&n.closePath(),p.length>0){d=0,_=f[0],v=f[1];for(var g=2;g+2<f.length;g+=2)d+=(f[g]-_)*(f[g+3]-v)-(f[g+2]-_)*(f[g+1]-v);for(var b=0;b<p.length;b++)if(f=p[b].points){y=0,_=f[0],v=f[1];for(var x=2;x+2<f.length;x+=2)y+=(f[x]-_)*(f[x+3]-v)-(f[x+2]-_)*(f[x+1]-v);if(y*d<0){n.moveTo(f[0],f[1]);for(var w=2;w<f.length;w+=2)n.lineTo(f[w],f[w+1])}else{n.moveTo(f[f.length-2],f[f.length-1]);for(var T=f.length-4;T>=0;T-=2)n.lineTo(f[T],f[T+1])}p[b].close&&n.closePath()}}u.fill&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}else if(u.type===i.SHAPES.RECT)(u.fillColor||0===u.fillColor)&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fillRect(l.x,l.y,l.width,l.height)),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.strokeRect(l.x,l.y,l.width,l.height));else if(u.type===i.SHAPES.CIRC)n.beginPath(),n.arc(l.x,l.y,l.radius,0,2*Math.PI),n.closePath(),u.fill&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke());else if(u.type===i.SHAPES.ELIP){var S=2*l.width,E=2*l.height,O=l.x-S/2,A=l.y-E/2;n.beginPath();var M=S/2*.5522848,P=E/2*.5522848,C=O+S,k=A+E,R=O+S/2,I=A+E/2;n.moveTo(O,I),n.bezierCurveTo(O,I-P,R-M,A,R,A),n.bezierCurveTo(R+M,A,C,I-P,C,I),n.bezierCurveTo(C,I+P,R+M,k,R,k),n.bezierCurveTo(R-M,k,O,I+P,O,I),n.closePath(),u.fill&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}else if(u.type===i.SHAPES.RREC){var D=l.x,L=l.y,F=l.width,N=l.height,j=l.radius,B=Math.min(F,N)/2|0;j=j>B?B:j,n.beginPath(),n.moveTo(D,L+j),n.lineTo(D,L+N-j),n.quadraticCurveTo(D,L+N,D+j,L+N),n.lineTo(D+F-j,L+N),n.quadraticCurveTo(D+F,L+N,D+F,L+N-j),n.lineTo(D+F,L+j),n.quadraticCurveTo(D+F,L,D+F-j,L),n.lineTo(D+j,L),n.quadraticCurveTo(D,L,D,L+j),n.closePath(),(u.fillColor||0===u.fillColor)&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint,t.canvasTintDirty=t.dirty;for(var e=(t.tint>>16&255)/255,n=(t.tint>>8&255)/255,r=(255&t.tint)/255,i=0;i<t.graphicsData.length;++i){var o=t.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*n*255<<8)+(255&s)/255*r*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*n*255<<8)+(255&a)/255*r*255}},t.prototype.renderPolygon=function(t,e,n){n.moveTo(t[0],t[1]);for(var r=1;r<t.length/2;++r)n.lineTo(t[2*r],t[2*r+1]);e&&n.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=o,r.default.registerPlugin("graphics",o)},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e,n,r,i,o,s,a,u){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],c=0,h=0,f=0,p=0,d=0;l.push(t,e);for(var y=1,_=0;y<=u;++y)f=(h=(c=1-(_=y/u))*c)*c,d=(p=_*_)*_,l.push(f*t+3*h*_*n+3*c*p*i+d*s,f*e+3*h*_*r+3*c*p*o+d*a);return l}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4),i=n(2),o=p(n(108)),s=p(n(107)),a=p(n(617)),u=p(n(618)),l=p(n(620)),c=p(n(621)),h=p(n(622)),f=p(n(619));function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=n.gl,r.CONTEXT_UID=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new u.default(this.gl)},e.prototype.destroy=function(){o.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,n=e.gl,i=void 0,o=t._webGL[this.CONTEXT_UID];o&&t.dirty===o.dirty||(this.updateGraphics(t),o=t._webGL[this.CONTEXT_UID]);var s=this.primitiveShader;e.bindShader(s),e.state.setBlendMode(t.blendMode);for(var a=0,u=o.data.length;a<u;a++){var l=(i=o.data[a]).shader;e.bindShader(l),l.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),l.uniforms.tint=(0,r.hex2rgb)(t.tint),l.uniforms.alpha=t.worldAlpha,e.bindVao(i.vao),i.nativeLines?n.drawArrays(n.LINES,0,i.points.length/6):i.vao.draw(n.TRIANGLE_STRIP,i.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,n=t._webGL[this.CONTEXT_UID];if(n||(n=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),n.dirty=t.dirty,t.clearDirty!==n.clearDirty){n.clearDirty=t.clearDirty;for(var r=0;r<n.data.length;r++)this.graphicsDataPool.push(n.data[r]);n.data.length=0,n.lastIndex=0}for(var o=void 0,s=void 0,a=n.lastIndex;a<t.graphicsData.length;a++){var u=t.graphicsData[a];o=this.getWebGLData(n,0),u.nativeLines&&u.lineWidth&&(s=this.getWebGLData(n,0,!0),n.lastIndex++),u.type===i.SHAPES.POLY&&(0,l.default)(u,o,s),u.type===i.SHAPES.RECT?(0,c.default)(u,o,s):u.type===i.SHAPES.CIRC||u.type===i.SHAPES.ELIP?(0,f.default)(u,o,s):u.type===i.SHAPES.RREC&&(0,h.default)(u,o,s),n.lastIndex++}this.renderer.bindVao(null);for(var p=0;p<n.data.length;p++)(o=n.data[p]).dirty&&o.upload()},e.prototype.getWebGLData=function(t,e,n){var r=t.data[t.data.length-1];return(!r||r.nativeLines!==n||r.points.length>32e4)&&((r=this.graphicsDataPool.pop()||new a.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=n,r.reset(e),t.data.push(r)),r.dirty=!0,r},e}(o.default);e.default=d,s.default.registerPlugin("graphics",d)},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(18));var i=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=r.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=n,this.vao=new r.default.VertexArrayObject(e,i).addIndex(this.indexBuffer).addAttribute(this.buffer,n.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,n.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(function(t){return t&&t.__esModule?t:{default:t}}(n(80)).default);e.default=r},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e,n){var s=t.shape,a=s.x,u=s.y,l=void 0,c=void 0;t.type===i.SHAPES.CIRC?(l=s.radius,c=s.radius):(l=s.width,c=s.height);if(0===l||0===c)return;var h=Math.floor(30*Math.sqrt(s.radius))||Math.floor(15*Math.sqrt(s.width+s.height)),f=2*Math.PI/h;if(t.fill){var p=(0,o.hex2rgb)(t.fillColor),d=t.fillAlpha,y=p[0]*d,_=p[1]*d,v=p[2]*d,m=e.points,g=e.indices,b=m.length/6;g.push(b);for(var x=0;x<h+1;x++)m.push(a,u,y,_,v,d),m.push(a+Math.sin(f*x)*l,u+Math.cos(f*x)*c,y,_,v,d),g.push(b++,b++);g.push(b-1)}if(t.lineWidth){var w=t.points;t.points=[];for(var T=0;T<h;T++)t.points.push(a+Math.sin(f*-T)*l,u+Math.cos(f*-T)*c);t.points.push(t.points[0],t.points[1]),(0,r.default)(t,e,n),t.points=w}};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(106)),i=n(2),o=n(4)},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e,n){t.points=t.shape.points.slice();var s=t.points;if(t.fill&&s.length>=6){for(var a=[],u=t.holes,l=0;l<u.length;l++){var c=u[l];a.push(s.length/2),s=s.concat(c.points)}var h=e.points,f=e.indices,p=s.length/2,d=(0,i.hex2rgb)(t.fillColor),y=t.fillAlpha,_=d[0]*y,v=d[1]*y,m=d[2]*y,g=(0,o.default)(s,a,2);if(!g)return;for(var b=h.length/6,x=0;x<g.length;x+=3)f.push(g[x]+b),f.push(g[x]+b),f.push(g[x+1]+b),f.push(g[x+2]+b),f.push(g[x+2]+b);for(var w=0;w<p;w++)h.push(s[2*w],s[2*w+1],_,v,m,y)}t.lineWidth>0&&(0,r.default)(t,e,n)};var r=s(n(106)),i=n(4),o=s(n(147));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e,n){var o=t.shape,s=o.x,a=o.y,u=o.width,l=o.height;if(t.fill){var c=(0,i.hex2rgb)(t.fillColor),h=t.fillAlpha,f=c[0]*h,p=c[1]*h,d=c[2]*h,y=e.points,_=e.indices,v=y.length/6;y.push(s,a),y.push(f,p,d,h),y.push(s+u,a),y.push(f,p,d,h),y.push(s,a+l),y.push(f,p,d,h),y.push(s+u,a+l),y.push(f,p,d,h),_.push(v,v,v+1,v+2,v+3,v+3)}if(t.lineWidth){var m=t.points;t.points=[s,a,s+u,a,s+u,a+l,s,a+l,s,a],(0,r.default)(t,e,n),t.points=m}};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(106)),i=n(4)},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e,n){var s=t.shape,a=s.x,l=s.y,c=s.width,h=s.height,f=s.radius,p=[];if(p.push(a+f,l),u(a+c-f,l,a+c,l,a+c,l+f,p),u(a+c,l+h-f,a+c,l+h,a+c-f,l+h,p),u(a+f,l+h,a,l+h,a,l+h-f,p),u(a,l+f,a,l,a+f+1e-10,l,p),t.fill){for(var d=(0,o.hex2rgb)(t.fillColor),y=t.fillAlpha,_=d[0]*y,v=d[1]*y,m=d[2]*y,g=e.points,b=e.indices,x=g.length/6,w=(0,r.default)(p,null,2),T=0,S=w.length;T<S;T+=3)b.push(w[T]+x),b.push(w[T]+x),b.push(w[T+1]+x),b.push(w[T+2]+x),b.push(w[T+2]+x);for(var E=0,O=p.length;E<O;E++)g.push(p[E],p[++E],_,v,m,y)}if(t.lineWidth){var A=t.points;t.points=p,(0,i.default)(t,e,n),t.points=A}};var r=s(n(147)),i=s(n(106)),o=n(4);function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){return t+(e-t)*n}function u(t,e,n,r,i,o){for(var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=0,l=0,c=0,h=0,f=0,p=0,d=0,y=0;d<=20;++d)u=a(t,n,y=d/20),l=a(e,r,y),c=a(n,i,y),h=a(r,o,y),f=a(u,c,y),p=a(l,h,y),s.push(f,p);return s}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(167)),i=n(2);var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.radius=r,this.type=i.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-t,i=this.y-e;return(r*=r)+(i*=i)<=n},t.prototype.getBounds=function(){return new r.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(167)),i=n(2);var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.width=r,this.height=o,this.type=i.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,r=(e-this.y)/this.height;return(n*=n)+(r*=r)<=1},t.prototype.getBounds=function(){return new r.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(166)),i=n(2);var o=function(){function t(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Array.isArray(n[0])&&(n=n[0]),n[0]instanceof r.default){for(var s=[],a=0,u=n.length;a<u;a++)s.push(n[a].x,n[a].y);n=s}this.closed=!0,this.points=n,this.type=i.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var s=this.points[2*i],a=this.points[2*i+1],u=this.points[2*o],l=this.points[2*o+1];a>e!=l>e&&t<(e-a)/(l-a)*(u-s)+s&&(n=!n)}return n},t}();e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=n(2);var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.width=i,this.height=o,this.radius=s,this.type=r.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var n=t-(this.x+this.radius),r=e-(this.y+this.radius),i=this.radius*this.radius;if(n*n+r*r<=i)return!0;if((n=t-(this.x+this.width-this.radius))*n+r*r<=i)return!0;if(n*n+(r=e-(this.y+this.height-this.radius))*r<=i)return!0;if((n=t-(this.x+this.radius))*n+r*r<=i)return!0}return!1},t}();e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var r=n(2);var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var n=t.alpha,r=t.transform.worldTransform,i=e.resolution;e.context.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=n},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,n=t.graphicsData.length;if(0!==n){e.beginPath();for(var i=0;i<n;i++){var o=t.graphicsData[i],s=o.shape;if(o.type===r.SHAPES.POLY){var a=s.points,u=o.holes,l=void 0,c=void 0;e.moveTo(a[0],a[1]);for(var h=2;h<a.length;h+=2)e.lineTo(a[h],a[h+1]);if(a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath(),u.length>0){l=0;for(var f=0;f<a.length;f+=2)l+=a[f]*a[f+3]-a[f+1]*a[f+2];for(var p=0;p<u.length;p++){a=u[p].points,c=0;for(var d=0;d<a.length;d+=2)c+=a[d]*a[d+3]-a[d+1]*a[d+2];if(e.moveTo(a[0],a[1]),c*l<0)for(var y=2;y<a.length;y+=2)e.lineTo(a[y],a[y+1]);else for(var _=a.length-2;_>=2;_-=2)e.lineTo(a[_],a[_+1])}}}else if(o.type===r.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===r.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===r.SHAPES.ELIP){var v=2*s.width,m=2*s.height,g=s.x-v/2,b=s.y-m/2,x=v/2*.5522848,w=m/2*.5522848,T=g+v,S=b+m,E=g+v/2,O=b+m/2;e.moveTo(g,O),e.bezierCurveTo(g,O-w,E-x,b,E,b),e.bezierCurveTo(E+x,b,T,O-w,T,O),e.bezierCurveTo(T,O+w,E+x,S,E,S),e.bezierCurveTo(E-x,S,g,O+w,g,O),e.closePath()}else if(o.type===r.SHAPES.RREC){var A=s.x,M=s.y,P=s.width,C=s.height,k=s.radius,R=Math.min(P,C)/2|0;k=k>R?R:k,e.moveTo(A,M+k),e.lineTo(A,M+C-k),e.quadraticCurveTo(A,M+C,A+k,M+C),e.lineTo(A+P-k,M+C),e.quadraticCurveTo(A+P,M+C,A+P,M+C-k),e.lineTo(A+P,M+k),e.quadraticCurveTo(A+P,M,A+P-k,M),e.lineTo(A+k,M),e.quadraticCurveTo(A,M,A,M+k),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();e.default=i},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,i.default)()?(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="multiply",t[r.BLEND_MODES.SCREEN]="screen",t[r.BLEND_MODES.OVERLAY]="overlay",t[r.BLEND_MODES.DARKEN]="darken",t[r.BLEND_MODES.LIGHTEN]="lighten",t[r.BLEND_MODES.COLOR_DODGE]="color-dodge",t[r.BLEND_MODES.COLOR_BURN]="color-burn",t[r.BLEND_MODES.HARD_LIGHT]="hard-light",t[r.BLEND_MODES.SOFT_LIGHT]="soft-light",t[r.BLEND_MODES.DIFFERENCE]="difference",t[r.BLEND_MODES.EXCLUSION]="exclusion",t[r.BLEND_MODES.HUE]="hue",t[r.BLEND_MODES.SATURATION]="saturate",t[r.BLEND_MODES.COLOR]="color",t[r.BLEND_MODES.LUMINOSITY]="luminosity"):(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="source-over",t[r.BLEND_MODES.SCREEN]="source-over",t[r.BLEND_MODES.OVERLAY]="source-over",t[r.BLEND_MODES.DARKEN]="source-over",t[r.BLEND_MODES.LIGHTEN]="source-over",t[r.BLEND_MODES.COLOR_DODGE]="source-over",t[r.BLEND_MODES.COLOR_BURN]="source-over",t[r.BLEND_MODES.HARD_LIGHT]="source-over",t[r.BLEND_MODES.SOFT_LIGHT]="source-over",t[r.BLEND_MODES.DIFFERENCE]="source-over",t[r.BLEND_MODES.EXCLUSION]="source-over",t[r.BLEND_MODES.HUE]="source-over",t[r.BLEND_MODES.SATURATION]="source-over",t[r.BLEND_MODES.COLOR]="source-over",t[r.BLEND_MODES.LUMINOSITY]="source-over");return t[r.BLEND_MODES.NORMAL_NPM]=t[r.BLEND_MODES.NORMAL],t[r.BLEND_MODES.ADD_NPM]=t[r.BLEND_MODES.ADD],t[r.BLEND_MODES.SCREEN_NPM]=t[r.BLEND_MODES.SCREEN],t};var r=n(2),i=function(t){return t&&t.__esModule?t:{default:t}}(n(407))},function(t,e,n){"use strict";e.__esModule=!0;var r=n(2),i=function(t){return t&&t.__esModule?t:{default:t}}(n(8));var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=i.default.GC_MAX_IDLE,this.checkCountMax=i.default.GC_MAX_CHECK_COUNT,this.mode=i.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==r.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,n=!1,r=0;r<e.length;r++){var i=e[r];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},t}();e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=n(18),i=n(2),o=function(t){return t&&t.__esModule?t:{default:t}}(n(109)),s=n(4);var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var n=this.gl,s=!!t._glRenderTargets;if(!t.hasLoaded)return null;var a=this.renderer.boundTextures;if(void 0===e){e=0;for(var u=0;u<a.length;++u)if(a[u]===t){e=u;break}}a[e]=t,n.activeTexture(n.TEXTURE0+e);var l=t._glTextures[this.renderer.CONTEXT_UID];if(l)s?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):l.upload(t.source);else{if(s){var c=new o.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);c.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=c,l=c.texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else(l=new r.GLTexture(this.gl,null,null,null,null)).bind(e),l.premultiplyAlpha=!0,l.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=l,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&l.enableMipmap(),t.wrapMode===i.WRAP_MODES.CLAMP?l.enableWrapClamp():t.wrapMode===i.WRAP_MODES.REPEAT?l.enableWrapRepeat():l.enableWrapMirrorRepeat()):l.enableWrapClamp(),t.scaleMode===i.SCALE_MODES.NEAREST?l.enableNearestScaling():l.enableLinearScaling()}return l},t.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded){var n=this.renderer,r=n.CONTEXT_UID,i=t._glTextures,o=t._glRenderTargets;if(i[r]&&(n.unbindTexture(t),i[r].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete i[r],!e)){var a=this._managedTextures.indexOf(t);-1!==a&&(0,s.removeItems)(this._managedTextures,a,1)}o&&o[r]&&(n._activeRenderTarget===o[r]&&n.bindRenderTarget(n.rootRenderTarget),o[r].destroy(),delete o[r])}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();e.default=a},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(638));var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,r.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var n=1;n<this.maxAttribs;n++)this.gl.disableVertexAttribArray(n)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();e.default=i},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e,n){var r=i(t),o=i(e);return Object.assign(r,o)};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(18)).default.shader.defaultValue;function i(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),n={},i=void 0,o=t.replace(/\s+/g," ").split(/\s*;\s*/),s=0;s<o.length;s++){var a=o[s].trim();if(a.indexOf("uniform")>-1){var u=a.split(" "),l=u[1],c=u[2],h=1;c.indexOf("[")>-1&&(c=(i=c.split(/\[|]/))[0],h*=Number(i[1])),c.match(e)||(n[c]={value:r(l,h),name:c,type:l})}}return n}},function(t,e,n){"use strict";e.__esModule=!0,e.calculateScreenSpaceMatrix=function(t,e,n){var r=t.identity();return r.translate(e.x/n.width,e.y/n.height),r.scale(n.width,n.height),r},e.calculateNormalizedScreenSpaceMatrix=function(t,e,n){var r=t.identity();r.translate(e.x/n.width,e.y/n.height);var i=n.width/e.width,o=n.height/e.height;return r.scale(i,o),r},e.calculateSpriteMatrix=function(t,e,n,i){var o=i._texture.orig,s=t.set(n.width,0,0,n.height,e.x,e.y),a=i.worldTransform.copy(r.Matrix.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(i.anchor.x,i.anchor.y),s};var r=n(9)},function(t,e,n){"use strict";e.__esModule=!0;var r=c(n(83)),i=c(n(109)),o=c(n(410)),s=n(9),a=c(n(80)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(633)),l=c(n(127));function c(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=function(){function t(){h(this,t),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new s.Rectangle,this.destinationFrame=new s.Rectangle,this.filters=[]}return t.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},t}(),p=function(t){function e(n){h(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.gl=r.renderer.gl,r.quad=new o.default(r.gl,n.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r.managedFilters=[],r.renderer.on("prerender",r.onPrerender,r),r._screenWidth=n.view.width,r._screenHeight=n.view.height,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushFilter=function(t,e){var n=this.renderer,r=this.filterData;if(!r){r=this.renderer._activeRenderTarget.filterStack;var i=new f;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=n._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[i]},this.filterData=r}var o=r.stack[++r.index],s=r.stack[0].destinationFrame;o||(o=r.stack[r.index]=new f);var a=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===n.screen.width&&t.filterArea.height===n.screen.height,u=e[0].resolution,l=0|e[0].padding,c=a?n.screen:t.filterArea||t.getBounds(!0),h=o.sourceFrame,p=o.destinationFrame;h.x=(c.x*u|0)/u,h.y=(c.y*u|0)/u,h.width=(c.width*u|0)/u,h.height=(c.height*u|0)/u,a||(r.stack[0].renderTarget.transform||e[0].autoFit&&h.fit(s),h.pad(l)),p.width=h.width,p.height=h.height;var d=this.getPotRenderTarget(n.gl,h.width,h.height,u);o.target=t,o.filters=e,o.resolution=u,o.renderTarget=d,d.setFrame(p,h),n.bindRenderTarget(d),d.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],n=t.stack[t.index];this.quad.map(n.renderTarget.size,n.sourceFrame).upload();var r=n.filters;if(1===r.length)r[0].apply(this,n.renderTarget,e.renderTarget,!1,n),this.freePotRenderTarget(n.renderTarget);else{var i=n.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,n.resolution);o.setFrame(n.destinationFrame,n.sourceFrame),o.clear();var s=0;for(s=0;s<r.length-1;++s){r[s].apply(this,i,o,!0,n);var a=i;i=o,o=a}r[s].apply(this,i,e.renderTarget,!1,n),this.freePotRenderTarget(i),this.freePotRenderTarget(o)}n.clear(),t.index--,0===t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,n,r){var i=this.renderer,o=i.gl,s=t.glShaders[i.CONTEXT_UID];s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey])||(s=new a.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[i.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s,this.managedFilters.push(t)):(s=t.glShaders[i.CONTEXT_UID]=new a.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),i.bindVao(null),this.quad.initVao(s)),i.bindVao(this.quad.vao),i.bindRenderTarget(n),r&&(o.disable(o.SCISSOR_TEST),i.clear(),o.enable(o.SCISSOR_TEST)),n===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(s);var u=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=u,this.syncUniforms(s,t),i.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,u._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var n=e.uniformData,r=e.uniforms,i=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,t.uniforms.filterArea=s}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=a}for(var u in n)if(t.uniforms.data[u]){var l=n[u].type;if("sampler2d"===l&&0!==r[u]){if(r[u].baseTexture)t.uniforms[u]=this.renderer.bindTexture(r[u].baseTexture,i);else{t.uniforms[u]=i;var c=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],c.activeTexture(c.TEXTURE0+i),r[u].texture.bind()}i++}else if("mat3"===l)void 0!==r[u].a?t.uniforms[u]=r[u].toArray(!0):t.uniforms[u]=r[u];else if("vec2"===l)if(void 0!==r[u].x){var h=t.uniforms[u]||new Float32Array(2);h[0]=r[u].x,h[1]=r[u].y,t.uniforms[u]=h}else t.uniforms[u]=r[u];else"float"===l?t.uniforms.data[u].value!==n[u]&&(t.uniforms[u]=r[u]):t.uniforms[u]=r[u]}},e.prototype.getRenderTarget=function(t,e){var n=this.filterData.stack[this.filterData.index],r=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,e||n.resolution);return r.setFrame(n.destinationFrame,n.sourceFrame),r},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return u.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return u.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var n=this.filterData.stack[this.filterData.index];return u.calculateSpriteMatrix(t,n.sourceFrame,n.renderTarget.size,e)},e.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.renderer,n=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var r=0;r<n.length;r++)t||n[r].glShaders[e.CONTEXT_UID].destroy(),delete n[r].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,n,r){var o="screen";n*=r,(e*=r)===this._screenWidth&&n===this._screenHeight||(o=(65535&(e=l.default.nextPow2(e)))<<16|65535&(n=l.default.nextPow2(n))),this.pool[o]||(this.pool[o]=[]);var s=this.pool[o].pop();if(!s){var a=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),s=new i.default(t,e,n,null,1),t.bindTexture(t.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return s.resolution=r,s.defaultFrame.width=s.size.width=e/r,s.defaultFrame.height=s.size.height=n/r,s.filterPoolKey=o,s},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var n=0;n<e.length;n++)e[n].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){this.pool[t.filterPoolKey].push(t)},e.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool.screen;if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool.screen=[]}},e}(r.default);e.default=p},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(83)),i=o(n(409));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var n=e.worldTransform,r=Math.atan2(n.b,n.a);(r=Math.round(r*(180/Math.PI)))%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var n=this.alphaMaskPool[this.alphaMaskIndex];n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new i.default(e)]),n[0].resolution=this.renderer.resolution,n[0].maskSprite=e;var r=t.filterArea;t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,n),t.filterArea=r,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var n=this.renderer._activeRenderTarget,r=e.getBounds();r.fit(n.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(r.x*i,(n.root?n.size.height-r.y-r.height:r.y)*i,r.width*i,r.height*i),this.scissorRenderTarget=n,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(r.default);e.default=s},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(83));var i=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.stencilMaskStack=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,n=this.stencilMaskStack.length;0===n&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,n,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){r.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(r.default);e.default=i},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){var n=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(n){var s=document.createElement("canvas");s.width=1,s.height=1,e=r.default.createContext(s)}var a=e.createShader(e.FRAGMENT_SHADER);for(;;){var u=i.replace(/%forloop%/gi,o(t));if(e.shaderSource(a,u),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS))break;t=t/2|0}n&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext();return t};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(18));var i=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function o(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[r.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD]=[t.ONE,t.ONE],e[r.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[r.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e};var r=n(2)},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[r.DRAW_MODES.POINTS]=t.POINTS,e[r.DRAW_MODES.LINES]=t.LINES,e[r.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[r.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[r.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[r.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[r.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e};var r=n(2)},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},function(t,e,n){"use strict";e.__esModule=!0;var r=a(n(82)),i=n(2),o=n(9),s=a(n(110));function a(t){return t&&t.__esModule?t:{default:t}}var u=new o.Matrix,l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,n=this.renderer,r=e._frame.width,a=e._frame.height,l=t.transform.worldTransform,c=0,h=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(n.setBlendMode(t.blendMode),e.valid)){n.context.globalAlpha=t.worldAlpha;var f=e.baseTexture.scaleMode===i.SCALE_MODES.LINEAR;n.smoothProperty&&n.context[n.smoothProperty]!==f&&(n.context[n.smoothProperty]=f),e.trim?(c=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,h=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(c=(.5-t.anchor.x)*e.orig.width,h=(.5-t.anchor.y)*e.orig.height),e.rotate&&(l.copy(u),l=u,o.GroupD8.matrixAppendRotationInv(l,e.rotate,c,h),c=0,h=0),c-=r/2,h-=a/2,n.roundPixels?(n.context.setTransform(l.a,l.b,l.c,l.d,l.tx*n.resolution|0,l.ty*n.resolution|0),c|=0,h|=0):n.context.setTransform(l.a,l.b,l.c,l.d,l.tx*n.resolution,l.ty*n.resolution);var p=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=s.default.getTintedTexture(t,t.tint)),n.context.drawImage(t.tintedTexture,0,0,r*p,a*p,c*n.resolution,h*n.resolution,r*n.resolution,a*n.resolution)):n.context.drawImage(e.baseTexture.source,e._frame.x*p,e._frame.y*p,r*p,a*p,c*n.resolution,h*n.resolution,r*n.resolution,a*n.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();e.default=l,r.default.registerPlugin("sprite",l)},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var r=p(n(108)),i=p(n(107)),o=p(n(171)),s=p(n(644)),a=p(n(637)),u=p(n(642)),l=p(n(8)),c=n(4),h=p(n(18)),f=p(n(127));function p(t){return t&&t.__esModule?t:{default:t}}var d=0,y=0,_=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=l.default.SPRITE_BATCH_SIZE,r.buffers=[];for(var i=1;i<=f.default.nextPow2(r.size);i*=2)r.buffers.push(new u.default(4*i*r.vertByteSize));r.indices=(0,o.default)(r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var s=0;s<r.size;s++)r.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on("prerender",r.onPrerender,r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),l.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,a.default)(this.MAX_TEXTURES,t)),this.shader=(0,s.default)(t,this.MAX_TEXTURES),this.indexBuffer=h.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,n=0;n<this.vaoMax;n++){var r=this.vertexBuffers[n]=h.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(r,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(r,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(r,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&i.addAttribute(r,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[n]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,n=f.default.nextPow2(this.currentIndex),r=f.default.log2(n),i=this.buffers[r],o=this.sprites,s=this.groups,a=i.float32View,u=i.uint32View,p=this.boundTextures,_=this.renderer.boundTextures,v=this.renderer.textureGC.count,m=0,g=void 0,b=void 0,x=1,w=0,T=s[0],S=void 0,E=void 0,O=c.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];T.textureCount=0,T.start=0,T.blend=O,d++;var A=void 0;for(A=0;A<e;++A){var M=_[A];M._enabled!==d?(p[A]=M,M._virtalBoundId=A,M._enabled=d):p[A]=this.renderer.emptyTextures[A]}for(d++,A=0;A<this.currentIndex;++A){var P=o[A];o[A]=null,g=P._texture.baseTexture;var C=c.premultiplyBlendMode[Number(g.premultipliedAlpha)][P.blendMode];if(O!==C&&(O=C,b=null,w=e,d++),b!==g&&(b=g,g._enabled!==d)){if(w===e&&(d++,T.size=A-T.start,w=0,(T=s[x++]).blend=O,T.textureCount=0,T.start=A),g.touched=v,-1===g._virtalBoundId)for(var k=0;k<e;++k){var R=(k+y)%e,I=p[R];if(I._enabled!==d){y++,I._virtalBoundId=-1,g._virtalBoundId=R,p[R]=g;break}}g._enabled=d,T.textureCount++,T.ids[w]=g._virtalBoundId,T.textures[w++]=g}if(S=P.vertexData,E=P._texture._uvs.uvsUint32,this.renderer.roundPixels){var D=this.renderer.resolution;a[m]=(S[0]*D|0)/D,a[m+1]=(S[1]*D|0)/D,a[m+5]=(S[2]*D|0)/D,a[m+6]=(S[3]*D|0)/D,a[m+10]=(S[4]*D|0)/D,a[m+11]=(S[5]*D|0)/D,a[m+15]=(S[6]*D|0)/D,a[m+16]=(S[7]*D|0)/D}else a[m]=S[0],a[m+1]=S[1],a[m+5]=S[2],a[m+6]=S[3],a[m+10]=S[4],a[m+11]=S[5],a[m+15]=S[6],a[m+16]=S[7];u[m+2]=E[0],u[m+7]=E[1],u[m+12]=E[2],u[m+17]=E[3];var L=Math.min(P.worldAlpha,1),F=L<1&&g.premultipliedAlpha?(0,c.premultiplyTint)(P._tintRGB,L):P._tintRGB+(255*L<<24);u[m+3]=u[m+8]=u[m+13]=u[m+18]=F,a[m+4]=a[m+9]=a[m+14]=a[m+19]=g._virtalBoundId,m+=20}if(T.size=A-T.start,l.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var N=this.shader.attributes,j=this.vertexBuffers[this.vertexCount]=h.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),B=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(j,N.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(j,N.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(j,N.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);N.aTextureId&&B.addAttribute(j,N.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=B}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!1),this.vertexCount++}for(A=0;A<e;++A)_[A]._virtalBoundId=-1;for(A=0;A<x;++A){for(var U=s[A],q=U.textureCount,V=0;V<q;V++)b=U.textures[V],_[U.ids[V]]!==b&&this.renderer.bindTexture(b,U.ids[V],!0),b._virtalBoundId=-1;this.renderer.state.setBlendMode(U.blend),t.drawElements(t.TRIANGLES,6*U.size,t.UNSIGNED_SHORT,6*U.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),l.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var n=0;n<this.buffers.length;++n)this.buffers[n].destroy()},e}(r.default);e.default=_,i.default.registerPlugin("sprite",_)},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){var n=i;n=(n=n.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)n>0&&(e+="\nelse "),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}(e));for(var o=new r.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",n),s=[],a=0;a<e;a++)s[a]=a;return o.bind(),o.uniforms.uSamplers=s,o};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(80));n(27);var i=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","%forloop%","gl_FragColor = color * vColor;","}"].join("\n")},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=p(n(168)),o=p(n(39)),s=n(9),a=n(4),u=n(2),l=p(n(8)),c=p(n(412)),h=p(n(411)),f=p(n(654));function p(t){return t&&t.__esModule?t:{default:t}}var d={texture:!0,children:!1,baseTexture:!0},y=function(t){function e(n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=i||document.createElement("canvas")).width=3,i.height=3;var a=o.default.fromCanvas(i,l.default.SCALE_MODE,"text");a.orig=new s.Rectangle,a.trim=new s.Rectangle;var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,a));return o.default.addToCache(u._texture,u._texture.baseTexture.textureCacheIds[0]),u.canvas=i,u.context=u.canvas.getContext("2d"),u.resolution=l.default.RESOLUTION,u._text=null,u._style=null,u._styleListener=null,u._font="",u.text=n,u.style=r,u.localStyleID=-1,u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var n=this.context,r=h.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),i=r.width,o=r.height,s=r.lines,a=r.lineHeight,u=r.lineWidths,l=r.maxLineWidth,c=r.fontProperties;this.canvas.width=Math.ceil((Math.max(1,i)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*e.padding)*this.resolution),n.scale(this.resolution,this.resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.strokeStyle=e.stroke,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;var f=void 0,p=void 0;if(e.dropShadow){n.fillStyle=e.dropShadowColor,n.globalAlpha=e.dropShadowAlpha,n.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(n.shadowColor=e.dropShadowColor);for(var d=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,y=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,_=0;_<s.length;_++)f=e.strokeThickness/2,p=e.strokeThickness/2+_*a+c.ascent,"right"===e.align?f+=l-u[_]:"center"===e.align&&(f+=(l-u[_])/2),e.fill&&(this.drawLetterSpacing(s[_],f+d+e.padding,p+y+e.padding),e.stroke&&e.strokeThickness&&(n.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(s[_],f+d+e.padding,p+y+e.padding,!0),n.strokeStyle=e.stroke))}n.shadowBlur=0,n.globalAlpha=1,n.fillStyle=this._generateFillStyle(e,s);for(var v=0;v<s.length;v++)f=e.strokeThickness/2,p=e.strokeThickness/2+v*a+c.ascent,"right"===e.align?f+=l-u[v]:"center"===e.align&&(f+=(l-u[v])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(s[v],f+e.padding,p+e.padding,!0),e.fill&&this.drawLetterSpacing(s[v],f+e.padding,p+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._style.letterSpacing;if(0!==i)for(var o=String.prototype.split.call(t,""),s=e,a=0,u="",l=this.context.measureText(t).width,c=0;a<t.length;)u=o[a++],r?this.context.strokeText(u,s,n):this.context.fillText(u,s,n),s+=l-(c=this.context.measureText(t.substring(a)).width)+i,l=c;else r?this.context.strokeText(t,e,n):this.context.fillText(t,e,n)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,f.default)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=t.width,o.realHeight=t.height,o.width=t.width/this.resolution,o.height=t.height/this.resolution,n.trim.width=n._frame.width=t.width/this.resolution,n.trim.height=n._frame.height=t.height/this.resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var n=void 0,r=void 0,i=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,l=t.fill.slice(),c=t.fillGradientStops.slice();if(!c.length)for(var h=l.length+1,f=1;f<h;++f)c.push(f/h);if(l.unshift(t.fill[0]),c.unshift(0),l.push(t.fill[t.fill.length-1]),c.push(1),t.fillGradientType===u.TEXT_GRADIENT.LINEAR_VERTICAL){n=this.context.createLinearGradient(s/2,0,s/2,a),r=(l.length+1)*e.length,i=0;for(var p=0;p<e.length;p++){i+=1;for(var d=0;d<l.length;d++)o="number"==typeof c[d]?c[d]/e.length+p/e.length:i/r,n.addColorStop(o,l[d]),i++}}else{n=this.context.createLinearGradient(0,a/2,s,a/2),r=l.length+1,i=1;for(var y=0;y<l.length;y++)o="number"==typeof c[y]?c[y]:i/r,n.addColorStop(o,l[y]),i++}return n},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},d,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},r(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,a.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,a.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof c.default?this._style=t:this._style=new c.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(i.default);e.default=y},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3),o=n(4);var s=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseTexture=e,this.textures={},this.animations={},this.data=n,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,n=(0,o.getResolutionOfUrl)(t,null);return null===n&&(n=void 0!==e?parseFloat(e):1),1!==n&&(this.baseTexture.resolution=n,this.baseTexture.update()),n},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var n=e,r=t.BATCH_SIZE,o=this.baseTexture.sourceScale;n-e<r&&n<this._frameKeys.length;){var s=this._frameKeys[n],a=this._frames[s],u=a.frame;if(u){var l=null,c=null,h=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,f=new i.Rectangle(0,0,Math.floor(h.w*o)/this.resolution,Math.floor(h.h*o)/this.resolution);l=a.rotated?new i.Rectangle(Math.floor(u.x*o)/this.resolution,Math.floor(u.y*o)/this.resolution,Math.floor(u.h*o)/this.resolution,Math.floor(u.w*o)/this.resolution):new i.Rectangle(Math.floor(u.x*o)/this.resolution,Math.floor(u.y*o)/this.resolution,Math.floor(u.w*o)/this.resolution,Math.floor(u.h*o)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(c=new i.Rectangle(Math.floor(a.spriteSourceSize.x*o)/this.resolution,Math.floor(a.spriteSourceSize.y*o)/this.resolution,Math.floor(u.w*o)/this.resolution,Math.floor(u.h*o)/this.resolution)),this.textures[s]=new i.Texture(this.baseTexture,l,f,c,a.rotated?2:0,a.anchor),i.Texture.addToCache(this.textures[s],s)}n++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];var n=t[e],r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var s=o;this.animations[e].push(this.textures[s])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();e.default=s},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=a(n(8)),o=n(2),s=a(n(648));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._head=new s.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/i.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(t,e,n))},t.prototype.addOnce=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*i.default.TARGET_FPMS*this.speed;for(var n=this._head,r=n.next;r;)r=r.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},r(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,i.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();e.default=u},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fn=e,this.context=n,this.priority=r,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}();e.default=r},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[r.BLEND_MODES.NORMAL_NPM]=r.BLEND_MODES.NORMAL,t[r.BLEND_MODES.ADD_NPM]=r.BLEND_MODES.ADD,t[r.BLEND_MODES.SCREEN_NPM]=r.BLEND_MODES.SCREEN,e[r.BLEND_MODES.NORMAL]=r.BLEND_MODES.NORMAL_NPM,e[r.BLEND_MODES.ADD]=r.BLEND_MODES.ADD_NPM,e[r.BLEND_MODES.SCREEN]=r.BLEND_MODES.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i};var r=n(2)},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){if(r.default.tablet||r.default.phone)return 4;return t};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(159))},function(t,e,n){"use strict";function r(t,e){if(t&&e)for(var n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}}e.__esModule=!0,e.mixin=r,e.delayMixin=function(t,e){i.push(t,e)},e.performMixins=function(){for(var t=0;t<i.length;t+=2)r(i[t],i[t+1]);i.length=0};var i=[]},function(t,e,n){"use strict";e.__esModule=!0,e.default={mixin:function(t){!function(t){t.__plugins={},t.registerPlugin=function(e,n){t.__plugins[e]=n},t.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}(t)}}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){var e=t.width,n=t.height,r=t.getContext("2d"),i=r.getImageData(0,0,e,n).data,o=i.length,s={top:null,left:null,right:null,bottom:null},a=null,u=void 0,l=void 0,c=void 0;for(u=0;u<o;u+=4)0!==i[u+3]&&(l=u/4%e,c=~~(u/4/e),null===s.top&&(s.top=c),null===s.left?s.left=l:l<s.left&&(s.left=l),null===s.right?s.right=l+1:s.right<l&&(s.right=l+1),null===s.bottom?s.bottom=c:s.bottom<c&&(s.bottom=c));null!==s.top&&(e=s.right-s.left,n=s.bottom-s.top+1,a=r.getImageData(s.left,s.top,e,n));return{height:n,width:e,data:a}}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){var e=t.mesh,n=t.particles,r=t.extras,o=t.filters,s=t.prepare,a=t.loaders,u=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return i("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return i("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){return i("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return i("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return i("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),n.ParticleContainer}},MovieClip:{get:function(){return i("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),r.AnimatedSprite}},TilingSprite:{get:function(){return i("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),r.TilingSprite}},BitmapText:{get:function(){return i("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),r.BitmapText}},blendModes:{get:function(){return i("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return i("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return i("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return i("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return i("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return i("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return i("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return i("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){i("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return i("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){i("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return i("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){i("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return i("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){i("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return i("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){i("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return i("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){i("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return i("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){i("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return i("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var l=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],c=function(e){var n=l[e];Object.defineProperty(t[n.parent],"DEFAULT",{get:function(){return i("PIXI."+n.parent+".DEFAULT has been deprecated, please use PIXI.settings."+n.target),t.settings[n.target]},set:function(e){i("PIXI."+n.parent+".DEFAULT has been deprecated, please use PIXI.settings."+n.target),t.settings[n.target]=e}})},h=0;h<l.length;h++)c(h);Object.defineProperties(t.settings,{PRECISION:{get:function(){return i("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){i("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),r.AnimatedSprite&&Object.defineProperties(r,{MovieClip:{get:function(){return i("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),r.AnimatedSprite}}});r&&Object.defineProperties(r,{TextureTransform:{get:function(){return i("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),t.TextureMatrix}}});t.DisplayObject.prototype.generateTexture=function(t,e,n){return i("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,n)},t.Graphics.prototype.generateTexture=function(t,e){return i("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.GroupD8.isSwapWidthHeight=function(e){return i("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),t.GroupD8.isVertical(e)},t.RenderTexture.prototype.render=function(t,e,n,r){this.legacyRenderer.render(t,this,n,e,!r),i("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return i("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return i("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return i("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return i("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,i("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},r.BitmapText&&(r.BitmapText.prototype.setText=function(t){this.text=t,i("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")});t.Text.prototype.setText=function(t){this.text=t,i("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return i("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return i("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return i("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return i("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context}}}),t.Text.prototype.setStyle=function(t){this.style=t,i("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return i("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return i("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(e=e||{})instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){i("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){i("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),n=-1;this._fontSize=26;for(var r=0;r<e.length;++r)if(e[r].match(/(px|pt|em|%)/)){n=r,this._fontSize=e[r];break}this._fontWeight="normal";for(var o=0;o<n;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[o];break}if(n>-1&&n<e.length-1){this._fontFamily="";for(var s=n+1;s<e.length;++s)this._fontFamily+=e[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,i("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,n){t.Texture.addToCache(e,n),i("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return i("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(o,{AbstractFilter:{get:function(){return i("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return i("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}},VoidFilter:{get:function(){return i("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),o.AlphaFilter}}}),t.utils.uuid=function(){return i("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return i("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var f=!0;Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(i("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),f=t},get:function(){return f}}),s.BasePrepare&&(s.BasePrepare.prototype.register=function(t,e){return i("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this});s.canvas&&Object.defineProperty(s.canvas,"UPLOADS_PER_FRAME",{set:function(){i("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return i("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});s.webgl&&Object.defineProperty(s.webgl,"UPLOADS_PER_FRAME",{set:function(){i("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return i("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});if(a.Loader){var p=a.Resource,d=a.Loader;Object.defineProperties(p.prototype,{isJson:{get:function(){return i("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===p.TYPE.JSON}},isXml:{get:function(){return i("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===p.TYPE.XML}},isImage:{get:function(){return i("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===p.TYPE.IMAGE}},isAudio:{get:function(){return i("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===p.TYPE.AUDIO}},isVideo:{get:function(){return i("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===p.TYPE.VIDEO}}}),Object.defineProperties(d.prototype,{before:{get:function(){return i("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return i("The after() method is deprecated, please use use()."),this.use}}})}u.interactiveTarget&&Object.defineProperty(u.interactiveTarget,"defaultCursor",{set:function(t){i("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return i("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}});u.InteractionManager&&(Object.defineProperty(u.InteractionManager,"defaultCursorStyle",{set:function(t){i("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return i("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(u.InteractionManager,"currentCursorStyle",{set:function(t){i("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return i("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))};var r={};function i(t){if(!r[t]){var e=(new Error).stack;void 0===e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e))),r[t]=!0}}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3));var i=new r.Rectangle,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,n=void 0,o=void 0,s=void 0,a=void 0;t&&(a=t instanceof r.RenderTexture?t:e.generateTexture(t)),a?(n=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(n=e.rootContext,o=e.resolution,(s=i).width=this.renderer.width,s.height=this.renderer.height);var u=Math.floor(s.width*o+1e-4),l=Math.floor(s.height*o+1e-4),c=new r.CanvasRenderTarget(u,l,1),h=n.getImageData(s.x*o,s.y*o,u,l);return c.context.putImageData(h,0,0),c.canvas},t.prototype.pixels=function(t){var e=this.renderer,n=void 0,o=void 0,s=void 0,a=void 0;return t&&(a=t instanceof r.RenderTexture?t:e.generateTexture(t)),a?(n=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(n=e.rootContext,(s=i).width=e.width,s.height=e.height),n.getImageData(0,0,s.width*o,s.height*o).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=o,r.CanvasRenderer.registerPlugin("extract",o)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(658);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return o(r).default}});var i=n(656);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return o(i).default}})},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3));var i=new r.Rectangle,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,n=void 0,o=void 0,s=void 0,a=!1,u=void 0,l=!1;t&&(t instanceof r.RenderTexture?u=t:(u=this.renderer.generateTexture(t),l=!0)),u?(o=(n=u.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=u.frame,a=!1):(o=(n=this.renderer.rootRenderTarget).resolution,a=!0,(s=i).width=n.size.width,s.height=n.size.height);var c=Math.floor(s.width*o+1e-4),h=Math.floor(s.height*o+1e-4),f=new r.CanvasRenderTarget(c,h,1);if(n){e.bindRenderTarget(n);var p=new Uint8Array(4*c*h),d=e.gl;d.readPixels(s.x*o,s.y*o,c,h,d.RGBA,d.UNSIGNED_BYTE,p);var y=f.context.getImageData(0,0,c,h);y.data.set(p),f.context.putImageData(y,0,0),a&&(f.context.scale(1,-1),f.context.drawImage(f.canvas,0,-h))}return l&&u.destroy(!0),f.canvas},t.prototype.pixels=function(t){var e=this.renderer,n=void 0,o=void 0,s=void 0,a=void 0,u=!1;t&&(t instanceof r.RenderTexture?a=t:(a=this.renderer.generateTexture(t),u=!0)),a?(o=(n=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=a.frame):(o=(n=this.renderer.rootRenderTarget).resolution,(s=i).width=n.size.width,s.height=n.size.height);var l=s.width*o,c=s.height*o,h=new Uint8Array(4*l*c);if(n){e.bindRenderTarget(n);var f=e.gl;f.readPixels(s.x*o,s.y*o,l,c,f.RGBA,f.UNSIGNED_BYTE,h)}return u&&a.destroy(!0),h},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=o,r.WebGLRenderer.registerPlugin("extract",o)},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3));var o=function(t){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n[0]instanceof i.Texture?n[0]:n[0].texture));return o._textures=null,o._durations=null,o.textures=n,o._autoUpdate=!1!==r,o.animationSpeed=1,o.loop=!0,o.updateAnchor=!1,o.onComplete=null,o.onFrameChange=null,o.onLoop=null,o._currentTime=0,o.playing=!1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&i.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&i.ticker.shared.add(this.update,this,i.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.updateAnchor&&this._anchor.copy(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var n=[],r=0;r<t.length;++r)n.push(i.Texture.fromFrame(t[r]));return new e(n)},e.fromImages=function(t){for(var n=[],r=0;r<t.length;++r)n.push(i.Texture.fromImage(t[r]));return new e(n)},r(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof i.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(i.Sprite);e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),o=u(n(404)),s=n(4),a=u(n(8));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i._textWidth=0,i._textHeight=0,i._glyphs=[],i._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},i.font=r.font,i._text=n,i._maxWidth=0,i._maxLineHeight=0,i._letterSpacing=0,i._anchor=new o.default(function(){i.dirty=!0},i,0,0),i.dirty=!1,i.updateText(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],n=this._font.size/t.size,r=new i.Point,o=[],s=[],a=this.text.replace(/(?:\r\n|\r)/g,"\n"),u=a.length,l=this._maxWidth*t.size/this._font.size,c=null,h=0,f=0,p=0,d=-1,y=0,_=0,v=0,m=0;m<u;m++){var g=a.charCodeAt(m),b=a.charAt(m);if(/(?:\s)/.test(b)&&(d=m,y=h),"\r"!==b&&"\n"!==b){var x=t.chars[g];x&&(c&&x.kerning[c]&&(r.x+=x.kerning[c]),o.push({texture:x.texture,line:p,charCode:g,position:new i.Point(r.x+x.xOffset+this._letterSpacing/2,r.y+x.yOffset)}),r.x+=x.xAdvance+this._letterSpacing,h=r.x,v=Math.max(v,x.yOffset+x.texture.height),c=g,-1!==d&&l>0&&r.x>l&&(++_,i.utils.removeItems(o,1+d-_,1+m-d),m=d,d=-1,s.push(y),f=Math.max(f,y),p++,r.x=0,r.y+=t.lineHeight,c=null))}else s.push(h),f=Math.max(f,h),++p,++_,r.x=0,r.y+=t.lineHeight,c=null}var w=a.charAt(a.length-1);"\r"!==w&&"\n"!==w&&(/(?:\s)/.test(w)&&(h=y),s.push(h),f=Math.max(f,h));for(var T=[],S=0;S<=p;S++){var E=0;"right"===this._font.align?E=f-s[S]:"center"===this._font.align&&(E=(f-s[S])/2),T.push(E)}for(var O=o.length,A=this.tint,M=0;M<O;M++){var P=this._glyphs[M];P?P.texture=o[M].texture:(P=new i.Sprite(o[M].texture),this._glyphs.push(P)),P.position.x=(o[M].position.x+T[o[M].line])*n,P.position.y=o[M].position.y*n,P.scale.x=P.scale.y=n,P.tint=A,P.parent||this.addChild(P)}for(var C=O;C<this._glyphs.length;++C)this.removeChild(this._glyphs[C]);if(this._textWidth=f*n,this._textHeight=(r.y+t.lineHeight)*n,0!==this.anchor.x||0!==this.anchor.y)for(var k=0;k<O;k++)this._glyphs[k].x-=this._textWidth*this.anchor.x,this._glyphs[k].y-=this._textHeight*this.anchor.y;this._maxLineHeight=v*n},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,n){var r={},o=t.getElementsByTagName("info")[0],u=t.getElementsByTagName("common")[0],l=t.getElementsByTagName("page"),c=(0,s.getResolutionOfUrl)(l[0].getAttribute("file"),a.default.RESOLUTION),h={};r.font=o.getAttribute("face"),r.size=parseInt(o.getAttribute("size"),10),r.lineHeight=parseInt(u.getAttribute("lineHeight"),10)/c,r.chars={},n instanceof i.Texture&&(n=[n]);for(var f=0;f<l.length;f++){var p=l[f].getAttribute("id"),d=l[f].getAttribute("file");h[p]=n instanceof Array?n[f]:n[d]}for(var y=t.getElementsByTagName("char"),_=0;_<y.length;_++){var v=y[_],m=parseInt(v.getAttribute("id"),10),g=v.getAttribute("page")||0,b=new i.Rectangle(parseInt(v.getAttribute("x"),10)/c+h[g].frame.x/c,parseInt(v.getAttribute("y"),10)/c+h[g].frame.y/c,parseInt(v.getAttribute("width"),10)/c,parseInt(v.getAttribute("height"),10)/c);r.chars[m]={xOffset:parseInt(v.getAttribute("xoffset"),10)/c,yOffset:parseInt(v.getAttribute("yoffset"),10)/c,xAdvance:parseInt(v.getAttribute("xadvance"),10)/c,kerning:{},texture:new i.Texture(h[g].baseTexture,b),page:g}}for(var x=t.getElementsByTagName("kerning"),w=0;w<x.length;w++){var T=x[w],S=parseInt(T.getAttribute("first"),10)/c,E=parseInt(T.getAttribute("second"),10)/c,O=parseInt(T.getAttribute("amount"),10)/c;r.chars[E]&&(r.chars[E].kerning[S]=O)}return e.fonts[r.font]=r,r},r(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(i.Container);e.default=l,l.fonts={}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),o=function(t){return t&&t.__esModule?t:{default:t}}(n(110));var s=new i.Point,a=function(t){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return s.tileTransform=new i.TransformStatic,s._width=r,s._height=o,s._canvasPattern=null,s.uvTransform=n.transform||new i.TextureMatrix(n),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var n=t.context,r=this.worldTransform,s=t.resolution,a=2===e.rotate,u=e.baseTexture,l=u.resolution,c=this.tilePosition.x/this.tileScale.x%e.orig.width*l,h=this.tilePosition.y/this.tileScale.y%e.orig.height*l;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var f=new i.CanvasRenderTarget(e.orig.width,e.orig.height,l);if(16777215!==this.tint)this.tintedTexture=o.default.getTintedTexture(this,this.tint),f.context.drawImage(this.tintedTexture,0,0);else{var p=e._frame.x*l,d=e._frame.y*l,y=e._frame.width*l,_=e._frame.height*l,v=(e.trim?e.trim.width:e.orig.width)*l,m=(e.trim?e.trim.height:e.orig.height)*l,g=(e.trim?e.trim.x:0)*l,b=(e.trim?e.trim.y:0)*l;a?(f.context.rotate(-Math.PI/2),f.context.translate(-m,0),f.context.drawImage(u.source,p,d,y,_,-b,g,m,v)):f.context.drawImage(u.source,p,d,y,_,g,b,v,m)}this.cachedTint=this.tint,this._canvasPattern=f.context.createPattern(f.canvas,"repeat")}n.globalAlpha=this.worldAlpha,n.setTransform(r.a*s,r.b*s,r.c*s,r.d*s,r.tx*s,r.ty*s),t.setBlendMode(this.blendMode),n.fillStyle=this._canvasPattern,n.scale(this.tileScale.x/l,this.tileScale.y/l);var x=this.anchor.x*-this._width*l,w=this.anchor.y*-this._height*l;this.uvRespectAnchor?(n.translate(c,h),n.fillRect(-c+x,-h+w,this._width/this.tileScale.x*l,this._height/this.tileScale.y*l)):(n.translate(c+x,h+w),n.fillRect(-c,-h,this._width/this.tileScale.x*l,this._height/this.tileScale.y*l))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,n,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new i.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,s);var e=this._width,n=this._height,r=-e*this.anchor._x;if(s.x>=r&&s.x<r+e){var i=-n*this.anchor._y;if(s.y>=i&&s.y<i+n)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,n,r){return new e(i.Texture.from(t),n,r)},e.fromFrame=function(t,n,r){var o=i.utils.TextureCache[t];if(!o)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(o,n,r)},e.fromImage=function(t,n,r,o,s){return new e(i.Texture.fromImage(t,o,s),n,r)},r(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(i.Sprite);e.default=a},function(t,e,n){"use strict";var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),i=a(n(39)),o=a(n(58)),s=n(4);function a(t){return t&&t.__esModule?t:{default:t}}var u=r.DisplayObject,l=new r.Matrix;u.prototype._cacheAsBitmap=!1,u.prototype._cacheData=!1;var c=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(u.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new c),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),u.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},u.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var n=this.getLocalBounds().clone();if(this._filters&&this._filters.length){var a=this._filters[0].padding;n.pad(a)}n.ceil(r.settings.RESOLUTION);var u=t._activeRenderTarget,c=t.filterManager.filterStack,h=r.RenderTexture.create(n.width,n.height),f="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=f,o.default.addToCache(h.baseTexture,f),i.default.addToCache(h,f);var p=l;p.tx=-n.x,p.ty=-n.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,h,!0,p,!0),t.bindRenderTarget(u),t.filterManager.filterStack=c,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var d=new r.Sprite(h);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-n.x/n.width,d.anchor.y=-n.y/n.height,d.alpha=e,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)}},u.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},u.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),n=this.alpha;this.alpha=1;var a=t.context;e.ceil(r.settings.RESOLUTION);var u=r.RenderTexture.create(e.width,e.height),c="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=c,o.default.addToCache(u.baseTexture,c),i.default.addToCache(u,c);var h=l;this.transform.localTransform.copy(h),h.invert(),h.tx-=e.x,h.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,u,!0,h,!1),t.context=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var f=new r.Sprite(u);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-e.x/e.width,f.anchor.y=-e.y/e.height,f.alpha=n,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=f.containsPoint.bind(f)}},u.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},u.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},u.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,o.default.removeFromCache(this._cacheData.textureCacheId),i.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},u.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},function(t,e,n){"use strict";var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3));r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},function(t,e,n){"use strict";var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3));r.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),i=n(2);n(27);var o=new r.Matrix,s=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.shader=null,r.simpleShader=null,r.quad=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new r.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new r.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new r.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,n=this.quad;e.bindVao(n.vao);var s=n.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((s=n.uvs)[0]=s[6]=-t.anchor.x,s[1]=s[3]=-t.anchor.y,s[2]=s[4]=1-t.anchor.x,s[5]=s[7]=1-t.anchor.y),n.upload();var a=t._texture,u=a.baseTexture,l=t.tileTransform.localTransform,c=t.uvTransform,h=u.isPowerOfTwo&&a.frame.width===u.width&&a.frame.height===u.height;h&&(u._glTextures[e.CONTEXT_UID]?h=u.wrapMode!==i.WRAP_MODES.CLAMP:u.wrapMode===i.WRAP_MODES.CLAMP&&(u.wrapMode=i.WRAP_MODES.REPEAT));var f=h?this.simpleShader:this.shader;e.bindShader(f);var p=a.width,d=a.height,y=t._width,_=t._height;o.set(l.a*p/y,l.b*p/_,l.c*d/y,l.d*d/_,l.tx/y,l.ty/_),o.invert(),h?o.prepend(c.mapCoord):(f.uniforms.uMapCoord=c.mapCoord.toArray(!0),f.uniforms.uClampFrame=c.uClampFrame,f.uniforms.uClampOffset=c.uClampOffset),f.uniforms.uTransform=o.toArray(!0),f.uniforms.uColor=r.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,f.uniforms.uColor,u.premultipliedAlpha),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=e.bindTexture(a),e.setBlendMode(r.utils.correctBlendMode(t.blendMode,u.premultipliedAlpha)),n.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(r.ObjectRenderer);e.default=s,r.WebGLRenderer.registerPlugin("tilingSprite",s)},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3));n(27);var o=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return r.alpha=n,r.glShaderKey="alpha",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(i.Filter);e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),o=a(n(419)),s=a(n(420));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(n,r,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return l.blurXFilter=new o.default(n,r,a,u),l.blurYFilter=new s.default(n,r,a,u),l.padding=0,l.resolution=a||i.settings.RESOLUTION,l.quality=r||4,l.blur=n||8,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,n){var r=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,r,!0),this.blurYFilter.apply(t,r,n,!1),t.returnRenderTarget(r)},r(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(i.Filter);e.default=u},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3));n(27);var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return n.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],n.alpha=1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._loadMatrix=function(t){var e=t;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(e,this.uniforms.m,t),e=this._colorMatrix(e)),this.uniforms.m=e},e.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),i=1/3,o=(0,Math.sqrt)(i),s=[n+(1-n)*i,i*(1-n)-o*r,i*(1-n)+o*r,0,0,i*(1-n)+o*r,n+i*(1-n),i*(1-n)-o*r,0,0,i*(1-n)-o*r,i*(1-n)+o*r,n+i*(1-n),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var n=(t||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],n=2*t/3+1,r=-.5*(n-1),i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,n,r,i){t=t||.2,e=e||.15;var o=((n=n||16770432)>>16&255)/255,s=(n>>8&255)/255,a=(255&n)/255,u=((r=r||3375104)>>16&255)/255,l=(r>>8&255)/255,c=(255&r)/255,h=[.3,.59,.11,0,0,o,s,a,t,0,u,l,c,e,0,o-u,s-l,a-c,0,0];this._loadMatrix(h,i)},e.prototype.night=function(t,e){var n=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},r(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(i.Filter);e.default=o,o.prototype.grayscale=o.prototype.greyscale},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3));n(27);var o=function(t){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=new i.Matrix;n.renderable=!1;var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return s.maskSprite=n,s.maskMatrix=o,s.uniforms.mapSampler=n._texture,s.uniforms.filterMatrix=o,s.uniforms.scale={x:1,y:1},null!==r&&void 0!==r||(r=20),s.scale=new i.Point(r,r),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,n)},r(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(i.Filter);e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3));n(27);var i=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.Filter);e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var r=n(670);Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return h(r).default}});var i=n(672);Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return h(i).default}});var o=n(669);Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return h(o).default}});var s=n(667);Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return h(s).default}});var a=n(419);Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return h(a).default}});var u=n(420);Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return h(u).default}});var l=n(668);Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return h(l).default}});var c=n(666);function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"AlphaFilter",{enumerable:!0,get:function(){return h(c).default}})},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3));n(27);var o=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return i.noise=n,i.seed=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(i.Filter);e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),o=c(n(424)),s=c(n(425)),a=c(n(426)),u=c(n(48)),l=c(n(427));function c(t){return t&&t.__esModule?t:{default:t}}i.utils.mixins.delayMixin(i.DisplayObject.prototype,l.default);var h=1,f={target:null,data:{global:null}},p=function(t){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r=r||{},a.renderer=n,a.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,a.interactionFrequency=r.interactionFrequency||10,a.mouse=new o.default,a.mouse.identifier=h,a.mouse.global.set(-999999),a.activeInteractionData={},a.activeInteractionData[h]=a.mouse,a.interactionDataPool=[],a.eventData=new s.default,a.interactionDOMElement=null,a.moveWhenInside=!1,a.eventsAdded=!1,a.mouseOverRenderer=!1,a.supportsTouchEvents="ontouchstart"in window,a.supportsPointerEvents=!!window.PointerEvent,a.onPointerUp=a.onPointerUp.bind(a),a.processPointerUp=a.processPointerUp.bind(a),a.onPointerCancel=a.onPointerCancel.bind(a),a.processPointerCancel=a.processPointerCancel.bind(a),a.onPointerDown=a.onPointerDown.bind(a),a.processPointerDown=a.processPointerDown.bind(a),a.onPointerMove=a.onPointerMove.bind(a),a.processPointerMove=a.processPointerMove.bind(a),a.onPointerOut=a.onPointerOut.bind(a),a.processPointerOverOut=a.processPointerOverOut.bind(a),a.onPointerOver=a.onPointerOver.bind(a),a.cursorStyles={default:"inherit",pointer:"pointer"},a.currentCursorMode=null,a.cursor=null,a._tempPoint=new i.Point,a.resolution=1,a.setTargetElement(a.renderer.view,a.renderer.resolution),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.hitTest=function(t,e){return f.target=null,f.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(f,e,null,!0),f.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(i.ticker.shared.add(this.update,this,i.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(i.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var n=this.activeInteractionData[e];if(n.originalEvent&&"touch"!==n.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":r(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,n){n.stopped||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.mapPositionToPoint=function(t,e,n){var r=void 0;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*i,t.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*i},e.prototype.processInteractive=function(t,e,n,r,i){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=i=e.interactive||i,u=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(r=!1,u=!1)),a=!1):e._mask&&r&&(e._mask.containsPoint(o)||(r=!1,u=!1)),u&&e.interactiveChildren&&e.children)for(var l=e.children,c=l.length-1;c>=0;c--){var h=l[c],f=this.processInteractive(t,h,n,r,a);if(f){if(!h.parent)continue;a=!1,f&&(t.target&&(r=!1),s=!0)}}return i&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),n&&n(t,e,!!s))),s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var n=e.length,r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===i.pointerType)this.emit("touchstart",s);else if("mouse"===i.pointerType||"pen"===i.pointerType){var a=2===i.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,n){var r=t.data,i=t.data.identifier;if(n)if(e.trackedPointers[i]||(e.trackedPointers[i]=new a.default(i)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){for(var r=this.normalizeToPointerData(t),i=r.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<i;s++){var a=r[s],u=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,u);if(l.data.originalEvent=t,this.processInteractive(l,this.renderer._lastObjectRendered,n,e||!o),this.emit(e?"pointercancel":"pointerup"+o,l),"mouse"===a.pointerType||"pen"===a.pointerType){var c=2===a.button;this.emit(c?"rightup"+o:"mouseup"+o,l)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,l),this.releaseInteractionDataForPointerId(a.pointerId,u))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var r=t.data,i=t.data.identifier,o=e.trackedPointers[i],s="touch"===r.pointerType,u="mouse"===r.pointerType||"pen"===r.pointerType,l=!1;if(u){var c=2===r.button,h=a.default.FLAGS,f=c?h.RIGHT_DOWN:h.LEFT_DOWN,p=void 0!==o&&o.flags&f;n?(this.dispatchEvent(e,c?"rightup":"mouseup",t),p&&(this.dispatchEvent(e,c?"rightclick":"click",t),l=!0)):p&&this.dispatchEvent(e,c?"rightupoutside":"mouseupoutside",t),o&&(c?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(u&&!l||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[i]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var n=e.length,r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=t;var a="touch"!==i.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===i.pointerType&&this.emit("touchmove",s),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,n){var r=t.data,i="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,n){var r=t.data,i=t.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,s=e.trackedPointers[i];n&&!s&&(s=e.trackedPointers[i]=new a.default(i)),void 0!==s&&(n&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[i]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,n=void 0;return e===h||"mouse"===t.pointerType?n=this.mouse:this.activeInteractionData[e]?n=this.activeInteractionData[e]:((n=this.interactionDataPool.pop()||new o.default).identifier=e,this.activeInteractionData[e]=n),n.copyEvent(t),n},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(n.global.x=n.global.x/this.resolution,n.global.y=n.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,r=t.changedTouches.length;n<r;n++){var i=t.changedTouches[n];void 0===i.button&&(i.button=t.touches.length?1:0),void 0===i.buttons&&(i.buttons=t.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=h),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(u.default);e.default=p,i.WebGLRenderer.registerPlugin("interaction",p),i.CanvasRenderer.registerPlugin("interaction",p)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(424);Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return u(r).default}});var i=n(673);Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return u(i).default}});var o=n(427);Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return u(o).default}});var s=n(426);Object.defineProperty(e,"InteractionTrackingData",{enumerable:!0,get:function(){return u(s).default}});var a=n(425);function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"InteractionEvent",{enumerable:!0,get:function(){return u(a).default}})},function(t,e,n){"use strict";e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var r=n(428);Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return l(r).default}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}});var i=n(429);Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return l(i).default}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return i.getResourcePath}});var o=n(430);Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return l(o).default}});var s=n(85);Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return s.Resource}});var a=l(n(397)),u=l(n(676));function l(t){return t&&t.__esModule?t:{default:t}}e.Loader=u.default;var c=new u.default;c.destroy=function(){},e.shared=c;var h=a.default.prototype;h._loader=null,Object.defineProperty(h,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?c:new u.default}return this._loader}}),h._parentDestroy=h.destroy,h.destroy=function(t,e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t,e)}},function(t,e,n){"use strict";e.__esModule=!0;var r=l(n(85)),i=n(708),o=l(n(48)),s=l(n(430)),a=l(n(429)),u=l(n(428));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r));o.default.call(i);for(var s=0;s<e._pixiMiddleware.length;++s)i.use(e._pixiMiddleware[s]());return i.onStart.add(function(t){return i.emit("start",t)}),i.onProgress.add(function(t,e){return i.emit("progress",t,e)}),i.onError.add(function(t,e,n){return i.emit("error",t,e,n)}),i.onLoad.add(function(t,e){return i.emit("load",t,e)}),i.onComplete.add(function(t,e){return i.emit("complete",t,e)}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(r.default);for(var h in e.default=c,o.default.prototype)c.prototype[h]=o.default.prototype[h];c._pixiMiddleware=[i.blobMiddlewareFactory,s.default,a.default,u.default];var f=r.default.Resource;f.setExtensionXhrType("fnt",f.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=s(n(431)),o=s(n(110));function s(t){return t&&t.__esModule?t:{default:t}}var a=10,u=function(t){function e(n,r,i,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,4,4));return u._origWidth=n.orig.width,u._origHeight=n.orig.height,u._width=u._origWidth,u._height=u._origHeight,u._leftWidth=void 0!==r?r:a,u._rightWidth=void 0!==o?o:a,u._topHeight=void 0!==i?i:a,u._bottomHeight=void 0!==s?s:a,u._cachedTint=16777215,u._tintedTexture=null,u._canvasUvs=null,u.refresh(!0),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,n=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*n,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*n,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,n=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*n,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*n,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context,n=this.worldTransform,r=t.resolution,i=16777215!==this.tint,s=this._texture;i&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedTexture=o.default.getTintedTexture(this,this.tint));var a=i?this._tintedTexture:s.baseTexture.source;this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var u=this.vertices,l=this._canvasUvs,c=i?0:s.frame.x,h=i?0:s.frame.y,f=c+s.frame.width,p=h+s.frame.height;l[0]=c,l[1]=c+this._leftWidth,l[2]=f-this._rightWidth,l[3]=f,l[4]=h,l[5]=h+this._topHeight,l[6]=p-this._bottomHeight,l[7]=p;for(var d=0;d<8;d++)l[d]*=s.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.roundPixels?e.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r|0,n.ty*r|0):e.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r);for(var y=0;y<3;y++)for(var _=0;_<3;_++){var v=2*_+8*y,m=Math.max(1,l[_+1]-l[_]),g=Math.max(1,l[y+5]-l[y+4]),b=Math.max(1,u[v+10]-u[v]),x=Math.max(1,u[v+11]-u[v+1]);e.drawImage(a,l[_],l[y+4],m,g,u[v],u[v+1],b,x)}},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,n=this._texture;this._origWidth=n.orig.width,this._origHeight=n.orig.height;var r=1/this._origWidth,i=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},r(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(i.default);e.default=u},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return i.points=r,i.vertices=new Float32Array(4*r.length),i.uvs=new Float32Array(4*r.length),i.colors=new Float32Array(2*r.length),i.indices=new Uint16Array(2*r.length),i.autoUpdate=!0,i.refresh(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,n=this.indices,r=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,r[0]=1,r[1]=1,n[0]=0,n[1]=1;for(var i=t.length,o=1;o<i;o++){var s=4*o,a=o/(i-1);e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1,r[s=2*o]=1,r[s+1]=1,n[s=2*o]=s,n[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],n=void 0,r=0,i=0,o=this.vertices,s=t.length,a=0;a<s;a++){var u=t[a],l=4*a;i=-((n=a<t.length-1?t[a+1]:u).x-e.x),r=n.y-e.y;var c=10*(1-a/(s-1));c>1&&(c=1);var h=Math.sqrt(r*r+i*i),f=this._texture.height/2;r/=h,i/=h,r*=f,i*=f,o[l]=u.x+r,o[l+1]=u.y+i,o[l+2]=u.x-r,o[l+3]=u.y-i,e=u}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(function(t){return t&&t.__esModule?t:{default:t}}(n(84)).default);e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),i=function(t){return t&&t.__esModule?t:{default:t}}(n(84));var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,n=e.context,r=t.worldTransform,o=e.resolution;e.roundPixels?n.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o|0,r.ty*o|0):n.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===i.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,n=0;n<e-2;n++){var r=2*n;this._renderDrawTriangle(t,r,r+2,r+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,n=e.length,r=0;r<n;r+=3){var i=2*e[r],o=2*e[r+1],s=2*e[r+2];this._renderDrawTriangle(t,i,o,s)}},t.prototype._renderDrawTriangle=function(t,e,n,r){var i=this.renderer.context,o=t.uvs,s=t.vertices,a=t._texture;if(a.valid){var u=a.baseTexture,l=u.source,c=u.width,h=u.height,f=void 0,p=void 0,d=void 0,y=void 0,_=void 0,v=void 0;if(t.uploadUvTransform){var m=t._uvTransform.mapCoord;f=(o[e]*m.a+o[e+1]*m.c+m.tx)*u.width,p=(o[n]*m.a+o[n+1]*m.c+m.tx)*u.width,d=(o[r]*m.a+o[r+1]*m.c+m.tx)*u.width,y=(o[e]*m.b+o[e+1]*m.d+m.ty)*u.height,_=(o[n]*m.b+o[n+1]*m.d+m.ty)*u.height,v=(o[r]*m.b+o[r+1]*m.d+m.ty)*u.height}else f=o[e]*u.width,p=o[n]*u.width,d=o[r]*u.width,y=o[e+1]*u.height,_=o[n+1]*u.height,v=o[r+1]*u.height;var g=s[e],b=s[n],x=s[r],w=s[e+1],T=s[n+1],S=s[r+1],E=t.canvasPadding/this.renderer.resolution;if(E>0){var O=E/Math.abs(t.worldTransform.a),A=E/Math.abs(t.worldTransform.d),M=(g+b+x)/3,P=(w+T+S)/3,C=g-M,k=w-P,R=Math.sqrt(C*C+k*k);g=M+C/R*(R+O),w=P+k/R*(R+A),k=T-P,b=M+(C=b-M)/(R=Math.sqrt(C*C+k*k))*(R+O),T=P+k/R*(R+A),k=S-P,x=M+(C=x-M)/(R=Math.sqrt(C*C+k*k))*(R+O),S=P+k/R*(R+A)}i.save(),i.beginPath(),i.moveTo(g,w),i.lineTo(b,T),i.lineTo(x,S),i.closePath(),i.clip();var I=f*_+y*d+p*v-_*d-y*p-f*v,D=g*_+y*x+b*v-_*x-y*b-g*v,L=f*b+g*d+p*x-b*d-g*p-f*x,F=f*_*x+y*b*d+g*p*v-g*_*d-y*p*x-f*b*v,N=w*_+y*S+T*v-_*S-y*T-w*v,j=f*T+w*d+p*S-T*d-w*p-f*S,B=f*_*S+y*T*d+w*p*v-w*_*d-y*p*S-f*T*v;i.transform(D/I,N/I,L/I,j/I,F/I,B/I),i.drawImage(l,0,0,c*u.resolution,h*u.resolution,0,0,c,h),i.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,n=t.vertices,r=n.length/2;e.beginPath();for(var i=1;i<r-2;++i){var o=2*i,s=n[o],a=n[o+1],u=n[o+2],l=n[o+3],c=n[o+4],h=n[o+5];e.moveTo(s,a),e.lineTo(u,l),e.lineTo(c,h)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=o,r.CanvasRenderer.registerPlugin("mesh",o)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(84);Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return l(r).default}});var i=n(681);Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return l(i).default}});var o=n(679);Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return l(o).default}});var s=n(431);Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return l(s).default}});var a=n(677);Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return l(a).default}});var u=n(678);function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return l(u).default}})},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),i=s(n(18)),o=s(n(84));n(27);function s(t){return t&&t.__esModule?t:{default:t}}var a=r.Matrix.IDENTITY,u=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.shader=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new r.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(t){var e=this.renderer,n=e.gl,s=t._texture;if(s.valid){var u=t._glDatas[e.CONTEXT_UID];u||(e.bindVao(null),(u={shader:this.shader,vertexBuffer:i.default.GLBuffer.createVertexBuffer(n,t.vertices,n.STREAM_DRAW),uvBuffer:i.default.GLBuffer.createVertexBuffer(n,t.uvs,n.STREAM_DRAW),indexBuffer:i.default.GLBuffer.createIndexBuffer(n,t.indices,n.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty,vertexDirty:t.vertexDirty}).vao=new i.default.VertexArrayObject(n).addIndex(u.indexBuffer).addAttribute(u.vertexBuffer,u.shader.attributes.aVertexPosition,n.FLOAT,!1,8,0).addAttribute(u.uvBuffer,u.shader.attributes.aTextureCoord,n.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=u),e.bindVao(u.vao),t.dirty!==u.dirty&&(u.dirty=t.dirty,u.uvBuffer.upload(t.uvs)),t.indexDirty!==u.indexDirty&&(u.indexDirty=t.indexDirty,u.indexBuffer.upload(t.indices)),t.vertexDirty!==u.vertexDirty&&(u.vertexDirty=t.vertexDirty,u.vertexBuffer.upload(t.vertices)),e.bindShader(u.shader),u.shader.uniforms.uSampler=e.bindTexture(s),e.state.setBlendMode(r.utils.correctBlendMode(t.blendMode,s.baseTexture.premultipliedAlpha)),u.shader.uniforms.uTransform&&(t.uploadUvTransform?u.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):u.shader.uniforms.uTransform=a.toArray(!0)),u.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),u.shader.uniforms.uColor=r.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,u.shader.uniforms.uColor,s.baseTexture.premultipliedAlpha);var l=t.drawMode===o.default.DRAW_MODES.TRIANGLE_MESH?n.TRIANGLE_STRIP:n.TRIANGLES;u.vao.draw(l,t.indices.length,0)}},e}(r.ObjectRenderer);e.default=u,r.WebGLRenderer.registerPlugin("mesh",u)},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),o=n(4);var s=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,r=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return o>16384&&(o=16384),o>n&&(o=n),a._properties=[!1,!0,!1,!1,!1],a._maxSize=n,a._batchSize=o,a._glBuffers={},a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=i.BLEND_MODES.NORMAL,a.autoResize=s,a.roundPixels=!0,a.baseTexture=null,a.setProperties(r),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,n=this.worldTransform,r=!0,i=0,o=0,s=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var l=this.children[u];if(l.visible){var c=l._texture.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)==0)r&&(e.setTransform(n.a,n.b,n.c,n.d,n.tx*t.resolution,n.ty*t.resolution),r=!1),i=l.anchor.x*(-c.width*l.scale.x)+l.position.x+.5,o=l.anchor.y*(-c.height*l.scale.y)+l.position.y+.5,s=c.width*l.scale.x,a=c.height*l.scale.y;else{r||(r=!0),l.displayObjectUpdateTransform();var h=l.worldTransform;t.roundPixels?e.setTransform(h.a,h.b,h.c,h.d,h.tx*t.resolution|0,h.ty*t.resolution|0):e.setTransform(h.a,h.b,h.c,h.d,h.tx*t.resolution,h.ty*t.resolution),i=l.anchor.x*-c.width+.5,o=l.anchor.y*-c.height+.5,s=c.width,a=c.height}var f=l._texture.baseTexture.resolution;e.drawImage(l._texture.baseTexture.source,c.x*f,c.y*f,c.width*f,c.height*f,i*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var n=0;n<this._buffers.length;++n)this._buffers[n].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},r(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,o.hex2rgb)(t,this.tintRgb)}}]),e}(i.Container);e.default=s},function(t,e,n){"use strict";e.__esModule=!0;var r=n(682);Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return o(r).default}});var i=n(685);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return o(i).default}})},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(18)),i=o(n(171));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<n.length;++o){var s=n[o];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,unsignedByte:s.unsignedByte,offset:s.offset},r[o]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,i.default)(this.size),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var o=this.dynamicProperties[n];o.offset=e,e+=o.size,this.dynamicStride+=o.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=r.default.GLBuffer.createVertexBuffer(t,s,t.STREAM_DRAW);var a=0;this.staticStride=0;for(var u=0;u<this.staticProperties.length;++u){var l=this.staticProperties[u];l.offset=a,a+=l.size,this.staticStride+=l.size}var c=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(c),this.staticDataUint32=new Uint32Array(c),this.staticBuffer=r.default.GLBuffer.createVertexBuffer(t,c,t.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var h=0;h<this.dynamicProperties.length;++h){var f=this.dynamicProperties[h];f.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,f.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*f.offset):this.vao.addAttribute(this.dynamicBuffer,f.attribute,t.FLOAT,!1,4*this.dynamicStride,4*f.offset)}for(var p=0;p<this.staticProperties.length;++p){var d=this.staticProperties[p];d.unsignedByte?this.vao.addAttribute(this.staticBuffer,d.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*d.offset):this.vao.addAttribute(this.staticBuffer,d.attribute,t.FLOAT,!1,4*this.staticStride,4*d.offset)}},t.prototype.uploadDynamic=function(t,e,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(t,e,n,i.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(t,e,n,i.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();e.default=s},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),i=a(n(686)),o=a(n(684)),s=n(4);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return i.shader=null,i.indexBuffer=null,i.properties=null,i.tempMatrix=new r.Matrix,i.CONTEXT_UID=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new i.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,n=t._maxSize,i=t._batchSize,o=this.renderer,s=e.length;if(0!==s){s>n&&(s=n);var a=t._glBuffers[o.CONTEXT_UID];a||(a=t._glBuffers[o.CONTEXT_UID]=this.generateBuffers(t));var u=e[0]._texture.baseTexture;this.renderer.setBlendMode(r.utils.correctBlendMode(t.blendMode,u.premultipliedAlpha));var l=o.gl,c=t.worldTransform.copy(this.tempMatrix);c.prepend(o._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=c.toArray(!0),this.shader.uniforms.uColor=r.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u.premultipliedAlpha),this.shader.uniforms.uSampler=o.bindTexture(u);for(var h=!1,f=0,p=0;f<s;f+=i,p+=1){var d=s-f;if(d>i&&(d=i),p>=a.length){if(!t.autoResize)break;a.push(this._generateOneMoreBuffer(t))}var y=a[p];y.uploadDynamic(e,f,d);var _=t._bufferUpdateIDs[p]||0;(h=h||y._updateID<_)&&(y._updateID=t._updateID,y.uploadStatic(e,f,d)),o.bindVao(y.vao),y.vao.draw(l.TRIANGLES,6*d)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,n=[],r=t._maxSize,i=t._batchSize,s=t._properties,a=0;a<r;a+=i)n.push(new o.default(e,this.properties,s,i));return n},e.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,n=t._batchSize,r=t._properties;return new o.default(e,this.properties,r,n)},e.prototype.uploadVertices=function(t,e,n,r,i,o){for(var s=0,a=0,u=0,l=0,c=0;c<n;++c){var h=t[e+c],f=h._texture,p=h.scale.x,d=h.scale.y,y=f.trim,_=f.orig;y?(s=(a=y.x-h.anchor.x*_.width)+y.width,u=(l=y.y-h.anchor.y*_.height)+y.height):(s=_.width*(1-h.anchor.x),a=_.width*-h.anchor.x,u=_.height*(1-h.anchor.y),l=_.height*-h.anchor.y),r[o]=a*p,r[o+1]=l*d,r[o+i]=s*p,r[o+i+1]=l*d,r[o+2*i]=s*p,r[o+2*i+1]=u*d,r[o+3*i]=a*p,r[o+3*i+1]=u*d,o+=4*i}},e.prototype.uploadPosition=function(t,e,n,r,i,o){for(var s=0;s<n;s++){var a=t[e+s].position;r[o]=a.x,r[o+1]=a.y,r[o+i]=a.x,r[o+i+1]=a.y,r[o+2*i]=a.x,r[o+2*i+1]=a.y,r[o+3*i]=a.x,r[o+3*i+1]=a.y,o+=4*i}},e.prototype.uploadRotation=function(t,e,n,r,i,o){for(var s=0;s<n;s++){var a=t[e+s].rotation;r[o]=a,r[o+i]=a,r[o+2*i]=a,r[o+3*i]=a,o+=4*i}},e.prototype.uploadUvs=function(t,e,n,r,i,o){for(var s=0;s<n;++s){var a=t[e+s]._texture._uvs;a?(r[o]=a.x0,r[o+1]=a.y0,r[o+i]=a.x1,r[o+i+1]=a.y1,r[o+2*i]=a.x2,r[o+2*i+1]=a.y2,r[o+3*i]=a.x3,r[o+3*i+1]=a.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadTint=function(t,e,n,r,i,o){for(var a=0;a<n;++a){var u=t[e+a],l=u._texture.baseTexture.premultipliedAlpha,c=u.alpha,h=c<1&&l?(0,s.premultiplyTint)(u._tintRGB,c):u._tintRGB+(255*c<<24);r[o]=h,r[o+i]=h,r[o+2*i]=h,r[o+3*i]=h,o+=4*i}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(r.ObjectRenderer);e.default=u,r.WebGLRenderer.registerPlugin("particle",u)},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(function(t){return t&&t.__esModule?t:{default:t}}(n(80)).default);e.default=r},function(t,e,n){"use strict";Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1})},function(t,e,n){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n(696));Object.assign||(Object.assign=r.default)},function(t,e,n){"use strict";n(689),n(691),n(687),n(688),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(t,e,n){"use strict";(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var n=Date.now(),r=["ms","moz","webkit","o"],i=0;i<r.length&&!t.requestAnimationFrame;++i){var o=r[i];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+n-e;return r<0&&(r=0),n=e,setTimeout(function(){n=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(e,n(1))},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3));var i=16,o=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.uploadHookHelper=r,r.canvas=document.createElement("canvas"),r.canvas.width=i,r.canvas.height=i,r.ctx=r.canvas.getContext("2d"),r.registerUploadHook(s),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(function(t){return t&&t.__esModule?t:{default:t}}(n(172)).default);function s(t,e){if(e instanceof r.BaseTexture){var n=e.source,i=0===n.width?t.canvas.width:Math.min(t.canvas.width,n.width),o=0===n.height?t.canvas.height:Math.min(t.canvas.height,n.height);return t.ctx.drawImage(n,0,0,i,o,0,0,t.canvas.width,t.canvas.height),!0}return!1}e.default=o,r.CanvasRenderer.registerPlugin("prepare",o)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(695);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return u(r).default}});var i=n(692);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return u(i).default}});var o=n(172);Object.defineProperty(e,"BasePrepare",{enumerable:!0,get:function(){return u(o).default}});var s=n(432);Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return u(s).default}});var a=n(694);function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return u(a).default}})},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3));var i=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.uploadHookHelper=r.renderer,r.registerFindHook(a),r.registerUploadHook(o),r.registerUploadHook(s),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(function(t){return t&&t.__esModule?t:{default:t}}(n(172)).default);function o(t,e){return e instanceof r.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function s(t,e){return e instanceof r.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function a(t,e){return t instanceof r.Graphics&&(e.push(t),!0)}e.default=i,r.WebGLRenderer.registerPlugin("prepare",i)},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))i.call(n,l)&&(a[l]=n[l]);if(r){s=r(n);for(var c=0;c<s.length;c++)o.call(n,s[c])&&(a[s[c]]=n[s[c]])}}return a}},,function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,f,p,d,y=t[c].replace(a,"%20"),_=y.indexOf(n);_>=0?(h=y.substr(0,_),f=y.substr(_+1)):(h=y,f=""),p=decodeURIComponent(h),d=decodeURIComponent(f),r(s,p)?i(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),function(s){var a=encodeURIComponent(r(s))+n;return i(t[s])?o(t[s],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[s]))}).join(e):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";e.decode=e.parse=n(698),e.encode=e.stringify=n(699)},function(t,e){t.exports="precision highp float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\n\r\nuniform sampler2D uSampler;\r\nuniform mat3 mappedMatrix;\r\nuniform mat3 unmappedMatrix;\r\n\r\nuniform vec2 bendFactor;\r\nuniform vec4 overscanColor;\r\n\r\nvec2 curve(vec2 xy)\r\n{\r\n    vec2 uv = (xy - 0.5) * 2.0;\r\n    uv.x *= 1.0 + pow((abs(uv.y) / bendFactor.x), 2.0);\r\n    uv.y *= 1.0 + pow((abs(uv.x) / bendFactor.y), 2.0);\r\n    uv = (uv / 2.0) + 0.5;\r\n    return uv;\r\n}\r\n\r\nvec2 mapCoord(vec2 coord)\r\n{\r\n    return (vec3(coord, 1.0) * mappedMatrix).xy;\r\n}\r\n\r\nvec2 unmapCoord(vec2 coord)\r\n{\r\n    return (vec3(coord, 1.0) * unmappedMatrix).xy;\r\n}\r\n\r\nvoid main()\r\n{\r\n    vec2 uv = unmapCoord(curve(mapCoord(vTextureCoord)));\r\n    if (uv.x < 0.0 || uv.y < 0.0) {\r\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\r\n        return;\r\n    }\r\n    vec4 color = texture2D(uSampler, uv);\r\n\r\n    gl_FragColor = vec4(color.xyz, 1.0);\r\n}\r\n"},function(t,e){t.exports="precision highp float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\n\r\nuniform sampler2D uSampler;\r\nuniform vec4 filterArea;\r\nuniform vec4 filterClamp;\r\nuniform mat3 mappedMatrix;\r\nuniform mat3 unmappedMatrix;\r\n\r\nuniform float noise;\r\nuniform float time;\r\nuniform float chroma;\r\n\r\nfloat rand(vec2 co)\r\n{\r\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453 + time);\r\n}\r\n\r\nfloat easeInOutQuad(float t) {\r\n    return t < 0.5 ?\r\n        2.0 * t * t :\r\n        -1.0 + (4.0 - 2.0 * t) * t;\r\n}\r\n\r\nfloat easeInOutQuint(float t) {\r\n    return t < 0.5 ?\r\n        16.0 * t * t * t * t * t :\r\n        1.0 + 16.0 * (--t) * t * t * t * t;\r\n}\r\n\r\nvoid main()\r\n{\r\n    vec2 uv = vTextureCoord.xy;\r\n    vec3 color1 = texture2D(uSampler, uv).xyz;\r\n    vec3 color2 = texture2D(uSampler, vec2(vTextureCoord.x + chroma, uv.y)).xyz;\r\n    vec3 color = vec3(color2.r, color1.g, color1.b);\r\n\r\n    float diff = (rand(uv.xy) - 0.5) * noise;\r\n    vec3 noiseCol = vec3(diff, diff, diff);\r\n\r\n    float vig = 16.0 * uv.x * uv.y * (1.0 - uv.x) * (1.0 - uv.y);\r\n    vec3 vignette = vec3(pow(vig, 0.220));\r\n\r\n    float scan = easeInOutQuint(abs(cos(uv.y*filterArea.y)));\r\n    scan = max(scan, 0.65);\r\n\r\n    gl_FragColor = vec4(\r\n        (color * vignette + noiseCol) * scan\r\n        , 1.0);\r\n    gl_FragColor.r += 0.025;\r\n    gl_FragColor.g += 0.05;\r\n    gl_FragColor.b += 0.025;\r\n}\r\n"},function(t,e){t.exports="precision highp float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\n\r\nuniform sampler2D uSampler;\r\n\r\nuniform float noiseFactor;\r\nuniform float noiseTimeFactor;\r\nuniform float cellularFactor;\r\nuniform float cellularTimeFactor;\r\nuniform float cellularJitter;\r\nuniform float cellularScale;\r\nuniform float time;\r\n\r\n// Modulo 289 without a division (only multiplications)\r\nvec3 mod289(vec3 x) {\r\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec2 mod289(vec2 x) {\r\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\n// Modulo 7 without a division\r\nvec3 mod7(vec3 x) {\r\n    return x - floor(x * (1.0 / 7.0)) * 7.0;\r\n}\r\n\r\n// Permutation polynomial: (34x^2 + x) mod 289\r\nvec3 permute(vec3 x) {\r\n    return mod289((34.0 * x + 1.0) * x);\r\n}\r\n\r\n// Cellular noise, returning F1 and F2 in a vec2.\r\n// Standard 3x3 search window for good F1 and F2 values\r\nvec2 cellular(vec2 P) {\r\n    float K = 0.142857142857; // 1/7\r\n    float Ko = 0.428571428571; // 3/7\r\n    float jitter = cellularJitter; // Less gives more regular pattern\r\n    vec2 Pi = mod289(floor(P));\r\n    vec2 Pf = fract(P);\r\n    vec3 oi = vec3(-1.0, 0.0, 1.0);\r\n    vec3 of = vec3(-0.5, 0.5, 1.5);\r\n    vec3 px = permute(Pi.x + oi);\r\n    vec3 p = permute(px.x + Pi.y + oi); // p11, p12, p13\r\n    vec3 ox = fract(p*K) - Ko;\r\n    vec3 oy = mod7(floor(p*K))*K - Ko;\r\n    vec3 dx = Pf.x + 0.5 + jitter*ox;\r\n    vec3 dy = Pf.y - of + jitter*oy;\r\n    vec3 d1 = dx * dx + dy * dy; // d11, d12 and d13, squared\r\n    p = permute(px.y + Pi.y + oi); // p21, p22, p23\r\n    ox = fract(p*K) - Ko;\r\n    oy = mod7(floor(p*K))*K - Ko;\r\n    dx = Pf.x - 0.5 + jitter*ox;\r\n    dy = Pf.y - of + jitter*oy;\r\n    vec3 d2 = dx * dx + dy * dy; // d21, d22 and d23, squared\r\n    p = permute(px.z + Pi.y + oi); // p31, p32, p33\r\n    ox = fract(p*K) - Ko;\r\n    oy = mod7(floor(p*K))*K - Ko;\r\n    dx = Pf.x - 1.5 + jitter*ox;\r\n    dy = Pf.y - of + jitter*oy;\r\n    vec3 d3 = dx * dx + dy * dy; // d31, d32 and d33, squared\r\n    // Sort out the two smallest distances (F1, F2)\r\n    vec3 d1a = min(d1, d2);\r\n    d2 = max(d1, d2); // Swap to keep candidates for F2\r\n    d2 = min(d2, d3); // neither F1 nor F2 are now in d3\r\n    d1 = min(d1a, d2); // F1 is now in d1\r\n    d2 = max(d1a, d2); // Swap to keep candidates for F2\r\n    d1.xy = (d1.x < d1.y) ? d1.xy : d1.yx; // Swap if smaller\r\n    d1.xz = (d1.x < d1.z) ? d1.xz : d1.zx; // F1 is in d1.x\r\n    d1.yz = min(d1.yz, d2.yz); // F2 is now not in d2.yz\r\n    d1.y = min(d1.y, d1.z); // nor in  d1.z\r\n    d1.y = min(d1.y, d2.x); // F2 is in d1.y, we're done.\r\n    return sqrt(d1.xy);\r\n}\r\n\r\nfloat rand(vec2 co, float t)\r\n{\r\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453 + t);\r\n}\r\n\r\nvoid main()\r\n{\r\n    float fudge = cellular(vec2(0.0, vTextureCoord.y) * cellularScale + (time * cellularTimeFactor)).y * cellularFactor;\r\n    float noise = rand(vec2(vTextureCoord.y, 0.0), (time * noiseTimeFactor)) * noiseFactor;\r\n    float combinedFudge = noise + fudge;\r\n\r\n    gl_FragColor = vec4(\r\n        texture2D(uSampler, vec2(\r\n                vTextureCoord.x - combinedFudge,\r\n                vTextureCoord.y - combinedFudge / 2.0\r\n        )).r,\r\n        texture2D(uSampler, vTextureCoord.xy).g,\r\n        texture2D(uSampler, vTextureCoord.xy - noise).b, 1.0);\r\n}\r\n"},,,function(t,e,n){"use strict";t.exports=function(t,e,n){var r,i=t.length;if(!(e>=i||0===n)){var o=i-(n=e+n>i?i-e:n);for(r=e;r<o;++r)t[r]=t[r+n];t.length=o}}},function(t,e,n){"use strict";e.__esModule=!0,e.Loader=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=l(n(258)),s=l(n(386)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(433)),u=n(175);function l(t){return t&&t.__esModule?t:{default:t}}var c=/(#[\w-]+)?$/,h=e.Loader=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseUrl=n,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,n){return e._loadResource(t,n)},this._queue=a.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default;for(var i=0;i<t._defaultBeforeMiddleware.length;++i)this.pre(t._defaultBeforeMiddleware[i]);for(var s=0;s<t._defaultAfterMiddleware.length;++s)this.use(t._defaultAfterMiddleware[s])}return t.prototype.add=function(t,e,n,i){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if("object"===(void 0===t?"undefined":r(t))&&(i=e||t.callback||t.onComplete,n=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(i=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new u.Resource(t,e,n),"function"==typeof i&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var s=n.parentResource,a=[],l=0;l<s.children.length;++l)s.children[l].isComplete||a.push(s.children[l]);var c=s.progressChunk*(a.length+1)/(a.length+2);s.children.push(this.resources[t]),s.progressChunk=c;for(var h=0;h<a.length;++h)a[h].progressChunk=c;this.resources[t].progressChunk=c}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=(0,s.default)(t,{strictMode:!0}),n=void 0;if(n=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=c.exec(n)[0];-1!==(n=n.substr(0,n.length-r.length)).indexOf("?")?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=r}return n},t.prototype._loadResource=function(t,e){var n=this;t._dequeue=e,a.eachSeries(this._beforeMiddleware,function(e,r){e.call(n,t,function(){r(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),a.eachSeries(this._afterMiddleware,function(n,r){n.call(e,t,r)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},i(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();h._defaultBeforeMiddleware=[],h._defaultAfterMiddleware=[],h.pre=function(t){return h._defaultBeforeMiddleware.push(t),h},h.use=function(t){return h._defaultAfterMiddleware.push(t),h}},function(t,e,n){"use strict";e.__esModule=!0,e.blobMiddlewareFactory=function(){return function(t,e){if(t.data){if(t.xhr&&t.xhrType===r.Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=o.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.type=r.Resource.TYPE.IMAGE,void(t.data.onload=function(){o.revokeObjectURL(n),t.data.onload=null,e()})}}else{var s=t.xhr.getResponseHeader("content-type");if(s&&0===s.indexOf("image"))return t.data=new Image,t.data.src="data:"+s+";base64,"+(0,i.encodeBinary)(t.xhr.responseText),t.type=r.Resource.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}};var r=n(175),i=n(434),o=window.URL||window.webkitURL},,,function(t,e,n){var r;!function(i,o){void 0===(r=function(){return o()}.call(e,n,e,t))||(t.exports=r)}(0,function(){"use strict";var t;function e(e){e(t)}
/**
	 *  Tone.js
	 *  @author Yotam Mann
	 *  @license http://opensource.org/licenses/MIT MIT License
	 *  @copyright 2014-2016 Yotam Mann
	 */return function(e){t=e()}(function(){function t(t){return void 0===t}function e(t){return"function"==typeof t}var n;if(t(window.AudioContext)&&(window.AudioContext=window.webkitAudioContext),t(window.OfflineAudioContext)&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),t(AudioContext))throw new Error("Web Audio is not supported in this browser");n=new AudioContext,e(AudioContext.prototype.createGain)||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),e(AudioContext.prototype.createDelay)||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),e(AudioContext.prototype.createPeriodicWave)||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),e(AudioBufferSourceNode.prototype.start)||(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn),e(AudioBufferSourceNode.prototype.stop)||(AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),e(OscillatorNode.prototype.start)||(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn),e(OscillatorNode.prototype.stop)||(OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff),e(OscillatorNode.prototype.setPeriodicWave)||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),t(AudioNode.prototype._nativeConnect)&&(AudioNode.prototype._nativeConnect=AudioNode.prototype.connect,AudioNode.prototype.connect=function(e,n,r){if(e.input)Array.isArray(e.input)?(t(r)&&(r=0),this.connect(e.input[r])):this.connect(e.input,n,r);else try{e instanceof AudioNode?this._nativeConnect(e,n,r):this._nativeConnect(e,n)}catch(t){throw new Error("error connecting to node: "+e)}});var r=function(e,n){t(e)||1===e?this.input=this.context.createGain():e>1&&(this.input=new Array(e)),t(n)||1===n?this.output=this.context.createGain():n>1&&(this.output=new Array(e))};r.prototype.set=function(e,n,i){if(this.isObject(e))i=n;else if(this.isString(e)){var o={};o[e]=n,e=o}for(var s in e){n=e[s];var a=this;if(-1!==s.indexOf(".")){for(var u=s.split("."),l=0;l<u.length-1;l++)a=a[u[l]];s=u[u.length-1]}var c=a[s];t(c)||(r.Signal&&c instanceof r.Signal||r.Param&&c instanceof r.Param?c.value!==n&&(t(i)?c.value=n:c.rampTo(n,i)):c instanceof AudioParam?c.value!==n&&(c.value=n):c instanceof r?c.set(n):c!==n&&(a[s]=n))}return this},r.prototype.get=function(n){t(n)?n=this._collectDefaults(this.constructor):this.isString(n)&&(n=[n]);for(var i={},o=0;o<n.length;o++){var s=n[o],a=this,u=i;if(-1!==s.indexOf(".")){for(var l=s.split("."),c=0;c<l.length-1;c++){var h=l[c];u[h]=u[h]||{},u=u[h],a=a[h]}s=l[l.length-1]}var f=a[s];this.isObject(n[s])?u[s]=f.get():r.Signal&&f instanceof r.Signal?u[s]=f.value:r.Param&&f instanceof r.Param?u[s]=f.value:f instanceof AudioParam?u[s]=f.value:f instanceof r?u[s]=f.get():e(f)||t(f)||(u[s]=f)}return i},r.prototype._collectDefaults=function(e){var n=[];if(t(e.defaults)||(n=Object.keys(e.defaults)),!t(e._super))for(var r=this._collectDefaults(e._super),i=0;i<r.length;i++)-1===n.indexOf(r[i])&&n.push(r[i]);return n},r.prototype.toString=function(){for(var t in r){var n=t[0].match(/^[A-Z]$/),i=r[t]===this.constructor;if(e(r[t])&&n&&i)return t}return"Tone"},r.context=n,r.prototype.context=r.context,r.prototype.bufferSize=2048,r.prototype.blockTime=128/r.context.sampleRate,r.prototype.sampleTime=1/r.context.sampleRate,r.prototype.dispose=function(){return this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this};var i=null;r.prototype.noGC=function(){return this.output.connect(i),this},AudioNode.prototype.noGC=function(){return this.connect(i),this},r.prototype.connect=function(t,e,n){return Array.isArray(this.output)?(e=this.defaultArg(e,0),this.output[e].connect(t,0,n)):this.output.connect(t,e,n),this},r.prototype.disconnect=function(t){return Array.isArray(this.output)?(t=this.defaultArg(t,0),this.output[t].disconnect()):this.isUndef(t)?this.output.disconnect():this.output.disconnect(t),this},r.prototype.connectSeries=function(){if(arguments.length>1)for(var t=arguments[0],e=1;e<arguments.length;e++){var n=arguments[e];t.connect(n),t=n}return this},r.prototype.chain=function(){if(arguments.length>0)for(var t=this,e=0;e<arguments.length;e++){var n=arguments[e];t.connect(n),t=n}return this},r.prototype.fan=function(){if(arguments.length>0)for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},AudioNode.prototype.chain=r.prototype.chain,AudioNode.prototype.fan=r.prototype.fan,r.prototype.defaultArg=function(e,n){if(this.isObject(e)&&this.isObject(n)){var r={};for(var i in e)r[i]=this.defaultArg(n[i],e[i]);for(var o in n)r[o]=this.defaultArg(e[o],n[o]);return r}return t(e)?n:e},r.prototype.optionsObject=function(t,e,n){var r={};if(1===t.length&&this.isObject(t[0]))r=t[0];else for(var i=0;i<e.length;i++)r[e[i]]=t[i];return this.isUndef(n)?r:this.defaultArg(r,n)},r.prototype.isUndef=t,r.prototype.isFunction=e,r.prototype.isNumber=function(t){return"number"==typeof t},r.prototype.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},r.prototype.isBoolean=function(t){return"boolean"==typeof t},r.prototype.isArray=function(t){return Array.isArray(t)},r.prototype.isString=function(t){return"string"==typeof t},r.noOp=function(){},r.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},r.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},r.State={Started:"started",Stopped:"stopped",Paused:"paused"},r.prototype.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},r.prototype.dbToGain=function(t){return Math.pow(2,t/6)},r.prototype.gainToDb=function(t){return Math.log(t)/Math.LN10*20},r.prototype.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},r.prototype.now=function(){return this.context.currentTime},r.now=function(){return r.context.currentTime},r.extend=function(e,n){function i(){}t(n)&&(n=r),i.prototype=n.prototype,e.prototype=new i,e.prototype.constructor=e,e._super=n};var o=[];return r._initAudioContext=function(t){t(r.context),o.push(t)},r.setContext=function(t){r.prototype.context=t,r.context=t;for(var e=0;e<o.length;e++)o[e](t)},r._initAudioContext(function(t){r.prototype.blockTime=128/t.sampleRate,r.prototype.sampleTime=1/t.sampleRate,(i=t.createGain()).gain.value=0,i.connect(t.destination)}),r.version="r8",window.TONE_SILENCE_VERSION_LOGGING||console.log("%c * Tone.js "+r.version+" * ","background: #000; color: #fff"),r}),e(function(t){return t.SignalBase=function(){},t.extend(t.SignalBase),t.SignalBase.prototype.connect=function(e,n,r){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor||t.TimelineSignal&&t.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.prototype.connect.call(this,e,n,r),this},t.SignalBase}),e(function(t){return t.WaveShaper=function(t,e){this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(t)?this.curve=t:isFinite(t)||this.isUndef(t)?this._curve=new Float32Array(this.defaultArg(t,1024)):this.isFunction(t)&&(this._curve=new Float32Array(this.defaultArg(e,1024)),this.setMap(t))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=0,n=this._curve.length;e<n;e++){var r=e/(n-1)*2-1;this._curve[e]=t(r,e)}return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(-1===["none","2x","4x"].indexOf(t))throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}),e(function(t){return t.TimeBase=function(e,n){if(!(this instanceof t.TimeBase))return new t.TimeBase(e,n);if(this._expr=this._noOp,e instanceof t.TimeBase)this.copy(e);else if(!this.isUndef(n)||this.isNumber(e)){n=this.defaultArg(n,this._defaultUnits);var r=this._primaryExpressions[n].method;this._expr=r.bind(this,e)}else this.isString(e)?this.set(e):this.isUndef(e)&&(this._expr=this._defaultExpr())},t.extend(t.TimeBase),t.TimeBase.prototype.set=function(t){return this._expr=this._parseExprString(t),this},t.TimeBase.prototype.clone=function(){var t=new this.constructor;return t.copy(this),t},t.TimeBase.prototype.copy=function(t){var e=t._expr();return this.set(e)},t.TimeBase.prototype._primaryExpressions={n:{regexp:/^(\d+)n/i,method:function(t){return 1===(t=parseInt(t))?this._beatsToUnits(this._timeSignature()):this._beatsToUnits(4/t)}},t:{regexp:/^(\d+)t/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\d+)m/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._timeSignature())}},i:{regexp:/^(\d+)i/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var r=0;return t&&"0"!==t&&(r+=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(r+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(r+=this._beatsToUnits(parseFloat(n)/4)),r}},s:{regexp:/^(\d+(?:\.\d+)?s)/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\d+)samples/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)/,method:function(t){return this._primaryExpressions[this._defaultUnits].method.call(this,t)}}},t.TimeBase.prototype._binaryExpressions={"+":{regexp:/^\+/,precedence:2,method:function(t,e){return t()+e()}},"-":{regexp:/^\-/,precedence:2,method:function(t,e){return t()-e()}},"*":{regexp:/^\*/,precedence:1,method:function(t,e){return t()*e()}},"/":{regexp:/^\//,precedence:1,method:function(t,e){return t()/e()}}},t.TimeBase.prototype._unaryExpressions={neg:{regexp:/^\-/,method:function(t){return-t()}}},t.TimeBase.prototype._syntaxGlue={"(":{regexp:/^\(/},")":{regexp:/^\)/}},t.TimeBase.prototype._tokenize=function(t){for(var e=-1,n=[];t.length>0;){var r=i(t=t.trim(),this);n.push(r),t=t.substr(r.value.length)}function i(t,e){for(var n=["_binaryExpressions","_unaryExpressions","_primaryExpressions","_syntaxGlue"],r=0;r<n.length;r++){var i=e[n[r]];for(var o in i){var s=i[o],a=s.regexp,u=t.match(a);if(null!==u)return{method:s.method,precedence:s.precedence,regexp:s.regexp,value:u[0]}}}throw new SyntaxError("Tone.TimeBase: Unexpected token "+t)}return{next:function(){return n[++e]},peek:function(){return n[e+1]}}},t.TimeBase.prototype._matchGroup=function(t,e,n){if(!this.isUndef(t))for(var r in e){var i=e[r];if(i.regexp.test(t.value)){if(this.isUndef(n))return i;if(i.precedence===n)return i}}return!1},t.TimeBase.prototype._parseBinary=function(t,e){var n;this.isUndef(e)&&(e=2),n=e<0?this._parseUnary(t):this._parseBinary(t,e-1);for(var r=t.peek();r&&this._matchGroup(r,this._binaryExpressions,e);)n=(r=t.next()).method.bind(this,n,this._parseBinary(t,e-1)),r=t.peek();return n},t.TimeBase.prototype._parseUnary=function(t){var e,n;e=t.peek();var r=this._matchGroup(e,this._unaryExpressions);return r?(e=t.next(),n=this._parseUnary(t),r.method.bind(this,n)):this._parsePrimary(t)},t.TimeBase.prototype._parsePrimary=function(t){var e,n;if(e=t.peek(),this.isUndef(e))throw new SyntaxError("Tone.TimeBase: Unexpected end of expression");if(this._matchGroup(e,this._primaryExpressions)){var r=(e=t.next()).value.match(e.regexp);return e.method.bind(this,r[1],r[2],r[3])}if(e&&"("===e.value){if(t.next(),n=this._parseBinary(t),!(e=t.next())||")"!==e.value)throw new SyntaxError("Expected )");return n}throw new SyntaxError("Tone.TimeBase: Cannot process token "+e.value)},t.TimeBase.prototype._parseExprString=function(t){this.isString(t)||(t=t.toString());var e=this._tokenize(t);return this._parseBinary(e)},t.TimeBase.prototype._noOp=function(){return 0},t.TimeBase.prototype._defaultExpr=function(){return this._noOp},t.TimeBase.prototype._defaultUnits="s",t.TimeBase.prototype._frequencyToUnits=function(t){return 1/t},t.TimeBase.prototype._beatsToUnits=function(e){return 60/t.Transport.bpm.value*e},t.TimeBase.prototype._secondsToUnits=function(t){return t},t.TimeBase.prototype._ticksToUnits=function(e){return e*(this._beatsToUnits(1)/t.Transport.PPQ)},t.TimeBase.prototype._timeSignature=function(){return t.Transport.timeSignature},t.TimeBase.prototype._pushExpr=function(e,n,r){return e instanceof t.TimeBase||(e=new this.constructor(e,r)),this._expr=this._binaryExpressions[n].method.bind(this,this._expr,e._expr),this},t.TimeBase.prototype.add=function(t,e){return this._pushExpr(t,"+",e)},t.TimeBase.prototype.sub=function(t,e){return this._pushExpr(t,"-",e)},t.TimeBase.prototype.mult=function(t,e){return this._pushExpr(t,"*",e)},t.TimeBase.prototype.div=function(t,e){return this._pushExpr(t,"/",e)},t.TimeBase.prototype.eval=function(){return this._expr()},t.TimeBase.prototype.dispose=function(){this._expr=null},t.TimeBase}),e(function(t){return t.Time=function(e,n){if(!(this instanceof t.Time))return new t.Time(e,n);this._plusNow=!1,t.TimeBase.call(this,e,n)},t.extend(t.Time,t.TimeBase),t.Time.prototype._unaryExpressions=Object.create(t.TimeBase.prototype._unaryExpressions),t.Time.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){return t.Transport.nextSubdivision(e())}},t.Time.prototype._unaryExpressions.now={regexp:/^\+/,method:function(t){return this._plusNow=!0,t()}},t.Time.prototype.quantize=function(t,e){return e=this.defaultArg(e,1),this._expr=function(t,e,n){return t=t(),e=e.toSeconds(),t+(Math.round(t/e)*e-t)*n}.bind(this,this._expr,new this.constructor(t),e),this},t.Time.prototype.addNow=function(){return this._plusNow=!0,this},t.Time.prototype._defaultExpr=function(){return this._plusNow=!0,this._noOp},t.Time.prototype.copy=function(e){return t.TimeBase.prototype.copy.call(this,e),this._plusNow=e._plusNow,this},t.Time.prototype.toNotation=function(){var t=this.toSeconds(),e=this._toNotationHelper(t,["1m","2n","4n","8n","16n","32n","64n","128n"]),n=this._toNotationHelper(t,["1m","2n","2t","4n","4t","8n","8t","16n","16t","32n","32t","64n","64t","128n"]);return n.split("+").length<e.split("+").length?n:e},t.Time.prototype._toNotationHelper=function(t,e){for(var n=this._notationToUnits(e[e.length-1]),r="",i=0;i<e.length;i++){var o=this._notationToUnits(e[i]),s=t/o;if(1-s%1<1e-6&&(s+=1e-6),(s=Math.floor(s))>0){if(r+=1===s?e[i]:s.toString()+"*"+e[i],(t-=s*o)<n)break;r+=" + "}}return""===r&&(r="0"),r},t.Time.prototype._notationToUnits=function(t){for(var e=this._primaryExpressions,n=[e.n,e.t,e.m],r=0;r<n.length;r++){var i=n[r],o=t.match(i.regexp);if(o)return i.method.call(this,o[1])}},t.Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.toSeconds()/t,n=Math.floor(e/this._timeSignature()),r=e%1*4;return e=Math.floor(e)%this._timeSignature(),(r=r.toString()).length>3&&(r=parseFloat(r).toFixed(3)),[n,e,r].join(":")},t.Time.prototype.toTicks=function(){var e=this._beatsToUnits(1),n=this.eval()/e;return Math.floor(n*t.Transport.PPQ)},t.Time.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},t.Time.prototype.toFrequency=function(){return 1/this.toSeconds()},t.Time.prototype.toSeconds=function(){return this.eval()},t.Time.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},t.Time.prototype.eval=function(){return this._expr()+(this._plusNow?this.now():0)},t.Time}),e(function(t){t.Frequency=function(e,n){if(!(this instanceof t.Frequency))return new t.Frequency(e,n);t.TimeBase.call(this,e,n)},t.extend(t.Frequency,t.TimeBase),t.Frequency.prototype._primaryExpressions=Object.create(t.TimeBase.prototype._primaryExpressions),t.Frequency.prototype._primaryExpressions.midi={regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return this.midiToFrequency(t)}},t.Frequency.prototype._primaryExpressions.note={regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,n){var r=e[t.toLowerCase()]+12*(parseInt(n)+1);return this.midiToFrequency(r)}},t.Frequency.prototype._primaryExpressions.tr={regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var r=1;return t&&"0"!==t&&(r*=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(r*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}},t.Frequency.prototype.transpose=function(t){return this._expr=function(t,e){return t()*this.intervalToFrequencyRatio(e)}.bind(this,this._expr,t),this},t.Frequency.prototype.harmonize=function(t){return this._expr=function(t,e){for(var n=t(),r=[],i=0;i<e.length;i++)r[i]=n*this.intervalToFrequencyRatio(e[i]);return r}.bind(this,this._expr,t),this},t.Frequency.prototype.toMidi=function(){return this.frequencyToMidi(this.eval())},t.Frequency.prototype.toNote=function(){var e=this.eval(),r=Math.log(e/t.Frequency.A4)/Math.LN2,i=Math.round(12*r)+57,o=Math.floor(i/12);return o<0&&(i+=-12*o),n[i%12]+o.toString()},t.Frequency.prototype.toSeconds=function(){return 1/this.eval()},t.Frequency.prototype.toFrequency=function(){return this.eval()},t.Frequency.prototype.toTicks=function(){var e=this._beatsToUnits(1),n=this.eval()/e;return Math.floor(n*t.Transport.PPQ)},t.Frequency.prototype._frequencyToUnits=function(t){return t},t.Frequency.prototype._ticksToUnits=function(e){return 1/(60*e/(t.Transport.bpm.value*t.Transport.PPQ))},t.Frequency.prototype._beatsToUnits=function(e){return 1/t.TimeBase.prototype._beatsToUnits.call(this,e)},t.Frequency.prototype._secondsToUnits=function(t){return 1/t},t.Frequency.prototype._defaultUnits="hz";var e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return t.Frequency.A4=440,t.Frequency.prototype.midiToFrequency=function(e){return t.Frequency.A4*Math.pow(2,(e-69)/12)},t.Frequency.prototype.frequencyToMidi=function(e){return 69+12*Math.log(e/t.Frequency.A4)/Math.LN2},t.Frequency}),e(function(t){return t.TransportTime=function(e,n){if(!(this instanceof t.TransportTime))return new t.TransportTime(e,n);t.Time.call(this,e,n)},t.extend(t.TransportTime,t.Time),t.TransportTime.prototype._unaryExpressions=Object.create(t.Time.prototype._unaryExpressions),t.TransportTime.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){var n=this._secondsToTicks(e()),r=Math.ceil(t.Transport.ticks/n);return this._ticksToUnits(r*n)}},t.TransportTime.prototype._secondsToTicks=function(e){var n=e/this._beatsToUnits(1);return Math.round(n*t.Transport.PPQ)},t.TransportTime.prototype.eval=function(){return this._secondsToTicks(this._expr())+(this._plusNow?t.Transport.ticks:0)},t.TransportTime.prototype.toTicks=function(){return this.eval()},t.TransportTime.prototype.toSeconds=function(){return this._expr()+(this._plusNow?t.Transport.seconds:0)},t.TransportTime.prototype.toFrequency=function(){return 1/this.toSeconds()},t.TransportTime}),e(function(t){return t.Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},t.prototype.toSeconds=function(e){return this.isNumber(e)?e:this.isUndef(e)?this.now():this.isString(e)?new t.Time(e).toSeconds():e instanceof t.TimeBase?e.toSeconds():void 0},t.prototype.toFrequency=function(e){return this.isNumber(e)?e:this.isString(e)||this.isUndef(e)?new t.Frequency(e).eval():e instanceof t.TimeBase?e.toFrequency():void 0},t.prototype.toTicks=function(e){return this.isNumber(e)||this.isString(e)?new t.TransportTime(e).toTicks():this.isUndef(e)?t.Transport.ticks:e instanceof t.TimeBase?e.toTicks():void 0},t}),e(function(t){return t.Param=function(){var e=this.optionsObject(arguments,["param","units","convert"],t.Param.defaults);this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this._lfo=null,this.isObject(e.lfo)?this.value=e.lfo:this.isUndef(e.value)||(this.value=e.value)},t.extend(t.Param),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(e){if(this.isObject(e)){if(this.isUndef(t.LFO))throw new Error("Include 'Tone.LFO' to use an LFO as a Param value.");this._lfo&&this._lfo.dispose(),this._lfo=new t.LFO(e).start(),this._lfo.connect(this.input)}else{var n=this._fromUnits(e);this._param.cancelScheduledValues(0),this._param.value=n}}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return this.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return this.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.prototype.setValueAtTime=function(t,e){return t=this._fromUnits(t),(e=this.toSeconds(e))<=this.now()+this.blockTime?this._param.value=t:this._param.setValueAtTime(t,e),this},t.Param.prototype.setRampPoint=function(t){t=this.defaultArg(t,this.now());var e=this._param.value;return 0===e&&(e=this._minOutput),this._param.setValueAtTime(e,t),this},t.Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.linearRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),this._param.exponentialRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValue=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this},t.Param.prototype.linearRampToValue=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this},t.Param.prototype.setTargetAtTime=function(t,e,n){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),n=Math.max(this._minOutput,n),this._param.setTargetAtTime(t,this.toSeconds(e),n),this},t.Param.prototype.setValueCurveAtTime=function(t,e,n){for(var r=0;r<t.length;r++)t[r]=this._fromUnits(t[r]);return this._param.setValueCurveAtTime(t,this.toSeconds(e),this.toSeconds(n)),this},t.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},t.Param.prototype.rampTo=function(e,n,r){return n=this.defaultArg(n,0),this.units===t.Type.Frequency||this.units===t.Type.BPM?this.exponentialRampToValue(e,n,r):this.linearRampToValue(e,n,r),this},Object.defineProperty(t.Param.prototype,"lfo",{get:function(){return this._lfo}}),t.Param.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param=null,this._lfo&&(this._lfo.dispose(),this._lfo=null),this},t.Param}),e(function(t){return t.Gain=function(){var e=this.optionsObject(arguments,["gain","units"],t.Gain.defaults);this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly("gain")},t.extend(t.Gain),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.Param.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},t.prototype.createInsOuts=function(e,n){1===e?this.input=new t.Gain:e>1&&(this.input=new Array(e)),1===n?this.output=new t.Gain:n>1&&(this.output=new Array(e))},t.Gain}),e(function(t){return t.Signal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this.output=this._gain=this.context.createGain(),e.param=this._gain.gain,t.Param.call(this,e),this.input=this._param=this._gain.gain,t.Signal._constant.chain(this._gain)},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._param=null,this._gain.disconnect(),this._gain=null,this},t.Signal._constant=null,t._initAudioContext(function(e){for(var n=e.createBuffer(1,128,e.sampleRate),r=n.getChannelData(0),i=0;i<r.length;i++)r[i]=1;t.Signal._constant=e.createBufferSource(),t.Signal._constant.channelCount=1,t.Signal._constant.channelCountMode="explicit",t.Signal._constant.buffer=n,t.Signal._constant.loop=!0,t.Signal._constant.start(0),t.Signal._constant.noGC()}),t.Signal}),e(function(t){return t.Timeline=function(){var e=this.optionsObject(arguments,["memory"],t.Timeline.defaults);this._timeline=[],this._toRemove=[],this._iterating=!1,this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),t.Timeline.prototype.addEvent=function(t){if(this.isUndef(t.time))throw new Error("Tone.Timeline: events must have a time attribute");if(this._timeline.length){var e=this._search(t.time);this._timeline.splice(e+1,0,t)}else this._timeline.push(t);if(this.length>this.memory){var n=this.length-this.memory;this._timeline.splice(0,n)}return this},t.Timeline.prototype.removeEvent=function(t){if(this._iterating)this._toRemove.push(t);else{var e=this._timeline.indexOf(t);-1!==e&&this._timeline.splice(e,1)}return this},t.Timeline.prototype.getEvent=function(t){var e=this._search(t);return-1!==e?this._timeline[e]:null},t.Timeline.prototype.getEventAfter=function(t){var e=this._search(t);return e+1<this._timeline.length?this._timeline[e+1]:null},t.Timeline.prototype.getEventBefore=function(t){var e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];var n=this._search(t);return n-1>=0?this._timeline[n-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var n=e;n>=0&&this._timeline[n].time===t;n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){if(this._timeline.length){var e=this._search(t);e>=0&&(this._timeline=this._timeline.slice(e+1))}return this},t.Timeline.prototype._search=function(t){var e=0,n=this._timeline.length,r=n;if(n>0&&this._timeline[n-1].time<=t)return n-1;for(;e<r;){var i=Math.floor(e+(r-e)/2),o=this._timeline[i],s=this._timeline[i+1];if(o.time===t){for(var a=i;a<this._timeline.length;a++){this._timeline[a].time===t&&(i=a)}return i}if(o.time<t&&s.time>t)return i;o.time>t?r=i:o.time<t&&(e=i+1)}return-1},t.Timeline.prototype._iterate=function(t,e,n){this._iterating=!0,e=this.defaultArg(e,0),n=this.defaultArg(n,this._timeline.length-1);for(var r=e;r<=n;r++)t(this._timeline[r]);if(this._iterating=!1,this._toRemove.length>0){for(var i=0;i<this._toRemove.length;i++){var o=this._timeline.indexOf(this._toRemove[i]);-1!==o&&this._timeline.splice(o,1)}this._toRemove=[]}},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(e,0,n),this},t.Timeline.prototype.forEachAfter=function(t,e){var n=this._search(t);return this._iterate(e,n+1),this},t.Timeline.prototype.forEachFrom=function(t,e){for(var n=this._search(t);n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(function(n){n.time===t&&e(n)},0,n),this},t.Timeline.prototype.dispose=function(){t.prototype.dispose.call(this),this._timeline=null,this._toRemove=null},t.Timeline}),e(function(t){return t.TimelineSignal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this._events=new t.Timeline(10),t.Signal.apply(this,e),e.param=this._param,t.Param.call(this,e),this._initial=this._fromUnits(this._param.value)},t.extend(t.TimelineSignal,t.Param),t.TimelineSignal.Type={Linear:"linear",Exponential:"exponential",Target:"target",Curve:"curve",Set:"set"},Object.defineProperty(t.TimelineSignal.prototype,"value",{get:function(){var t=this.now(),e=this.getValueAtTime(t);return this._toUnits(e)},set:function(t){var e=this._fromUnits(t);this._initial=e,this.cancelScheduledValues(),this._param.value=e}}),t.TimelineSignal.prototype.setValueAtTime=function(e,n){return e=this._fromUnits(e),n=this.toSeconds(n),this._events.addEvent({type:t.TimelineSignal.Type.Set,value:e,time:n}),this._param.setValueAtTime(e,n),this},t.TimelineSignal.prototype.linearRampToValueAtTime=function(e,n){return e=this._fromUnits(e),n=this.toSeconds(n),this._events.addEvent({type:t.TimelineSignal.Type.Linear,value:e,time:n}),this._param.linearRampToValueAtTime(e,n),this},t.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,n){n=this.toSeconds(n);var r=this._searchBefore(n);r&&0===r.value&&this.setValueAtTime(this._minOutput,r.time),e=this._fromUnits(e);var i=Math.max(e,this._minOutput);return this._events.addEvent({type:t.TimelineSignal.Type.Exponential,value:i,time:n}),e<this._minOutput?(this._param.exponentialRampToValueAtTime(this._minOutput,n-this.sampleTime),this.setValueAtTime(0,n)):this._param.exponentialRampToValueAtTime(e,n),this},t.TimelineSignal.prototype.setTargetAtTime=function(e,n,r){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),r=Math.max(this._minOutput,r),n=this.toSeconds(n),this._events.addEvent({type:t.TimelineSignal.Type.Target,value:e,time:n,constant:r}),this._param.setTargetAtTime(e,n,r),this},t.TimelineSignal.prototype.setValueCurveAtTime=function(e,n,r,i){i=this.defaultArg(i,1);for(var o=new Array(e.length),s=0;s<o.length;s++)o[s]=this._fromUnits(e[s])*i;n=this.toSeconds(n),r=this.toSeconds(r),this._events.addEvent({type:t.TimelineSignal.Type.Curve,value:o,time:n,duration:r}),this._param.setValueAtTime(o[0],n);for(var a=1;a<o.length;a++){var u=n+a/(o.length-1)*r;this._param.linearRampToValueAtTime(o[a],u)}return this},t.TimelineSignal.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this},t.TimelineSignal.prototype.setRampPoint=function(e){e=this.toSeconds(e);var n=this._toUnits(this.getValueAtTime(e)),r=this._searchBefore(e);if(r&&r.time===e)this.cancelScheduledValues(e+this.sampleTime);else if(r&&r.type===t.TimelineSignal.Type.Curve&&r.time+r.duration>e)this.cancelScheduledValues(e),this.linearRampToValueAtTime(n,e);else{var i=this._searchAfter(e);i&&(this.cancelScheduledValues(e),i.type===t.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(n,e):i.type===t.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(n,e)),this.setValueAtTime(n,e)}return this},t.TimelineSignal.prototype.linearRampToValueBetween=function(t,e,n){return this.setRampPoint(e),this.linearRampToValueAtTime(t,n),this},t.TimelineSignal.prototype.exponentialRampToValueBetween=function(t,e,n){return this.setRampPoint(e),this.exponentialRampToValueAtTime(t,n),this},t.TimelineSignal.prototype._searchBefore=function(t){return this._events.getEvent(t)},t.TimelineSignal.prototype._searchAfter=function(t){return this._events.getEventAfter(t)},t.TimelineSignal.prototype.getValueAtTime=function(e){e=this.toSeconds(e);var n=this._searchAfter(e),r=this._searchBefore(e),i=this._initial;if(null===r)i=this._initial;else if(r.type===t.TimelineSignal.Type.Target){var o,s=this._events.getEventBefore(r.time);o=null===s?this._initial:s.value,i=this._exponentialApproach(r.time,o,r.value,r.constant,e)}else i=r.type===t.TimelineSignal.Type.Curve?this._curveInterpolate(r.time,r.value,r.duration,e):null===n?r.value:n.type===t.TimelineSignal.Type.Linear?this._linearInterpolate(r.time,r.value,n.time,n.value,e):n.type===t.TimelineSignal.Type.Exponential?this._exponentialInterpolate(r.time,r.value,n.time,n.value,e):r.value;return i},t.TimelineSignal.prototype.connect=t.SignalBase.prototype.connect,t.TimelineSignal.prototype._exponentialApproach=function(t,e,n,r,i){return n+(e-n)*Math.exp(-(i-t)/r)},t.TimelineSignal.prototype._linearInterpolate=function(t,e,n,r,i){return e+(i-t)/(n-t)*(r-e)},t.TimelineSignal.prototype._exponentialInterpolate=function(t,e,n,r,i){return(e=Math.max(this._minOutput,e))*Math.pow(r/e,(i-t)/(n-t))},t.TimelineSignal.prototype._curveInterpolate=function(t,e,n,r){var i=e.length;if(r>=t+n)return e[i-1];if(r<=t)return e[0];var o=(r-t)/n,s=Math.floor((i-1)*o),a=Math.ceil((i-1)*o),u=e[s],l=e[a];return a===s?u:this._linearInterpolate(s,u,a,l,o*(i-1))},t.TimelineSignal.prototype.dispose=function(){t.Signal.prototype.dispose.call(this),t.Param.prototype.dispose.call(this),this._events.dispose(),this._events=null},t.TimelineSignal}),e(function(t){return t.Pow=function(e){this._exp=this.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}),e(function(t){return t.Envelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this._attackCurve="linear",this._releaseCurve="exponential",this._sig=this.output=new t.TimelineSignal,this._sig.setValueAtTime(0,0),this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve},t.extend(t.Envelope),t.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:"linear",releaseCurve:"exponential"},Object.defineProperty(t.Envelope.prototype,"value",{get:function(){return this.getValueAtTime(this.now())}}),Object.defineProperty(t.Envelope.prototype,"attackCurve",{get:function(){if(this.isString(this._attackCurve))return this._attackCurve;if(this.isArray(this._attackCurve)){for(var e in t.Envelope.Type)if(t.Envelope.Type[e].In===this._attackCurve)return e;return this._attackCurve}},set:function(e){if(t.Envelope.Type.hasOwnProperty(e)){var n=t.Envelope.Type[e];this.isObject(n)?this._attackCurve=n.In:this._attackCurve=n}else{if(!this.isArray(e))throw new Error("Tone.Envelope: invalid curve: "+e);this._attackCurve=e}}}),Object.defineProperty(t.Envelope.prototype,"releaseCurve",{get:function(){if(this.isString(this._releaseCurve))return this._releaseCurve;if(this.isArray(this._releaseCurve)){for(var e in t.Envelope.Type)if(t.Envelope.Type[e].Out===this._releaseCurve)return e;return this._releaseCurve}},set:function(e){if(t.Envelope.Type.hasOwnProperty(e)){var n=t.Envelope.Type[e];this.isObject(n)?this._releaseCurve=n.Out:this._releaseCurve=n}else{if(!this.isArray(e))throw new Error("Tone.Envelope: invalid curve: "+e);this._releaseCurve=e}}}),t.Envelope.prototype.triggerAttack=function(t,e){t=this.toSeconds(t);var n=this.toSeconds(this.attack),r=n,i=this.toSeconds(this.decay);e=this.defaultArg(e,1);var o=this.getValueAtTime(t);o>0&&(r=(1-o)/(1/r));if("linear"===this._attackCurve)this._sig.linearRampToValue(e,r,t);else if("exponential"===this._attackCurve)this._sig.exponentialRampToValue(e,r,t);else if(r>0){this._sig.setRampPoint(t);var s=this._attackCurve;if(r<n){var a=1-r/n,u=Math.floor(a*this._attackCurve.length);(s=this._attackCurve.slice(u))[0]=o}this._sig.setValueCurveAtTime(s,t,r,e)}return this._sig.exponentialRampToValue(e*this.sustain,i,r+t),this},t.Envelope.prototype.triggerRelease=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);if(e>0){var n=this.toSeconds(this.release);if("linear"===this._releaseCurve)this._sig.linearRampToValue(0,n,t);else if("exponential"===this._releaseCurve)this._sig.exponentialRampToValue(0,n,t);else{var r=this._releaseCurve;this.isArray(r)&&(this._sig.setRampPoint(t),this._sig.setValueCurveAtTime(r,t,n,e))}}return this},t.Envelope.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},t.Envelope.prototype.triggerAttackRelease=function(t,e,n){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this},t.Envelope.prototype.cancel=function(t){return this._sig.cancelScheduledValues(t),this},t.Envelope.prototype.connect=t.Signal.prototype.connect,function(){var e,n,r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));var i=[];for(e=0;e<127;e++){n=e/127;var o=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;i[e]=o/10+.83*n}i[127]=1;var s=[];for(e=0;e<128;e++)s[e]=Math.ceil(e/127*5)/5;var a=[];for(e=0;e<128;e++)n=e/127,a[e]=.5*(1-Math.cos(Math.PI*n));var u=[];for(e=0;e<128;e++){n=e/127;var l=4*Math.pow(n,3)+.2,c=Math.cos(l*Math.PI*2*n);u[e]=Math.abs(c*(1-n))}function h(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=1-t[n];return e}t.Envelope.Type={linear:"linear",exponential:"exponential",bounce:{In:h(u),Out:u},cosine:{In:r,Out:function(t){return t.slice(0).reverse()}(r)},step:{In:s,Out:h(s)},ripple:{In:i,Out:h(i)},sine:{In:a,Out:h(a)}}}(),t.Envelope.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this._attackCurve=null,this._releaseCurve=null,this},t.Envelope}),e(function(t){return t.AmplitudeEnvelope=function(){t.Envelope.apply(this,arguments),this.input=this.output=new t.Gain,this._sig.connect(this.output.gain)},t.extend(t.AmplitudeEnvelope,t.Envelope),t.AmplitudeEnvelope.prototype.dispose=function(){return this.input.dispose(),this.input=null,t.Envelope.prototype.dispose.call(this),this},t.AmplitudeEnvelope}),e(function(t){return t.Analyser=function(){var e=this.optionsObject(arguments,["type","size"],t.Analyser.defaults);this._analyser=this.input=this.output=this.context.createAnalyser(),this._type=e.type,this._returnType=e.returnType,this._buffer=null,this.size=e.size,this.type=e.type,this.returnType=e.returnType,this.minDecibels=e.minDecibels,this.maxDecibels=e.maxDecibels},t.extend(t.Analyser),t.Analyser.defaults={size:1024,returnType:"byte",type:"fft",smoothing:.8,maxDecibels:-30,minDecibels:-100},t.Analyser.Type={Waveform:"waveform",FFT:"fft"},t.Analyser.ReturnType={Byte:"byte",Float:"float"},t.Analyser.prototype.analyse=function(){if(this._type===t.Analyser.Type.FFT)this._returnType===t.Analyser.ReturnType.Byte?this._analyser.getByteFrequencyData(this._buffer):this._analyser.getFloatFrequencyData(this._buffer);else if(this._type===t.Analyser.Type.Waveform)if(this._returnType===t.Analyser.ReturnType.Byte)this._analyser.getByteTimeDomainData(this._buffer);else if(this.isFunction(AnalyserNode.prototype.getFloatTimeDomainData))this._analyser.getFloatTimeDomainData(this._buffer);else{var e=new Uint8Array(this._buffer.length);this._analyser.getByteTimeDomainData(e);for(var n=0;n<e.length;n++)this._buffer[n]=.0078125*(e[n]-128)}return this._buffer},Object.defineProperty(t.Analyser.prototype,"size",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this.type=this._type}}),Object.defineProperty(t.Analyser.prototype,"returnType",{get:function(){return this._returnType},set:function(e){if(e===t.Analyser.ReturnType.Byte)this._buffer=new Uint8Array(this._analyser.frequencyBinCount);else{if(e!==t.Analyser.ReturnType.Float)throw new TypeError("Tone.Analayser: invalid return type: "+e);this._buffer=new Float32Array(this._analyser.frequencyBinCount)}this._returnType=e}}),Object.defineProperty(t.Analyser.prototype,"type",{get:function(){return this._type},set:function(e){if(e!==t.Analyser.Type.Waveform&&e!==t.Analyser.Type.FFT)throw new TypeError("Tone.Analyser: invalid type: "+e);this._type=e}}),Object.defineProperty(t.Analyser.prototype,"smoothing",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t}}),Object.defineProperty(t.Analyser.prototype,"minDecibels",{get:function(){return this._analyser.minDecibels},set:function(t){this._analyser.minDecibels=t}}),Object.defineProperty(t.Analyser.prototype,"maxDecibels",{get:function(){return this._analyser.maxDecibels},set:function(t){this._analyser.maxDecibels=t}}),t.Analyser.prototype.dispose=function(){t.prototype.dispose.call(this),this._analyser.disconnect(),this._analyser=null,this._buffer=null},t.Analyser}),e(function(t){return t.Compressor=function(){var e=this.optionsObject(arguments,["threshold","ratio"],t.Compressor.defaults);this._compressor=this.input=this.output=this.context.createDynamicsCompressor(),this.threshold=this._compressor.threshold,this.attack=new t.Param(this._compressor.attack,t.Type.Time),this.release=new t.Param(this._compressor.release,t.Type.Time),this.knee=this._compressor.knee,this.ratio=this._compressor.ratio,this._readOnly(["knee","release","attack","ratio","threshold"]),this.set(e)},t.extend(t.Compressor),t.Compressor.defaults={ratio:12,threshold:-24,release:.25,attack:.003,knee:30},t.Compressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["knee","release","attack","ratio","threshold"]),this._compressor.disconnect(),this._compressor=null,this.attack.dispose(),this.attack=null,this.release.dispose(),this.release=null,this.threshold=null,this.ratio=null,this.knee=null,this},t.Compressor}),e(function(t){return t.Add=function(e){this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new t.Gain,this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum)},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this._param.dispose(),this._param=null,this},t.Add}),e(function(t){return t.Multiply=function(e){this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new t.Gain,this._param=this.input[1]=this.output.gain,this._param.value=this.defaultArg(e,0)},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},t.Multiply}),e(function(t){return t.Negate=function(){this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}),e(function(t){return t.Subtract=function(e){this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new t.Gain,this._neg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._param.chain(this._neg,this._sum)},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},t.Subtract}),e(function(t){return t.GreaterThanZero=function(){this._thresh=this.output=new t.WaveShaper(function(t){return t<=0?0:1},127),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}),e(function(t){return t.GreaterThan=function(e){this.createInsOuts(2,0),this._param=this.input[0]=new t.Subtract(e),this.input[1]=this._param.input[1],this._gtz=this.output=new t.GreaterThanZero,this._param.connect(this._gtz)},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._param=null,this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}),e(function(t){return t.Abs=function(){this._abs=this.input=this.output=new t.WaveShaper(function(t){return 0===t?0:Math.abs(t)},127)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},t.Abs}),e(function(t){return t.Modulo=function(e){this.createInsOuts(1,0),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){return Math.floor((e+1e-4)/t)})},Object.defineProperty(t.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}),e(function(t){return t.AudioToGain=function(){this._norm=this.input=this.output=new t.WaveShaper(function(t){return(t+1)/2})},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}),e(function(t){function e(t,e,n){var r=new t;return n._eval(e[0]).connect(r,0,0),n._eval(e[1]).connect(r,0,1),r}function n(t,e,n){var r=new t;return n._eval(e[0]).connect(r,0,0),r}function r(t){return t?parseFloat(t):void 0}function i(t){return t&&t.args?parseFloat(t.args):void 0}return t.Expr=function(){var t=this._replacements(Array.prototype.slice.call(arguments)),e=this._parseInputs(t);this._nodes=[],this.input=new Array(e);for(var n=0;n<e;n++)this.input[n]=this.context.createGain();var r,i=this._parseTree(t);try{r=this._eval(i)}catch(e){throw this._disposeNodes(),new Error("Tone.Expr: Could evaluate expression: "+t)}this.output=r},t.extend(t.Expr,t.SignalBase),t.Expr._Expressions={value:{signal:{regexp:/^\d+\.\d+|^\d+/,method:function(e){return new t.Signal(r(e))}},input:{regexp:/^\$\d/,method:function(t,e){return e.input[r(t.substr(1))]}}},glue:{"(":{regexp:/^\(/},")":{regexp:/^\)/},",":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:n.bind(this,t.Abs)},mod:{regexp:/^mod/,method:function(e,n){var r=i(e[1]),o=new t.Modulo(r);return n._eval(e[0]).connect(o),o}},pow:{regexp:/^pow/,method:function(e,n){var r=i(e[1]),o=new t.Pow(r);return n._eval(e[0]).connect(o),o}},a2g:{regexp:/^a2g/,method:function(e,n){var r=new t.AudioToGain;return n._eval(e[0]).connect(r),r}}},binary:{"+":{regexp:/^\+/,precedence:1,method:e.bind(this,t.Add)},"-":{regexp:/^\-/,precedence:1,method:function(r,i){return 1===r.length?n(t.Negate,r,i):e(t.Subtract,r,i)}},"*":{regexp:/^\*/,precedence:0,method:e.bind(this,t.Multiply)}},unary:{"-":{regexp:/^\-/,method:n.bind(this,t.Negate)},"!":{regexp:/^\!/,method:n.bind(this,t.NOT)}}},t.Expr.prototype._parseInputs=function(t){var e=t.match(/\$\d/g),n=0;if(null!==e)for(var r=0;r<e.length;r++){var i=parseInt(e[r].substr(1))+1;n=Math.max(n,i)}return n},t.Expr.prototype._replacements=function(t){for(var e=t.shift(),n=0;n<t.length;n++)e=e.replace(/\%/i,t[n]);return e},t.Expr.prototype._tokenize=function(e){for(var n=-1,r=[];e.length>0;){var i=o(e=e.trim());r.push(i),e=e.substr(i.value.length)}function o(e){for(var n in t.Expr._Expressions){var r=t.Expr._Expressions[n];for(var i in r){var o=r[i],s=o.regexp,a=e.match(s);if(null!==a)return{type:n,value:a[0],method:o.method}}}throw new SyntaxError("Tone.Expr: Unexpected token "+e)}return{next:function(){return r[++n]},peek:function(){return r[n+1]}}},t.Expr.prototype._parseTree=function(e){var n=this._tokenize(e),r=this.isUndef.bind(this);function i(t,e){return!r(t)&&"glue"===t.type&&t.value===e}function o(e,n,i){var o=t.Expr._Expressions[n];if(!r(e))for(var s in o){var a=o[s];if(a.regexp.test(e.value)){if(r(i))return!0;if(a.precedence===i)return!0}}return!1}function s(t){var e;r(t)&&(t=5),e=t<0?function t(){var e,a;e=n.peek();if(o(e,"unary"))return e=n.next(),a=t(),{operator:e.value,method:e.method,args:[a]};return function(){var t,e;if(t=n.peek(),r(t))throw new SyntaxError("Tone.Expr: Unexpected termination of expression");if("func"===t.type)return function(t){var e=[];if(!i(n.next(),"("))throw new SyntaxError('Tone.Expr: Expected ( in a function call "'+t.value+'"');i(n.peek(),")")||(e=function(){var t,e=[];for(;t=s(),!r(t)&&(e.push(t),i(n.peek(),","));)n.next();return e}());if(!i(n.next(),")"))throw new SyntaxError('Tone.Expr: Expected ) in a function call "'+t.value+'"');return{method:t.method,args:e,name:name}}(t=n.next());if("value"===t.type)return{method:(t=n.next()).method,args:t.value};if(i(t,"(")){if(n.next(),e=s(),!i(t=n.next(),")"))throw new SyntaxError("Expected )");return e}throw new SyntaxError("Tone.Expr: Parse error, cannot process token "+t.value)}()}():s(t-1);for(var a=n.peek();o(a,"binary",t);)e={operator:(a=n.next()).value,method:a.method,args:[e,s(t-1)]},a=n.peek();return e}return s()},t.Expr.prototype._eval=function(t){if(!this.isUndef(t)){var e=t.method(t.args,this);return this._nodes.push(e),e}},t.Expr.prototype._disposeNodes=function(){for(var t=0;t<this._nodes.length;t++){var e=this._nodes[t];this.isFunction(e.dispose)?e.dispose():this.isFunction(e.disconnect)&&e.disconnect(),e=null,this._nodes[t]=null}this._nodes=null},t.Expr.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeNodes()},t.Expr}),e(function(t){return t.EqualPowerGain=function(){this._eqPower=this.input=this.output=new t.WaveShaper(function(t){return Math.abs(t)<.001?0:this.equalPowerScale(t)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}),e(function(t){return t.CrossFade=function(e){this.createInsOuts(2,1),this.a=this.input[0]=new t.Gain,this.b=this.input[1]=new t.Gain,this.fade=new t.Signal(this.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._invert=new t.Expr("1 - $0"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly("fade")},t.extend(t.CrossFade),t.CrossFade.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},t.CrossFade}),e(function(t){return t.Filter=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["frequency","type","rolloff"],t.Filter.defaults);this._filters=[],this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(0,t.Type.Cents),this.gain=new t.Signal({value:e.gain,convert:!1}),this.Q=new t.Signal(e.Q),this._type=e.type,this._rolloff=e.rolloff,this.rolloff=e.rolloff,this._readOnly(["detune","frequency","gain","Q"])},t.extend(t.Filter),t.Filter.defaults={type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0},Object.defineProperty(t.Filter.prototype,"type",{get:function(){return this._type},set:function(t){if(-1===["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t))throw new TypeError("Tone.Filter: invalid type "+t);this._type=t;for(var e=0;e<this._filters.length;e++)this._filters[e].type=t}}),Object.defineProperty(t.Filter.prototype,"rolloff",{get:function(){return this._rolloff},set:function(t){t=parseInt(t,10);var e=[-12,-24,-48,-96].indexOf(t);if(-1===e)throw new RangeError("Tone.Filter: rolloff can only be -12, -24, -48 or -96");e+=1,this._rolloff=t,this.input.disconnect();for(var n=0;n<this._filters.length;n++)this._filters[n].disconnect(),this._filters[n]=null;this._filters=new Array(e);for(var r=0;r<e;r++){var i=this.context.createBiquadFilter();i.type=this._type,this.frequency.connect(i.frequency),this.detune.connect(i.detune),this.Q.connect(i.Q),this.gain.connect(i.gain),this._filters[r]=i}var o=[this.input].concat(this._filters).concat([this.output]);this.connectSeries.apply(this,o)}}),t.Filter.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=0;e<this._filters.length;e++)this._filters[e].disconnect(),this._filters[e]=null;return this._filters=null,this._writable(["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.frequency=null,this.Q=null,this.detune.dispose(),this.detune=null,this.gain.dispose(),this.gain=null,this},t.Filter}),e(function(t){return t.MultibandSplit=function(){var e=this.optionsObject(arguments,["lowFrequency","highFrequency"],t.MultibandSplit.defaults);this.input=new t.Gain,this.output=new Array(3),this.low=this.output[0]=new t.Filter(0,"lowpass"),this._lowMidFilter=new t.Filter(0,"highpass"),this.mid=this.output[1]=new t.Filter(0,"lowpass"),this.high=this.output[2]=new t.Filter(0,"highpass"),this.lowFrequency=new t.Signal(e.lowFrequency,t.Type.Frequency),this.highFrequency=new t.Signal(e.highFrequency,t.Type.Frequency),this.Q=new t.Signal(e.Q),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.connect(this.low.frequency),this.lowFrequency.connect(this._lowMidFilter.frequency),this.highFrequency.connect(this.mid.frequency),this.highFrequency.connect(this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandSplit),t.MultibandSplit.defaults={lowFrequency:400,highFrequency:2500,Q:1},t.MultibandSplit.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.low=null,this._lowMidFilter.dispose(),this._lowMidFilter=null,this.mid.dispose(),this.mid=null,this.high.dispose(),this.high=null,this.lowFrequency.dispose(),this.lowFrequency=null,this.highFrequency.dispose(),this.highFrequency=null,this.Q.dispose(),this.Q=null,this},t.MultibandSplit}),e(function(t){return t.EQ3=function(){var e=this.optionsObject(arguments,["low","mid","high"],t.EQ3.defaults);this.output=new t.Gain,this._multibandSplit=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this._lowGain=new t.Gain(e.low,t.Type.Decibels),this._midGain=new t.Gain(e.mid,t.Type.Decibels),this._highGain=new t.Gain(e.high,t.Type.Decibels),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),this._readOnly(["low","mid","high","lowFrequency","highFrequency"])},t.extend(t.EQ3),t.EQ3.defaults={low:0,mid:0,high:0,lowFrequency:400,highFrequency:2500},t.EQ3.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this._multibandSplit=null,this.lowFrequency=null,this.highFrequency=null,this._lowGain.dispose(),this._lowGain=null,this._midGain.dispose(),this._midGain=null,this._highGain.dispose(),this._highGain=null,this.low=null,this.mid=null,this.high=null,this.Q=null,this},t.EQ3}),e(function(t){return t.Scale=function(e,n){this._outputMin=this.defaultArg(e,0),this._outputMax=this.defaultArg(n,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}),e(function(t){return t.ScaleExp=function(e,n,r){this._scale=this.output=new t.Scale(e,n),this._exp=this.input=new t.Pow(this.defaultArg(r,2)),this._exp.connect(this._scale)},t.extend(t.ScaleExp,t.SignalBase),Object.defineProperty(t.ScaleExp.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),Object.defineProperty(t.ScaleExp.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaleExp.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),t.ScaleExp.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaleExp}),e(function(t){return t.Delay=function(){var e=this.optionsObject(arguments,["delayTime","maxDelay"],t.Delay.defaults);this._delayNode=this.input=this.output=this.context.createDelay(this.toSeconds(e.maxDelay)),this.delayTime=new t.Param({param:this._delayNode.delayTime,units:t.Type.Time,value:e.delayTime}),this._readOnly("delayTime")},t.extend(t.Delay),t.Delay.defaults={maxDelay:1,delayTime:0},t.Delay.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._delayNode.disconnect(),this._delayNode=null,this._writable("delayTime"),this.delayTime=null,this},t.Delay}),e(function(t){return t.FeedbackCombFilter=function(){var e=this.optionsObject(arguments,["delayTime","resonance"],t.FeedbackCombFilter.defaults);this._delay=this.input=this.output=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._feedback,this._delay),this._readOnly(["resonance","delayTime"])},t.extend(t.FeedbackCombFilter),t.FeedbackCombFilter.defaults={delayTime:.1,resonance:.5},t.FeedbackCombFilter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["resonance","delayTime"]),this._delay.dispose(),this._delay=null,this.delayTime=null,this._feedback.dispose(),this._feedback=null,this.resonance=null,this},t.FeedbackCombFilter}),e(function(t){return t.Follower=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["attack","release"],t.Follower.defaults);this._abs=new t.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type="lowpass",this._filter.frequency.value=0,this._filter.Q.value=-100,this._frequencyValues=new t.WaveShaper,this._sub=new t.Subtract,this._delay=new t.Delay(this.blockTime),this._mult=new t.Multiply(1e4),this._attack=e.attack,this._release=e.release,this.input.chain(this._abs,this._filter,this.output),this._abs.connect(this._sub,0,1),this._filter.chain(this._delay,this._sub),this._sub.chain(this._mult,this._frequencyValues,this._filter.frequency),this._setAttackRelease(this._attack,this._release)},t.extend(t.Follower),t.Follower.defaults={attack:.05,release:.5},t.Follower.prototype._setAttackRelease=function(e,n){var r=this.blockTime;e=t.Time(e).toFrequency(),n=t.Time(n).toFrequency(),e=Math.max(e,r),n=Math.max(n,r),this._frequencyValues.setMap(function(t){return t<=0?e:n})},Object.defineProperty(t.Follower.prototype,"attack",{get:function(){return this._attack},set:function(t){this._attack=t,this._setAttackRelease(this._attack,this._release)}}),Object.defineProperty(t.Follower.prototype,"release",{get:function(){return this._release},set:function(t){this._release=t,this._setAttackRelease(this._attack,this._release)}}),t.Follower.prototype.connect=t.Signal.prototype.connect,t.Follower.prototype.dispose=function(){return t.prototype.dispose.call(this),this._filter.disconnect(),this._filter=null,this._frequencyValues.disconnect(),this._frequencyValues=null,this._delay.dispose(),this._delay=null,this._sub.disconnect(),this._sub=null,this._abs.dispose(),this._abs=null,this._mult.dispose(),this._mult=null,this._curve=null,this},t.Follower}),e(function(t){return t.ScaledEnvelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);t.Envelope.call(this,e),e=this.defaultArg(e,t.ScaledEnvelope.defaults),this._exp=this.output=new t.Pow(e.exponent),this._scale=this.output=new t.Scale(e.min,e.max),this._sig.chain(this._exp,this._scale)},t.extend(t.ScaledEnvelope,t.Envelope),t.ScaledEnvelope.defaults={min:0,max:1,exponent:1},Object.defineProperty(t.ScaledEnvelope.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.ScaledEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaledEnvelope}),e(function(t){return t.FrequencyEnvelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);t.ScaledEnvelope.call(this,e),e=this.defaultArg(e,t.FrequencyEnvelope.defaults),this._octaves=e.octaves,this.baseFrequency=e.baseFrequency,this.octaves=e.octaves},t.extend(t.FrequencyEnvelope,t.Envelope),t.FrequencyEnvelope.defaults={baseFrequency:200,octaves:4,exponent:2},Object.defineProperty(t.FrequencyEnvelope.prototype,"baseFrequency",{get:function(){return this._scale.min},set:function(t){this._scale.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._scale.max=this.baseFrequency*Math.pow(2,t)}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.FrequencyEnvelope.prototype.dispose=function(){return t.ScaledEnvelope.prototype.dispose.call(this),this},t.FrequencyEnvelope}),e(function(t){return t.Gate=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["threshold","attack","release"],t.Gate.defaults);this._follower=new t.Follower(e.attack,e.release),this._gt=new t.GreaterThan(this.dbToGain(e.threshold)),this.input.connect(this.output),this.input.chain(this._gt,this._follower,this.output.gain)},t.extend(t.Gate),t.Gate.defaults={attack:.1,release:.1,threshold:-40},Object.defineProperty(t.Gate.prototype,"threshold",{get:function(){return this.gainToDb(this._gt.value)},set:function(t){this._gt.value=this.dbToGain(t)}}),Object.defineProperty(t.Gate.prototype,"attack",{get:function(){return this._follower.attack},set:function(t){this._follower.attack=t}}),Object.defineProperty(t.Gate.prototype,"release",{get:function(){return this._follower.release},set:function(t){this._follower.release=t}}),t.Gate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._follower.dispose(),this._gt.dispose(),this._follower=null,this._gt=null,this},t.Gate}),e(function(t){return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getStateAtTime=function(t){var e=this.getEvent(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){this.addEvent({state:t,time:e})},t.TimelineState}),e(function(t){return t.Emitter=function(){this._events={}},t.extend(t.Emitter),t.Emitter.prototype.on=function(t,e){for(var n=t.split(/\W+/),r=0;r<n.length;r++){var i=n[r];this._events.hasOwnProperty(i)||(this._events[i]=[]),this._events[i].push(e)}return this},t.Emitter.prototype.off=function(e,n){for(var r=e.split(/\W+/),i=0;i<r.length;i++)if(e=r[i],this._events.hasOwnProperty(e))if(t.prototype.isUndef(n))this._events[e]=[];else for(var o=this._events[e],s=0;s<o.length;s++)o[s]===n&&o.splice(s,1);return this},t.Emitter.prototype.emit=function(t){if(this._events){var e=Array.prototype.slice.call(arguments,1);if(this._events.hasOwnProperty(t))for(var n=this._events[t],r=0,i=n.length;r<i;r++)n[r].apply(this,e)}return this},t.Emitter.mixin=function(e){var n=["on","off","emit"];e._events={};for(var r=0;r<n.length;r++){var i=n[r],o=t.Emitter.prototype[i];e[i]=o}},t.Emitter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=null,this},t.Emitter}),e(function(t){t.Clock=function(){t.Emitter.call(this);var n=this.optionsObject(arguments,["callback","frequency"],t.Clock.defaults);this.callback=n.callback,this._lookAhead="auto",this._computedLookAhead=e/1e3,this._nextTick=-1,this._lastUpdate=-1,this.frequency=new t.TimelineSignal(n.frequency,t.Type.Frequency),this.ticks=0,this._state=new t.TimelineState(t.State.Stopped),this._boundLoop=this._loop.bind(this),t.Clock._worker.addEventListener("message",this._boundLoop),this._readOnly("frequency")},t.extend(t.Clock,t.Emitter),t.Clock.defaults={callback:t.noOp,frequency:1,lookAhead:"auto"},Object.defineProperty(t.Clock.prototype,"state",{get:function(){return this._state.getStateAtTime(this.now())}}),Object.defineProperty(t.Clock.prototype,"lookAhead",{get:function(){return this._lookAhead},set:function(t){this._lookAhead="auto"===t?"auto":this.toSeconds(t)}}),t.Clock.prototype.start=function(e,n){return e=this.toSeconds(e),this._state.getStateAtTime(e)!==t.State.Started&&this._state.addEvent({state:t.State.Started,time:e,offset:n}),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getStateAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.Clock.prototype._loop=function(){if("auto"===this._lookAhead){var n=this.now();if(-1!==this._lastUpdate){var r=n-this._lastUpdate;r=Math.min(10*e/1e3,r),this._computedLookAhead=(9*this._computedLookAhead+r)/10}this._lastUpdate=n}else this._computedLookAhead=this._lookAhead;var i=this.now(),o=2*this._computedLookAhead,s=this._state.getEvent(i+o),a=t.State.Stopped;if(s&&(a=s.state,-1===this._nextTick&&a===t.State.Started&&(this._nextTick=s.time,this.isUndef(s.offset)||(this.ticks=s.offset),this.emit("start",s.time,this.ticks))),a===t.State.Started)for(;i+o>this._nextTick;){var u=this._nextTick;this._nextTick+=1/this.frequency.getValueAtTime(this._nextTick),this.callback(u),this.ticks++}else a===t.State.Stopped?(s&&0!==this.ticks&&this.emit("stop",s.time),this._nextTick=-1,this.ticks=0):a===t.State.Paused&&(-1!==this._nextTick&&this.emit("pause",s.time),this._nextTick=-1)},t.Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getStateAtTime(t)},t.Clock.prototype.dispose=function(){t.Emitter.prototype.dispose.call(this),t.TimelineState.prototype.dispose.call(this),t.Clock._worker.removeEventListener("message",this._boundLoop),this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},window.URL=window.URL||window.webkitURL;var e=20,n=new Blob(["setInterval(function(){self.postMessage('tick')}, "+e+")"]),r=URL.createObjectURL(n);return t.Clock._worker=new Worker(r),t.Clock}),e(function(t){t.IntervalTimeline=function(){this._root=null,this._length=0},t.extend(t.IntervalTimeline),t.IntervalTimeline.prototype.addEvent=function(t){if(this.isUndef(t.time)||this.isUndef(t.duration))throw new Error("Tone.IntervalTimeline: events must have time and duration parameters");var n=new e(t.time,t.time+t.duration,t);for(null===this._root?this._root=n:this._root.insert(n),this._length++;null!==n;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this},t.IntervalTimeline.prototype.removeEvent=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var n=0;n<e.length;n++){var r=e[n];if(r.event===t){this._removeNode(r),this._length--;break}}}return this},Object.defineProperty(t.IntervalTimeline.prototype,"length",{get:function(){return this._length}}),t.IntervalTimeline.prototype.cancel=function(t){return this.forEachAfter(t,function(t){this.removeEvent(t)}.bind(this)),this},t.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},t.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},t.IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,n;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)(e=t.right).left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent=e.parent,e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(n)}t.dispose()},t.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,n=t.isLeftChild(),r=t.right;t.right=r.left,r.left=t,null!==e?n?e.left=r:e.right=r:this._setRoot(r)},t.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,n=t.isLeftChild(),r=t.left;t.left=r.right,r.right=t,null!==e?n?e.left=r:e.right=r:this._setRoot(r)},t.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},t.IntervalTimeline.prototype.getEvent=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var n=e[0],r=1;r<e.length;r++)e[r].low>n.low&&(n=e[r]);return n.event}}return null},t.IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];null!==this._root&&this._root.traverse(function(t){e.push(t)});for(var n=0;n<e.length;n++){var r=e[n].event;r&&t(r)}}return this},t.IntervalTimeline.prototype.forEachAtTime=function(t,e){if(null!==this._root){var n=[];this._root.search(t,n);for(var r=n.length-1;r>=0;r--){var i=n[r].event;i&&e(i)}}return this},t.IntervalTimeline.prototype.forEachAfter=function(t,e){if(null!==this._root){var n=[];this._root.searchAfter(t,n);for(var r=n.length-1;r>=0;r--){var i=n[r].event;i&&e(i)}}return this},t.IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse(function(e){t.push(e)});for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var e=function(t,e,n){this.event=n,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};return e.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},e.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},e.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},e.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},e.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},e.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},e.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},e.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),e.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t.IntervalTimeline}),e(function(t){t.Transport=function(){t.Emitter.call(this),this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=e.defaults.PPQ,this._clock=new t.Clock({callback:this._processTick.bind(this),frequency:0}),this._bindClockEvents(),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=t.Type.BPM,this.bpm.value=e.defaults.bpm,this._readOnly("bpm"),this._timeSignature=e.defaults.timeSignature,this._scheduledEvents={},this._eventID=0,this._timeline=new t.Timeline,this._repeatedEvents=new t.IntervalTimeline,this._onceEvents=new t.Timeline,this._syncedSignals=[],this._swingTicks=e.defaults.PPQ/2,this._swingAmount=0},t.extend(t.Transport,t.Emitter),t.Transport.defaults={bpm:120,swing:0,swingSubdivision:"8n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:192},t.Transport.prototype._processTick=function(e){var n=this._clock.ticks;if(this._swingAmount>0&&n%this._ppq!=0&&n%(2*this._swingTicks)!=0){var r=n%(2*this._swingTicks)/(2*this._swingTicks),i=Math.sin(r*Math.PI)*this._swingAmount;e+=t.Time(2*this._swingTicks/3,"i").eval()*i}this.loop&&n===this._loopEnd&&(this.emit("stop",e),this._clock.ticks=this._loopStart,n=this._loopStart,this.emit("start",e,this.seconds),this.emit("loop",e)),this._onceEvents.forEachBefore(n,function(t){t.callback(e)}),this._onceEvents.cancelBefore(n),this._timeline.forEachAtTime(n,function(t){t.callback(e)}),this._repeatedEvents.forEachAtTime(n,function(t){(n-t.time)%t.interval==0&&t.callback(e)})},t.Transport.prototype.schedule=function(t,e){var n={time:this.toTicks(e),callback:t},r=this._eventID++;return this._scheduledEvents[r.toString()]={event:n,timeline:this._timeline},this._timeline.addEvent(n),r},t.Transport.prototype.scheduleRepeat=function(t,e,n,r){if(e<=0)throw new Error("Tone.Transport: repeat events must have an interval larger than 0");var i={time:this.toTicks(n),duration:this.toTicks(this.defaultArg(r,1/0)),interval:this.toTicks(e),callback:t},o=this._eventID++;return this._scheduledEvents[o.toString()]={event:i,timeline:this._repeatedEvents},this._repeatedEvents.addEvent(i),o},t.Transport.prototype.scheduleOnce=function(t,e){var n={time:this.toTicks(e),callback:t},r=this._eventID++;return this._scheduledEvents[r.toString()]={event:n,timeline:this._onceEvents},this._onceEvents.addEvent(n),r},t.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.removeEvent(e.event),delete this._scheduledEvents[t.toString()]}return this},t.Transport.prototype.cancel=function(t){return t=this.defaultArg(t,0),t=this.toTicks(t),this._timeline.cancel(t),this._onceEvents.cancel(t),this._repeatedEvents.cancel(t),this},t.Transport.prototype._bindClockEvents=function(){this._clock.on("start",function(e,n){n=t.Time(this._clock.ticks,"i").toSeconds(),this.emit("start",e,n)}.bind(this)),this._clock.on("stop",function(t){this.emit("stop",t)}.bind(this)),this._clock.on("pause",function(t){this.emit("pause",t)}.bind(this))},Object.defineProperty(t.Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),t.Transport.prototype.start=function(t,e){return this.isUndef(e)||(e=this.toTicks(e)),this._clock.start(t,e),this},t.Transport.prototype.stop=function(t){return this._clock.stop(t),this},t.Transport.prototype.pause=function(t){return this._clock.pause(t),this},Object.defineProperty(t.Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){this.isArray(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}}),Object.defineProperty(t.Transport.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),t.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Transport.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(t.Transport.prototype,"swingSubdivision",{get:function(){return t.Time(this._swingTicks,"i").toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"position",{get:function(){return t.TransportTime(this.ticks,"i").toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"seconds",{get:function(){return t.TransportTime(this.ticks,"i").toSeconds()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"progress",{get:function(){return this.loop?(this.ticks-this._loopStart)/(this._loopEnd-this._loopStart):0}}),Object.defineProperty(t.Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(e){var n=this.now();this.state===t.State.Started?(this.emit("stop",n),this._clock.ticks=e,this.emit("start",n,this.seconds)):this._clock.ticks=e}}),Object.defineProperty(t.Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),t.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},t.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},t.Transport.prototype.nextSubdivision=function(e){var n;if(e=this.toSeconds(e),this.state!==t.State.Started)return 0;n=this._clock._nextTick;var r=e-t.Time(this.ticks,"i").eval()%e;return 0===r&&(r=e),n+r},t.Transport.prototype.syncSignal=function(e,n){n||(n=0!==e._param.value?e._param.value/this.bpm._param.value:0);var r=new t.Gain(n);return this.bpm.chain(r,e._param),this._syncedSignals.push({ratio:r,signal:e,initial:e._param.value}),e._param.value=0,this},t.Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal._param.value=n.initial,this._syncedSignals.splice(e,1))}return this},t.Transport.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._onceEvents.dispose(),this._onceEvents=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var e=t.Transport;return t._initAudioContext(function(){if("function"==typeof t.Transport)t.Transport=new t.Transport;else{t.Transport.stop();var n=t.Transport.get();t.Transport.dispose(),e.call(t.Transport),t.Transport.set(n)}}),t.Transport}),e(function(t){return t.Volume=function(){var e=this.optionsObject(arguments,["volume"],t.Volume.defaults);this.output=this.input=new t.Gain(e.volume,t.Type.Decibels),this._unmutedVolume=0,this._muted=!1,this.volume=this.output.gain,this._readOnly("volume"),this.mute=e.mute},t.extend(t.Volume),t.Volume.defaults={volume:0,mute:!1},Object.defineProperty(t.Volume.prototype,"mute",{get:function(){return this._muted},set:function(t){!this._muted&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this._muted&&!t&&(this.volume.value=this._unmutedVolume),this._muted=t}}),t.Volume.prototype.dispose=function(){return this.input.dispose(),t.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this},t.Volume}),e(function(t){t.Master=function(){this.createInsOuts(1,1),this._volume=this.output=new t.Volume,this.volume=this._volume.volume,this._readOnly("volume"),this.input.chain(this.output,this.context.destination)},t.extend(t.Master),t.Master.defaults={volume:0,mute:!1},Object.defineProperty(t.Master.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Master.prototype.chain=function(){this.input.disconnect(),this.input.chain.apply(this.input,arguments),arguments[arguments.length-1].connect(this.output)},t.Master.prototype.dispose=function(){t.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},t.prototype.toMaster=function(){return this.connect(t.Master),this},AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this};var e=t.Master;return t._initAudioContext(function(){t.prototype.isUndef(t.Master)?(e.prototype.dispose.call(t.Master),e.call(t.Master)):t.Master=new e}),t.Master}),e(function(t){return t.Source=function(e){e=this.defaultArg(e,t.Source.defaults),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new t.TimelineState(t.State.Stopped),this._state.memory=10,this._synced=!1,this._scheduled=[],this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=e.mute},t.extend(t.Source),t.Source.defaults={volume:0,mute:!1},Object.defineProperty(t.Source.prototype,"state",{get:function(){return this._synced?t.Transport.state===t.State.Started?this._state.getStateAtTime(t.Transport.seconds):t.State.Stopped:this._state.getStateAtTime(this.now())}}),Object.defineProperty(t.Source.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Source.prototype._start=t.noOp,t.Source.prototype._stop=t.noOp,t.Source.prototype.start=function(e,n,r){if(e=this.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this._state.getStateAtTime(e)===t.State.Started&&this.stop(e),this._state.setStateAtTime(t.State.Started,e),this._synced){var i=this._state.getEvent(e);i.offset=this.defaultArg(n,0),i.duration=r;var o=t.Transport.schedule(function(t){this._start(t,n,r)}.bind(this),e);this._scheduled.push(o)}else this._start.apply(this,arguments);return this},t.Source.prototype.stop=function(e){if(e=this.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this._synced){var n=t.Transport.schedule(this._stop.bind(this),e);this._scheduled.push(n)}else this._stop.apply(this,arguments);return this},t.Source.prototype.sync=function(){return this._synced=!0,t.Transport.on("start",function(e,n){if(n>0){var r=this._state.getEvent(n);if(r&&r.state===t.State.Started&&r.time!==n){var i,o=n-this.toSeconds(r.time);r.duration&&(i=this.toSeconds(r.duration)-o),this._start(e,this.toSeconds(r.offset)+o,i)}}}.bind(this)),t.Transport.on("stop pause",function(e){this._state.getStateAtTime(t.Transport.seconds)===t.State.Started&&this._stop(e)}.bind(this)),this},t.Source.prototype.unsync=function(){this._synced=!1,t.Transport.off("start stop pause");for(var e=0;e<this._scheduled.length;e++){var n=this._scheduled[e];t.Transport.clear(n)}return this._scheduled=[],this._state.cancel(0),this},t.Source.prototype.dispose=function(){t.prototype.dispose.call(this),this.unsync(),this._scheduled=null,this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null},t.Source}),e(function(t){return t.Oscillator=function(){var e=this.optionsObject(arguments,["frequency","type"],t.Oscillator.defaults);t.Source.call(this,e),this._oscillator=null,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._wave=null,this._partials=this.defaultArg(e.partials,[1]),this._phase=e.phase,this._type=null,this.type=e.type,this.phase=this._phase,this._readOnly(["frequency","detune"])},t.extend(t.Oscillator,t.Source),t.Oscillator.defaults={type:"sine",frequency:440,detune:0,phase:0,partials:[]},t.Oscillator.Type={Sine:"sine",Triangle:"triangle",Sawtooth:"sawtooth",Square:"square",Custom:"custom"},t.Oscillator.prototype._start=function(t){this._oscillator=this.context.createOscillator(),this._oscillator.setPeriodicWave(this._wave),this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(this.toSeconds(t))},t.Oscillator.prototype._stop=function(t){return this._oscillator&&(this._oscillator.stop(this.toSeconds(t)),this._oscillator=null),this},t.Oscillator.prototype.syncFrequency=function(){return t.Transport.syncSignal(this.frequency),this},t.Oscillator.prototype.unsyncFrequency=function(){return t.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(t.Oscillator.prototype,"type",{get:function(){return this._type},set:function(t){var e=this._getRealImaginary(t,this._phase),n=this.context.createPeriodicWave(e[0],e[1]);this._wave=n,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),this._type=t}}),t.Oscillator.prototype._getRealImaginary=function(e,n){var r=2048,i=new Float32Array(r),o=new Float32Array(r),s=1;if(e===t.Oscillator.Type.Custom)r=s=this._partials.length+1;else{var a=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);a&&(s=parseInt(a[2])+1,e=a[1],r=s=Math.max(s,2))}for(var u=1;u<r;++u){var l,c=2/(u*Math.PI);switch(e){case t.Oscillator.Type.Sine:l=u<=s?1:0;break;case t.Oscillator.Type.Square:l=1&u?2*c:0;break;case t.Oscillator.Type.Sawtooth:l=c*(1&u?1:-1);break;case t.Oscillator.Type.Triangle:l=1&u?c*c*2*(u-1>>1&1?-1:1):0;break;case t.Oscillator.Type.Custom:l=this._partials[u-1];break;default:throw new TypeError("Tone.Oscillator: invalid type: "+e)}0!==l?(i[u]=-l*Math.sin(n*u),o[u]=l*Math.cos(n*u)):(i[u]=0,o[u]=0)}return[i,o]},t.Oscillator.prototype._inverseFFT=function(t,e,n){for(var r=0,i=t.length,o=0;o<i;o++)r+=t[o]*Math.cos(o*n)+e[o]*Math.sin(o*n);return r},t.Oscillator.prototype._getInitialValue=function(){for(var t=this._getRealImaginary(this._type,0),e=t[0],n=t[1],r=0,i=2*Math.PI,o=0;o<8;o++)r=Math.max(this._inverseFFT(e,n,o/8*i),r);return-this._inverseFFT(e,n,this._phase)/r},Object.defineProperty(t.Oscillator.prototype,"partials",{get:function(){return this._type!==t.Oscillator.Type.Custom?[]:this._partials},set:function(e){this._partials=e,this.type=t.Oscillator.Type.Custom}}),Object.defineProperty(t.Oscillator.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}}),t.Oscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._oscillator&&(this._oscillator.disconnect(),this._oscillator=null),this._wave=null,this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._partials=null,this},t.Oscillator}),e(function(t){return t.Zero=function(){this._gain=this.input=this.output=new t.Gain,t.Zero._zeros.connect(this._gain)},t.extend(t.Zero),t.Zero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gain.dispose(),this._gain=null,this},t.Zero._zeros=null,t._initAudioContext(function(e){for(var n=e.createBuffer(1,128,e.sampleRate),r=n.getChannelData(0),i=0;i<r.length;i++)r[i]=0;t.Zero._zeros=e.createBufferSource(),t.Zero._zeros.channelCount=1,t.Zero._zeros.channelCountMode="explicit",t.Zero._zeros.buffer=n,t.Zero._zeros.loop=!0,t.Zero._zeros.start(0),t.Zero._zeros.noGC()}),t.Zero}),e(function(t){return t.LFO=function(){var e=this.optionsObject(arguments,["frequency","min","max"],t.LFO.defaults);this._oscillator=new t.Oscillator({frequency:e.frequency,type:e.type}),this.frequency=this._oscillator.frequency,this.amplitude=this._oscillator.volume,this.amplitude.units=t.Type.NormalRange,this.amplitude.value=e.amplitude,this._stoppedSignal=new t.Signal(0,t.Type.AudioRange),this._zeros=new t.Zero,this._stoppedValue=0,this._a2g=new t.AudioToGain,this._scaler=this.output=new t.Scale(e.min,e.max),this._units=t.Type.Default,this.units=e.units,this._oscillator.chain(this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),this._readOnly(["amplitude","frequency"]),this.phase=e.phase},t.extend(t.LFO,t.Oscillator),t.LFO.defaults={type:"sine",min:0,max:1,phase:0,frequency:"4n",amplitude:1,units:t.Type.Default},t.LFO.prototype.start=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this},t.LFO.prototype.stop=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this},t.LFO.prototype.sync=function(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this},t.LFO.prototype.unsync=function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this},Object.defineProperty(t.LFO.prototype,"min",{get:function(){return this._toUnits(this._scaler.min)},set:function(t){t=this._fromUnits(t),this._scaler.min=t}}),Object.defineProperty(t.LFO.prototype,"max",{get:function(){return this._toUnits(this._scaler.max)},set:function(t){t=this._fromUnits(t),this._scaler.max=t}}),Object.defineProperty(t.LFO.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"units",{get:function(){return this._units},set:function(t){var e=this.min,n=this.max;this._units=t,this.min=e,this.max=n}}),Object.defineProperty(t.LFO.prototype,"mute",{get:function(){return this._oscillator.mute},set:function(t){this._oscillator.mute=t}}),Object.defineProperty(t.LFO.prototype,"state",{get:function(){return this._oscillator.state}}),t.LFO.prototype.connect=function(e){return e.constructor!==t.Signal&&e.constructor!==t.Param&&e.constructor!==t.TimelineSignal||(this.convert=e.convert,this.units=e.units),t.Signal.prototype.connect.apply(this,arguments),this},t.LFO.prototype._fromUnits=t.Param.prototype._fromUnits,t.LFO.prototype._toUnits=t.Param.prototype._toUnits,t.LFO.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["amplitude","frequency"]),this._oscillator.dispose(),this._oscillator=null,this._stoppedSignal.dispose(),this._stoppedSignal=null,this._zeros.dispose(),this._zeros=null,this._scaler.dispose(),this._scaler=null,this._a2g.dispose(),this._a2g=null,this.frequency=null,this.amplitude=null,this},t.LFO}),e(function(t){return t.Limiter=function(){var e=this.optionsObject(arguments,["threshold"],t.Limiter.defaults);this._compressor=this.input=this.output=new t.Compressor({attack:.001,decay:.001,threshold:e.threshold}),this.threshold=this._compressor.threshold,this._readOnly("threshold")},t.extend(t.Limiter),t.Limiter.defaults={threshold:-12},t.Limiter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._compressor.dispose(),this._compressor=null,this._writable("threshold"),this.threshold=null,this},t.Limiter}),e(function(t){return t.LowpassCombFilter=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["delayTime","resonance","dampening"],t.LowpassCombFilter.defaults);this._delay=this.input=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._lowpass=this.output=this.context.createBiquadFilter(),this._lowpass.Q.value=-3.0102999566398125,this._lowpass.type="lowpass",this.dampening=new t.Param({param:this._lowpass.frequency,units:t.Type.Frequency,value:e.dampening}),this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._lowpass,this._feedback,this._delay),this._readOnly(["dampening","resonance","delayTime"])},t.extend(t.LowpassCombFilter),t.LowpassCombFilter.defaults={delayTime:.1,resonance:.5,dampening:3e3},t.LowpassCombFilter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["dampening","resonance","delayTime"]),this.dampening.dispose(),this.dampening=null,this.resonance.dispose(),this.resonance=null,this._delay.dispose(),this._delay=null,this.delayTime=null,this._lowpass.disconnect(),this._lowpass=null,this._feedback.disconnect(),this._feedback=null,this},t.LowpassCombFilter}),e(function(t){return t.Merge=function(){this.createInsOuts(2,0),this.left=this.input[0]=new t.Gain,this.right=this.input[1]=new t.Gain,this._merger=this.output=this.context.createChannelMerger(2),this.left.connect(this._merger,0,0),this.right.connect(this._merger,0,1),this.left.channelCount=1,this.right.channelCount=1,this.left.channelCountMode="explicit",this.right.channelCountMode="explicit"},t.extend(t.Merge),t.Merge.prototype.dispose=function(){return t.prototype.dispose.call(this),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._merger.disconnect(),this._merger=null,this},t.Merge}),e(function(t){return t.Meter=function(){var e=this.optionsObject(arguments,["type","smoothing"],t.Meter.defaults);this.type=e.type,this.input=this.output=this._analyser=new t.Analyser("waveform",512),this._analyser.returnType="float",this.smoothing=e.smoothing,this._lastValue=0},t.extend(t.Meter),t.Meter.Type={Level:"level",Signal:"signal"},t.Meter.defaults={smoothing:.8,type:t.Meter.Type.Level},Object.defineProperty(t.Meter.prototype,"value",{get:function(){var e=this._analyser.analyse();if(this.type===t.Meter.Type.Level){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r],2);var i=Math.sqrt(n/e.length);i=Math.max(i,this._lastValue*this.smoothing),this._lastValue=i;var o=i/.35;return Math.sqrt(o)}return e[0]}}),t.Meter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null,this},t.Meter}),e(function(t){return t.Split=function(){this.createInsOuts(0,2),this._splitter=this.input=this.context.createChannelSplitter(2),this.left=this.output[0]=new t.Gain,this.right=this.output[1]=new t.Gain,this._splitter.connect(this.left,0,0),this._splitter.connect(this.right,1,0)},t.extend(t.Split),t.Split.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.disconnect(),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._splitter=null,this},t.Split}),e(function(t){t.MidSideSplit=function(){this.createInsOuts(0,2),this._split=this.input=new t.Split,this.mid=this.output[0]=new t.Expr("($0 + $1) * $2"),this.side=this.output[1]=new t.Expr("($0 - $1) * $2"),this._split.connect(this.mid,0,0),this._split.connect(this.mid,1,1),this._split.connect(this.side,0,0),this._split.connect(this.side,1,1),e.connect(this.mid,0,2),e.connect(this.side,0,2)},t.extend(t.MidSideSplit);var e=null;return t._initAudioContext(function(){e=new t.Signal(1/Math.sqrt(2))}),t.MidSideSplit.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._split.dispose(),this._split=null,this},t.MidSideSplit}),e(function(t){t.MidSideMerge=function(){this.createInsOuts(2,0),this.mid=this.input[0]=new t.Gain,this._left=new t.Expr("($0 + $1) * $2"),this.side=this.input[1]=new t.Gain,this._right=new t.Expr("($0 - $1) * $2"),this._merge=this.output=new t.Merge,this.mid.connect(this._left,0,0),this.side.connect(this._left,0,1),this.mid.connect(this._right,0,0),this.side.connect(this._right,0,1),this._left.connect(this._merge,0,0),this._right.connect(this._merge,0,1),e.connect(this._left,0,2),e.connect(this._right,0,2)},t.extend(t.MidSideMerge);var e=null;return t._initAudioContext(function(){e=new t.Signal(1/Math.sqrt(2))}),t.MidSideMerge.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._left.dispose(),this._left=null,this._right.dispose(),this._right=null,this._merge.dispose(),this._merge=null,this},t.MidSideMerge}),e(function(t){return t.MidSideCompressor=function(e){e=this.defaultArg(e,t.MidSideCompressor.defaults),this._midSideSplit=this.input=new t.MidSideSplit,this._midSideMerge=this.output=new t.MidSideMerge,this.mid=new t.Compressor(e.mid),this.side=new t.Compressor(e.side),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),this._readOnly(["mid","side"])},t.extend(t.MidSideCompressor),t.MidSideCompressor.defaults={mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}},t.MidSideCompressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["mid","side"]),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this},t.MidSideCompressor}),e(function(t){return t.Mono=function(){this.createInsOuts(1,0),this._merge=this.output=new t.Merge,this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1),this.input.gain.value=this.dbToGain(-10)},t.extend(t.Mono),t.Mono.prototype.dispose=function(){return t.prototype.dispose.call(this),this._merge.dispose(),this._merge=null,this},t.Mono}),e(function(t){return t.MultibandCompressor=function(e){e=this.defaultArg(arguments,t.MultibandCompressor.defaults),this._splitter=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new t.Gain,this.low=new t.Compressor(e.low),this.mid=new t.Compressor(e.mid),this.high=new t.Compressor(e.high),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandCompressor),t.MultibandCompressor.defaults={low:t.Compressor.defaults,mid:t.Compressor.defaults,high:t.Compressor.defaults,lowFrequency:250,highFrequency:2e3},t.MultibandCompressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.dispose(),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this._splitter=null,this.low=null,this.mid=null,this.high=null,this.lowFrequency=null,this.highFrequency=null,this},t.MultibandCompressor}),e(function(t){return t.Panner=function(e){this._hasStereoPanner?(this._panner=this.input=this.output=this.context.createStereoPanner(),this.pan=this._panner.pan):(this._crossFade=new t.CrossFade,this._merger=this.output=new t.Merge,this._splitter=this.input=new t.Split,this.pan=new t.Signal(0,t.Type.AudioRange),this._zero=new t.Zero,this._a2g=new t.AudioToGain,this._zero.connect(this._a2g),this.pan.chain(this._a2g,this._crossFade.fade),this._splitter.connect(this._crossFade,0,0),this._splitter.connect(this._crossFade,1,1),this._crossFade.a.connect(this._merger,0,0),this._crossFade.b.connect(this._merger,0,1)),this.pan.value=this.defaultArg(e,0),this._readOnly("pan")},t.extend(t.Panner),t.Panner.prototype._hasStereoPanner=t.prototype.isFunction(t.context.createStereoPanner),t.Panner.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("pan"),this._hasStereoPanner?(this._panner.disconnect(),this._panner=null,this.pan=null):(this._zero.dispose(),this._zero=null,this._crossFade.dispose(),this._crossFade=null,this._splitter.dispose(),this._splitter=null,this._merger.dispose(),this._merger=null,this.pan.dispose(),this.pan=null,this._a2g.dispose(),this._a2g=null),this},t.Panner}),e(function(t){return t.Panner3D=function(){var e=this.optionsObject(arguments,["positionX","positionY","positionZ"],t.Panner3D.defaults);this._panner=this.input=this.output=this.context.createPanner(),this._panner.panningModel=e.panningModel,this._panner.maxDistance=e.maxDistance,this._panner.distanceModel=e.distanceModel,this._panner.coneOuterGain=e.coneOuterGain,this._panner.coneOuterAngle=e.coneOuterAngle,this._panner.coneInnerAngle=e.coneInnerAngle,this._panner.refDistance=e.refDistance,this._panner.rolloffFactor=e.rolloffFactor,this._orientation=[e.orientationX,e.orientationY,e.orientationZ],this._position=[e.positionX,e.positionY,e.positionZ],this.orientationX=e.orientationX,this.orientationY=e.orientationY,this.orientationZ=e.orientationZ,this.positionX=e.positionX,this.positionY=e.positionY,this.positionZ=e.positionZ},t.extend(t.Panner3D),t.Panner3D.defaults={positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",maxDistance:1e4,distanceModel:"inverse",coneOuterGain:0,coneOuterAngle:360,coneInnerAngle:360,refDistance:1,rolloffFactor:1},t.Panner3D.prototype._rampTimeConstant=.3,t.Panner3D.prototype.setPosition=function(t,e,n){if(this._panner.positionX){var r=this.now();this._panner.positionX.setTargetAtTime(t,r,this._rampTimeConstant),this._panner.positionY.setTargetAtTime(e,r,this._rampTimeConstant),this._panner.positionZ.setTargetAtTime(n,r,this._rampTimeConstant)}else this._panner.setPosition(t,e,n);return this._position=Array.prototype.slice.call(arguments),this},t.Panner3D.prototype.setOrientation=function(t,e,n){if(this._panner.orientationX){var r=this.now();this._panner.orientationX.setTargetAtTime(t,r,this._rampTimeConstant),this._panner.orientationY.setTargetAtTime(e,r,this._rampTimeConstant),this._panner.orientationZ.setTargetAtTime(n,r,this._rampTimeConstant)}else this._panner.setOrientation(t,e,n);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Panner3D.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Panner3D.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Panner3D.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Panner3D.prototype,"orientationX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Panner3D.prototype,"orientationY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Panner3D.prototype,"orientationZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),t.Panner3D._aliasProperty=function(e){Object.defineProperty(t.Panner3D.prototype,e,{set:function(t){this._panner[e]=t},get:function(){return this._panner[e]}})},t.Panner3D._aliasProperty("panningModel"),t.Panner3D._aliasProperty("refDistance"),t.Panner3D._aliasProperty("rolloffFactor"),t.Panner3D._aliasProperty("distanceModel"),t.Panner3D._aliasProperty("coneInnerAngle"),t.Panner3D._aliasProperty("coneOuterAngle"),t.Panner3D._aliasProperty("coneOuterGain"),t.Panner3D._aliasProperty("maxDistance"),t.Panner3D.prototype.dispose=function(){return this._panner.disconnect(),this._panner=null,this._orientation=null,this._position=null,this},t.Panner3D}),e(function(t){return t.PanVol=function(){var e=this.optionsObject(arguments,["pan","volume"],t.PanVol.defaults);this._panner=this.input=new t.Panner(e.pan),this.pan=this._panner.pan,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._panner.connect(this._volume),this._readOnly(["pan","volume"])},t.extend(t.PanVol),t.PanVol.defaults={pan:.5,volume:0},t.PanVol.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["pan","volume"]),this._panner.dispose(),this._panner=null,this.pan=null,this._volume.dispose(),this._volume=null,this.volume=null,this},t.PanVol}),e(function(t){return t.CtrlInterpolate=function(){var e=this.optionsObject(arguments,["values","index"],t.CtrlInterpolate.defaults);this.values=e.values,this.index=e.index},t.extend(t.CtrlInterpolate),t.CtrlInterpolate.defaults={index:0,values:[]},Object.defineProperty(t.CtrlInterpolate.prototype,"value",{get:function(){var t=this.index;t=Math.min(t,this.values.length-1);var e=Math.floor(t),n=this.values[e],r=this.values[Math.ceil(t)];return this._interpolate(t-e,n,r)}}),t.CtrlInterpolate.prototype._interpolate=function(t,e,n){if(this.isArray(e)){for(var r=[],i=0;i<e.length;i++)r[i]=this._interpolate(t,e[i],n[i]);return r}if(this.isObject(e)){var o={};for(var s in e)o[s]=this._interpolate(t,e[s],n[s]);return o}return(1-t)*(e=this._toNumber(e))+t*(n=this._toNumber(n))},t.CtrlInterpolate.prototype._toNumber=function(t){return this.isNumber(t)?t:this.toSeconds(t)},t.CtrlInterpolate.prototype.dispose=function(){this.values=null},t.CtrlInterpolate}),e(function(t){return t.CtrlMarkov=function(t,e){this.values=this.defaultArg(t,{}),this.value=this.defaultArg(e,Object.keys(this.values)[0])},t.extend(t.CtrlMarkov),t.CtrlMarkov.prototype.next=function(){if(this.values.hasOwnProperty(this.value)){var t=this.values[this.value];if(this.isArray(t))for(var e=this._getProbDistribution(t),n=Math.random(),r=0,i=0;i<e.length;i++){var o=e[i];if(n>r&&n<r+o){var s=t[i];this.isObject(s)?this.value=s.value:this.value=s}r+=o}else this.value=t}return this.value},t.CtrlMarkov.prototype._getProbDistribution=function(t){for(var e=[],n=0,r=!1,i=0;i<t.length;i++){var o=t[i];this.isObject(o)?(r=!0,e[i]=o.probability):e[i]=1/t.length,n+=e[i]}if(r)for(var s=0;s<e.length;s++)e[s]=e[s]/n;return e},t.CtrlMarkov.prototype.dispose=function(){this.values=null},t.CtrlMarkov}),e(function(t){return t.CtrlPattern=function(){var e=this.optionsObject(arguments,["values","type"],t.CtrlPattern.defaults);this.values=e.values,this.index=0,this._type=null,this._shuffled=null,this._direction=null,this.type=e.type},t.extend(t.CtrlPattern),t.CtrlPattern.Type={Up:"up",Down:"down",UpDown:"upDown",DownUp:"downUp",AlternateUp:"alternateUp",AlternateDown:"alternateDown",Random:"random",RandomWalk:"randomWalk",RandomOnce:"randomOnce"},t.CtrlPattern.defaults={type:t.CtrlPattern.Type.Up,values:[]},Object.defineProperty(t.CtrlPattern.prototype,"value",{get:function(){if(0!==this.values.length){if(1===this.values.length)return this.values[0];this.index=Math.min(this.index,this.values.length-1);var e=this.values[this.index];return this.type===t.CtrlPattern.Type.RandomOnce&&(this.values.length!==this._shuffled.length&&this._shuffleValues(),e=this.values[this._shuffled[this.index]]),e}}}),Object.defineProperty(t.CtrlPattern.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._shuffled=null,this._type===t.CtrlPattern.Type.Up||this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.RandomOnce||this._type===t.CtrlPattern.Type.AlternateUp?this.index=0:this._type!==t.CtrlPattern.Type.Down&&this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this.index=this.values.length-1),this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.AlternateUp?this._direction=t.CtrlPattern.Type.Up:this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this._direction=t.CtrlPattern.Type.Down),this._type===t.CtrlPattern.Type.RandomOnce?this._shuffleValues():this._type===t.CtrlPattern.Random&&(this.index=Math.floor(Math.random()*this.values.length))}}),t.CtrlPattern.prototype.next=function(){var e=this.type;return e===t.CtrlPattern.Type.Up?(this.index++,this.index>=this.values.length&&(this.index=0)):e===t.CtrlPattern.Type.Down?(this.index--,this.index<0&&(this.index=this.values.length-1)):e===t.CtrlPattern.Type.UpDown||e===t.CtrlPattern.Type.DownUp?(this._direction===t.CtrlPattern.Type.Up?this.index++:this.index--,this.index<0?(this.index=1,this._direction=t.CtrlPattern.Type.Up):this.index>=this.values.length&&(this.index=this.values.length-2,this._direction=t.CtrlPattern.Type.Down)):e===t.CtrlPattern.Type.Random?this.index=Math.floor(Math.random()*this.values.length):e===t.CtrlPattern.Type.RandomWalk?Math.random()<.5?(this.index--,this.index=Math.max(this.index,0)):(this.index++,this.index=Math.min(this.index,this.values.length-1)):e===t.CtrlPattern.Type.RandomOnce?(this.index++,this.index>=this.values.length&&(this.index=0,this._shuffleValues())):e===t.CtrlPattern.Type.AlternateUp?(this._direction===t.CtrlPattern.Type.Up?(this.index+=2,this._direction=t.CtrlPattern.Type.Down):(this.index-=1,this._direction=t.CtrlPattern.Type.Up),this.index>=this.values.length&&(this.index=0,this._direction=t.CtrlPattern.Type.Up)):e===t.CtrlPattern.Type.AlternateDown&&(this._direction===t.CtrlPattern.Type.Up?(this.index+=1,this._direction=t.CtrlPattern.Type.Down):(this.index-=2,this._direction=t.CtrlPattern.Type.Up),this.index<0&&(this.index=this.values.length-1,this._direction=t.CtrlPattern.Type.Down)),this.value},t.CtrlPattern.prototype._shuffleValues=function(){var t=[];this._shuffled=[];for(var e=0;e<this.values.length;e++)t[e]=e;for(;t.length>0;){var n=t.splice(Math.floor(t.length*Math.random()),1);this._shuffled.push(n[0])}},t.CtrlPattern.prototype.dispose=function(){this._shuffled=null,this.values=null},t.CtrlPattern}),e(function(t){return t.CtrlRandom=function(){var e=this.optionsObject(arguments,["min","max"],t.CtrlRandom.defaults);this.min=e.min,this.max=e.max,this.integer=e.integer},t.extend(t.CtrlRandom),t.CtrlRandom.defaults={min:0,max:1,integer:!1},Object.defineProperty(t.CtrlRandom.prototype,"value",{get:function(){var t=this.toSeconds(this.min),e=this.toSeconds(this.max),n=Math.random(),r=n*t+(1-n)*e;return this.integer&&(r=Math.floor(r)),r}}),t.CtrlRandom}),e(function(t){return t.Buffer=function(){var e=this.optionsObject(arguments,["url","onload","onerror"],t.Buffer.defaults);this._buffer=null,this._reversed=e.reverse,this._xhr=null,e.url instanceof AudioBuffer||e.url instanceof t.Buffer?(this.set(e.url),e.onload&&e.onload(this)):this.isString(e.url)&&this.load(e.url,e.onload,e.onerror)},t.extend(t.Buffer),t.Buffer.defaults={url:void 0,reverse:!1},t.Buffer.prototype.set=function(e){return e instanceof t.Buffer?this._buffer=e.get():this._buffer=e,this},t.Buffer.prototype.get=function(){return this._buffer},t.Buffer.prototype.load=function(e,n,r){return new Promise(function(i,o){this._xhr=t.Buffer.load(e,function(t){this._xhr=null,this.set(t),i(this),n&&n(this)}.bind(this),function(t){this._xhr=null,o(t),r&&r(t)}.bind(this))}.bind(this))},t.Buffer.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._buffer=null,this._xhr&&(t.Buffer._currentDownloads--,this._xhr.abort(),this._xhr=null),this},Object.defineProperty(t.Buffer.prototype,"loaded",{get:function(){return this.length>0}}),Object.defineProperty(t.Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(t.Buffer.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0}}),Object.defineProperty(t.Buffer.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0}}),t.Buffer.prototype.fromArray=function(t){var e=t[0].length>0,n=e?t.length:1,r=e?t[0].length:t.length,i=this.context.createBuffer(n,r,this.context.sampleRate);e||1!==n||(t=[t]);for(var o=0;o<n;o++)if(this.isFunction(i.copyToChannel))i.copyToChannel(t[o],o);else for(var s=i.getChannelData(o),a=t[o],u=0;u<a.length;u++)s[u]=a[u];return this._buffer=i,this},t.Buffer.prototype.toArray=function(t){if(this.isNumber(t))return this._buffer.getChannelData(t);for(var e=[],n=0;n<this.numberOfChannels;n++)if(e[n]=new Float32Array(this.length),this.isFunction(this._buffer.copyFromChannel))this._buffer.copyFromChannel(e[n],n);else for(var r=this._buffer.getChannelData(n),i=e[n],o=0;o<r.length;o++)i[o]=r[o];return 1===e.length?e[0]:e},t.Buffer.prototype.slice=function(e,n){n=this.defaultArg(n,this.duration);for(var r=Math.floor(this.context.sampleRate*this.toSeconds(e)),i=Math.floor(this.context.sampleRate*this.toSeconds(n)),o=[],s=0;s<this.numberOfChannels;s++)o[s]=this.toArray(s).slice(r,i);return(new t.Buffer).fromArray(o)},t.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this._buffer.numberOfChannels;t++)Array.prototype.reverse.call(this._buffer.getChannelData(t));return this},Object.defineProperty(t.Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),t.Emitter.mixin(t.Buffer),t.Buffer._downloadQueue=[],t.Buffer._currentDownloads=0,t.Buffer.baseUrl="",t.Buffer.load=function(e,n,r){function i(e){if(t.Buffer._currentDownloads--,!r)throw new Error(e);r(e)}function o(){for(var e=0,n=0;n<t.Buffer._downloadQueue.length;n++)e+=t.Buffer._downloadQueue[n].progress;t.Buffer.emit("progress",e/t.Buffer._downloadQueue.length)}n=n||t.noOp;var s=new XMLHttpRequest;return s.open("GET",t.Buffer.baseUrl+e,!0),s.responseType="arraybuffer",s.progress=0,t.Buffer._currentDownloads++,t.Buffer._downloadQueue.push(s),s.addEventListener("load",function(){200===s.status?t.context.decodeAudioData(s.response,function(e){s.progress=1,o(),n(e),t.Buffer._currentDownloads--,0===t.Buffer._currentDownloads&&(t.Buffer._downloadQueue=[],t.Buffer.emit("load"))},function(){i("Tone.Buffer: could not decode audio data: "+e)}):i("Tone.Buffer: could not locate file: "+e)}),s.addEventListener("error",i),s.addEventListener("progress",function(t){t.lengthComputable&&(s.progress=t.loaded/t.total*.95,o())}),s.send(),s},t.Buffer.supportsType=function(t){var e=t.split(".");return e=e[e.length-1],""!==document.createElement("audio").canPlayType("audio/"+e)},t.Buffer}),e(function(t){return t.Buffers=function(t,e,n){for(var r in this._buffers={},this.baseUrl=this.defaultArg(n,""),t=this._flattenUrls(t),this._loadingCount=0,t)this._loadingCount++,this.add(r,t[r],this._bufferLoaded.bind(this,e))},t.extend(t.Buffers),t.Buffers.prototype.has=function(t){return this._buffers.hasOwnProperty(t)},t.Buffers.prototype.get=function(t){if(this.has(t))return this._buffers[t];throw new Error("Tone.Buffers: no buffer named "+t)},t.Buffers.prototype._bufferLoaded=function(t){this._loadingCount--,0===this._loadingCount&&t&&t(this)},Object.defineProperty(t.Buffers.prototype,"loaded",{get:function(){var t=!0;for(var e in this._buffers){var n=this.get(e);t=t&&n.loaded}return t}}),t.Buffers.prototype.add=function(e,n,r){return r=this.defaultArg(r,t.noOp),n instanceof t.Buffer?(this._buffers[e]=n,r(this)):n instanceof AudioBuffer?(this._buffers[e]=new t.Buffer(n),r(this)):this.isString(n)&&(this._buffers[e]=new t.Buffer(this.baseUrl+n,r)),this},t.Buffers.prototype._flattenUrls=function(t){var e={};for(var n in t)if(t.hasOwnProperty(n))if(this.isObject(t[n])){var r=this._flattenUrls(t[n]);for(var i in r)r.hasOwnProperty(i)&&(e[n+"."+i]=r[i])}else e[n]=t[n];return e},t.Buffers.prototype.dispose=function(){for(var t in this._buffers)this._buffers[t].dispose();return this._buffers=null,this},t.Buffers}),e(function(t){var e={};return t.prototype.send=function(n,r){e.hasOwnProperty(n)||(e[n]=this.context.createGain()),r=this.defaultArg(r,0);var i=new t.Gain(r,t.Type.Decibels);return this.output.chain(i,e[n]),i},t.prototype.receive=function(t,n){return e.hasOwnProperty(t)||(e[t]=this.context.createGain()),this.isUndef(n)&&(n=this.input),e[t].connect(n),this},t._initAudioContext(function(){e={}}),t}),e(function(t){t.Listener=function(){var t=this.optionsObject(arguments,["positionX","positionY","positionZ"],e.defaults);this._listener=this.context.listener,this._orientation=[t.forwardX,t.forwardY,t.forwardZ,t.upX,t.upY,t.upZ],this._position=[t.positionX,t.positionY,t.positionZ],this.forwardX=t.forwardX,this.forwardY=t.forwardY,this.forwardZ=t.forwardZ,this.upX=t.upX,this.upY=t.upY,this.upZ=t.upZ,this.positionX=t.positionX,this.positionY=t.positionY,this.positionZ=t.positionZ},t.extend(t.Listener),t.Listener.defaults={positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:1,upX:0,upY:1,upZ:0},t.Listener.prototype._rampTimeConstant=.3,t.Listener.prototype.setPosition=function(t,e,n){if(this._listener.positionX){var r=this.now();this._listener.positionX.setTargetAtTime(t,r,this._rampTimeConstant),this._listener.positionY.setTargetAtTime(e,r,this._rampTimeConstant),this._listener.positionZ.setTargetAtTime(n,r,this._rampTimeConstant)}else this._listener.setPosition(t,e,n);return this._position=Array.prototype.slice.call(arguments),this},t.Listener.prototype.setOrientation=function(t,e,n,r,i,o){if(this._listener.forwardX){var s=this.now();this._listener.forwardX.setTargetAtTime(t,s,this._rampTimeConstant),this._listener.forwardY.setTargetAtTime(e,s,this._rampTimeConstant),this._listener.forwardZ.setTargetAtTime(n,s,this._rampTimeConstant),this._listener.upX.setTargetAtTime(r,s,this._rampTimeConstant),this._listener.upY.setTargetAtTime(i,s,this._rampTimeConstant),this._listener.upZ.setTargetAtTime(o,s,this._rampTimeConstant)}else this._listener.setOrientation(t,e,n,r,i,o);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Listener.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Listener.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Listener.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Listener.prototype,"forwardX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Listener.prototype,"forwardY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Listener.prototype,"forwardZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),Object.defineProperty(t.Listener.prototype,"upX",{set:function(t){this._orientation[3]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[3]}}),Object.defineProperty(t.Listener.prototype,"upY",{set:function(t){this._orientation[4]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[4]}}),Object.defineProperty(t.Listener.prototype,"upZ",{set:function(t){this._orientation[5]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[5]}}),t.Listener.prototype.dispose=function(){return this._listener.disconnect(),this._listener=null,this._orientation=null,this._position=null,this};var e=t.Listener;return t._initAudioContext(function(){"function"==typeof t.Listener?t.Listener=new t.Listener:e.call(t.Listener)}),t.Listener}),e(function(t){return t.Effect=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["wet"],t.Effect.defaults);this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this.effectSend=new t.Gain,this.effectReturn=new t.Gain,this.input.connect(this._dryWet.a),this.input.connect(this.effectSend),this.effectReturn.connect(this._dryWet.b),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.Effect),t.Effect.defaults={wet:1},t.Effect.prototype.connectEffect=function(t){return this.effectSend.chain(t,this.effectReturn),this},t.Effect.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this.effectSend.dispose(),this.effectSend=null,this.effectReturn.dispose(),this.effectReturn=null,this._writable(["wet"]),this.wet=null,this},t.Effect}),e(function(t){return t.AutoFilter=function(){var e=this.optionsObject(arguments,["frequency","baseFrequency","octaves"],t.AutoFilter.defaults);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.filter=new t.Filter(e.filter),this._octaves=0,this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.type=e.type,this._readOnly(["frequency","depth"]),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency},t.extend(t.AutoFilter,t.Effect),t.AutoFilter.defaults={frequency:1,type:"sine",depth:1,baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}},t.AutoFilter.prototype.start=function(t){return this._lfo.start(t),this},t.AutoFilter.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoFilter.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoFilter.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoFilter.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),Object.defineProperty(t.AutoFilter.prototype,"baseFrequency",{get:function(){return this._lfo.min},set:function(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.AutoFilter.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._lfo.max=this.baseFrequency*Math.pow(2,t)}}),t.AutoFilter.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this.filter.dispose(),this.filter=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null,this},t.AutoFilter}),e(function(t){return t.AutoPanner=function(){var e=this.optionsObject(arguments,["frequency"],t.AutoPanner.defaults);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth,min:-1,max:1}),this.depth=this._lfo.amplitude,this._panner=new t.Panner,this.frequency=this._lfo.frequency,this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this.type=e.type,this._readOnly(["depth","frequency"])},t.extend(t.AutoPanner,t.Effect),t.AutoPanner.defaults={frequency:1,type:"sine",depth:1},t.AutoPanner.prototype.start=function(t){return this._lfo.start(t),this},t.AutoPanner.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoPanner.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoPanner.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoPanner.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.AutoPanner.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this._panner.dispose(),this._panner=null,this._writable(["depth","frequency"]),this.frequency=null,this.depth=null,this},t.AutoPanner}),e(function(t){return t.AutoWah=function(){var e=this.optionsObject(arguments,["baseFrequency","octaves","sensitivity"],t.AutoWah.defaults);t.Effect.call(this,e),this.follower=new t.Follower(e.follower),this._sweepRange=new t.ScaleExp(0,1,.5),this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this._inputBoost=new t.Gain,this._bandpass=new t.Filter({rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new t.Filter(0,"peaking"),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this.follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,this._readOnly(["gain","Q"])},t.extend(t.AutoWah,t.Effect),t.AutoWah.defaults={baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:{attack:.3,release:.5}},Object.defineProperty(t.AutoWah.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"sensitivity",{get:function(){return this.gainToDb(1/this._inputBoost.gain.value)},set:function(t){this._inputBoost.gain.value=1/this.dbToGain(t)}}),t.AutoWah.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},t.AutoWah.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this.follower.dispose(),this.follower=null,this._sweepRange.dispose(),this._sweepRange=null,this._bandpass.dispose(),this._bandpass=null,this._peaking.dispose(),this._peaking=null,this._inputBoost.dispose(),this._inputBoost=null,this._writable(["gain","Q"]),this.gain=null,this.Q=null,this},t.AutoWah}),e(function(t){return t.BitCrusher=function(){var e=this.optionsObject(arguments,["bits"],t.BitCrusher.defaults);t.Effect.call(this,e);var n=1/Math.pow(2,e.bits-1);this._subtract=new t.Subtract,this._modulo=new t.Modulo(n),this._bits=e.bits,this.effectSend.fan(this._subtract,this._modulo),this._modulo.connect(this._subtract,0,1),this._subtract.connect(this.effectReturn)},t.extend(t.BitCrusher,t.Effect),t.BitCrusher.defaults={bits:4},Object.defineProperty(t.BitCrusher.prototype,"bits",{get:function(){return this._bits},set:function(t){this._bits=t;var e=1/Math.pow(2,t-1);this._modulo.value=e}}),t.BitCrusher.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._subtract.dispose(),this._subtract=null,this._modulo.dispose(),this._modulo=null,this},t.BitCrusher}),e(function(t){return t.Chebyshev=function(){var e=this.optionsObject(arguments,["order"],t.Chebyshev.defaults);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample},t.extend(t.Chebyshev,t.Effect),t.Chebyshev.defaults={order:1,oversample:"none"},t.Chebyshev.prototype._getCoefficient=function(t,e,n){return n.hasOwnProperty(e)?n[e]:(n[e]=0===e?0:1===e?t:2*t*this._getCoefficient(t,e-1,n)-this._getCoefficient(t,e-2,n),n[e])},Object.defineProperty(t.Chebyshev.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t;for(var e=new Array(4096),n=e.length,r=0;r<n;++r){var i=2*r/n-1;e[r]=0===i?0:this._getCoefficient(i,t,{})}this._shaper.curve=e}}),Object.defineProperty(t.Chebyshev.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Chebyshev.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Chebyshev}),e(function(t){return t.StereoEffect=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["wet"],t.Effect.defaults);this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this._split=new t.Split,this.effectSendL=this._split.left,this.effectSendR=this._split.right,this._merge=new t.Merge,this.effectReturnL=this._merge.left,this.effectReturnR=this._merge.right,this.input.connect(this._split),this.input.connect(this._dryWet,0,0),this._merge.connect(this._dryWet,0,1),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.StereoEffect,t.Effect),t.StereoEffect.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this._split.dispose(),this._split=null,this._merge.dispose(),this._merge=null,this.effectSendL=null,this.effectSendR=null,this.effectReturnL=null,this.effectReturnR=null,this._writable(["wet"]),this.wet=null,this},t.StereoEffect}),e(function(t){return t.FeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"]);e=this.defaultArg(e,t.FeedbackEffect.defaults),t.Effect.call(this,e),this._feedbackGain=new t.Gain(e.feedback,t.Type.NormalRange),this.feedback=this._feedbackGain.gain,this.effectReturn.chain(this._feedbackGain,this.effectSend),this._readOnly(["feedback"])},t.extend(t.FeedbackEffect,t.Effect),t.FeedbackEffect.defaults={feedback:.125},t.FeedbackEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._writable(["feedback"]),this._feedbackGain.dispose(),this._feedbackGain=null,this.feedback=null,this},t.FeedbackEffect}),e(function(t){return t.StereoXFeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"],t.FeedbackEffect.defaults);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackLR=new t.Gain,this._feedbackRL=new t.Gain,this.effectReturnL.chain(this._feedbackLR,this.effectSendR),this.effectReturnR.chain(this._feedbackRL,this.effectSendL),this.feedback.fan(this._feedbackLR.gain,this._feedbackRL.gain),this._readOnly(["feedback"])},t.extend(t.StereoXFeedbackEffect,t.FeedbackEffect),t.StereoXFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackLR.dispose(),this._feedbackLR=null,this._feedbackRL.dispose(),this._feedbackRL=null,this},t.StereoXFeedbackEffect}),e(function(t){return t.Chorus=function(){var e=this.optionsObject(arguments,["frequency","delayTime","depth"],t.Chorus.defaults);t.StereoXFeedbackEffect.call(this,e),this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new t.LFO({frequency:e.frequency,min:0,max:1}),this._lfoR=new t.LFO({frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new t.Delay,this._delayNodeR=new t.Delay,this.frequency=this._lfoL.frequency,this.effectSendL.chain(this._delayNodeL,this.effectReturnL),this.effectSendR.chain(this._delayNodeR,this.effectReturnR),this.effectSendL.connect(this.effectReturnL),this.effectSendR.connect(this.effectReturnR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this._lfoL.start(),this._lfoR.start(),this._lfoL.frequency.connect(this._lfoR.frequency),this.depth=this._depth,this.frequency.value=e.frequency,this.type=e.type,this._readOnly(["frequency"]),this.spread=e.spread},t.extend(t.Chorus,t.StereoXFeedbackEffect),t.Chorus.defaults={frequency:1.5,delayTime:3.5,depth:.7,feedback:.1,type:"sine",spread:180},Object.defineProperty(t.Chorus.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}}),Object.defineProperty(t.Chorus.prototype,"delayTime",{get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth}}),Object.defineProperty(t.Chorus.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Chorus.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Chorus.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._delayNodeL.dispose(),this._delayNodeL=null,this._delayNodeR.dispose(),this._delayNodeR=null,this._writable("frequency"),this.frequency=null,this},t.Chorus}),e(function(t){return t.Convolver=function(){var e=this.optionsObject(arguments,["url","onload"],t.Convolver.defaults);t.Effect.call(this,e),this._convolver=this.context.createConvolver(),this._buffer=new t.Buffer,this.isString(e.url)?this._buffer.load(e.url,function(t){this.buffer=t,e.onload()}.bind(this)):e.url&&(this.buffer=e.url,e.onload()),this.connectEffect(this._convolver)},t.extend(t.Convolver,t.Effect),t.Convolver.defaults={onload:t.noOp},Object.defineProperty(t.Convolver.prototype,"buffer",{get:function(){return this._buffer.get()},set:function(t){this._buffer.set(t),this._convolver.buffer=this._buffer.get()}}),t.Convolver.prototype.load=function(t,e){return this._buffer.load(t,function(t){this.buffer=t,e&&e()}.bind(this)),this},t.Convolver.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._convolver.disconnect(),this._convolver=null,this._buffer.dispose(),this._buffer=null,this},t.Convolver}),e(function(t){return t.Distortion=function(){var e=this.optionsObject(arguments,["distortion"],t.Distortion.defaults);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample},t.extend(t.Distortion,t.Effect),t.Distortion.defaults={distortion:.4,oversample:"none"},Object.defineProperty(t.Distortion.prototype,"distortion",{get:function(){return this._distortion},set:function(t){this._distortion=t;var e=100*t,n=Math.PI/180;this._shaper.setMap(function(t){return Math.abs(t)<.001?0:(3+e)*t*20*n/(Math.PI+e*Math.abs(t))})}}),Object.defineProperty(t.Distortion.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Distortion.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Distortion}),e(function(t){return t.FeedbackDelay=function(){var e=this.optionsObject(arguments,["delayTime","feedback"],t.FeedbackDelay.defaults);t.FeedbackEffect.call(this,e),this._delayNode=new t.Delay(e.delayTime),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),this._readOnly(["delayTime"])},t.extend(t.FeedbackDelay,t.FeedbackEffect),t.FeedbackDelay.defaults={delayTime:.25},t.FeedbackDelay.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._writable(["delayTime"]),this.delayTime=null,this},t.FeedbackDelay}),e(function(t){var e=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],n=[225,556,441,341];return t.Freeverb=function(){var r=this.optionsObject(arguments,["roomSize","dampening"],t.Freeverb.defaults);t.StereoEffect.call(this,r),this.roomSize=new t.Signal(r.roomSize,t.Type.NormalRange),this.dampening=new t.Signal(r.dampening,t.Type.Frequency),this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];for(var i=0;i<n.length;i++){var o=this.context.createBiquadFilter();o.type="allpass",o.frequency.value=n[i],this._allpassFiltersL.push(o)}for(var s=0;s<n.length;s++){var a=this.context.createBiquadFilter();a.type="allpass",a.frequency.value=n[s],this._allpassFiltersR.push(a)}for(var u=0;u<e.length;u++){var l=new t.LowpassCombFilter(e[u]);u<e.length/2?this.effectSendL.chain(l,this._allpassFiltersL[0]):this.effectSendR.chain(l,this._allpassFiltersR[0]),this.roomSize.connect(l.resonance),this.dampening.connect(l.dampening),this._combFilters.push(l)}this.connectSeries.apply(this,this._allpassFiltersL),this.connectSeries.apply(this,this._allpassFiltersR),this._allpassFiltersL[this._allpassFiltersL.length-1].connect(this.effectReturnL),this._allpassFiltersR[this._allpassFiltersR.length-1].connect(this.effectReturnR),this._readOnly(["roomSize","dampening"])},t.extend(t.Freeverb,t.StereoEffect),t.Freeverb.defaults={roomSize:.7,dampening:3e3},t.Freeverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFiltersL.length;e++)this._allpassFiltersL[e].disconnect(),this._allpassFiltersL[e]=null;this._allpassFiltersL=null;for(var n=0;n<this._allpassFiltersR.length;n++)this._allpassFiltersR[n].disconnect(),this._allpassFiltersR[n]=null;this._allpassFiltersR=null;for(var r=0;r<this._combFilters.length;r++)this._combFilters[r].dispose(),this._combFilters[r]=null;return this._combFilters=null,this._writable(["roomSize","dampening"]),this.roomSize.dispose(),this.roomSize=null,this.dampening.dispose(),this.dampening=null,this},t.Freeverb}),e(function(t){var e=[.06748,.06404,.08212,.09004],n=[.773,.802,.753,.733],r=[347,113,37];return t.JCReverb=function(){var i=this.optionsObject(arguments,["roomSize"],t.JCReverb.defaults);t.StereoEffect.call(this,i),this.roomSize=new t.Signal(i.roomSize,t.Type.NormalRange),this._scaleRoomSize=new t.Scale(-.733,.197),this._allpassFilters=[],this._feedbackCombFilters=[];for(var o=0;o<r.length;o++){var s=this.context.createBiquadFilter();s.type="allpass",s.frequency.value=r[o],this._allpassFilters.push(s)}for(var a=0;a<e.length;a++){var u=new t.FeedbackCombFilter(e[a],.1);this._scaleRoomSize.connect(u.resonance),u.resonance.value=n[a],this._allpassFilters[this._allpassFilters.length-1].connect(u),a<e.length/2?u.connect(this.effectReturnL):u.connect(this.effectReturnR),this._feedbackCombFilters.push(u)}this.roomSize.connect(this._scaleRoomSize),this.connectSeries.apply(this,this._allpassFilters),this.effectSendL.connect(this._allpassFilters[0]),this.effectSendR.connect(this._allpassFilters[0]),this._readOnly(["roomSize"])},t.extend(t.JCReverb,t.StereoEffect),t.JCReverb.defaults={roomSize:.5},t.JCReverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFilters.length;e++)this._allpassFilters[e].disconnect(),this._allpassFilters[e]=null;this._allpassFilters=null;for(var n=0;n<this._feedbackCombFilters.length;n++)this._feedbackCombFilters[n].dispose(),this._feedbackCombFilters[n]=null;return this._feedbackCombFilters=null,this._writable(["roomSize"]),this.roomSize.dispose(),this.roomSize=null,this._scaleRoomSize.dispose(),this._scaleRoomSize=null,this},t.JCReverb}),e(function(t){return t.MidSideEffect=function(){t.Effect.apply(this,arguments),this._midSideSplit=new t.MidSideSplit,this._midSideMerge=new t.MidSideMerge,this.midSend=this._midSideSplit.mid,this.sideSend=this._midSideSplit.side,this.midReturn=this._midSideMerge.mid,this.sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)},t.extend(t.MidSideEffect,t.Effect),t.MidSideEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this.midSend=null,this.sideSend=null,this.midReturn=null,this.sideReturn=null,this},t.MidSideEffect}),e(function(t){return t.Phaser=function(){var e=this.optionsObject(arguments,["frequency","octaves","baseFrequency"],t.Phaser.defaults);t.StereoEffect.call(this,e),this._lfoL=new t.LFO(e.frequency,0,1),this._lfoR=new t.LFO(e.frequency,0,1),this._lfoR.phase=180,this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this.Q=new t.Signal(e.Q,t.Type.Positive),this._filtersL=this._makeFilters(e.stages,this._lfoL,this.Q),this._filtersR=this._makeFilters(e.stages,this._lfoR,this.Q),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.effectSendL.connect(this._filtersL[0]),this.effectSendR.connect(this._filtersR[0]),this._filtersL[e.stages-1].connect(this.effectReturnL),this._filtersR[e.stages-1].connect(this.effectReturnR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),this._readOnly(["frequency","Q"])},t.extend(t.Phaser,t.StereoEffect),t.Phaser.defaults={frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350},t.Phaser.prototype._makeFilters=function(t,e,n){for(var r=new Array(t),i=0;i<t;i++){var o=this.context.createBiquadFilter();o.type="allpass",n.connect(o.Q),e.connect(o.frequency),r[i]=o}return this.connectSeries.apply(this,r),r},Object.defineProperty(t.Phaser.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}}),Object.defineProperty(t.Phaser.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._lfoL.min=t,this._lfoR.min=t,this.octaves=this._octaves}}),t.Phaser.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","Q"]),this.Q.dispose(),this.Q=null,this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null;for(var e=0;e<this._filtersL.length;e++)this._filtersL[e].disconnect(),this._filtersL[e]=null;this._filtersL=null;for(var n=0;n<this._filtersR.length;n++)this._filtersR[n].disconnect(),this._filtersR[n]=null;return this._filtersR=null,this.frequency=null,this},t.Phaser}),e(function(t){return t.PingPongDelay=function(){var e=this.optionsObject(arguments,["delayTime","feedback"],t.PingPongDelay.defaults);t.StereoXFeedbackEffect.call(this,e),this._leftDelay=new t.Delay(0,e.maxDelayTime),this._rightDelay=new t.Delay(0,e.maxDelayTime),this._rightPreDelay=new t.Delay(0,e.maxDelayTime),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this.effectSendL.chain(this._leftDelay,this.effectReturnL),this.effectSendR.chain(this._rightPreDelay,this._rightDelay,this.effectReturnR),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackLR.disconnect(),this._feedbackLR.connect(this._rightDelay),this._readOnly(["delayTime"])},t.extend(t.PingPongDelay,t.StereoXFeedbackEffect),t.PingPongDelay.defaults={delayTime:.25,maxDelayTime:1},t.PingPongDelay.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._leftDelay.dispose(),this._leftDelay=null,this._rightDelay.dispose(),this._rightDelay=null,this._rightPreDelay.dispose(),this._rightPreDelay=null,this._writable(["delayTime"]),this.delayTime.dispose(),this.delayTime=null,this},t.PingPongDelay}),e(function(t){return t.PitchShift=function(){var e=this.optionsObject(arguments,["pitch"],t.PitchShift.defaults);t.FeedbackEffect.call(this,e),this._frequency=new t.Signal(0),this._delayA=new t.Delay(0,1),this._lfoA=new t.LFO({min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new t.Delay(0,1),this._lfoB=new t.LFO({min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new t.CrossFade,this._crossFadeLFO=new t.LFO({min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new t.Delay(e.delayTime),this.delayTime=this._feedbackDelay.delayTime,this._readOnly("delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);var n=this.now();this._lfoA.start(n),this._lfoB.start(n),this._crossFadeLFO.start(n),this.windowSize=this._windowSize},t.extend(t.PitchShift,t.FeedbackEffect),t.PitchShift.defaults={pitch:0,windowSize:.1,delayTime:0,feedback:0},Object.defineProperty(t.PitchShift.prototype,"pitch",{get:function(){return this._pitch},set:function(t){this._pitch=t;var e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=this.intervalToFrequencyRatio(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=this.intervalToFrequencyRatio(t)-1),this._frequency.value=e*(1.2/this._windowSize)}}),Object.defineProperty(t.PitchShift.prototype,"windowSize",{get:function(){return this._windowSize},set:function(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}}),t.PitchShift.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._frequency.dispose(),this._frequency=null,this._delayA.disconnect(),this._delayA=null,this._delayB.disconnect(),this._delayB=null,this._lfoA.dispose(),this._lfoA=null,this._lfoB.dispose(),this._lfoB=null,this._crossFade.dispose(),this._crossFade=null,this._crossFadeLFO.dispose(),this._crossFadeLFO=null,this._writable("delayTime"),this._feedbackDelay.dispose(),this._feedbackDelay=null,this.delayTime=null,this},t.PitchShift}),e(function(t){return t.StereoFeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"],t.FeedbackEffect.defaults);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackL=new t.Gain,this._feedbackR=new t.Gain,this.effectReturnL.chain(this._feedbackL,this.effectSendL),this.effectReturnR.chain(this._feedbackR,this.effectSendR),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),this._readOnly(["feedback"])},t.extend(t.StereoFeedbackEffect,t.FeedbackEffect),t.StereoFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackL.dispose(),this._feedbackL=null,this._feedbackR.dispose(),this._feedbackR=null,this},t.StereoFeedbackEffect}),e(function(t){return t.StereoWidener=function(){var e=this.optionsObject(arguments,["width"],t.StereoWidener.defaults);t.MidSideEffect.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._midMult=new t.Expr("$0 * ($1 * (1 - $2))"),this._sideMult=new t.Expr("$0 * ($1 * $2)"),this._two=new t.Signal(2),this._two.connect(this._midMult,0,1),this.width.connect(this._midMult,0,2),this._two.connect(this._sideMult,0,1),this.width.connect(this._sideMult,0,2),this.midSend.chain(this._midMult,this.midReturn),this.sideSend.chain(this._sideMult,this.sideReturn),this._readOnly(["width"])},t.extend(t.StereoWidener,t.MidSideEffect),t.StereoWidener.defaults={width:.5},t.StereoWidener.prototype.dispose=function(){return t.MidSideEffect.prototype.dispose.call(this),this._writable(["width"]),this.width.dispose(),this.width=null,this._midMult.dispose(),this._midMult=null,this._sideMult.dispose(),this._sideMult=null,this._two.dispose(),this._two=null,this},t.StereoWidener}),e(function(t){return t.Tremolo=function(){var e=this.optionsObject(arguments,["frequency","depth"],t.Tremolo.defaults);t.StereoEffect.call(this,e),this._lfoL=new t.LFO({phase:e.spread,min:1,max:0}),this._lfoR=new t.LFO({phase:e.spread,min:1,max:0}),this._amplitudeL=new t.Gain,this._amplitudeR=new t.Gain,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.depth=new t.Signal(e.depth,t.Type.NormalRange),this._readOnly(["frequency","depth"]),this.effectSendL.chain(this._amplitudeL,this.effectReturnL),this.effectSendR.chain(this._amplitudeR,this.effectReturnR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.type=e.type,this.spread=e.spread},t.extend(t.Tremolo,t.StereoEffect),t.Tremolo.defaults={frequency:10,type:"sine",depth:.5,spread:180},t.Tremolo.prototype.start=function(t){return this._lfoL.start(t),this._lfoR.start(t),this},t.Tremolo.prototype.stop=function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this},t.Tremolo.prototype.sync=function(t){return this._lfoL.sync(t),this._lfoR.sync(t),this},t.Tremolo.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),this},Object.defineProperty(t.Tremolo.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Tremolo.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Tremolo.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","depth"]),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._amplitudeL.dispose(),this._amplitudeL=null,this._amplitudeR.dispose(),this._amplitudeR=null,this.frequency=null,this.depth=null,this},t.Tremolo}),e(function(t){return t.Vibrato=function(){var e=this.optionsObject(arguments,["frequency","depth"],t.Vibrato.defaults);t.Effect.call(this,e),this._delayNode=new t.Delay(0,e.maxDelay),this._lfo=new t.LFO({type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,this._readOnly(["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)},t.extend(t.Vibrato,t.Effect),t.Vibrato.defaults={maxDelay:.005,frequency:5,depth:.1,type:"sine"},Object.defineProperty(t.Vibrato.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.Vibrato.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._lfo.dispose(),this._lfo=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null},t.Vibrato}),e(function(t){return t.Event=function(){var e=this.optionsObject(arguments,["callback","value"],t.Event.defaults);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._state=new t.TimelineState(t.State.Stopped),this._playbackRate=1,this._startOffset=0,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate},t.extend(t.Event),t.Event.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,value:null,probability:1,mute:!1,humanize:!1},t.Event.prototype._rescheduleEvents=function(e){return e=this.defaultArg(e,-1),this._state.forEachFrom(e,function(e){var n;if(e.state===t.State.Started){this.isUndef(e.id)||t.Transport.clear(e.id);var r=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop){n=1/0,this.isNumber(this._loop)&&(n=this._loop*this._getLoopDuration());var i=this._state.getEventAfter(r);null!==i&&(n=Math.min(n,i.time-r)),n!==1/0&&(this._state.setStateAtTime(t.State.Stopped,r+n+1),n=t.Time(n,"i"));var o=t.Time(this._getLoopDuration(),"i");e.id=t.Transport.scheduleRepeat(this._tick.bind(this),o,t.TransportTime(r,"i"),n)}else e.id=t.Transport.schedule(this._tick.bind(this),r+"i")}}.bind(this)),this},Object.defineProperty(t.Event.prototype,"state",{get:function(){return this._state.getStateAtTime(t.Transport.ticks)}}),Object.defineProperty(t.Event.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t}}),t.Event.prototype.start=function(e){return e=this.toTicks(e),this._state.getStateAtTime(e)===t.State.Stopped&&(this._state.addEvent({state:t.State.Started,time:e,id:void 0}),this._rescheduleEvents(e)),this},t.Event.prototype.stop=function(e){if(this.cancel(e),e=this.toTicks(e),this._state.getStateAtTime(e)===t.State.Started){this._state.setStateAtTime(t.State.Stopped,e);var n=this._state.getEventBefore(e),r=e;null!==n&&(r=n.time),this._rescheduleEvents(r)}return this},t.Event.prototype.cancel=function(e){return e=this.defaultArg(e,-1/0),e=this.toTicks(e),this._state.forEachFrom(e,function(e){t.Transport.clear(e.id)}),this._state.cancel(e),this},t.Event.prototype._tick=function(e){if(!this.mute&&this._state.getStateAtTime(t.Transport.ticks)===t.State.Started){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var n=.02;this.isBoolean(this.humanize)||(n=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*n}this.callback(e,this.value)}},t.Event.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(t.Event.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"progress",{get:function(){if(this._loop){var e=t.Transport.ticks,n=this._state.getEvent(e);if(null!==n&&n.state===t.State.Started){var r=this._getLoopDuration();return(e-n.time)%r/r}return 0}return 0}}),t.Event.prototype.dispose=function(){this.cancel(),this._state.dispose(),this._state=null,this.callback=null,this.value=null},t.Event}),e(function(t){return t.Loop=function(){var e=this.optionsObject(arguments,["callback","interval"],t.Loop.defaults);this._event=new t.Event({callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations},t.extend(t.Loop),t.Loop.defaults={interval:"4n",callback:t.noOp,playbackRate:1,iterations:1/0,probability:!0,mute:!1},t.Loop.prototype.start=function(t){return this._event.start(t),this},t.Loop.prototype.stop=function(t){return this._event.stop(t),this},t.Loop.prototype.cancel=function(t){return this._event.cancel(t),this},t.Loop.prototype._tick=function(t){this.callback(t)},Object.defineProperty(t.Loop.prototype,"state",{get:function(){return this._event.state}}),Object.defineProperty(t.Loop.prototype,"progress",{get:function(){return this._event.progress}}),Object.defineProperty(t.Loop.prototype,"interval",{get:function(){return this._event.loopEnd},set:function(t){this._event.loopEnd=t}}),Object.defineProperty(t.Loop.prototype,"playbackRate",{get:function(){return this._event.playbackRate},set:function(t){this._event.playbackRate=t}}),Object.defineProperty(t.Loop.prototype,"humanize",{get:function(){return this._event.humanize},set:function(t){this._event.humanize=t}}),Object.defineProperty(t.Loop.prototype,"probability",{get:function(){return this._event.probability},set:function(t){this._event.probability=t}}),Object.defineProperty(t.Loop.prototype,"mute",{get:function(){return this._event.mute},set:function(t){this._event.mute=t}}),Object.defineProperty(t.Loop.prototype,"iterations",{get:function(){return!0===this._event.loop?1/0:this._event.loop},set:function(t){this._event.loop=t===1/0||t}}),t.Loop.prototype.dispose=function(){this._event.dispose(),this._event=null,this.callback=null},t.Loop}),e(function(t){return t.Part=function(){var e=this.optionsObject(arguments,["callback","events"],t.Part.defaults);this._loop=e.loop,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this._startOffset=0,this._state=new t.TimelineState(t.State.Stopped),this._events=[],this.callback=e.callback,this.mute=e.mute;var n=this.defaultArg(e.events,[]);if(!this.isUndef(e.events))for(var r=0;r<n.length;r++)Array.isArray(n[r])?this.add(n[r][0],n[r][1]):this.add(n[r])},t.extend(t.Part,t.Event),t.Part.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,probability:1,humanize:!1,mute:!1},t.Part.prototype.start=function(e,n){var r=this.toTicks(e);return this._state.getStateAtTime(r)!==t.State.Started&&(n=this._loop?this.defaultArg(n,this._loopStart):this.defaultArg(n,0),n=this.toTicks(n),this._state.addEvent({state:t.State.Started,time:r,offset:n}),this._forEach(function(t){this._startNote(t,r,n)})),this},t.Part.prototype._startNote=function(e,n,r){n-=r,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<r&&(n+=this._getLoopDuration()),e.start(t.TransportTime(n,"i"))):e.startOffset<this._loopStart&&e.startOffset>=r&&(e.loop=!1,e.start(t.TransportTime(n,"i"))):e.startOffset>=r&&e.start(t.TransportTime(n,"i"))},Object.defineProperty(t.Part.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t,this._forEach(function(t){t.startOffset+=this._startOffset})}}),t.Part.prototype.stop=function(e){var n=this.toTicks(e);return this._state.cancel(n),this._state.setStateAtTime(t.State.Stopped,n),this._forEach(function(t){t.stop(e)}),this},t.Part.prototype.at=function(e,n){e=t.TransportTime(e);for(var r=t.Time(1,"i").toSeconds(),i=0;i<this._events.length;i++){var o=this._events[i];if(Math.abs(e.toTicks()-o.startOffset)<r)return this.isUndef(n)||(o.value=n),o}return this.isUndef(n)?null:(this.add(e,n),this._events[this._events.length-1])},t.Part.prototype.add=function(e,n){var r;return e.hasOwnProperty("time")&&(e=(n=e).time),e=this.toTicks(e),n instanceof t.Event?(r=n).callback=this._tick.bind(this):r=new t.Event({callback:this._tick.bind(this),value:n}),r.startOffset=e,r.set({loopEnd:this.loopEnd,loopStart:this.loopStart,loop:this.loop,humanize:this.humanize,playbackRate:this.playbackRate,probability:this.probability}),this._events.push(r),this._restartEvent(r),this},t.Part.prototype._restartEvent=function(e){var n=this._state.getEvent(t.Transport.ticks);n&&n.state===t.State.Started&&this._startNote(e,n.time,n.offset)},t.Part.prototype.remove=function(e,n){e.hasOwnProperty("time")&&(e=(n=e).time),e=this.toTicks(e);for(var r=this._events.length-1;r>=0;r--){var i=this._events[r];i instanceof t.Part?i.remove(e,n):i.startOffset===e&&(this.isUndef(n)||!this.isUndef(n)&&i.value===n)&&(this._events.splice(r,1),i.dispose())}return this},t.Part.prototype.removeAll=function(){return this._forEach(function(t){t.dispose()}),this._events=[],this},t.Part.prototype.cancel=function(t){return t=this.toTicks(t),this._forEach(function(e){e.cancel(t)}),this._state.cancel(t),this},t.Part.prototype._forEach=function(e,n){n=this.defaultArg(n,this);for(var r=this._events.length-1;r>=0;r--){var i=this._events[r];i instanceof t.Part?i._forEach(e,n):e.call(n,i)}return this},t.Part.prototype._setAll=function(t,e){this._forEach(function(n){n[t]=e})},t.Part.prototype._tick=function(t,e){this.mute||this.callback(t,e)},t.Part.prototype._testLoopBoundries=function(e){e.startOffset<this._loopStart||e.startOffset>=this._loopEnd?e.cancel():e.state===t.State.Stopped&&this._restartEvent(e)},Object.defineProperty(t.Part.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)}}),Object.defineProperty(t.Part.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)}}),Object.defineProperty(t.Part.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._forEach(function(e){e._loopStart=this._loopStart,e._loopEnd=this._loopEnd,e.loop=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopEnd=this.loopEnd,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=this.loopStart,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)}}),Object.defineProperty(t.Part.prototype,"length",{get:function(){return this._events.length}}),t.Part.prototype.dispose=function(){return this.removeAll(),this._state.dispose(),this._state=null,this.callback=null,this._events=null,this},t.Part}),e(function(t){return t.Pattern=function(){var e=this.optionsObject(arguments,["callback","values","pattern"],t.Pattern.defaults);t.Loop.call(this,e),this._pattern=new t.CtrlPattern({values:e.values,type:e.pattern,index:e.index})},t.extend(t.Pattern,t.Loop),t.Pattern.defaults={pattern:t.CtrlPattern.Type.Up,values:[]},t.Pattern.prototype._tick=function(t){this.callback(t,this._pattern.value),this._pattern.next()},Object.defineProperty(t.Pattern.prototype,"index",{get:function(){return this._pattern.index},set:function(t){this._pattern.index=t}}),Object.defineProperty(t.Pattern.prototype,"values",{get:function(){return this._pattern.values},set:function(t){this._pattern.values=t}}),Object.defineProperty(t.Pattern.prototype,"value",{get:function(){return this._pattern.value}}),Object.defineProperty(t.Pattern.prototype,"pattern",{get:function(){return this._pattern.type},set:function(t){this._pattern.type=t}}),t.Pattern.prototype.dispose=function(){t.Loop.prototype.dispose.call(this),this._pattern.dispose(),this._pattern=null},t.Pattern}),e(function(t){return t.Sequence=function(){var e=this.optionsObject(arguments,["callback","events","subdivision"],t.Sequence.defaults),n=e.events;if(delete e.events,t.Part.call(this,e),this._subdivision=this.toTicks(e.subdivision),this.isUndef(e.loopEnd)&&!this.isUndef(n)&&(this._loopEnd=n.length*this._subdivision),this._loop=!0,!this.isUndef(n))for(var r=0;r<n.length;r++)this.add(r,n[r])},t.extend(t.Sequence,t.Part),t.Sequence.defaults={subdivision:"4n"},Object.defineProperty(t.Sequence.prototype,"subdivision",{get:function(){return t.Time(this._subdivision,"i").toNotation()}}),t.Sequence.prototype.at=function(e,n){return this.isArray(n)&&this.remove(e),t.Part.prototype.at.call(this,this._indexTime(e),n)},t.Sequence.prototype.add=function(e,n){if(null===n)return this;if(this.isArray(n)){var r=Math.round(this._subdivision/n.length);n=new t.Sequence(this._tick.bind(this),n,t.Time(r,"i"))}return t.Part.prototype.add.call(this,this._indexTime(e),n),this},t.Sequence.prototype.remove=function(e,n){return t.Part.prototype.remove.call(this,this._indexTime(e),n),this},t.Sequence.prototype._indexTime=function(e){return e instanceof t.TransportTime?e:t.TransportTime(e*this._subdivision+this.startOffset,"i")},t.Sequence.prototype.dispose=function(){return t.Part.prototype.dispose.call(this),this},t.Sequence}),e(function(t){return t.PulseOscillator=function(){var e=this.optionsObject(arguments,["frequency","width"],t.Oscillator.defaults);t.Source.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._widthGate=new t.Gain,this._sawtooth=new t.Oscillator({frequency:e.frequency,detune:e.detune,type:"sawtooth",phase:e.phase}),this.frequency=this._sawtooth.frequency,this.detune=this._sawtooth.detune,this._thresh=new t.WaveShaper(function(t){return t<0?-1:1}),this._sawtooth.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),this._readOnly(["width","frequency","detune"])},t.extend(t.PulseOscillator,t.Oscillator),t.PulseOscillator.defaults={frequency:440,detune:0,phase:0,width:.2},t.PulseOscillator.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},t.PulseOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.setValueAtTime(0,t)},Object.defineProperty(t.PulseOscillator.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t}}),Object.defineProperty(t.PulseOscillator.prototype,"type",{get:function(){return"pulse"}}),Object.defineProperty(t.PulseOscillator.prototype,"partials",{get:function(){return[]}}),t.PulseOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._sawtooth.dispose(),this._sawtooth=null,this._writable(["width","frequency","detune"]),this.width.dispose(),this.width=null,this._widthGate.dispose(),this._widthGate=null,this._thresh.dispose(),this._thresh=null,this.frequency=null,this.detune=null,this},t.PulseOscillator}),e(function(t){return t.PWMOscillator=function(){var e=this.optionsObject(arguments,["frequency","modulationFrequency"],t.PWMOscillator.defaults);t.Source.call(this,e),this._pulse=new t.PulseOscillator(e.modulationFrequency),this._pulse._sawtooth.type="sine",this._modulator=new t.Oscillator({frequency:e.frequency,detune:e.detune,phase:e.phase}),this._scale=new t.Multiply(2),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this.modulationFrequency=this._pulse.frequency,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),this._readOnly(["modulationFrequency","frequency","detune"])},t.extend(t.PWMOscillator,t.Oscillator),t.PWMOscillator.defaults={frequency:440,detune:0,phase:0,modulationFrequency:.4},t.PWMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},t.PWMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},Object.defineProperty(t.PWMOscillator.prototype,"type",{get:function(){return"pwm"}}),Object.defineProperty(t.PWMOscillator.prototype,"partials",{get:function(){return[]}}),Object.defineProperty(t.PWMOscillator.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}}),t.PWMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._pulse.dispose(),this._pulse=null,this._scale.dispose(),this._scale=null,this._modulator.dispose(),this._modulator=null,this._writable(["modulationFrequency","frequency","detune"]),this.frequency=null,this.detune=null,this.modulationFrequency=null,this},t.PWMOscillator}),e(function(t){return t.FMOscillator=function(){var e=this.optionsObject(arguments,["frequency","type","modulationType"],t.FMOscillator.defaults);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=this._carrier.detune,this.detune.value=e.detune,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),this.phase=e.phase,this._readOnly(["modulationIndex","frequency","detune","harmonicity"])},t.extend(t.FMOscillator,t.Oscillator),t.FMOscillator.defaults={frequency:440,detune:0,phase:0,modulationIndex:2,modulationType:"square",harmonicity:1},t.FMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._carrier.start(t)},t.FMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._carrier.stop(t)},Object.defineProperty(t.FMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.FMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.FMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.FMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.FMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["modulationIndex","frequency","detune","harmonicity"]),this.frequency.dispose(),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this.modulationIndex.dispose(),this.modulationIndex=null,this},t.FMOscillator}),e(function(t){return t.AMOscillator=function(){var e=this.optionsObject(arguments,["frequency","type","modulationType"],t.AMOscillator.defaults);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this.detune.value=e.detune,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this._modulationScale=new t.AudioToGain,this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.connect(this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this.phase=e.phase,this._readOnly(["frequency","detune","harmonicity"])},t.extend(t.AMOscillator,t.Oscillator),t.AMOscillator.defaults={frequency:440,detune:0,phase:0,modulationType:"square",harmonicity:1},t.AMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._carrier.start(t)},t.AMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._carrier.stop(t)},Object.defineProperty(t.AMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.AMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.AMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.AMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.AMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune","harmonicity"]),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this._modulationScale.dispose(),this._modulationScale=null,this},t.AMOscillator}),e(function(t){return t.FatOscillator=function(){var e=this.optionsObject(arguments,["frequency","type","spread"],t.FatOscillator.defaults);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._oscillators=[],this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=this.defaultArg(e.partials,[]),this.count=e.count,this._readOnly(["frequency","detune"])},t.extend(t.FatOscillator,t.Oscillator),t.FatOscillator.defaults={frequency:440,detune:0,phase:0,spread:20,count:3,type:"sawtooth"},t.FatOscillator.prototype._start=function(t){t=this.toSeconds(t),this._forEach(function(e){e.start(t)})},t.FatOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._forEach(function(e){e.stop(t)})},t.FatOscillator.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t.call(this,this._oscillators[e],e)},Object.defineProperty(t.FatOscillator.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._forEach(function(e){e.type=t})}}),Object.defineProperty(t.FatOscillator.prototype,"spread",{get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,n=t/(this._oscillators.length-1);this._forEach(function(t,r){t.detune.value=e+n*r})}}}),Object.defineProperty(t.FatOscillator.prototype,"count",{get:function(){return this._oscillators.length},set:function(e){if(e=Math.max(e,1),this._oscillators.length!==e){this._forEach(function(t){t.dispose()}),this._oscillators=[];for(var n=0;n<e;n++){var r=new t.Oscillator;this.type===t.Oscillator.Type.Custom?r.partials=this._partials:r.type=this._type,r.phase=this._phase,r.volume.value=-6-e,this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state===t.State.Started&&this._forEach(function(t){t.start()})}}}),Object.defineProperty(t.FatOscillator.prototype,"phase",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach(function(e){e.phase=t})}}),Object.defineProperty(t.FatOscillator.prototype,"partials",{get:function(){return this._partials},set:function(e){this._partials=e,this._type=t.Oscillator.Type.Custom,this._forEach(function(t){t.partials=e})}}),t.FatOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._forEach(function(t){t.dispose()}),this._oscillators=null,this._partials=null,this},t.FatOscillator}),e(function(t){t.OmniOscillator=function(){var e=this.optionsObject(arguments,["frequency","type"],t.OmniOscillator.defaults);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._sourceType=void 0,this._oscillator=null,this.type=e.type,this._readOnly(["frequency","detune"]),this.set(e)},t.extend(t.OmniOscillator,t.Oscillator),t.OmniOscillator.defaults={frequency:440,detune:0,type:"sine",phase:0};var e="PulseOscillator",n="PWMOscillator",r="Oscillator",i="FMOscillator",o="AMOscillator",s="FatOscillator";return t.OmniOscillator.prototype._start=function(t){this._oscillator.start(t)},t.OmniOscillator.prototype._stop=function(t){this._oscillator.stop(t)},Object.defineProperty(t.OmniOscillator.prototype,"type",{get:function(){var t="";return this._sourceType===i?t="fm":this._sourceType===o?t="am":this._sourceType===s&&(t="fat"),t+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator(i),this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator(o),this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator(s),this._oscillator.type=t.substr(3)):"pwm"===t?this._createNewOscillator(n):"pulse"===t?this._createNewOscillator(e):(this._createNewOscillator(r),this._oscillator.type=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(t){this._oscillator.partials=t}}),t.OmniOscillator.prototype.set=function(e,n){return"type"===e?this.type=n:this.isObject(e)&&e.hasOwnProperty("type")&&(this.type=e.type),t.prototype.set.apply(this,arguments),this},t.OmniOscillator.prototype._createNewOscillator=function(e){if(e!==this._sourceType){this._sourceType=e;var n=t[e],r=this.now()+this.blockTime;if(null!==this._oscillator){var i=this._oscillator;i.stop(r),setTimeout(function(){i.dispose(),i=null},1e3*this.blockTime)}this._oscillator=new n,this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this.state===t.State.Started&&this._oscillator.start(r)}},Object.defineProperty(t.OmniOscillator.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}}),Object.defineProperty(t.OmniOscillator.prototype,"width",{get:function(){if(this._sourceType===e)return this._oscillator.width}}),Object.defineProperty(t.OmniOscillator.prototype,"count",{get:function(){if(this._sourceType===s)return this._oscillator.count},set:function(t){this._sourceType===s&&(this._oscillator.count=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"spread",{get:function(){if(this._sourceType===s)return this._oscillator.spread},set:function(t){this._sourceType===s&&(this._oscillator.spread=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationType",{get:function(){if(this._sourceType===i||this._sourceType===o)return this._oscillator.modulationType},set:function(t){this._sourceType!==i&&this._sourceType!==o||(this._oscillator.modulationType=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationIndex",{get:function(){if(this._sourceType===i)return this._oscillator.modulationIndex}}),Object.defineProperty(t.OmniOscillator.prototype,"harmonicity",{get:function(){if(this._sourceType===i||this._sourceType===o)return this._oscillator.harmonicity}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationFrequency",{get:function(){if(this._sourceType===n)return this._oscillator.modulationFrequency}}),t.OmniOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.detune.dispose(),this.detune=null,this.frequency.dispose(),this.frequency=null,this._oscillator.dispose(),this._oscillator=null,this._sourceType=null,this},t.OmniOscillator}),e(function(t){return t.Instrument=function(e){e=this.defaultArg(e,t.Instrument.defaults),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume")},t.extend(t.Instrument),t.Instrument.defaults={volume:0},t.Instrument.prototype.triggerAttack=t.noOp,t.Instrument.prototype.triggerRelease=t.noOp,t.Instrument.prototype.triggerAttackRelease=function(t,e,n,r){return n=this.isUndef(n)?this.now()+this.blockTime:this.toSeconds(n),e=this.toSeconds(e),this.triggerAttack(t,n,r),this.triggerRelease(n+e),this},t.Instrument.prototype.dispose=function(){return t.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable(["volume"]),this.volume=null,this},t.Instrument}),e(function(t){return t.Monophonic=function(e){e=this.defaultArg(e,t.Monophonic.defaults),t.Instrument.call(this,e),this.portamento=e.portamento},t.extend(t.Monophonic,t.Instrument),t.Monophonic.defaults={portamento:0},t.Monophonic.prototype.triggerAttack=function(t,e,n){return e=this.isUndef(e)?this.now()+this.blockTime:this.toSeconds(e),this._triggerEnvelopeAttack(e,n),this.setNote(t,e),this},t.Monophonic.prototype.triggerRelease=function(t){return t=this.isUndef(t)?this.now()+this.blockTime:this.toSeconds(t),this._triggerEnvelopeRelease(t),this},t.Monophonic.prototype._triggerEnvelopeAttack=function(){},t.Monophonic.prototype._triggerEnvelopeRelease=function(){},t.Monophonic.prototype.setNote=function(t,e){if(e=this.toSeconds(e),this.portamento>0){var n=this.frequency.value;this.frequency.setValueAtTime(n,e);var r=this.toSeconds(this.portamento);this.frequency.exponentialRampToValueAtTime(t,e+r)}else this.frequency.setValueAtTime(t,e);return this},t.Monophonic}),e(function(t){return t.Synth=function(e){e=this.defaultArg(e,t.Synth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.envelope,this.output),this.oscillator.start(),this._readOnly(["oscillator","frequency","detune","envelope"])},t.extend(t.Synth,t.Monophonic),t.Synth.defaults={oscillator:{type:"triangle"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},t.Synth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.Synth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this},t.Synth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.frequency=null,this.detune=null,this},t.Synth}),e(function(t){return t.AMSynth=function(e){e=this.defaultArg(e,t.AMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth,this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth,this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=new t.Gain,this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this._readOnly(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])},t.extend(t.AMSynth,t.Monophonic),t.AMSynth.defaults={harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},moduation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.AMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.modulationEnvelope.triggerAttack(t,e),this},t.AMSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.modulationEnvelope.triggerRelease(t),this},t.AMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.AMSynth}),e(function(t){return t.MonoSynth=function(e){e=this.defaultArg(e,t.MonoSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new t.Filter(e.filter),this.filterEnvelope=new t.FrequencyEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.filter,this.envelope,this.output),this.oscillator.start(),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["oscillator","frequency","detune","filter","filterEnvelope","envelope"])},t.extend(t.MonoSynth,t.Monophonic),t.MonoSynth.defaults={frequency:"C4",detune:0,oscillator:{type:"square"},filter:{Q:6,type:"lowpass",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,baseFrequency:200,octaves:7,exponent:2}},t.MonoSynth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this},t.MonoSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this},t.MonoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this.frequency=null,this.detune=null,this},t.MonoSynth}),e(function(t){return t.DuoSynth=function(e){e=this.defaultArg(e,t.DuoSynth.defaults),t.Monophonic.call(this,e),this.voice0=new t.MonoSynth(e.voice0),this.voice0.volume.value=-10,this.voice1=new t.MonoSynth(e.voice1),this.voice1.volume.value=-10,this._vibrato=new t.LFO(e.vibratoRate,-50,50),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new t.Gain(e.vibratoAmount,t.Type.Positive),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),this._readOnly(["voice0","voice1","frequency","vibratoAmount","vibratoRate"])},t.extend(t.DuoSynth,t.Monophonic),t.DuoSynth.defaults={vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}},voice1:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.DuoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.voice0.envelope.triggerAttack(t,e),this.voice1.envelope.triggerAttack(t,e),this.voice0.filterEnvelope.triggerAttack(t),this.voice1.filterEnvelope.triggerAttack(t),this},t.DuoSynth.prototype._triggerEnvelopeRelease=function(t){return this.voice0.triggerRelease(t),this.voice1.triggerRelease(t),this},t.DuoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),this.voice0.dispose(),this.voice0=null,this.voice1.dispose(),this.voice1=null,this.frequency.dispose(),this.frequency=null,this._vibratoGain.dispose(),this._vibratoGain=null,this._vibrato=null,this.harmonicity.dispose(),this.harmonicity=null,this.vibratoAmount.dispose(),this.vibratoAmount=null,this.vibratoRate=null,this},t.DuoSynth}),e(function(t){return t.FMSynth=function(e){e=this.defaultArg(e,t.FMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth(e.carrier),this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth(e.modulator),this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this._readOnly(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"])},t.extend(t.FMSynth,t.Monophonic),t.FMSynth.defaults={harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},moduation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.FMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.modulationEnvelope.triggerAttack(t),this},t.FMSynth.prototype._triggerEnvelopeRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.modulationEnvelope.triggerRelease(t),this},t.FMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.FMSynth}),e(function(t){return t.MembraneSynth=function(e){e=this.defaultArg(e,t.MembraneSynth.defaults),t.Instrument.call(this,e),this.oscillator=new t.Oscillator(e.oscillator).start(),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.octaves=e.octaves,this.pitchDecay=e.pitchDecay,this.oscillator.chain(this.envelope,this.output),this._readOnly(["oscillator","envelope"])},t.extend(t.MembraneSynth,t.Instrument),t.MembraneSynth.defaults={pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential"}},t.MembraneSynth.prototype.triggerAttack=function(t,e,n){e=this.toSeconds(e);var r=(t=this.toFrequency(t))*this.octaves;return this.oscillator.frequency.setValueAtTime(r,e),this.oscillator.frequency.exponentialRampToValueAtTime(t,e+this.toSeconds(this.pitchDecay)),this.envelope.triggerAttack(e,n),this},t.MembraneSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.MembraneSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["oscillator","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this},t.MembraneSynth}),e(function(t){var e=[1,1.483,1.932,2.546,2.63,3.897];return t.MetalSynth=function(n){n=this.defaultArg(n,t.MetalSynth.defaults),t.Instrument.call(this,n),this.frequency=new t.Signal(n.frequency,t.Type.Frequency),this._oscillators=[],this._freqMultipliers=[],this._amplitue=new t.Gain(0).connect(this.output),this._highpass=new t.Filter({type:"highpass",Q:0}).connect(this._amplitue),this._octaves=n.octaves,this._filterFreqScaler=new t.Scale(n.resonance,7e3),this.envelope=new t.Envelope({attack:n.envelope.attack,attackCurve:"exponential",decay:n.envelope.decay,sustain:0,release:n.envelope.release}).chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitue.gain);for(var r=0;r<e.length;r++){var i=new t.FMOscillator({type:"square",modulationType:"square",harmonicity:n.harmonicity,modulationIndex:n.modulationIndex});i.connect(this._highpass).start(0),this._oscillators[r]=i;var o=new t.Multiply(e[r]);this._freqMultipliers[r]=o,this.frequency.chain(o,i.frequency)}this.octaves=n.octaves},t.extend(t.MetalSynth,t.Instrument),t.MetalSynth.defaults={frequency:200,envelope:{attack:.0015,decay:1.4,release:.2},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5},t.MetalSynth.prototype.triggerAttack=function(t,e){return t=this.toSeconds(t),e=this.defaultArg(e,1),this.envelope.triggerAttack(t,e),this},t.MetalSynth.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this},t.MetalSynth.prototype.triggerAttackRelease=function(t,e,n){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this},Object.defineProperty(t.MetalSynth.prototype,"modulationIndex",{get:function(){return this._oscillators[0].modulationIndex.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].modulationIndex.value=t}}),Object.defineProperty(t.MetalSynth.prototype,"harmonicity",{get:function(){return this._oscillators[0].harmonicity.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].harmonicity.value=t}}),Object.defineProperty(t.MetalSynth.prototype,"resonance",{get:function(){return this._filterFreqScaler.min},set:function(t){this._filterFreqScaler.min=t,this.octaves=this._octaves}}),Object.defineProperty(t.MetalSynth.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}}),t.MetalSynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].dispose(),this._freqMultipliers[e].dispose();this._oscillators=null,this._freqMultipliers=null,this.frequency.dispose(),this.frequency=null,this._filterFreqScaler.dispose(),this._filterFreqScaler=null,this._amplitue.dispose(),this._amplitue=null,this.envelope.dispose(),this.envelope=null,this._highpass.dispose(),this._highpass=null},t.MetalSynth}),e(function(t){t.Noise=function(){var e=this.optionsObject(arguments,["type"],t.Noise.defaults);t.Source.call(this,e),this._source=null,this._buffer=null,this._playbackRate=e.playbackRate,this.type=e.type},t.extend(t.Noise,t.Source),t.Noise.defaults={type:"white",playbackRate:1},Object.defineProperty(t.Noise.prototype,"type",{get:function(){return this._buffer===r?"white":this._buffer===n?"brown":this._buffer===e?"pink":void 0},set:function(i){if(this.type!==i){switch(i){case"white":this._buffer=r;break;case"pink":this._buffer=e;break;case"brown":this._buffer=n;break;default:throw new TypeError("Tone.Noise: invalid type: "+i)}if(this.state===t.State.Started){var o=this.now()+this.blockTime;this._stop(o),this._start(o)}}}}),Object.defineProperty(t.Noise.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),t.Noise.prototype._start=function(t){this._source=this.context.createBufferSource(),this._source.buffer=this._buffer,this._source.loop=!0,this._source.playbackRate.value=this._playbackRate,this._source.connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(this._buffer.duration-.001))},t.Noise.prototype._stop=function(t){this._source&&this._source.stop(this.toSeconds(t))},t.Noise.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null,this};var e=null,n=null,r=null;return t._initAudioContext(function(t){var i=t.sampleRate,o=4*i;e=function(){for(var e=t.createBuffer(2,o,i),n=0;n<e.numberOfChannels;n++){var r,s,a,u,l,c,h,f=e.getChannelData(n);r=s=a=u=l=c=h=0;for(var p=0;p<o;p++){var d=2*Math.random()-1;r=.99886*r+.0555179*d,s=.99332*s+.0750759*d,a=.969*a+.153852*d,u=.8665*u+.3104856*d,l=.55*l+.5329522*d,c=-.7616*c-.016898*d,f[p]=r+s+a+u+l+c+h+.5362*d,f[p]*=.11,h=.115926*d}}return e}(),n=function(){for(var e=t.createBuffer(2,o,i),n=0;n<e.numberOfChannels;n++)for(var r=e.getChannelData(n),s=0,a=0;a<o;a++){var u=2*Math.random()-1;r[a]=(s+.02*u)/1.02,s=r[a],r[a]*=3.5}return e}(),r=function(){for(var e=t.createBuffer(2,o,i),n=0;n<e.numberOfChannels;n++)for(var r=e.getChannelData(n),s=0;s<o;s++)r[s]=2*Math.random()-1;return e}()}),t.Noise}),e(function(t){return t.NoiseSynth=function(e){e=this.defaultArg(e,t.NoiseSynth.defaults),t.Instrument.call(this,e),this.noise=new t.Noise,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.noise.chain(this.envelope,this.output),this.noise.start(),this._readOnly(["noise","envelope"])},t.extend(t.NoiseSynth,t.Instrument),t.NoiseSynth.defaults={noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:0}},t.NoiseSynth.prototype.triggerAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.NoiseSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.NoiseSynth.prototype.triggerAttackRelease=function(t,e,n){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this},t.NoiseSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["noise","envelope"]),this.noise.dispose(),this.noise=null,this.envelope.dispose(),this.envelope=null,this},t.NoiseSynth}),e(function(t){return t.PluckSynth=function(e){e=this.defaultArg(e,t.PluckSynth.defaults),t.Instrument.call(this,e),this._noise=new t.Noise("pink"),this.attackNoise=1,this._lfcf=new t.LowpassCombFilter({resonance:e.resonance,dampening:e.dampening}),this.resonance=this._lfcf.resonance,this.dampening=this._lfcf.dampening,this._noise.connect(this._lfcf),this._lfcf.connect(this.output),this._readOnly(["resonance","dampening"])},t.extend(t.PluckSynth,t.Instrument),t.PluckSynth.defaults={attackNoise:1,dampening:4e3,resonance:.9},t.PluckSynth.prototype.triggerAttack=function(t,e){t=this.toFrequency(t),e=this.toSeconds(e);var n=1/t;return this._lfcf.delayTime.setValueAtTime(n,e),this._noise.start(e),this._noise.stop(e+n*this.attackNoise),this},t.PluckSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this._noise=null,this._lfcf=null,this._writable(["resonance","dampening"]),this.dampening=null,this.resonance=null,this},t.PluckSynth}),e(function(t){return t.PolySynth=function(){t.Instrument.call(this);var e=this.optionsObject(arguments,["polyphony","voice"],t.PolySynth.defaults);(e=this.defaultArg(e,t.Instrument.defaults)).polyphony=Math.min(t.PolySynth.MAX_POLYPHONY,e.polyphony),this.voices=new Array(e.polyphony),this._triggers=new Array(e.polyphony),this.detune=new t.Signal(e.detune,t.Type.Cents),this._readOnly("detune");for(var n=0;n<e.polyphony;n++){var r=new e.voice(arguments[2],arguments[3]);this.voices[n]=r,r.connect(this.output),r.hasOwnProperty("detune")&&this.detune.connect(r.detune),this._triggers[n]={release:-1,note:null,voice:r}}this.volume.value=e.volume},t.extend(t.PolySynth,t.Instrument),t.PolySynth.defaults={polyphony:4,volume:0,detune:0,voice:t.Synth},t.PolySynth.prototype.triggerAttack=function(t,e,n){Array.isArray(t)||(t=[t]),e=this.toSeconds(e);for(var r=0;r<t.length;r++){for(var i=t[r],o=this._triggers[0],s=1;s<this._triggers.length;s++)this._triggers[s].release<o.release&&(o=this._triggers[s],s);o.release=1/0,o.note=JSON.stringify(i),o.voice.triggerAttack(i,e,n)}return this},t.PolySynth.prototype.triggerAttackRelease=function(t,e,n,r){if(n=this.toSeconds(n),this.triggerAttack(t,n,r),this.isArray(e)&&this.isArray(t))for(var i=0;i<t.length;i++){var o=e[Math.min(i,e.length-1)];this.triggerRelease(t[i],n+this.toSeconds(o))}else this.triggerRelease(t,n+this.toSeconds(e));return this},t.PolySynth.prototype.triggerRelease=function(t,e){Array.isArray(t)||(t=[t]),e=this.toSeconds(e);for(var n=0;n<t.length;n++)for(var r=JSON.stringify(t[n]),i=0;i<this._triggers.length;i++){var o=this._triggers[i];o.note===r&&o.release>e&&(o.voice.triggerRelease(e),o.release=e)}return this},t.PolySynth.prototype.set=function(t,e,n){for(var r=0;r<this.voices.length;r++)this.voices[r].set(t,e,n);return this},t.PolySynth.prototype.get=function(t){return this.voices[0].get(t)},t.PolySynth.prototype.releaseAll=function(t){t=this.toSeconds(t);for(var e=0;e<this._triggers.length;e++){var n=this._triggers[e];n.release>t&&(n.release=t,n.voice.triggerRelease(t))}return this},t.PolySynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this.voices.length;e++)this.voices[e].dispose(),this.voices[e]=null;return this._writable("detune"),this.detune.dispose(),this.detune=null,this.voices=null,this._triggers=null,this},t.PolySynth.MAX_POLYPHONY=20,t.PolySynth}),e(function(t){return t.Player=function(e){var n;e instanceof t.Buffer?(e=e.get(),n=t.Player.defaults):n=this.optionsObject(arguments,["url","onload"],t.Player.defaults),t.Source.call(this,n),this._source=null,this.autostart=n.autostart,this._buffer=new t.Buffer({url:n.url,onload:this._onload.bind(this,n.onload),reverse:n.reverse}),e instanceof AudioBuffer&&this._buffer.set(e),this._loop=n.loop,this._loopStart=n.loopStart,this._loopEnd=n.loopEnd,this._playbackRate=n.playbackRate,this.retrigger=n.retrigger},t.extend(t.Player,t.Source),t.Player.defaults={onload:t.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,retrigger:!1,reverse:!1},t.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e)),this},t.Player.prototype._onload=function(t){t(this),this.autostart&&this.start()},t.Player.prototype._start=function(e,n,r){if(!this._buffer.loaded)throw Error("Tone.Player: tried to start Player before the buffer was loaded");if(n=this._loop?this.defaultArg(n,this._loopStart):this.defaultArg(n,0),n=this.toSeconds(n),r=this.defaultArg(r,Math.max(this._buffer.duration-n,0)),r=this.toSeconds(r),e=this.toSeconds(e),this._source=this.context.createBufferSource(),this._source.buffer=this._buffer.get(),this._loop?(this._source.loop=this._loop,this._source.loopStart=this.toSeconds(this._loopStart),this._source.loopEnd=this.toSeconds(this._loopEnd)):this._state.setStateAtTime(t.State.Stopped,e+r),this._source.playbackRate.value=this._playbackRate,this._source.connect(this.output),this._loop){var i=this._source.loopEnd||this._buffer.duration,o=this._source.loopStart,s=i-o;n>s&&(n=o+n%s)>i&&(n-=s),this._source.start(e,n)}else this._source.start(e,n,r);return this},t.Player.prototype._stop=function(t){return this._source&&(this._source.stop(this.toSeconds(t)),this._source=null),this},t.Player.prototype.seek=function(e,n){return n=this.toSeconds(n),this._state.getStateAtTime(n)===t.State.Started&&(e=this.toSeconds(e),this._stop(n),this._start(n,e)),this},t.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Player.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._source&&(this._source.loopStart=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._source&&(this._source.loopEnd=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.Player.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._source&&(this._source.loop=t)}}),Object.defineProperty(t.Player.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),Object.defineProperty(t.Player.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),t.Player.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer.dispose(),this._buffer=null,this},t.Player}),e(function(t){return t.Sampler=function(){var e=this.optionsObject(arguments,["url","onload"],t.Sampler.defaults);t.Instrument.call(this,e),this.player=new t.Player(e.url,e.onload),this.player.retrigger=!0,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.player.chain(this.envelope,this.output),this._readOnly(["player","envelope"]),this.loop=e.loop,this.reverse=e.reverse},t.extend(t.Sampler,t.Instrument),t.Sampler.defaults={onload:t.noOp,loop:!1,reverse:!1,envelope:{attack:.001,decay:0,sustain:1,release:.1}},t.Sampler.prototype.triggerAttack=function(t,e,n){return e=this.toSeconds(e),t=this.defaultArg(t,0),this.player.playbackRate=this.intervalToFrequencyRatio(t),this.player.start(e),this.envelope.triggerAttack(e,n),this},t.Sampler.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.player.stop(this.toSeconds(this.envelope.release)+t),this},Object.defineProperty(t.Sampler.prototype,"loop",{get:function(){return this.player.loop},set:function(t){this.player.loop=t}}),Object.defineProperty(t.Sampler.prototype,"reverse",{get:function(){return this.player.reverse},set:function(t){this.player.reverse=t}}),Object.defineProperty(t.Sampler.prototype,"buffer",{get:function(){return this.player.buffer},set:function(t){this.player.buffer=t}}),t.Sampler.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["player","envelope"]),this.player.dispose(),this.player=null,this.envelope.dispose(),this.envelope=null,this},t.Sampler}),e(function(t){return t.SimpleSynth=function(e){console.warn("Tone.SimpleSynth is now called Tone.Synth"),t.Synth.call(this,e)},t.extend(t.SimpleSynth,t.Synth),t.SimpleSynth}),e(function(t){return t.GainToAudio=function(){this._norm=this.input=this.output=new t.WaveShaper(function(t){return 2*Math.abs(t)-1})},t.extend(t.GainToAudio,t.SignalBase),t.GainToAudio.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.GainToAudio}),e(function(t){return t.Normalize=function(e,n){this._inputMin=this.defaultArg(e,0),this._inputMax=this.defaultArg(n,1),this._sub=this.input=new t.Add(0),this._div=this.output=new t.Multiply(1),this._sub.connect(this._div),this._setRange()},t.extend(t.Normalize,t.SignalBase),Object.defineProperty(t.Normalize.prototype,"min",{get:function(){return this._inputMin},set:function(t){this._inputMin=t,this._setRange()}}),Object.defineProperty(t.Normalize.prototype,"max",{get:function(){return this._inputMax},set:function(t){this._inputMax=t,this._setRange()}}),t.Normalize.prototype._setRange=function(){this._sub.value=-this._inputMin,this._div.value=1/(this._inputMax-this._inputMin)},t.Normalize.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sub.dispose(),this._sub=null,this._div.dispose(),this._div=null,this},t.Normalize}),e(function(t){return t.BufferSource=function(){var e=this.optionsObject(arguments,["buffer","onended"],t.BufferSource.defaults);this.onended=e.onended,this._startTime=-1,this._gainNode=this.output=new t.Gain,this._source=this.context.createBufferSource(),this._source.connect(this._gainNode),this._source.onended=this._onended.bind(this),this.playbackRate=new t.Param(this._source.playbackRate,t.Type.Positive),this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut,this._gain=1,this.isUndef(e.buffer)||(this.buffer=e.buffer),this.loop=e.loop},t.extend(t.BufferSource),t.BufferSource.defaults={onended:t.noOp,fadeIn:0,fadeOut:0},Object.defineProperty(t.BufferSource.prototype,"state",{get:function(){var e=this.now();return-1!==this._startTime&&e>this._startTime?t.State.Started:t.State.Stopped}}),t.BufferSource.prototype.start=function(t,e,n,r,i){if(-1!==this._startTime)throw new Error("Tone.BufferSource: can only be started once.");return this.buffer&&(t=this.toSeconds(t),e=this.loop?this.defaultArg(e,this.loopStart):this.defaultArg(e,0),e=this.toSeconds(e),t=this.toSeconds(t),this._source.start(t,e),r=this.defaultArg(r,1),this._gain=r,(i=this.isUndef(i)?this.toSeconds(this.fadeIn):this.toSeconds(i))>0?(this._gainNode.gain.setValueAtTime(0,t),this._gainNode.gain.linearRampToValueAtTime(this._gain,t+i)):this._gainNode.gain.setValueAtTime(r,t),this._startTime=t+i,this.isUndef(n)||(n=this.defaultArg(n,this.buffer.duration-e),n=this.toSeconds(n),this.stop(t+n+i,i))),this},t.BufferSource.prototype.stop=function(t,e){return this.buffer&&(t=this.toSeconds(t),e=this.isUndef(e)?this.toSeconds(this.fadeOut):this.toSeconds(e),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),e>0?(this._gainNode.gain.setValueAtTime(this._gain,t),this._gainNode.gain.linearRampToValueAtTime(0,t+e),t+=e):this._gainNode.gain.setValueAtTime(0,t),this.isNumber(this._source.playbackState)&&2!==this._source.playbackState||this._source.stop(t)),this},t.BufferSource.prototype._onended=function(){this.onended(this),this.dispose()},Object.defineProperty(t.BufferSource.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"buffer",{get:function(){return this._source?this._source.buffer:null},set:function(e){e instanceof t.Buffer?this._source.buffer=e.get():this._source.buffer=e}}),Object.defineProperty(t.BufferSource.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t}}),t.BufferSource.prototype.dispose=function(){return this.onended=null,this._source&&(this._source.onended=null,this._source.disconnect(),this._source=null),this._gainNode&&(this._gainNode.dispose(),this._gainNode=null),this._startTime=-1,this.playbackRate=null,this.output=null,this},t.BufferSource}),e(function(t){return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t.ExternalInput=function(){var e=this.optionsObject(arguments,["inputNum"],t.ExternalInput.defaults);t.Source.call(this,e),this._mediaStream=null,this._stream=null,this._constraints={audio:!0},this._inputNum=e.inputNum,this._gate=new t.Gain(0).connect(this.output)},t.extend(t.ExternalInput,t.Source),t.ExternalInput.defaults={inputNum:0},t.ExternalInput.prototype._getUserMedia=function(e,n){t.ExternalInput.supported||n("browser does not support 'getUserMedia'"),t.ExternalInput.sources[this._inputNum]&&(this._constraints={audio:{optional:[{sourceId:t.ExternalInput.sources[this._inputNum].id}]}}),navigator.getUserMedia(this._constraints,function(t){this._onStream(t),e()}.bind(this),function(t){n(t)})},t.ExternalInput.prototype._onStream=function(t){if(!this.isFunction(this.context.createMediaStreamSource))throw new Error("Tone.ExternalInput: browser does not support the 'MediaStreamSourceNode'");this._stream||(this._stream=t,this._mediaStream=this.context.createMediaStreamSource(t),this._mediaStream.connect(this._gate))},t.ExternalInput.prototype.open=function(e,n){return e=this.defaultArg(e,t.noOp),n=this.defaultArg(n,t.noOp),t.ExternalInput.getSources(function(){this._getUserMedia(e,n)}.bind(this)),this},t.ExternalInput.prototype.close=function(){if(this._stream){var t=this._stream.getTracks()[this._inputNum];this.isUndef(t)||t.stop(),this._stream=null}return this},t.ExternalInput.prototype._start=function(t){return t=this.toSeconds(t),this._gate.gain.setValueAtTime(1,t),this},t.ExternalInput.prototype._stop=function(t){return t=this.toSeconds(t),this._gate.gain.setValueAtTime(0,t),this},t.ExternalInput.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this.close(),this._mediaStream&&(this._mediaStream.disconnect(),this._mediaStream=null),this._constraints=null,this._gate.dispose(),this._gate=null,this},t.ExternalInput.sources=[],t.ExternalInput._canGetSources=!t.prototype.isUndef(window.MediaStreamTrack)&&t.prototype.isFunction(MediaStreamTrack.getSources),Object.defineProperty(t.ExternalInput,"supported",{get:function(){return t.prototype.isFunction(navigator.getUserMedia)}}),t.ExternalInput.getSources=function(e){return 0===t.ExternalInput.sources.length&&t.ExternalInput._canGetSources?MediaStreamTrack.getSources(function(n){for(var r=0;r<n.length;r++)"audio"===n[r].kind&&(t.ExternalInput.sources[r]=n[r]);e(t.ExternalInput.sources)}):e(t.ExternalInput.sources),this},t.ExternalInput}),e(function(t){return t.MultiPlayer=function(){var e=this.optionsObject(arguments,["urls","onload"],t.MultiPlayer.defaults);e.urls instanceof t.Buffers?this.buffers=e.urls:this.buffers=new t.Buffers(e.urls,e.onload),this._activeSources=[],this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=e.mute},t.extend(t.MultiPlayer,t.Source),t.MultiPlayer.defaults={onload:t.noOp,fadeIn:0,fadeOut:0},t.MultiPlayer.prototype._getBuffer=function(e){return this.isNumber(e)||this.isString(e)?this.buffers.get(e).get():e instanceof t.Buffer?e.get():e},t.MultiPlayer.prototype.start=function(e,n,r,i,o,s){e=this._getBuffer(e);var a=new t.BufferSource(e).connect(this.output);return this._activeSources.push(a),n=this.toSeconds(n),a.start(n,r,i,this.defaultArg(s,1),this.fadeIn),i&&a.stop(n+this.toSeconds(i),this.fadeOut),a.onended=this._onended.bind(this),o=this.defaultArg(o,0),a.playbackRate.value=this.intervalToFrequencyRatio(o),this},t.MultiPlayer.prototype.startLoop=function(e,n,r,i,o,s,a){e=this._getBuffer(e);var u=new t.BufferSource(e).connect(this.output);return this._activeSources.push(u),n=this.toSeconds(n),u.loop=!0,u.loopStart=this.toSeconds(this.defaultArg(i,0)),u.loopEnd=this.toSeconds(this.defaultArg(o,0)),u.start(n,r,void 0,this.defaultArg(a,1),this.fadeIn),u.onended=this._onended.bind(this),s=this.defaultArg(s,0),u.playbackRate.value=this.intervalToFrequencyRatio(s),this},t.MultiPlayer.prototype._onended=function(t){var e=this._activeSources.indexOf(t);this._activeSources.splice(e,1)},t.MultiPlayer.prototype.stop=function(t,e){t=this._getBuffer(t),e=this.toSeconds(e);for(var n=0;n<this._activeSources.length;n++)this._activeSources[n].buffer===t&&this._activeSources[n].stop(e,this.fadeOut);return this},t.MultiPlayer.prototype.stopAll=function(t){t=this.toSeconds(t);for(var e=0;e<this._activeSources.length;e++)this._activeSources[e].stop(t,this.fadeOut);return this},t.MultiPlayer.prototype.add=function(t,e,n){return this.buffers.add(t,e,n),this},Object.defineProperty(t.MultiPlayer.prototype,"state",{get:function(){return this._activeSources.length>0?t.State.Started:t.State.Stopped}}),Object.defineProperty(t.MultiPlayer.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.MultiPlayer.prototype.dispose=function(){t.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable("volume"),this.volume=null,this.buffers.dispose(),this.buffers=null;for(var e=0;e<this._activeSources.length;e++)this._activeSources[e].dispose();return this._activeSources=null,this},t.MultiPlayer}),e(function(t){return t.GrainPlayer=function(){var e=this.optionsObject(arguments,["url","onload"],t.GrainPlayer.defaults);t.Source.call(this),this.buffer=new t.Buffer(e.url,e.onload),this._player=this.output=new t.MultiPlayer,this._clock=new t.Clock(this._tick.bind(this),1),this._loopStart=0,this._loopEnd=0,this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.drift=e.drift,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse},t.extend(t.GrainPlayer,t.Source),t.GrainPlayer.defaults={onload:t.noOp,overlap:.1,grainSize:.2,drift:0,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1},t.GrainPlayer.prototype._start=function(t,e){e=this.defaultArg(e,0),e=this.toSeconds(e),t=this.toSeconds(t),this._offset=e,this._clock.start(t)},t.GrainPlayer.prototype._stop=function(t){this._clock.stop(t),this._player.stop(this.buffer,t),this._offset=0},t.GrainPlayer.prototype._tick=function(t){var e=this.buffer.duration;this.loop&&this._loopEnd>0&&(e=this._loopEnd);var n=(2*Math.random()-1)*this.drift,r=this._offset-this._overlap+n,i=this.detune/100,o=this._player.fadeIn;if(this.loop&&this._offset>e){var s=this._offset-e;this._player.start(this.buffer,t,r,s+this._overlap,i),r=this._offset%e,this._offset=this._loopStart,this._player.fadeIn=0,this._player.start(this.buffer,t+s,this._offset,r+this._overlap,i)}else this._offset>e?this.stop(t):(r<0&&(this._player.fadeIn=Math.max(this._player.fadeIn+r,0),r=0),this._player.start(this.buffer,t,r,this.grainSize+this._overlap,i));this._player.fadeIn=o;var a=this._clock._nextTick-t;this._offset+=a*this._playbackRate},t.GrainPlayer.prototype.scrub=function(t,e){return this._offset=this.toSeconds(t),this._tick(this.toSeconds(e)),this},Object.defineProperty(t.GrainPlayer.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this.grainSize=this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,"reverse",{get:function(){return this.buffer.reverse},set:function(t){this.buffer.reverse=t}}),Object.defineProperty(t.GrainPlayer.prototype,"grainSize",{get:function(){return this._grainSize},set:function(t){this._grainSize=this.toSeconds(t),this._clock.frequency.value=this._playbackRate/this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,"overlap",{get:function(){return this._overlap},set:function(t){t=this.toSeconds(t),this._overlap=t,this._overlap<0?(this._player.fadeIn=.01,this._player.fadeOut=.01):(this._player.fadeIn=t,this._player.fadeOut=t)}}),t.GrainPlayer.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this.buffer.dispose(),this.buffer=null,this._player.dispose(),this._player=null,this._clock.dispose(),this._clock=null,this},t.GrainPlayer}),e(function(t){return t.Microphone=function(){t.ExternalInput.call(this,0)},t.extend(t.Microphone,t.ExternalInput),Object.defineProperty(t.Microphone,"supported",{get:function(){return t.ExternalInput.supported}}),t.Microphone}),t})},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";t.exports=function(t){return{Synth:new function(){this.create=function(){var e=new t.Synth;return e.envelope.releaseCurve="linear",e},this.dispose=function(t){t.dispose()},this.isNeeded=null,this.apply=null},Noise:new function(){this.create=function(){var e=new t.NoiseSynth;return e.envelope.releaseCurve="linear",e},this.dispose=function(t){t.dispose()},this.isNeeded=null,this.apply=null},Panner:new function(){this.create=function(){return new t.Panner3D},this.dispose=function(t){t.dispose()},this.isNeeded=function(t,e){return t.soundX||t.soundY||t.soundZ},this.apply=function(t,e,n,r){var i=isNaN(e.soundX)?n.soundX:e.soundX,o=isNaN(e.soundY)?n.soundY:e.soundY,s=isNaN(e.soundZ)?n.soundZ:e.soundZ,a=t._panner;a.positionX?(a.positionX.value=i,a.positionY.value=o,a.positionZ.value=s):a.setPosition(i,o,s),t.rolloffFactor=isNaN(e.rolloff)?n.rolloff:e.rolloff}},Vibrato:new function(){this.node=null,this.create=function(){return new t.Vibrato(5,1)},this.dispose=function(t){t.dispose()},this.isNeeded=function(t,e){return t.vibrato>0},this.apply=function(t,e,n,r){t.depth.value=e.vibrato||n.vibrato,t.frequency.value=e.vibratoFreq||n.vibratoFreq}},Tremolo:new function(){this.node=null,this.create=function(){return new t.Tremolo(5,1).start()},this.dispose=function(t){t.dispose()},this.isNeeded=function(t,e){return t.tremolo>0},this.apply=function(t,e,n,r){t.depth.value=e.tremolo||n.tremolo,t.frequency.value=e.tremoloFreq||n.tremoloFreq}},Lowpass:new function(){this.node=null,this.create=function(){return new t.Filter(2e4,"lowpass")},this.dispose=function(t){t.dispose()},this.isNeeded=function(t,e){return t.lowpass<e.lowpass||t.lowpassSweep<0},this.apply=function(t,e,n,r){var i=e.lowpass||n.lowpass,o=e.lowpassSweep||n.lowpassSweep;t.frequency.value=i,o&&t.frequency.rampTo(Math.max(10,i+o),r)}},Highpass:new function(){this.node=null,this.create=function(){return new t.Filter(0,"highpass")},this.dispose=function(t){t.dispose()},this.isNeeded=function(t,e){return t.highpass>e.highpass||t.highpassSweep>0},this.apply=function(t,e,n,r){var i=e.highpass||n.highpass,o=e.highpassSweep||n.highpassSweep;t.frequency.value=i,o&&t.frequency.rampTo(Math.max(10,i+o),r)}},Bandpass:new function(){this.node=null,this.create=function(){return new t.Filter(0,"bandpass")},this.dispose=function(t){t.dispose()},this.isNeeded=function(t,e){return t.bandpassQ>e.bandpassQ},this.apply=function(t,e,n,r){var i=e.bandpass||n.bandpass,o=e.bandpassQ||n.bandpassQ,s=e.bandpassSweep||n.bandpassSweep;t.frequency.value=i,t.Q.value=o,s&&t.frequency.rampTo(Math.max(10,i+s),r)}},Compressor:new function(){this.node=null,this.create=function(){return new t.Compressor},this.dispose=function(t){t.dispose()},this.isNeeded=function(t,e){return t.compressorThreshold<0},this.apply=function(t,e,n,r){t.threshold.value=e.compressorThreshold||n.compressorThreshold}},BitCrusher:new function(){this.node=null,this.create=function(){return new t.BitCrusher(8)},this.dispose=function(t){t.dispose()},this.isNeeded=function(t,e){return t.bitcrush>0},this.apply=function(t,e,n,r){t.bits=e.bitcrush||n.bitcrush}}}}},function(t,e,n){"use strict";t.exports=function(t){var e=[],n=[];this.getFor=function(r){var i,o,s=performance.now()/1e3;for(i=0;i<n.length&&(n[i]<s&&(o=e[i]),!o);i++);return o||(i=e.length,e.push(t.create()),o=e[i]),n[i]=s+r+.3,o},this.free=function(){for(var r=performance.now()/1e3-5,i=0;i<n.length;i++)if(n[i]<r)return t.dispose(e[i]),e.splice(i,1),void n.splice(i,1)};var r=5e3+1e3*Math.random();setInterval(this.free,r),this._getSize=function(){return e.length}}},function(t,e,n){"use strict";var r=n(711),i=n(713)(r),o=n(714);t.exports=new function(){this._tone=r;var t=new o(i.Synth),e=new o(i.Noise),n=[i.Panner,i.Vibrato,i.Tremolo,i.Lowpass,i.Highpass,i.Bandpass,i.BitCrusher,i.Compressor],h=n.map(function(t){return new o(t)}),f=new r.Gain(1).toMaster();this.getDefaults=function(){var t={};for(var e in s)t[e]=s[e];return t},this.setVolume=function(t){t=t<0?0:t>1?1:t,f.gain.value=t},this.setListenerPosition=function(t,e,n){r.Listener.setPosition(t,e,n)},this.setListenerAngle=function(t){var e=t*Math.PI/180;r.Listener.forwardX=Math.sin(e),r.Listener.forwardZ=-Math.cos(e)},this.play=function(i){var o=i||{},p=s,d=isNaN(o.attack)?p.attack:o.attack,y=isNaN(o.decay)?p.decay:o.decay,_=isNaN(o.sustain)?p.sustain:o.sustain,v=isNaN(o.release)?p.release:o.release,m=isNaN(o.sustainLevel)?p.sustainLevel:o.sustainLevel,g=_+d+y,b=g+v,x=(r.now(),o.source||p.source),w=/noise/.test(x),T=w?e.getFor(b):t.getFor(b);if(function(t,e,n,r){t.value=e}(T.volume,o.volume||0),function(t,e,n,r,i){t.envelope.attack=e,t.envelope.decay=n,t.envelope.sustain=r,t.envelope.release=i}(T,d,y,m,v),w)T.noise.type=x.split(" ")[0],T.triggerAttackRelease(g);else{var S="pulse"==x;!S&&o.harmonics>0&&(x+=o.harmonics),T.oscillator.type=x,S&&(T.oscillator.width.value=o.pulseWidth||p.pulseWidth);var E=o.frequency||p.frequency,O=T.toFrequency(E),A=o.sweep?O*(1+o.sweep):O,M=1,P=M*(o.jumpAt1||p.jumpAt1),C=M*(o.jumpAt2||p.jumpAt2),k=o.jumpBy1||0,R=o.jumpBy2||0;if(C<P){var I=P;P=C,C=I,I=k,k=R,R=I}0===k&&(P=0);var D=c(0,M,O,A,P),L=D*(1+k);A+=L-D,0===R&&(C=P);var F=c(P,M,L,A,C),N=F*(1+R);A+=N-F;var j=o.repeat||0;j>100&&(j=100);var B=j?1/j:b;B>b&&(B=b);var U=T.frequency;U.value=O;var q=O,V=r.now(),G=V+b;for(U.setRampPoint(),P*=B,C*=B,M=B;V<G;)q!=O&&(q=u(U,O,V+0)),q!=D&&(q=l(U,D,V+P)),q!=L&&(q=u(U,L,V+P)),q!=F&&(q=l(U,F,V+C)),q!=N&&(q=u(U,N,V+C)),q!=A&&(q=l(U,A,V+M)),V+=B;T.triggerAttackRelease(O,g)}for(var X=[T],H=0;H<n.length;H++){var W=n[H];if(W.isNeeded(o,p)){var z=h[H].getFor(b);W.apply(z,o,p,b),X[X.length-1].connect(z),X.push(z)}h[H].free()}X[X.length-1].connect(f),X.push(f),setTimeout(a,1e3*(b+.2),X)}};var s={attack:.01,decay:.01,sustain:.1,release:.2,sustainLevel:.8,frequency:440,sweep:0,repeat:0,jumpAt1:.33,jumpBy1:0,jumpAt2:.66,jumpBy2:0,volume:0,source:"triangle",harmonics:0,pulseWidth:.5,bitcrush:0,tremolo:0,tremoloFreq:10,vibrato:0,vibratoFreq:10,lowpass:1e4,lowpassSweep:0,highpass:10,highpassSweep:0,bandpass:500,bandpassQ:.01,bandpassSweep:0,compressorThreshold:0,soundX:0,soundY:0,soundZ:0,rolloff:1};function a(t){for(var e=0;e<t.length-1;e++)t[e].disconnect(t[e+1]);t.length=0}function u(t,e,n){return t.setValueAtTime(e,n),e}function l(t,e,n){return t.exponentialRampToValueAtTime(e,n),e}function c(t,e,n,r,i){return n<.001&&(n=.001),n*Math.pow(r/n,(i-t)/(e-t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getItem=e.useItem=e.updateState=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(192)),i=n(799),o=n(717);var s={cowFever:i.item,pinx:o.item};function a(t){return s[t]}e.updateState=function(t){var e=[];return(0,r.default)(t).forEach(function(n){var r=s[n],i=t[n],o=r.updateState(i,s);o&&e.push(o)}),e},e.useItem=function(t){var e=t.itemName,n=t.data,r=t.action,i=a(e);if(i.execute)return i.execute(r,n)},e.getItem=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.item=void 0;var r=n(803);Object.defineProperty(e,"item",{enumerable:!0,get:function(){return r.item}}),e.setupPinx=function(){!function(){var t=document.getElementById("pinx-template"),e=document.createElement("div");e.innerHTML=t.innerHTML,document.body.appendChild(e),u(),l(),c(),h(),f()}()};var i=n(716),o=n(64),s=function(t){return t&&t.__esModule?t:{default:t}}(n(801)),a=n(117);var u=function(){document.querySelectorAll(".pinx nav button").forEach(function(t){t.addEventListener("click",function(t){t.target.classList.remove("new"),document.getElementById(t.target.id+"-led").classList.remove("on");var e=t.target.id+"-area";document.querySelectorAll(".pinx nav button").forEach(function(e){e.id===t.target.id?e.classList.add("selected"):e.classList.remove("selected")}),document.querySelectorAll(".pinx .scanlines .area").forEach(function(t){t.id===e?t.classList.add("selected"):t.classList.remove("selected")}),(0,o.playButtonBleep)()})})},l=function(){document.getElementById("pinx-input-area").addEventListener("submit",function(t){var e=(0,i.getItem)("pinx"),n=document.getElementById("pinx-input-submit-error");if(e.connected&&e.connectedTo){n.classList.remove("show");var r=document.getElementById("pinx-input-text").value;!function(t,e){(0,a.emitCli)("use "+t+" "+e)}(e.connectedTo,r),(0,o.playButtonBleep)()}else n.classList.add("show"),(0,o.playFailBleep)();t.preventDefault(),t.stopPropagation()})},c=function(){document.getElementById("pinx-output-print").addEventListener("click",function(){(0,o.playButtonBleep)();var t=document.getElementById("pinx-output-url").value;t&&window.open(t)}),document.getElementById("pinx-output-copy").addEventListener("click",function(){(0,o.playButtonBleep)(),(0,s.default)("pinx-output-text")})},h=function(){for(var t=document.querySelector(".pinx"),e=function(){t.classList.remove("hidden"),(0,o.playSweepIn)()},n=function(){t.classList.add("hidden"),(0,o.playSweepOut)()},r=document.querySelectorAll(".toggle-visibility, .notifications > div"),i=function(i){var o=r[i];o.addEventListener("click",function(r){var i="div"===o.tagName.toLowerCase();if((!i||o.classList.contains("on"))&&(t.classList.contains("hidden")?e():i||n(),i)){var s=o.id.replace("-led","");document.getElementById(s).click()}})},s=0;s<r.length;s++)i(s);document.querySelector("body").addEventListener("keydown",function(r){27===r.keyCode&&(t.classList.contains("hidden")?e():n())})},f=function(){document.querySelector("#pinx-input-clear").addEventListener("click",function(){(0,o.playButtonBleep)()})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=c(n(439)),i=c(n(190)),o=n(438),s=n(716),a=n(717),u=n(117),l=n(64);function c(t){return t&&t.__esModule?t:{default:t}}var h="";function f(){return window.localStorage.getItem("playerToken")}var p=f(),d=function(){return!!p};function y(){window.localStorage.removeItem("playerToken"),window.location.reload()}(0,a.setupPinx)();var _=document.getElementById("terminal"),v=(0,o.createTerminal)({parentEl:_,onSubmit:function(t,e){if(e.isInputMode())return(0,u.emitCli)("use "+h+" "+t),void e.setInputMode(!1);if(/^map\s*$/i.test(t))e.showMap();else{if(/^clear\s*$/i.test(t))return(0,l.playTrash)(),void e.clear();if(/^help/i.test(t)){var n=t.match(/^help(?: (.*))?$/i),r=(0,i.default)(n,2)[1];return e.showHelp(r?r.toLowerCase():null),void(0,l.playHelpDing)()}/[a-z0-9]/i.test(t)&&(/^(?:log|sign) ?in\s*$|^y(?:es)?$/i.test(t)?d()?e.print("You are logged in, you can try to [log out|log out] instead."):(e.setInputMode(!1),window.location.href="/auth/google"):/^(?:log|sign) ?out\s*$/i.test(t)?d()?(e.setInputMode(!1),y()):e.print("You cannot log out. You're already logged out. Care to [log in|log in]?"):/^(?:ls|dir)\s*$/i.test(t)?e.print("Despite popular belief among the participants this is not a file system."):(0,u.emitCli)(t))}},width:650,showStatusBar:d()});window.terminal=v;var m=document.getElementById("prompt");_.addEventListener("click",function(t){return m.focus()}),_.addEventListener("mouseover",function(){return m.focus()}),m.focus(),u.onCliResponse.observe(function(t){v.print(t.replace(/\n+$/,"\n"))}),u.onCliNewLine.observe(function(){v.print("\n")}),u.onInventoryStateChange.observe(function(t){(0,s.updateState)(JSON.parse(t))}),u.onUseItem.observe(function(t){var e=JSON.parse(t),n=(0,s.useItem)(e);if(n){var i="snek "+(0,r.default)(n);console.log("Emitting: ",i),(0,u.emitCli)(i)}}),u.onRequestInput.observe(function(t){var e=JSON.parse(t);console.dir(e),h=e.itemName,v.setInputMode(!0,e.inputMessage)}),u.onForceLogout.observe(function(){y()});var g=document.getElementById("connection-problems"),b=!1,x=!0;u.onConnect.observe(function(){x=!1,d()?((0,u.emitToken)(p),b?(0,l.playSocketConnectionSound)(!0):(b=!0,function(){var t="/map/"+f()+"/player";return window.fetch(t).then(function(t){return t.json()})}().then(function(t){v.print("Hello ["+t.name+"|iam]! You may start looking [around], or get [help|help].\n")}))):v.print("You appear to be logged out. Care to [log in|login]?\n")}),u.onConnectError.observe(function(){g.classList.remove("hide"),x||(x=!0,(0,l.playSocketConnectionSound)(!1))}),u.onReconnect.observe(function(){g.classList.add("hide")}),d()&&document.body.classList.add("has-pinx")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.item=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(191));function i(){console.log("clickety click"),window.terminal.setPrompt("use cowbell")}e.toggleCowFever=a;var o=[],s=!1;function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!s;if(window.setGlitchFilter){if(window.setGlitchFilter({noiseFactor:t?.0024:0,noiseTimeFactor:1,cellularFactor:t?.03:0,cellularScale:1,cellularJitter:1.6,cellularTimeFactor:.075}),t){0===o.length&&(o.push(v("cow-bell")),o.push(v("cow-bells")));var e=!0,n=!1,a=void 0;try{for(var u,l=(0,r.default)(o);!(e=(u=l.next()).done);e=!0){var c=u.value;document.body.appendChild(c)}}catch(t){n=!0,a=t}finally{try{!e&&l.return&&l.return()}finally{if(n)throw a}}document.body.classList.add("cow-fever")}else{var h=!0,f=!1,p=void 0;try{for(var d,y=(0,r.default)(o);!(h=(d=y.next()).done);h=!0){var _=d.value;_.parentNode.removeChild(_)}}catch(t){f=!0,p=t}finally{try{!h&&y.return&&y.return()}finally{if(f)throw p}}document.body.classList.remove("cow-fever")}s=t}function v(t){var e=document.createElement("span");return e.addEventListener("click",i),e.classList.add(t),e}}window.toggleCowFever=function(t){return a(t)};e.item={execute:function(t){switch(t){case"infect":a(!0);break;case"cure":default:a(!1)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=document.getElementById("pinx-output-text"),n='<div class="row">'+t+"</div>";e.innerHTML=n,e.scrollTop=e.scrollHeight}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=document.querySelectorAll("#"+t+" .row"),n=Array.prototype.slice.call(e,0).map(function(t){return t.innerHTML}).reduce(function(t,e){return t+e}),r=document.createElement("textarea");r.id="COPYTEXTAREADONTTOUCH",r.value=n,document.body.appendChild(r),document.querySelector("#COPYTEXTAREADONTTOUCH").select(),document.execCommand("copy"),document.body.removeChild(r)}},function(t,e,n){"use strict";var r="#757575",i="#000000",o="#FF0000",s="#90C3D4",a="#000000",u="#FFFFFF",l="#45FF80",c="#171717",h="#FF7A7A",f=function(t,e,n,r,i){i.fillStyle=r,i.beginPath(),i.rect(t*n.width,e*n.height,n.width,n.height),i.closePath(),i.fill()};t.exports=function(t,e,n){console.log({information:t});var p={width:Math.floor(e.width/t.numberOfXTiles),height:Math.floor(e.height/t.numberOfYTiles)};!function(t,e,n){t.fillStyle=s,t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fill()}(n,e.width,e.height),function(t,e,n,r){var i=r.height*n.listSize;t.fillStyle=n.isWon?l:a,t.beginPath(),t.rect(0,e.height-i,e.width,i),t.closePath(),t.fill();var o=Math.floor(.8*i),s=Math.floor(e.height-.1*i);t.strokeStyle=n.isWon?a:u,t.font=o+"px Comic Sans MS",t.moveTo(10,s),t.textAlign="left",t.strokeText("STATUS: "+function(t){return t<5?"Starving":t<10?"Famined":t<15?"Craving":t<20?"Hungry":t<25?"Munchy":t<30?"Nibbly":t<35?"Starting to fill...":t<40?"Just a few more...":t<45?"Mmmm, full...":t<50?"Brrp, full!":t<55?"Er, almost too full...":t<60?"Too full.":t<65?"TOO FULL!":t<70?"BUÄÄÄÄÄÄH!":'¤!#"%&!!'}(n.fishesEaten)+" (x"+n.fishesEaten+")",10,s)}(n,e,t,p),t.died?function(t,e,n,r){t.fillStyle=c,t.beginPath(),t.rect(0,0,n,r),t.closePath(),t.fill(),t.font="30px VT323",t.fillStyle=h,t.textAlign="center",t.fillText("You died.",n/2,30),t.font="18px VT323";var i=e.fishesEaten>10?"Bully to you!":"You suck.";t.fillText("Your canoe ate "+(e.fishesEaten<=10?"only ":"")+e.fishesEaten+" fishes. "+i,n/2,80),t.fillText('Try again? Type "restart game".',n/2,110)}(n,t,e.width,e.height):function(t,e,n,s){f(t.fish.x,t.fish.y,s,o,n);for(var a=0;a<t.snek.length;a++){var u=t.snek[a];a===t.snek.length-1?f(u.x,u.y,s,r,n):f(u.x,u.y,s,i,n)}}(t,0,n,p)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.item=void 0;var r=l(n(92)),i=n(64),o=l(n(800)),s=l(n(802)),a=l(n(805)),u=l(n(804));function l(t){return t&&t.__esModule?t:{default:t}}function c(t){var e=document.getElementById(t);e.classList.contains("selected")||e.classList.add("new"),document.querySelector(".pinx").classList.contains("visible")&&e.classList.contains("selected")||document.getElementById(t+"-led").classList.add("on")}e.item={displayName:"Personal Interface Matrix",connected:!1,connectedTo:"",updateState:function(t,e){var n=document.getElementById("pinx-status");""!==t.connectedTo&&(0,i.playConnectedBleep)(),n.innerHTML=t.connected?t.connectedTo?"Connected to "+t.connectedTo:"":"Disconnected",(0,r.default)(e.pinx,t)},execute:function(t,e){var n=document.getElementById("pinx-interaction-canvas"),r=n.getContext("2d"),l=document.getElementById("pinx-interaction-frame");switch(t){case"download":c("pinx-output"),e&&(0,o.default)(e.text||e),e.url&&(document.getElementById("pinx-output-url").value=e.url),(0,i.playScanBleep)();break;case"trigger-interactive":c("pinx-interaction"),document.getElementById("pinx-interaction").click(),l.className="",l.innerHTML="",r.clearRect(0,0,n.width,n.height),e.cls&&l.classList.add(e.cls),e.drawing?(l.classList.remove("show"),n.classList.add("show")):(l.classList.add("show"),n.classList.remove("show"));break;case"trigger-download":case"trigger-output":document.getElementById("pinx-output").click();break;case"trigger-input":document.getElementById("pinx-input").click();break;case"set-input":document.getElementById("pinx-input-text").value=e;break;case"feed-interactivity":l.innerHTML=e+l.innerHTML;break;case"draw":r.fillStyle=e.color,r.fillRect(e.x,e.y,e.width,e.height);break;case"game":switch(e.game){case"snek":(0,s.default)(e.information,n,r)}break;case"reset":(0,a.default)();break;case"log":c("pinx-log"),u.default.add(e.type,e.message,e.title)}}}},function(t,e,n){"use strict";var r=n(64);t.exports={add:function(t,e,n){var i=document.createElement("p");i.classList.add(t);var o=document.createElement("span");o.classList.add("fa"),o.classList.add(function(t){switch(t.toLowerCase()){case"score":return"fa-star";case"info":return"fa-exclamation";case"tip":return"fa-info-circle"}}(t)),i.appendChild(o);var s=document.createElement("span");s.classList.add("title"),s.innerHTML=n||t,i.appendChild(s);var a=document.createElement("span");a.classList.add("message"),a.innerHTML=e,i.appendChild(a),document.getElementById("pinx-log-book").insertBefore(i,document.getElementById("pinx-log-book").children[0]),function(t){switch(t.toLowerCase()){case"score":return(0,r.playCoinBleep)();default:(0,r.playLogBleep)()}}(t)}}},function(t,e,n){"use strict";t.exports=function(){document.getElementById("pinx-output-text").value="",document.getElementById("pinx-output-url").value="",document.getElementById("pinx-input-text").value="",document.getElementById("pinx-interaction-frame").innerHTML="",document.getElementById("pinx-status").innerHTML="Disconnected",document.getElementById("pinx-interaction-frame").className=""}}]);